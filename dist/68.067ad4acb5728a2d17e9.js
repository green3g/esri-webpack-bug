(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/webgl-engine/lib/Util":349,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/aaBoundingBox":389,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/Util":397,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/LegendOptions":426,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeatureSet":427,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/webgl-engine/lib/ComponentUtils":430,"esri/layers/support/TileInfo":450,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/TileInfo":450,"esri/views/2d/tiling/TileKey":456,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileKey":456,"@dojo/framework/shim/Set":592,"esri/core/pbf":594,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/pbf":594,"esri/layers/graphics/OptimizedGeometry":597,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedGeometry":597,"esri/layers/graphics/OptimizedFeature":607,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeature":607,"esri/views/vectorTiles/GeometryUtils":616,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/GeometryUtils":616,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/geometryUtils":622,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/buffer/typedArrayUtil":631,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/LOD":637,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/LRUMap":703,"@dojo/framework/shim/Map":724,"esri/views/2d/tiling/enums":725,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/enums":725,"esri/views/3d/layers/SceneLayerWorker":726,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/SceneLayerWorker":726,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileSpan":733,"esri/views/3d/layers/PointCloudWorker":740,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/PointCloudWorker":740,"esri/views/vectorTiles/WorkerTileHandler":756,"esri/views/2d/layers/features/Pipeline":757,"esri/layers/graphics/sources/support/CSVSourceWorker":758,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileInfoView":766,"esri/views/2d/engine/webgl/definitions":774,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/webgl/definitions":774,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/orientedBoundingBox":779,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/i3s/I3SBinaryReader":794,"@dojo/framework/shim/array":814,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/QueueProcessor":815,"esri/views/vectorTiles/style/StyleLayer":831,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleLayer":831,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/LODInfo":834,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileCoverage":835,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileQueue":838,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/Queue":839,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileStrategy":900,"esri/views/vectorTiles/style/StyleRepository":953,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleRepository":953,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/Filter":954,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleDefinition":955,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleProperty":956,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/geometryUtils/lineSegment":1007,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/i3s/LEPCC":1012,"esri/views/2d/engine/webgl/GeometryUtils":1022,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/webgl/GeometryUtils":1022,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/PointCloudRenderer":1040,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/quickselect/quickselect":1049,"esri/views/2d/engine/webgl/Geometry":1052,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/webgl/Geometry":1052,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/dito":1053,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/featureConversionUtils":1054,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/sql/WhereClause":1055,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/sql/AggregateFunctions":1056,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/sql/StandardizedFunctions":1057,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/sql/WhereGrammar":1058,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/sql/sql92grammar":1059,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/PointSizeAlgorithm":1271,"esri/views/2d/tiling":1273,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling":1273,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/geometryUtils/plane":1274,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/geometryUtils/triangle":1275,"esri/views/2d/engine/webgl/Rect":1277,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/webgl/Rect":1277,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/i3s/I3SProjectionUtil":1278,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/attributeSupport":1279,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/LRUCache":1280,"esri/views/vectorTiles/MemoryBuffer":1290,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/MemoryBuffer":1290,"esri/geometry/projection":1291,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/projection":1291,"dojo/Stateful":1312,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/QueryEngineCapabilities":1314,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/PointCloudClassBreaksRenderer":1315,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/PointSizeFixedSizeAlgorithm":1316,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/PointSizeSplatAlgorithm":1317,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/PointCloudStretchRenderer":1318,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/PointCloudUniqueValueRenderer":1319,"esri/views/vectorTiles/Bucket":1380,"dojox/string/BidiEngine":1381,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/i3s/I3SGeometryUtil":1382,"esri/layers/graphics/data/DefaultSpatialIndex":1383,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/DefaultSpatialIndex":1383,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/projectionSupport":1384,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/utils":1385,"esri/views/2d/layers/features/controllers":1428,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/features/controllers":1428,"esri/core/libs/rbush/rbush":1430,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/rbush/rbush":1430,"esri/views/2d/layers/features/support/Tile":1431,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/features/support/Tile":1431,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/i3s/PointCloudRendererUtil":1432,"esri/layers/graphics/data/QueryEngine":1433,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/QueryEngine":1433,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/ColorModulation":1483,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/pointSizeAlgorithmJSONUtils":1484,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/pointSizeAlgorithmTypeUtils":1485,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/ColorClassBreakInfo":1486,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/StopInfo":1487,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/pointCloud/ColorUniqueValueInfo":1488,"esri/views/2d/engine/webgl/TextShaping":1517,"esri/views/2d/engine/webgl/TileClipper":1518,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/pe":1519,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/GeographicTransformation":1520,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/GeographicTransformationStep":1521,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/FeatureStore":1522,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/QueryEngineResult":1523,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/AttributesBuilder":1524,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/SpatialQueryCache":1525,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/data/spatialQuerySupport":1526,"esri/core/executeAsync":1640,"esri/views/vectorTiles/BackgroundBucket":1641,"esri/views/vectorTiles/CircleBucket":1642,"esri/views/vectorTiles/FillBucket":1643,"esri/views/vectorTiles/LineBucket":1644,"esri/views/2d/engine/webgl/LineTess":1645,"esri/views/vectorTiles/Placement":1646,"esri/views/vectorTiles/SymbolBucket":1647,"esri/views/vectorTiles/WorkerTile":2331,"esri/views/vectorTiles/IndexMemoryBuffer":2332,"esri/views/vectorTiles/Conflict":2333,"esri/views/vectorTiles/TileParser":2334,"esri/views/vectorTiles/Feature":2335,"esri/views/vectorTiles/SourceLayerData":2336,"esri/views/vectorTiles/VertexMemoryBuffer":2337,"esri/views/2d/layers/features/processors":2338,"esri/views/2d/layers/features/support/TileStore":2339,"dstore/Csv":2340})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[68,27],{1007:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344),r(364)],void 0===(i=function(e,t,r,n){function i(e,t){return void 0===e&&(e=r.vec3d.create()),void 0===t&&(t=r.vec3d.create()),{origin:e,vector:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=i,t.fromOriginAndVector=function(e,t,n){return void 0===n&&(n=i()),r.vec3d.set(e,n.origin),r.vec3d.set(t,n.vector),n},t.distance2=function(e,t){var i=r.vec3d.subtract(t,e.origin),a=r.vec3d.dot(e.vector,i),s=r.vec3d.dot(e.vector,e.vector),u=n.clamp(a/s,0,1),l=r.vec3d.subtract(r.vec3d.scale(e.vector,u,o),i,o);return r.vec3d.dot(l,l)};var o=r.vec3d.create()}.apply(null,n))||(e.exports=i)},1012:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(342)],void 0===(i=function(e,t,r){function n(e,t,r){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,r+c.identifierOffset,c.identifierLength)),version:t.getUint16(r+c.versionOffset,l),checksum:t.getUint32(r+c.checksumOffset,l)}}function i(e,t){return{sizeLo:e.getUint32(t+f.sizeLo,l),sizeHi:e.getUint32(t+f.sizeHi,l),minX:e.getFloat64(t+f.minX,l),minY:e.getFloat64(t+f.minY,l),minZ:e.getFloat64(t+f.minZ,l),maxX:e.getFloat64(t+f.maxX,l),maxY:e.getFloat64(t+f.maxY,l),maxZ:e.getFloat64(t+f.maxZ,l),errorX:e.getFloat64(t+f.errorX,l),errorY:e.getFloat64(t+f.errorY,l),errorZ:e.getFloat64(t+f.errorZ,l),count:e.getUint32(t+f.count,l),reserved:e.getUint32(t+f.reserved,l)}}function o(e,t,r){var n=[];t=a(e,t,n);for(var i=[],o=0;o<n.length;o++){i.length=0,t=a(e,t,i);for(var s=0;s<i.length;s++)r.push(i[s]+n[o])}return t}function a(e,t,n){var i=new DataView(e,t),o=i.getUint8(0),a=31&o,s=!!(32&o),u=(192&o)>>6,c=0;if(0===u)c=i.getUint32(1,l),t+=5;else if(1===u)c=i.getUint16(1,l),t+=3;else{if(2!==u)throw new r("lepcc-decode-error","Bad count type");c=i.getUint8(1),t+=2}if(s)throw new r("lepcc-decode-error","LUT not implemented");for(var f=Math.ceil(c*a/8),h=new Uint8Array(e,t,f),p=0,d=0,v=0,y=-1>>>32-a,m=0;m<c;m++){for(;d<a;)p|=h[v]<<d,d+=8,v+=1;n[m]=p&y,p>>>=a,(d-=a)+a>32&&(p|=h[v-1]>>8-d)}return t+v}function s(e,t){return{sizeLo:e.getUint32(t+h.sizeLo,l),sizeHi:e.getUint32(t+h.sizeHi,l),count:e.getUint32(t+h.count,l),colorMapCount:e.getUint16(t+h.colorMapCount,l),lookupMethod:e.getUint8(t+h.lookupMethod),compressionMethod:e.getUint8(t+h.compressionMethod)}}function u(e,t){return{sizeLo:e.getUint32(t+p.sizeLo,l),sizeHi:e.getUint32(t+p.sizeHi,l),count:e.getUint32(t+p.count,l),scaleFactor:e.getUint16(t+p.scaleFactor,l),bitsPerPoint:e.getUint8(t+p.bitsPerPoint),reserved:e.getUint8(t+p.reserved)}}Object.defineProperty(t,"__esModule",{value:!0});var l=!0,c={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16},f={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};t.decodeXYZ=function(e){var t=new DataView(e,0),a=0,s=n(e,t,a),u=s.identifier,l=s.version;if(a+=c.byteCount,"LEPCC     "!==u)throw new r("lepcc-decode-error","Bad identifier");if(l>1)throw new r("lepcc-decode-error","Unknown version");var h=i(t,a);if(a+=f.byteCount,h.sizeHi*Math.pow(2,32)+h.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var p=new Float64Array(3*h.count),d=[],v=[],y=[],m=[];if(a=o(e,a,d),a=o(e,a,v),a=o(e,a,y),(a=o(e,a,m))!==e.byteLength)throw new r("lepcc-decode-error","Bad length");for(var g=0,_=0,x=0;x<d.length;x++){_+=d[x];for(var b=0,w=0;w<v[x];w++){b+=y[g];var I=m[g];p[3*g]=Math.min(h.maxX,h.minX+2*h.errorX*b),p[3*g+1]=Math.min(h.maxY,h.minY+2*h.errorY*_),p[3*g+2]=Math.min(h.maxZ,h.minZ+2*h.errorZ*I),g++}}return{errorX:h.errorX,errorY:h.errorY,errorZ:h.errorZ,result:p}};var h={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};t.decodeRGB=function(e){var t=new DataView(e,0),i=0,o=n(e,t,i),a=o.identifier,u=o.version;if(i+=c.byteCount,"ClusterRGB"!==a)throw new r("lepcc-decode-error","Bad identifier");if(u>1)throw new r("lepcc-decode-error","Unknown version");var l=s(t,i);if(i+=h.byteCount,l.sizeHi*Math.pow(2,32)+l.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");if(2!==l.lookupMethod&&1!==l.lookupMethod||0!==l.compressionMethod){if(0===l.lookupMethod&&0===l.compressionMethod){if(3*l.count+i!==e.byteLength||0!==l.colorMapCount)throw new r("lepcc-decode-error","Bad count");return new Uint8Array(e,i).slice()}if(l.lookupMethod<=2&&1===l.compressionMethod){if(i+3!==e.byteLength||1!==l.colorMapCount)throw new r("lepcc-decode-error","Bad count");for(var f=t.getUint8(i),p=t.getUint8(i+1),d=t.getUint8(i+2),v=new Uint8Array(3*l.count),y=0;y<l.count;y++)v[3*y]=f,v[3*y+1]=p,v[3*y+2]=d;return v}throw new r("lepcc-decode-error","Bad method "+l.lookupMethod+","+l.compressionMethod)}if(3*l.colorMapCount+l.count+i!==e.byteLength||l.colorMapCount>256)throw new r("lepcc-decode-error","Bad count");var m=new Uint8Array(e,i,3*l.colorMapCount),g=new Uint8Array(e,i+3*l.colorMapCount,l.count);for(v=new Uint8Array(3*l.count),y=0;y<l.count;y++){var _=g[y];v[3*y]=m[3*_],v[3*y+1]=m[3*_+1],v[3*y+2]=m[3*_+2]}return v};var p={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};t.decodeIntensity=function(e){var t=new DataView(e,0),i=0,o=n(e,t,i),s=o.identifier,l=o.version;if(i+=c.byteCount,"Intensity "!==s)throw new r("lepcc-decode-error","Bad identifier");if(l>1)throw new r("lepcc-decode-error","Unknown version");var f=u(t,i);if(i+=p.byteCount,f.sizeHi*Math.pow(2,32)+f.sizeLo!==e.byteLength)throw new r("lepcc-decode-error","Bad size");var h=new Uint16Array(f.count);if(8===f.bitsPerPoint){if(f.count+i!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(var d=new Uint8Array(e,i,f.count),v=0;v<f.count;v++)h[v]=d[v]*f.scaleFactor}else if(16===f.bitsPerPoint){if(2*f.count+i!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(d=new Uint16Array(e,i,f.count),v=0;v<f.count;v++)h[v]=d[v]*f.scaleFactor}else{if(a(e,i,d=[])!==e.byteLength)throw new r("lepcc-decode-error","Bad size");for(v=0;v<f.count;v++)h[v]=d[v]*f.scaleFactor}return h}}.apply(null,n))||(e.exports=i)},1022:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return(e%=t)>=0?e:e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var n=1/Math.LN2;t.positiveMod=r,t.radToByte=function(e){return r(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return r(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*n},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}}.apply(null,n))||(e.exports=i)},1040:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(341),r(348),r(339),r(337),r(1483),r(1484),r(1485)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c){var f=o.strict()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"}),h=function(e){function t(t){var r=e.call(this)||this;return r.type=void 0,r.pointSizeAlgorithm=null,r.colorModulation=null,r.pointsPerInch=10,r}return r(t,e),t.prototype.clone=function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null},t.prototype.cloneProperties=function(){return{pointSizeAlgorithm:a.clone(this.pointSizeAlgorithm),colorModulation:a.clone(this.colorModulation),pointsPerInch:a.clone(this.pointsPerInch)}},n([s.property({type:f.apiValues,readOnly:!0,nonNullable:!0,json:{type:f.jsonValues,read:!1,write:f.write}})],t.prototype,"type",void 0),n([s.property({types:c.pointSizeAlgorithmTypes,json:{read:l.read,write:!0}})],t.prototype,"pointSizeAlgorithm",void 0),n([s.property({type:u.default,json:{write:!0}})],t.prototype,"colorModulation",void 0),n([s.property({json:{write:!0},nonNullable:!0,type:Number})],t.prototype,"pointsPerInch",void 0),n([s.subclass("esri.renderers.PointCloudRenderer")],t)}(s.declared(i));return(h||(h={})).fieldTransformTypeKebabDict=o({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"}),h}.apply(null,n))||(e.exports=i)},1049:function(e,t,r){var n;void 0===(n=function(){"use strict";function e(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(r,n,Math.max(i,Math.floor(n-u*c/s+f)),Math.min(o,Math.floor(n+(s-u)*c/s+f)),a)}var h=r[n],p=i,d=o;for(t(r,i,n),a(r[o],h)>0&&t(r,i,o);p<d;){for(t(r,p,d),p++,d--;a(r[p],h)<0;)p++;for(;a(r[d],h)>0;)d--}0===a(r[i],h)?t(r,i,d):t(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}function t(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function r(e,t){return e<t?-1:e>t?1:0}return function(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}}.apply(null,[]))||(e.exports=n)},1052:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(e,t){return e===this.x&&t===this.y},e.prototype.isEqual=function(e){return e.x===this.x&&e.y===this.y},e.prototype.setCoords=function(e,t){this.x=e,this.y=t},e.prototype.normalize=function(){var e=this.x,t=this.y,r=Math.sqrt(e*e+t*t);this.x/=r,this.y/=r},e.prototype.rightPerpendicular=function(){var e=this.x;this.x=this.y,this.y=-e},e.prototype.move=function(e,t){this.x+=e,this.y+=t},e.prototype.assign=function(e){this.x=e.x,this.y=e.y},e.prototype.assignAdd=function(e,t){this.x=e.x+t.x,this.y=e.y+t.y},e.prototype.assignSub=function(e,t){this.x=e.x-t.x,this.y=e.y-t.y},e.prototype.rotate=function(e,t){var r=this.x,n=this.y;this.x=r*e-n*t,this.y=r*t+n*e},e.prototype.scale=function(e){this.x*=e,this.y*=e},e.prototype.length=function(){var e=this.x,t=this.y;return Math.sqrt(e*e+t*t)},e.distance=function(e,t){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},e.add=function(t,r){return new e(t.x+r.x,t.y+r.y)},e.sub=function(t,r){return new e(t.x-r.x,t.y-r.y)},e}();t.Point=r}.apply(null,n))||(e.exports=i)},1053:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344)],void 0===(i=function(e,t,r){function n(e,t,n,i,o,s,u,l,c,f,h){return function(e,t,n){for(var i=r.vec3d.dist2(e.maxVert[0],e.minVert[0]),o=0,a=1;a<7;++a){var s=r.vec3d.dist2(e.maxVert[a],e.minVert[a]);s>i&&(i=s,o=a)}r.vec3d.set(e.minVert[o],t),r.vec3d.set(e.maxVert[o],n)}(e,i,o),r.vec3d.dist2(i,o)<p?1:(r.vec3d.subtract(i,o,u),r.vec3d.normalize(u),function(e,t,n,i){for(var o=e.data,a=e.offsetIdx,s=e.strideIdx,u=Number.NEGATIVE_INFINITY,l=0,c=a;c<o.length;c+=s){r.vec3d.set3(o[c]-t[0],o[c+1]-t[1],o[c+2]-t[2],P);var f=n[0]*P[0]+n[1]*P[1]+n[2]*P[2],h=r.vec3d.length2(n),p=r.vec3d.length2(P)-f*f/h;p>u&&(u=p,l=c)}return r.vec3d.set3(o[l],o[l+1],o[l+2],i),u}(t,i,u,s)<p?2:(r.vec3d.subtract(o,s,l),r.vec3d.normalize(l),r.vec3d.subtract(s,i,c),r.vec3d.normalize(c),r.vec3d.cross(l,u,n),r.vec3d.normalize(n),a(t,n,u,l,c,f),0))}function i(e,t,n,i,s,u,l,c,f,h){o(e,t,n,i,s,y,m),void 0!==y[0]&&(r.vec3d.subtract(y,n,g),r.vec3d.normalize(g),r.vec3d.subtract(y,i,_),r.vec3d.normalize(_),r.vec3d.subtract(y,s,x),r.vec3d.normalize(x),r.vec3d.cross(_,u,b),r.vec3d.normalize(b),r.vec3d.cross(x,l,w),r.vec3d.normalize(w),r.vec3d.cross(g,c,I),r.vec3d.normalize(I),a(e,b,u,_,g,f),a(e,w,l,x,_,f),a(e,I,c,g,x,f)),void 0!==m[0]&&(r.vec3d.subtract(m,n,g),r.vec3d.normalize(g),r.vec3d.subtract(m,i,_),r.vec3d.normalize(_),r.vec3d.subtract(m,s,x),r.vec3d.normalize(x),r.vec3d.cross(_,u,b),r.vec3d.normalize(b),r.vec3d.cross(x,l,w),r.vec3d.normalize(w),r.vec3d.cross(g,c,I),r.vec3d.normalize(I),a(e,b,u,_,g,f),a(e,w,l,x,_,f),a(e,I,c,g,x,f))}function o(e,t,n,i,o,a,s){!function(e,t,n,i,o){var a=e.data,s=e.offsetIdx,u=e.strideIdx;r.vec3d.set3(a[s],a[s+1],a[s+2],i),r.vec3d.set(i,o),n[0]=r.vec3d.dot(N,t),n[1]=n[0];for(var l=s+u;l<a.length;l+=u){r.vec3d.set3(a[l],a[l+1],a[l+2],N);var c=r.vec3d.dot(N,t);c<n[0]&&(n[0]=c,r.vec3d.set(N,i)),c>n[1]&&(n[1]=c,r.vec3d.set(N,o))}}(e,t,T,s,a);var u=r.vec3d.dot(n,t);T[1]-p<=u&&(a[0]=void 0),T[0]+p>=u&&(s[0]=void 0)}function a(e,t,n,i,o,a){if(!(r.vec3d.length2(t)<p)){r.vec3d.cross(n,t,C),r.vec3d.cross(i,t,M),r.vec3d.cross(o,t,S),s(e,t,T),A[1]=T[0],E[1]=T[1],D[1]=E[1]-A[1];for(var u=[n,i,o],l=[C,M,S],c=0;c<3;++c){s(e,u[c],T),A[0]=T[0],E[0]=T[1],s(e,l[c],T),A[2]=T[0],E[2]=T[1],D[0]=E[0]-A[0],D[2]=E[2]-A[2];var f=h(D);f<a.quality&&(r.vec3d.set(u[c],a.b0),r.vec3d.set(t,a.b1),r.vec3d.set(l[c],a.b2),a.quality=f)}}}function s(e,t,r){var n=e.data,i=e.offsetIdx,o=e.strideIdx;r[0]=Number.POSITIVE_INFINITY,r[1]=Number.NEGATIVE_INFINITY;for(var a=i;a<n.length;a+=o){var s=n[a]*t[0]+n[a+1]*t[1]+n[a+2]*t[2];r[0]=Math.min(r[0],s),r[1]=Math.max(r[1],s)}}function u(e,t,n){r.vec3d.set(e,n.center),r.vec3d.scale(t,.5,n.halfSize),r.quat4.identity(n.quaternion)}function l(e,t,n){r.vec3d.set(t,O),Math.abs(t[0])>Math.abs(t[1])&&Math.abs(t[0])>Math.abs(t[2])?O[0]=0:Math.abs(t[1])>Math.abs(t[2])?O[1]=0:O[2]=0,r.vec3d.length2(O)<p&&(O[0]=O[1]=O[2]=1),r.vec3d.cross(t,O,F),r.vec3d.normalize(F),r.vec3d.cross(t,F,B),r.vec3d.normalize(B),c(e,t,F,B,j,R),r.vec3d.subtract(R,j,V),f(t,F,B,j,R,V,n)}function c(e,t,r,n,i,o){s(e,t,T),i[0]=T[0],o[0]=T[1],s(e,r,T),i[1]=T[0],o[1]=T[1],s(e,n,T),i[2]=T[0],o[2]=T[1]}function f(e,t,n,i,o,a,s){z[0]=e[0],z[3]=e[1],z[6]=e[2],z[1]=t[0],z[4]=t[1],z[7]=t[2],z[2]=n[0],z[5]=n[1],z[8]=n[2],r.quat4.fromRotationMatrix(z,s.quaternion),r.vec3d.add(i,o,k),r.vec3d.scale(k,.5),r.vec3d.scale(e,k[0],s.center),r.vec3d.scale(t,k[1],L),r.vec3d.add(s.center,L),r.vec3d.scale(n,k[2],L),r.vec3d.add(s.center,L),r.vec3d.scale(a,.5,s.halfSize)}function h(e){return e[0]*e[1]+e[0]*e[2]+e[1]*e[2]}Object.defineProperty(t,"__esModule",{value:!0});var p=1e-6,d=r.vec3d.create(),v=r.vec3d.create();t.computeOBB=function(e,t){var o=e.data,a=e.strideIdx,s=o.length/a;if(!(s<=0)){var p=new U(e);r.vec3d.add(p.minProj,p.maxProj,d),r.vec3d.scale(d,.5),r.vec3d.subtract(p.maxProj,p.minProj,v);var y=h(v),m=new G;m.quality=y,s<14&&(e={data:new Float64Array(p.buffer,112,42),size:3,offsetIdx:0,strideIdx:3});var g=r.vec3d.create(),_=r.vec3d.create(),x=r.vec3d.create(),b=r.vec3d.create(),w=r.vec3d.create(),I=r.vec3d.create(),P=r.vec3d.create();switch(n(p,e,P,g,_,x,b,w,I,m)){case 1:return void u(d,v,t);case 2:return void l(e,b,t)}i(e,P,g,_,x,b,w,I,m),c(e,m.b0,m.b1,m.b2,j,R);var T=r.vec3d.create();r.vec3d.subtract(R,j,T),m.quality=h(T),m.quality<y?f(m.b0,m.b1,m.b2,j,R,T,t):u(d,v,t)}};var y=r.vec3d.create(),m=r.vec3d.create(),g=r.vec3d.create(),_=r.vec3d.create(),x=r.vec3d.create(),b=r.vec3d.create(),w=r.vec3d.create(),I=r.vec3d.create(),P=r.vec3d.create(),T=r.vec2d.create(),C=r.vec3d.create(),M=r.vec3d.create(),S=r.vec3d.create(),E=r.vec3d.create(),A=r.vec3d.create(),D=r.vec3d.create(),N=r.vec3d.create(),O=r.vec3d.create(),F=r.vec3d.create(),B=r.vec3d.create(),j=r.vec3d.create(),R=r.vec3d.create(),V=r.vec3d.create(),L=r.vec3d.create(),z=r.mat3.create(),k=r.vec3d.create(),U=function(){return function(e){this.minVert=[],this.maxVert=[],this.buffer=new ArrayBuffer(448);var t=0;for(this.minProj=new Float64Array(this.buffer,t,7),t+=56,this.maxProj=new Float64Array(this.buffer,t,7),t+=56;this.minVert.length<7;)this.minVert.push(new Float64Array(this.buffer,t,3)),t+=24;for(;this.maxVert.length<7;)this.maxVert.push(new Float64Array(this.buffer,t,3)),t+=24;for(var n=0;n<7;++n)this.minProj[n]=Number.POSITIVE_INFINITY,this.maxProj[n]=Number.NEGATIVE_INFINITY;var i=[],o=[],a=e.data,s=e.offsetIdx,u=e.strideIdx;for(n=s;n<a.length;n+=u){var l=a[n];l<this.minProj[0]&&(this.minProj[0]=l,i[0]=n),l>this.maxProj[0]&&(this.maxProj[0]=l,o[0]=n),(l=a[n+1])<this.minProj[1]&&(this.minProj[1]=l,i[1]=n),l>this.maxProj[1]&&(this.maxProj[1]=l,o[1]=n),(l=a[n+2])<this.minProj[2]&&(this.minProj[2]=l,i[2]=n),l>this.maxProj[2]&&(this.maxProj[2]=l,o[2]=n),(l=a[n]+a[n+1]+a[n+2])<this.minProj[3]&&(this.minProj[3]=l,i[3]=n),l>this.maxProj[3]&&(this.maxProj[3]=l,o[3]=n),(l=a[n]+a[n+1]-a[n+2])<this.minProj[4]&&(this.minProj[4]=l,i[4]=n),l>this.maxProj[4]&&(this.maxProj[4]=l,o[4]=n),(l=a[n]-a[n+1]+a[n+2])<this.minProj[5]&&(this.minProj[5]=l,i[5]=n),l>this.maxProj[5]&&(this.maxProj[5]=l,o[5]=n),(l=a[n]-a[n+1]-a[n+2])<this.minProj[6]&&(this.minProj[6]=l,i[6]=n),l>this.maxProj[6]&&(this.maxProj[6]=l,o[6]=n)}for(n=0;n<7;++n){var c=i[n];r.vec3d.set3(a[c],a[c+1],a[c+2],this.minVert[n]),c=o[n],r.vec3d.set3(a[c],a[c+1],a[c+2],this.maxVert[n])}}}(),G=function(){return function(){this.b0=r.vec3d.createFrom(1,0,0),this.b1=r.vec3d.createFrom(0,1,0),this.b2=r.vec3d.createFrom(0,0,1),this.quality=0}}()}.apply(null,n))||(e.exports=i)},1054:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(342),r(343),r(607),r(427),r(597)],void 0===(i=function(e,t,r,n,i,o,a){function s(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function u(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function l(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function c(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function f(e){var t=e.coords;return{x:t[0],y:t[1]}}function h(e){var t=new a.default;return t.coords[0]=e.x,t.coords[1]=e.y,t}function p(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function d(e){var t=new a.default;return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function v(e){var t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function y(e){var t=new a.default;return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function m(e){var t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function g(e){var t=new a.default;return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function _(e,t,r,n,o){var a=h;r&&n?a=g:r?a=d:n&&(a=y);for(var s=0,u=t;s<u.length;s++){var l=u[s],c=l.geometry,f=l.attributes,p=c?a(c):void 0;e.push(new i.default(p,f,null,f[o]))}return e}function x(e,t,r){if(!e)return null;for(var n=t?r?4:3:r?3:2,i=[],o=0;o<e.coords.length;o+=n){for(var a=[],s=0;s<n;s++)a.push(e.coords[o+s]);i.push(a)}return t?r?{points:i,hasZ:t,hasM:r}:{points:i,hasZ:t}:r?{points:i,hasM:r}:{points:i}}function b(e,t,r,n,o){for(var s=r?n?4:3:n?3:2,u=0,l=t;u<l.length;u++){var c=l[u],f=c.geometry,h=c.attributes,p=void 0;if(f){(p=new a.default).lengths[0]=f.points.length;for(var d=p.coords,v=0,y=0,m=f.points;y<m.length;y++)for(var g=m[y],_=0;_<s;_++)d[v++]=g[_]}e.push(new i.default(p,h,null,h[o]))}return e}function w(e,t,r){if(!e)return null;for(var n=t?r?4:3:r?3:2,i=e.coords,o=[],a=0,s=0,u=e.lengths;s<u.length;s++){for(var l=u[s],c=[],f=0;f<l;f++){for(var h=[],p=0;p<n;p++)h.push(i[a++]);c.push(h)}o.push(c)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function I(e,t,r,n,o){for(var s=r?n?4:3:n?3:2,u=0,l=t;u<l.length;u++){var c=l[u],f=c.geometry,h=c.attributes,p=void 0;if(f)for(var d=(p=new a.default).lengths,v=p.coords,y=0,m=0,g=f.paths;m<g.length;m++){for(var _=g[m],x=0,b=_;x<b.length;x++)for(var w=b[x],I=0;I<s;I++)v[y++]=w[I];d.push(_.length)}e.push(new i.default(p,h,null,h[o]))}return e}function P(e,t,r){if(!e)return null;for(var n=t?r?4:3:r?3:2,i=e.coords,o=[],a=0,s=0,u=e.lengths;s<u.length;s++){for(var l=u[s],c=[],f=0;f<l;f++){for(var h=[],p=0;p<n;p++)h.push(i[a++]);c.push(h)}o.push(c)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function T(e,t,r,n,o){for(var s=r?n?4:3:n?3:2,u=0,l=t;u<l.length;u++){var c=l[u],f=c.geometry,p=c.centroid,d=c.attributes,v=void 0;if(f)for(var y=(v=new a.default).lengths,m=v.coords,g=0,_=0,x=f.rings;_<x.length;_++){for(var b=x[_],w=0,I=b;w<I.length;w++)for(var P=I[w],T=0;T<s;T++)m[g++]=P[T];y.push(b.length)}p?e.push(new i.default(v,d,h(p),d[o])):e.push(new i.default(v,d,null,d[o]))}return e}function C(e,t,n,i,o,a){if(e.length=0,n){switch(n){case"esriGeometryPoint":return _(e,t,i,o,a);case"esriGeometryMultipoint":return b(e,t,i,o,a);case"esriGeometryPolyline":return I(e,t,i,o,a);case"esriGeometryPolygon":return T(e,t,i,o,a);default:V.error("convertToFeatureSet:unknown-geometry",new r("Unable to parse unknown geometry type '"+n+"'")),e.length=0}return e}e.length=0}function M(e,t,n,i,o){switch(e.length=0,n){case"esriGeometryPoint":return function(e,t,r,n){var i=f;n&&r?i=m:n?i=p:r&&(i=v);for(var o=0,a=t;o<a.length;o++){var s=a[o],u=s.geometry,l=s.attributes,c=u?i(u):null;e.push({attributes:l,geometry:c})}return e}(e,t,i,o);case"esriGeometryMultipoint":return function(e,t,r,n){for(var i=0,o=t;i<o.length;i++){var a=o[i],s=a.geometry,u=a.attributes,l=void 0;s&&(l=x(s,r,n)),e.push({attributes:u,geometry:l})}return e}(e,t,i,o);case"esriGeometryPolyline":return function(e,t,r,n){for(var i=0,o=t;i<o.length;i++){var a=o[i],s=a.geometry,u=a.attributes,l=void 0;s&&(l=w(s,r,n)),e.push({attributes:u,geometry:l})}return e}(e,t,i,o);case"esriGeometryPolygon":return function(e,t,r,n){for(var i=0,o=t;i<o.length;i++){var a=o[i],s=a.geometry,u=a.attributes,l=a.centroid,c=void 0;if(s&&(c=P(s,r,n)),l){var h=f(l);e.push({attributes:u,centroid:h,geometry:c})}else e.push({attributes:u,geometry:c})}return e}(e,t,i,o);default:V.error("convertToFeatureSet:unknown-geometry",new r("Unable to parse unknown geometry type '"+n+"'"))}return e}function S(e,t,r,n,i,o){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var a=L[i],l=t.coords,c=t.lengths,f=r?n?4:3:n?3:2,h=r?n?U:k:n?k:z;if(!c.length)return h(e.coords,l,0,0,s(o,l[0]),u(o,l[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;for(var p,d,v,y,m=0,g=0,_=g,x=0,b=c;x<b.length;x++){var w=b[x];if(!(w<a)){var I=0;g=_,v=p=s(o,l[m]),y=d=u(o,l[m+1]),h(e.coords,l,g,m,v,y),I++,m+=f,g+=f;for(var P=1;P<w;P++,m+=f)v=s(o,l[m]),y=u(o,l[m+1]),v===p&&y===d||(h(e.coords,l,g,m,v-p,y-d),g+=f,I++,p=v,d=y);I>=a&&(e.lengths.push(I),_=g)}}return e.coords.length=_,e.coords.length?e:null}function E(e,t,r,n){var i=e[t],o=e[t+1],a=e[r],s=e[r+1],u=e[n],l=e[n+1];if(a===u)return Math.abs(i-a);var c=(l-s)/(u-a),f=s-c*a;return Math.abs(c*i-o+f)/Math.sqrt(c*c+1)}function A(e,t,r,n,i,o,a){for(var s,u=o,l=a-r,c=0,f=0,h=o+r;h<a-r;h+=r)(s=E(t,h,u,l))>c&&(f=h,c=s);c>n?(A(e,t,r,n,i,o,f+r),A(e,t,r,n,i,f,a)):(i(e,t,e.length,u,t[u],t[u+1]),i(e,t,e.length,l,t[l],t[l+1]))}function D(e,t,r,n,i){var o=t.coords,a=t.lengths,s=r?n?U:k:n?k:z,u=r?n?4:3:n?3:2;if(!o.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!a.length)return s(e.coords,o,0,0,l(i,o[0]),c(i,o[1])),e!==t&&(e.lengths.length=0,e.coords.length=u),e;for(var f=i.scale,h=f[0],p=f[1],d=0,v=0;v<a.length;v++){var y=a[v];e.lengths[v]=y;var m=l(i,o[d]),g=c(i,o[d+1]);s(e.coords,o,d,d,m,g),d+=u;for(var _=1;_<y;_++,d+=u)m+=o[d]*h,g-=o[d+1]*p,s(e.coords,o,d,d,m,g)}return e!==t&&(e.lengths.length=a.length,e.coords.length=o.length),e}function N(e,t,r,n,i,o){for(var a=i?o?4:3:o?3:2,s=r,u=r+a,l=0,c=0,f=0,h=0,p=0,d=0,v=n-1;d<v;d++,s+=a,u+=a){var y=t[s],m=t[s+1],g=t[s+2],_=t[u],x=t[u+1],b=t[u+2],w=y*x-_*m;h+=w,l+=(y+_)*w,c+=(m+x)*w,i&&(f+=(g+b)*(w=y*b-_*g),p+=w),y<e[0]&&(e[0]=y),y>e[1]&&(e[1]=y),m<e[2]&&(e[2]=m),m>e[3]&&(e[3]=m),i&&(g<e[4]&&(e[4]=g),g>e[5]&&(e[5]=g))}if(h>0&&(h*=-1),p>0&&(p*=-1),!h)return null;var I=[l,c,.5*h];return i&&(I[3]=f,I[4]=.5*p),I}function O(e,t,r,n,i){for(var o=n?i?4:3:i?3:2,a=t,s=t+o,u=0,l=0,c=0,f=0,h=0,p=r-1;h<p;h++,a+=o,s+=o){var d=e[a],v=e[a+1],y=e[a+2],m=e[s],g=e[s+1],_=e[s+2],x=n?B(d,v,y,m,g,_):F(d,v,m,g);if(x)if(u+=x,n){l+=x*(b=R(d,v,y,m,g,_))[0],c+=x*b[1],f+=x*b[2]}else{var b;l+=x*(b=j(d,v,m,g))[0],c+=x*b[1]}}return u>0?n?[l/u,c/u,f/u]:[l/u,c/u]:r>0?n?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function F(e,t,r,n){var i=r-e,o=n-t;return Math.sqrt(i*i+o*o)}function B(e,t,r,n,i,o){var a=n-e,s=i-t,u=o-r;return Math.sqrt(a*a+s*s+u*u)}function j(e,t,r,n){return[e+.5*(r-e),t+.5*(n-t)]}function R(e,t,r,n,i,o){return[e+.5*(n-e),t+.5*(i-t),r+.5*(o-r)]}Object.defineProperty(t,"__esModule",{value:!0});var V=n.getLogger("esri.tasks.support.optimizedFeatureSet"),L={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},z=function(e,t,r,n,i,o){e[r]=i,e[r+1]=o},k=function(e,t,r,n,i,o){e[r]=i,e[r+1]=o,e[r+2]=t[n+2]},U=function(e,t,r,n,i,o){e[r]=i,e[r+1]=o,e[r+2]=t[n+2],e[r+3]=t[n+3]};t.quantizeX=s,t.quantizeY=u,t.hydrateX=l,t.hydrateY=c,t.convertToPoint=function(e,t,r){return e?t?r?m(e):p(e):r?v(e):f(e):null},t.convertToMultipoint=x,t.convertToPolyline=w,t.convertToPolygon=P;var G=[],Y=[];t.convertFromFeature=function(e,t,r,n,i){G[0]=e;var o=C(Y,G,t,r,n,i)[0];return G.length=Y.length=0,o},t.convertFromFeatures=C,t.convertToFeature=function(e,t,r,n){Y[0]=e,M(G,Y,t,r,n);var i=G[0];return G.length=Y.length=0,i},t.convertToFeatures=M,t.convertToFeatureSet=function(e){var t=e.objectIdFieldName,r=e.spatialReference,n=e.transform,i=e.fields,o=e.hasM,a=e.hasZ,s=e.features,u=e.geometryType,l=e.exceededTransferLimit,c={features:M([],s,u,a,o),fields:i,geometryType:u,objectIdFieldName:t,spatialReference:r};return n&&(c.transform=n),l&&(c.exceededTransferLimit=l),o&&(c.hasM=o),a&&(c.hasZ=a),c},t.convertFromFeatureSet=function(e,t){var n=new o.default,i=e.hasM,a=e.hasZ,s=e.features,u=e.objectIdFieldName,l=e.spatialReference,c=e.geometryType,f=e.exceededTransferLimit,h=e.transform;return n.fields=e.fields,n.geometryType=c,n.objectIdFieldName=u||t,n.spatialReference=l,n.objectIdFieldName?(s&&C(n.features,s,c,a,i,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),i&&(n.hasM=i),a&&(n.hasZ=a),h&&(n.transform=h),n):(V.error(new r("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)},t.hydrateOptimizedFeatureSet=function(e){var t=e.transform,r=e.features,n=e.hasM,i=e.hasZ;if(!t)return e;for(var o=0,a=r;o<a.length;o++){var s=a[o];s.geometry&&D(s.geometry,s.geometry,n,i,t),s.centroid&&D(s.centroid,s.centroid,n,i,t)}return e.transform=null,e},t.quantizeOptimizedFeatureSet=function(e,t){var n=t.geometryType,o=t.features,s=t.hasM,u=t.hasZ;if("esriGeometryEnvelope"===n)return V.error(new r("optimized-features:invalid-geometry-type",'FeatureSet with geometry type "'+n+'" is not supported')),t;if(!e)return t;for(var l=0;l<o.length;l++){var c=o[l],f=new i.default(new a.default,c.attributes);S(f.geometry,c.geometry,s,u,n,e),c.centroid&&(f.centroid=new a.default,S(f.centroid,c.centroid,s,u,"esriGeometryPoint",e)),o[l]=f}return t.transform=e,t},t.quantizeOptimizedGeometry=S,t.quantizeOptimizedGeometryRemoveCollinear=function(e,t,r,n,i,o){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var a=L[i],l=t.coords,c=t.lengths,f=r?n?4:3:n?3:2,h=r?n?U:k:n?k:z;if(!c.length)return h(e.coords,l,0,0,s(o,l[0]),u(o,l[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=f,e;for(var p,d,v,y,m=0,g=0,_=g,x=0,b=c;x<b.length;x++){var w=b[x];if(!(w<a)){var I=0;g=_,v=p=s(o,l[m]),y=d=u(o,l[m+1]),h(e.coords,l,g,m,v,y),I++,m+=f;for(var P=!1,T=0,C=0,M=1;M<w;M++,m+=f)if(v=s(o,l[m]),y=u(o,l[m+1]),v!==p||y!==d){var S=v-p,E=y-d;P&&(0===T&&0===S||0===C&&0===E)?(T+=S,C+=E,h(e.coords,l,g,m,T,C)):(P=!0,T=S,C=E,g+=f,I++,h(e.coords,l,g,m,T,C)),p=v,d=y}P&&(g+=f,h(e.coords,l,g,m,T,C)),I>=a&&(e.lengths.push(I),_=g)}}return e.coords.length!==_&&(e.coords.length=_),e.coords.length?e:null},t.generalizeOptimizedGeometry=function(e,t,r,n,i,o){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var a=L[i],s=t.coords,u=t.lengths,l=r?n?4:3:n?3:2,c=r?n?U:k:n?k:z;if(!u.length)return c(e.coords,s,0,0,s[0],s[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=l,e;for(var f=0,h=0,p=u;h<p.length;h++){var d=p[h];if(d<a)f+=d*l;else{var v=e.coords.length/l;A(e.coords,s,l,o,c,f,f+d*l);var y=e.coords.length/l-v;y>=a?e.lengths.push(y):e.coords.length=v*l,f+=d*l}}return e.coords.length?e:null},t.getBoundsOptimizedGeometry=function(e,t,r,n){var i=r?n?4:3:n?3:2,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(t&&t.coords)for(var l=t.coords,c=0;c<l.length;c+=i){var f=l[c],h=l[c+1];o=Math.min(o,f),s=Math.max(s,f),a=Math.min(a,h),u=Math.max(u,h)}return e[0]=o,e[1]=a,e[2]=s,e[3]=u,e},t.getQuantizedBoundsOptimizedGeometry=function(e,t,r,n){for(var i=r?n?4:3:n?3:2,o=t.lengths,a=t.coords,s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,f=0,h=0,p=o;h<p.length;h++){var d=p[h],v=a[f],y=a[f+1];s=Math.min(v,s),u=Math.min(y,u),l=Math.max(v,l),c=Math.max(y,c),f+=i;for(var m=1;m<d;m++,f+=i){var g=a[f],_=a[f+1];v+=g,y+=_,g<0&&(s=Math.min(s,v)),g>0&&(l=Math.max(l,v)),_<0?u=Math.min(u,y):_>0&&(c=Math.max(c,y))}}return e[0]=s,e[1]=u,e[2]=l,e[3]=c,e},t.hydrateOptimizedGeometry=D,t.getCentroidOptimizedGeometry=function(e,t,r,n){if(!t||!t.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);for(var i=e.coords,o=[],a=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],s=t.lengths,u=t.coords,l=r?n?4:3:n?3:2,c=0,f=0,h=s;f<h.length;f++){var p=h[f],d=N(a,u,c,p,r,n);d&&o.push(d),c+=p*l}if(o.sort(function(e,t){var n=e[2]-t[2];return 0===n&&r&&(n=e[4]-t[4]),n}),o.length){var v=6*o[0][2];i[0]=o[0][0]/v,i[1]=o[0][1]/v,r&&(v=6*o[0][4],i[2]=0!==v?o[0][3]/v:0),(i[0]<a[0]||i[0]>a[1]||i[1]<a[2]||i[1]>a[3]||r&&(i[2]<a[4]||i[2]>a[5]))&&(i.length=0)}if(!i.length){var y=t.lengths[0]?O(u,0,s[0],r,n):null;if(!y)return null;i[0]=y[0],i[1]=y[1],r&&y.length>2&&(i[2]=y[2])}return e},t.lineCentroid=O,t.getLength2D=F,t.getLength3D=B,t.getMidpoint2D=j,t.getMidpoint3D=R}.apply(null,n))||(e.exports=i)},1055:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(814),r(724),r(1259),r(1056),r(1057),r(1058)],void 0===(i=function(e,t,r,n,i,o,a,s){function u(e){return i(e,["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate()}function l(e){return i(e,["YYYY-M-D"]).toDate()}function c(e){return!0===e}function f(e){return Array.isArray(e)?e:[e]}function h(e){return null!==e?!0!==e:null}function p(e,t){if(null==e)return null;for(var r=!1,n=0,i=t;n<i.length;n++){var o=i[n];if(null==o)r=null;else if(e===o){r=!0;break}}return r}function d(e,t,r){if(null==e)return null;for(var n=t,i=r,o="",a="-[]/{}()*+?.\\^$|",s=0,u=0;u<n.length;u++){var l=n.charAt(u);switch(s){case 0:l===i?s=1:a.indexOf(l)>=0?o+="\\"+l:o+="%"===l?".*":"_"===l?".":l;break;case 1:a.indexOf(l)>=0?o+="\\"+l:o+=l,s=0}}return new RegExp("^"+o+"$").test(e)}function v(e){return e instanceof Date?e.valueOf():e}function y(e){for(var t=[],r={},n=0,i=e;n<i.length;n++){var o=i[n],a=o.toLowerCase();void 0===r[a]&&(t.push(o),r[a]=1)}return t}return function(){function e(){this.parseTree=null,this.parameters=null,this._hasStandardizedFunctions=null,this._hasAggregateFunctions=null}return e.create=function(t){var r=new e;r.parseTree=s.WhereGrammar.parse(t);var n=!0,i=!0;return r.visitAll(r.parseTree,function(e){if("function"===e.type){var t=e.name,r=e.args.value.length;n&&(n=a.isStandardized(t,r)),i&&(i=o.isAggregate(t,r))}}),r._hasStandardizedFunctions=n,r._hasAggregateFunctions=i,r},e.prototype.isStandardized=function(){return this._hasStandardizedFunctions},e.prototype.isAggregate=function(){return this._hasAggregateFunctions},e.prototype.setVariablesDictionary=function(e){this.parameters=e},e.prototype.testFeature=function(e){return!!this.evaluateNode(this.parseTree,e)},e.prototype.testSet=function(e){var t=this,r=new n.default;this.visitAll(this.parseTree,function(e){"column_ref"!==e.type||r.has(e.column)||r.set(e.column,e)});for(var i={},o=0,a=e;o<a.length;o++){!function(e){r.forEach(function(r,n){var o=t.featureValue(e,n,r);i[n]?i[n].push(o):i[n]=[o]})}(a[o])}return!!this.evaluateNode(this.parseTree,{attributes:i})},e.prototype.calculateValue=function(e){return this.evaluateNode(this.parseTree,e)},e.prototype.getFunctions=function(){var e=[];return this.visitAll(this.parseTree,function(t){"function"===t.type&&e.push(t.name.toLowerCase())}),y(e)},e.prototype.getExpressions=function(){var e=new n.default;return this.visitAll(this.parseTree,function(t){if("function"===t.type){var r=t.name.toLowerCase(),n=t.args.value[0];if("column_ref"===n.type){var i=n.column,o=r+"-"+i;e.has(o)||e.set(o,{aggregateType:r,field:i})}}}),r.from(e.values())},e.prototype.getFields=function(){var e=[];return this.visitAll(this.parseTree,function(t){"column_ref"===t.type&&e.push(t.column)}),y(e)},e.prototype.getVariables=function(){var e=[];return this.visitAll(this.parseTree,function(t){"param"===t.type&&e.push(t.value.toLowerCase())}),y(e)},e.prototype.featureValue=function(e,t,r){var n=function(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e,i=n[t];if(void 0!==i)return i;for(var o in n)if(t.toLowerCase()===o.toLowerCase())return r.column=o,n[o];return null},e.prototype.visitAll=function(e,t){if(null!=e)switch(t(e),e.type){case"when_clause":this.visitAll(e.operand,t),this.visitAll(e.value,t);break;case"case_expression":for(var r=0,n=e.clauses;r<n.length;r++){var i=n[r];this.visitAll(i,t)}"simple"===e.format&&this.visitAll(e.operand,t),null!==e.else&&this.visitAll(e.else,t);break;case"expr_list":for(var o=0,a=e.value;o<a.length;o++){i=a[o];this.visitAll(i,t)}break;case"unary_expr":this.visitAll(e.expr,t);break;case"binary_expr":this.visitAll(e.left,t),this.visitAll(e.right,t);break;case"function":this.visitAll(e.args,t)}},e.prototype.evaluateNode=function(e,t){switch(e.type){case"case_expression":if("simple"===e.format){for(var r=v(this.evaluateNode(e.operand,t)),n=0;n<e.clauses.length;n++)if(r===v(this.evaluateNode(e.clauses[n].operand,t)))return this.evaluateNode(e.clauses[n].value,t);if(null!==e.else)return this.evaluateNode(e.else,t)}else{for(n=0;n<e.clauses.length;n++)if(c(this.evaluateNode(e.clauses[n].operand,t)))return this.evaluateNode(e.clauses[n].value,t);if(null!==e.else)return this.evaluateNode(e.else,t)}return null;case"param":return this.parameters[e.value.toLowerCase()];case"expr_list":for(var i=[],s=0,y=e.value;s<y.length;s++){var m=y[s];i.push(this.evaluateNode(m,t))}return i;case"unary_expr":return h(this.evaluateNode(e.expr,t));case"binary_expr":switch(e.operator){case"AND":return function(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"OR":return function(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null===this.evaluateNode(e.left,t);case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null!==this.evaluateNode(e.left,t);case"IN":var g=f(this.evaluateNode(e.right,t));return p(this.evaluateNode(e.left,t),g);case"NOT IN":g=f(this.evaluateNode(e.right,t));return h(p(this.evaluateNode(e.left,t),g));case"BETWEEN":var _=this.evaluateNode(e.left,t),x=this.evaluateNode(e.right,t);return null==_||null==x[0]||null==x[1]?null:_>=x[0]&&_<=x[1];case"NOTBETWEEN":_=this.evaluateNode(e.left,t),x=this.evaluateNode(e.right,t);return null==_||null==x[0]||null==x[1]?null:_<x[0]||_>x[1];case"LIKE":return d(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t),e.escape);case"NOT LIKE":return h(d(this.evaluateNode(e.left,t),this.evaluateNode(e.right,t),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return function(e,t,r){if(null==t||null==r)return null;var n=v(t),i=v(r);switch(e){case"<>":return n!==i;case"=":return n===i;case">":return n>i;case"<":return n<i;case">=":return n>=i;case"<=":return n<=i}}(e.operator,this.evaluateNode(e.left,t),this.evaluateNode(e.right,t));case"*":return this.evaluateNode(e.left,t)*this.evaluateNode(e.right,t);case"-":return this.evaluateNode(e.left,t)-this.evaluateNode(e.right,t);case"+":return this.evaluateNode(e.left,t)+this.evaluateNode(e.right,t);case"/":return this.evaluateNode(e.left,t)/this.evaluateNode(e.right,t)}throw new Error("Not Supported Operator "+e.operator);case"null":case"bool":case"string":case"number":return e.value;case"date":return l(e.value);case"timestamp":return u(e.value);case"column_ref":return"CURRENT_DATE"===e.column.toUpperCase()?((m=new Date).setHours(0,0,0,0),m):"CURRENT_TIMESTAMP"===e.column.toUpperCase()?new Date:this.featureValue(t,e.column,e);case"function":var b=this.evaluateNode(e.args,t);return this.isAggregate()?o.aggregateFunction(e.name,b):a.evaluateFunction(e.name,b)}throw new Error("Unsupported sql syntax "+e.type)},e}()}.apply(null,n))||(e.exports=i)},1056:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length}function n(e){for(var t=r(e),n=e.length,i=0,o=0,a=e;o<a.length;o++){var s=a[o];i+=Math.pow(s-t,2)}return n>1?i/(n-1):0}Object.defineProperty(t,"__esModule",{value:!0}),t.aggregateFunction=function(e,t){var r=i[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return r.evaluate(t)},t.isAggregate=function(e,t){var r=i[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};var i={min:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.min.apply(Math,e[0])}},max:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.max.apply(Math,e[0])}},avg:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:r(e[0])}},sum:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}(e[0])}},stddev:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sqrt(n(e[0]))}},count:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].length}},var:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:n(e[0])}}}}.apply(null,n))||(e.exports=i)},1057:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(781)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateFunction=function(e,t){var r=n[e.toLowerCase()];if(null==r)throw new Error("Function Not Recognised");if(t.length<r.minParams||t.length>r.maxParams)throw new Error("Invalid Parameter count for call to "+e.toUpperCase());return r.evaluate(t)},t.isStandardized=function(e,t){var r=n[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams};var n={extract:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];if(null==r)return null;if(r instanceof Date)switch(t.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:function(e){if(2===e.length){var t=e[0],r=e[1];return null==t||null==r?null:t.toString().substring(r-1)}if(3===e.length){t=e[0],r=e[1];var n=e[2];return null==t||null==r||null==n?null:n<=0?"":t.toString().substring(r-1,r+n-1)}}},position:{minParams:2,maxParams:2,evaluate:function(e){var t=e[0],r=e[1];return null==t||null==r?null:r.indexOf(t)+1}},trim:{minParams:2,maxParams:3,evaluate:function(e){var t=3===e.length,n=t?e[1]:" ",i=t?e[2]:e[1];if(null==n||null==i)return null;var o="("+r.escapeString(n)+")";switch(e[0]){case"BOTH":return i.replace(new RegExp("^"+o+"*|"+o+"*$","g"),"");case"LEADING":return i.replace(new RegExp("^"+o+"*","g"),"");case"TRAILING":return i.replace(new RegExp(o+"*$","g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.abs(e[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.ceil(e[0])}},floor:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.floor(e[0])}},log:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])}},log10:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.log(e[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.sin(e[0])}},cos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.cos(e[0])}},tan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.tan(e[0])}},asin:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.asin(e[0])}},acos:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.acos(e[0])}},atan:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:Math.atan(e[0])}},sign:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0]>0?1:e[1]<0?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:Math.pow(e[0],e[1])}},mod:{minParams:2,maxParams:2,evaluate:function(e){return null==e[0]||null==e[1]?null:e[0]%e[1]}},round:{minParams:1,maxParams:2,evaluate:function(e){var t=e[0],r=2===e.length?Math.pow(10,e[1]):1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:function(e){return null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(e){return"string"==typeof e[0]||e[0]instanceof String?e[0].length:0}},concat:{minParams:1,maxParams:1/0,evaluate:function(e){for(var t="",r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(e){return null==e[0]?null:e[0].toString().toUpperCase()}}}}.apply(null,n))||(e.exports=i)},1058:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1059)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.parse=function(e){return r.parse(e)},e}();t.WhereGrammar=n}.apply(null,n))||(e.exports=i)},1059:function(e,t,r){var n;void 0===(n=function(){"use strict";function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function n(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return a[e.type](e)}var a={literal:function(e){return'"'+n(e.text)+'"'},class:function(e){var t,r="";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?i(e.parts[t][0])+"-"+i(e.parts[t][1]):i(e.parts[t]);return"["+(e.inverted?"^":"")+r+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};return"Expected "+function(e){var t,r,n=new Array(e.length);for(t=0;t<e.length;t++)n[t]=o(e[t]);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(t?'"'+n(t)+'"':"end of input")+" found."},{SyntaxError:e,parse:function(t,r){function n(e,t){return{type:"literal",text:e,ignoreCase:t}}function i(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function o(e){var r,n=di[e];if(n)return n;for(r=e-1;!di[r];)r--;for(n={line:(n=di[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return di[e]=n,n}function a(e,t){var r=o(e),n=o(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function s(e){pi<vi||(pi>vi&&(vi=pi,yi=[]),yi.push(e))}function u(){var e,t;return e=pi,fe()!==me&&(t=c())!==me&&fe()!==me?e=xe(t):(pi=e,e=me),e}function l(){var e,t,r,n,i,o,a,s;if(e=pi,(t=c())!==me){for(r=[],n=pi,(i=fe())!==me&&(o=ue())!==me&&(a=fe())!==me&&(s=c())!==me?n=i=[i,o,a,s]:(pi=n,n=me);n!==me;)r.push(n),n=pi,(i=fe())!==me&&(o=ue())!==me&&(a=fe())!==me&&(s=c())!==me?n=i=[i,o,a,s]:(pi=n,n=me);r!==me?e=t=be(t,r):(pi=e,e=me)}else pi=e,e=me;return e}function c(){var e,t,r,n,i,o,a,s;if(e=pi,(t=f())!==me){for(r=[],n=pi,(i=fe())!==me&&(o=Z())!==me&&(a=fe())!==me&&(s=f())!==me?n=i=[i,o,a,s]:(pi=n,n=me);n!==me;)r.push(n),n=pi,(i=fe())!==me&&(o=Z())!==me&&(a=fe())!==me&&(s=f())!==me?n=i=[i,o,a,s]:(pi=n,n=me);r!==me?e=t=we(t,r):(pi=e,e=me)}else pi=e,e=me;return e}function f(){var e,t,r,n,i,o,a,s;if(e=pi,(t=h())!==me){for(r=[],n=pi,(i=fe())!==me&&(o=X())!==me&&(a=fe())!==me&&(s=h())!==me?n=i=[i,o,a,s]:(pi=n,n=me);n!==me;)r.push(n),n=pi,(i=fe())!==me&&(o=X())!==me&&(a=fe())!==me&&(s=h())!==me?n=i=[i,o,a,s]:(pi=n,n=me);r!==me?e=t=we(t,r):(pi=e,e=me)}else pi=e,e=me;return e}function h(){var e,r,n,i,o;return e=pi,(r=q())===me&&(r=pi,33===t.charCodeAt(pi)?(n=Ie,pi++):(n=me,0===mi&&s(Pe)),n!==me?(i=pi,mi++,61===t.charCodeAt(pi)?(o=Te,pi++):(o=me,0===mi&&s(Ce)),mi--,o===me?i=void 0:(pi=i,i=me),i!==me?r=n=[n,i]:(pi=r,r=me)):(pi=r,r=me)),r!==me&&(n=fe())!==me&&(i=h())!==me?e=r=Me(i):(pi=e,e=me),e===me&&(e=function(){var e,t,r;return e=pi,(t=y())!==me&&fe()!==me?((r=function(){var e;return(e=function(){var e,t,r,n,i,o;if(pi,e=[],t=pi,(r=fe())!==me&&(n=p())!==me&&(i=fe())!==me&&(o=y())!==me?t=r=[r,n,i,o]:(pi=t,t=me),t!==me)for(;t!==me;)e.push(t),t=pi,(r=fe())!==me&&(n=p())!==me&&(i=fe())!==me&&(o=y())!==me?t=r=[r,n,i,o]:(pi=t,t=me);else e=me;return e!==me&&(e=Ee(e)),e}())===me&&(e=function(){var e,t,r,n;return e=pi,(t=v())!==me&&fe()!==me&&(r=le())!==me&&fe()!==me&&(n=l())!==me&&fe()!==me&&ce()!==me?(t=We(t,n),e=t):(pi=e,e=me),e===me&&(e=pi,(t=v())!==me&&fe()!==me&&(r=le())!==me&&fe()!==me&&(n=ce())!==me?(t=Je(t),e=t):(pi=e,e=me),e===me&&(e=pi,(t=v())!==me&&fe()!==me&&(r=T())!==me?(t=He(t,r),e=t):(pi=e,e=me))),e}())===me&&(e=function(){var e,t,r,n,i,o;return e=pi,(t=q())!==me&&fe()!==me&&(r=Q())!==me&&fe()!==me&&(n=y())!==me&&fe()!==me&&(i=X())!==me&&fe()!==me&&(o=y())!==me?(t=Ye(r,n,o),e=t):(pi=e,e=me),e===me&&(e=pi,(t=Q())!==me&&fe()!==me&&(r=y())!==me&&fe()!==me&&(n=X())!==me&&fe()!==me&&(i=y())!==me?(t=qe(t,r,i),e=t):(pi=e,e=me)),e}())===me&&(e=function(){var e,t,r,n;return e=pi,(t=U())!==me&&fe()!==me&&(r=q())!==me&&fe()!==me&&(n=y())!==me?(t=Ue(t,n),e=t):(pi=e,e=me),e===me&&(e=pi,(t=U())!==me&&fe()!==me&&(r=y())!==me?(t=Ge(t,r),e=t):(pi=e,e=me)),e}())===me&&(e=function(){var e,t,r,n;return e=pi,(t=d())!==me&&fe()!==me&&(r=M())!==me&&fe()!==me&&Y()!==me&&fe()!==me&&(n=S())!==me?(t=Ze(t,r,n),e=t):(pi=e,e=me),e===me&&(e=pi,(t=d())!==me&&fe()!==me&&(r=M())!==me?(t=Qe(t,r),e=t):(pi=e,e=me)),e}()),e}())===me&&(r=null),r!==me?(t=Se(t,r),e=t):(pi=e,e=me)):(pi=e,e=me),e}()),e}function p(){var e;return t.substr(pi,2)===Ae?(e=Ae,pi+=2):(e=me,0===mi&&s(De)),e===me&&(62===t.charCodeAt(pi)?(e=Ne,pi++):(e=me,0===mi&&s(Oe)),e===me&&(t.substr(pi,2)===Fe?(e=Fe,pi+=2):(e=me,0===mi&&s(Be)),e===me&&(t.substr(pi,2)===je?(e=je,pi+=2):(e=me,0===mi&&s(Re)),e===me&&(60===t.charCodeAt(pi)?(e=Ve,pi++):(e=me,0===mi&&s(Le)),e===me&&(61===t.charCodeAt(pi)?(e=Te,pi++):(e=me,0===mi&&s(Ce)),e===me&&(t.substr(pi,2)===ze?(e=ze,pi+=2):(e=me,0===mi&&s(ke)))))))),e}function d(){var e,t,r,n,i;return e=pi,t=pi,(r=q())!==me&&(n=fe())!==me&&(i=G())!==me?t=r=[r,n,i]:(pi=t,t=me),t!==me&&(t=Xe(t)),(e=t)===me&&(e=G()),e}function v(){var e,t,r,n,i;return e=pi,t=pi,(r=q())!==me&&(n=fe())!==me&&(i=k())!==me?t=r=[r,n,i]:(pi=t,t=me),t!==me&&(t=Xe(t)),(e=t)===me&&(e=k()),e}function y(){var e,t,r,n,i,o,a,s;if(e=pi,(t=g())!==me){for(r=[],n=pi,(i=fe())!==me&&(o=m())!==me&&(a=fe())!==me&&(s=g())!==me?n=i=[i,o,a,s]:(pi=n,n=me);n!==me;)r.push(n),n=pi,(i=fe())!==me&&(o=m())!==me&&(a=fe())!==me&&(s=g())!==me?n=i=[i,o,a,s]:(pi=n,n=me);r!==me?e=t=we(t,r):(pi=e,e=me)}else pi=e,e=me;return e}function m(){var e;return 43===t.charCodeAt(pi)?(e=Ke,pi++):(e=me,0===mi&&s($e)),e===me&&(45===t.charCodeAt(pi)?(e=et,pi++):(e=me,0===mi&&s(tt))),e}function g(){var e,t,r,n,i,o,a,s;if(e=pi,(t=x())!==me){for(r=[],n=pi,(i=fe())!==me&&(o=_())!==me&&(a=fe())!==me&&(s=x())!==me?n=i=[i,o,a,s]:(pi=n,n=me);n!==me;)r.push(n),n=pi,(i=fe())!==me&&(o=_())!==me&&(a=fe())!==me&&(s=x())!==me?n=i=[i,o,a,s]:(pi=n,n=me);r!==me?e=t=rt(t,r):(pi=e,e=me)}else pi=e,e=me;return e}function _(){var e;return 42===t.charCodeAt(pi)?(e=nt,pi++):(e=me,0===mi&&s(it)),e===me&&(47===t.charCodeAt(pi)?(e=ot,pi++):(e=me,0===mi&&s(at))),e}function x(){var e,t;return(e=function(){var e,t;return(e=S())===me&&(e=function(){var e,t,r,n;return e=pi,(t=function(){var e,t,r,n;return e=pi,(t=N())!==me&&(r=O())!==me&&(n=F())!==me?(t=Qt(t,r,n),e=t):(pi=e,e=me),e===me&&(e=pi,(t=N())!==me&&(r=O())!==me?(t=Wt(t,r),e=t):(pi=e,e=me),e===me&&(e=pi,(t=N())!==me&&(r=F())!==me?(t=Jt(t,r),e=t):(pi=e,e=me),e===me&&(e=pi,(t=N())!==me&&(t=Ht(t)),e=t))),e}())!==me?(r=pi,mi++,n=w(),mi--,n===me?r=void 0:(pi=r,r=me),r!==me?(t=Zt(t),e=t):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,t;return e=pi,(t=L())!==me&&(t=Et()),(e=t)===me&&(e=pi,(t=z())!==me&&(t=At()),e=t),e}())===me&&((t=V())!==me&&(t=St()),(e=t)===me)&&(e=function(){var e,t,r;return e=pi,(t=re())!==me&&fe()!==me&&(r=M())!==me?(t=Mt(r),e=t):(pi=e,e=me),e}())===me&&(e=function(){var e,t,r;return e=pi,(t=te())!==me&&fe()!==me&&(r=M())!==me?(t=Ct(r),e=t):(pi=e,e=me),e}()),e}())===me&&(e=function(){var e,t,r,n;return e=pi,(t=K())!==me&&fe()!==me&&le()!==me&&fe()!==me&&(r=function(){var e;return(e=function(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===bn?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(wn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=In(),e=r):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,r,n,i;return e=pi,t.substr(pi,5).toLowerCase()===Pn?(r=t.substr(pi,5),pi+=5):(r=me,0===mi&&s(Tn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=Cn(),e=r):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,r,n,i;return e=pi,t.substr(pi,3).toLowerCase()===Mn?(r=t.substr(pi,3),pi+=3):(r=me,0===mi&&s(Sn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=En(),e=r):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===An?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(Dn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=Nn(),e=r):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,r,n,i;return e=pi,t.substr(pi,6).toLowerCase()===On?(r=t.substr(pi,6),pi+=6):(r=me,0===mi&&s(Fn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=Bn(),e=r):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,r,n,i;return e=pi,t.substr(pi,6).toLowerCase()===jn?(r=t.substr(pi,6),pi+=6):(r=me,0===mi&&s(Rn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=Vn(),e=r):(pi=e,e=me)):(pi=e,e=me),e}()),e}())!==me&&fe()!==me&&W()!==me&&fe()!==me&&(n=c())!==me&&fe()!==me&&ce()!==me?(t=xt(r,n),e=t):(pi=e,e=me),e}())===me&&(e=function(){var e,t,r,n,i,o,a,s,u;return e=pi,(t=H())!==me&&fe()!==me&&le()!==me&&fe()!==me&&(r=c())!==me&&fe()!==me&&W()!==me&&fe()!==me&&(n=c())!==me&&fe()!==me?(i=pi,(o=J())!==me&&(a=fe())!==me&&(s=c())!==me&&(u=fe())!==me?i=o=[o,a,s,u]:(pi=i,i=me),i===me&&(i=null),i!==me&&(o=ce())!==me?(t=bt(r,n,i),e=t):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,t,r,n,i;return e=pi,(t=$())!==me&&fe()!==me&&le()!==me&&fe()!==me?((r=C())===me&&(r=null),r!==me&&fe()!==me&&(n=c())!==me&&fe()!==me&&W()!==me&&fe()!==me&&(i=c())!==me&&fe()!==me&&ce()!==me?(t=wt(r,n,i),e=t):(pi=e,e=me)):(pi=e,e=me),e===me&&(e=pi,(t=$())!==me&&fe()!==me&&le()!==me&&fe()!==me?((r=C())===me&&(r=null),r!==me&&fe()!==me&&(n=c())!==me&&fe()!==me&&ce()!==me?(t=It(r,n),e=t):(pi=e,e=me)):(pi=e,e=me)),e}())===me&&(e=function(){var e,t,r,n;return e=pi,(t=ee())!==me&&fe()!==me&&le()!==me&&fe()!==me&&(r=c())!==me&&fe()!==me&&k()!==me&&fe()!==me&&(n=c())!==me&&fe()!==me&&ce()!==me?(t=Pt(r,n),e=t):(pi=e,e=me),e}())===me&&(e=function(){var e,t,r;return e=pi,(t=pe())!==me&&fe()!==me&&le()!==me&&fe()!==me?((r=l())===me&&(r=null),r!==me&&fe()!==me&&ce()!==me?(t=Tt(t,r),e=t):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e;return(e=function(){var e,t,r,n,i,o;if(e=pi,(t=ne())!==me)if(fe()!==me)if((r=c())!==me)if(fe()!==me){for(n=[],i=A();i!==me;)n.push(i),i=A();n!==me&&(i=fe())!==me&&(o=ie())!==me?(t=kt(r,n),e=t):(pi=e,e=me)}else pi=e,e=me;else pi=e,e=me;else pi=e,e=me;else pi=e,e=me;if(e===me)if(e=pi,(t=ne())!==me)if(fe()!==me)if((r=c())!==me)if(fe()!==me){for(n=[],i=A();i!==me;)n.push(i),i=A();n!==me&&(i=fe())!==me&&(o=D())!==me&&fe()!==me&&ie()!==me?(t=Ut(r,n,o),e=t):(pi=e,e=me)}else pi=e,e=me;else pi=e,e=me;else pi=e,e=me;else pi=e,e=me;return e}())===me&&(e=function(){var e,t,r,n,i;if(e=pi,(t=ne())!==me)if(fe()!==me){for(r=[],n=E();n!==me;)r.push(n),n=E();r!==me&&(n=fe())!==me&&(i=ie())!==me?(t=Gt(r),e=t):(pi=e,e=me)}else pi=e,e=me;else pi=e,e=me;if(e===me)if(e=pi,(t=ne())!==me)if(fe()!==me){for(r=[],n=E();n!==me;)r.push(n),n=E();r!==me&&(n=fe())!==me&&(i=D())!==me&&fe()!==me&&ie()!==me?(t=Yt(r,i),e=t):(pi=e,e=me)}else pi=e,e=me;else pi=e,e=me;return e}()),e}())===me&&(e=function(){var e;return pi,(e=function(){var e;return pi,(e=function(){var e,t,r,n;if(e=pi,(t=w())!==me){for(r=[],n=P();n!==me;)r.push(n),n=P();r!==me?(t=ct(t,r),e=t):(pi=e,e=me)}else pi=e,e=me;return e}())!==me&&(e=lt(e)),e}())!==me&&(e=ut(e)),e}())===me&&(e=T())===me&&(e=pi,le()!==me&&fe()!==me&&(t=c())!==me&&fe()!==me&&ce()!==me?e=st(t):(pi=e,e=me)),e}function b(){var e,t,r,n;if(e=pi,(t=w())!==me){for(r=[],n=I();n!==me;)r.push(n),n=I();r!==me?e=t=ct(t,r):(pi=e,e=me)}else pi=e,e=me;return e}function w(){var e;return ft.test(t.charAt(pi))?(e=t.charAt(pi),pi++):(e=me,0===mi&&s(ht)),e}function I(){var e;return pt.test(t.charAt(pi))?(e=t.charAt(pi),pi++):(e=me,0===mi&&s(dt)),e}function P(){var e;return vt.test(t.charAt(pi))?(e=t.charAt(pi),pi++):(e=me,0===mi&&s(yt)),e}function T(){var e,r,n;return pi,e=pi,64===t.charCodeAt(pi)?(r=mt,pi++):(r=me,0===mi&&s(gt)),r!==me&&(n=b())!==me?e=r=[r,n]:(pi=e,e=me),e!==me&&(e=_t(e)),e}function C(){var e;return(e=function(){var e,r,n,i;return e=pi,t.substr(pi,7).toLowerCase()===hn?(r=t.substr(pi,7),pi+=7):(r=me,0===mi&&s(pn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=dn(),e=r):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,r,n,i;return e=pi,t.substr(pi,8).toLowerCase()===vn?(r=t.substr(pi,8),pi+=8):(r=me,0===mi&&s(yn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=mn(),e=r):(pi=e,e=me)):(pi=e,e=me),e}())===me&&(e=function(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===gn?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(_n)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?(r=xn(),e=r):(pi=e,e=me)):(pi=e,e=me),e}()),e}function M(){var e;return(e=S())===me&&(e=T()),e}function S(){var e,r,n,i,o;if(e=pi,39===t.charCodeAt(pi)?(r=Dt,pi++):(r=me,0===mi&&s(Nt)),r===me&&(t.substr(pi,2)===Ot?(r=Ot,pi+=2):(r=me,0===mi&&s(Ft))),r!==me){for(n=[],i=pi,t.substr(pi,2)===Bt?(o=Bt,pi+=2):(o=me,0===mi&&s(jt)),o!==me&&(o=Rt()),(i=o)===me&&(Vt.test(t.charAt(pi))?(i=t.charAt(pi),pi++):(i=me,0===mi&&s(Lt)));i!==me;)n.push(i),i=pi,t.substr(pi,2)===Bt?(o=Bt,pi+=2):(o=me,0===mi&&s(jt)),o!==me&&(o=Rt()),(i=o)===me&&(Vt.test(t.charAt(pi))?(i=t.charAt(pi),pi++):(i=me,0===mi&&s(Lt)));n!==me?(39===t.charCodeAt(pi)?(i=Dt,pi++):(i=me,0===mi&&s(Nt)),i!==me?e=r=zt(n):(pi=e,e=me)):(pi=e,e=me)}else pi=e,e=me;return e}function E(){var e,t,r;return e=pi,oe()!==me&&fe()!==me&&(t=c())!==me&&fe()!==me&&ae()!==me&&fe()!==me&&(r=c())!==me?e=qt(t,r):(pi=e,e=me),e}function A(){var e,t,r;return e=pi,oe()!==me&&fe()!==me&&(t=c())!==me&&fe()!==me&&ae()!==me&&fe()!==me&&(r=c())!==me?e=qt(t,r):(pi=e,e=me),e}function D(){var e,t;return e=pi,se()!==me&&fe()!==me&&(t=c())!==me?e=Xt(t):(pi=e,e=me),e}function N(){var e,r,n;return(e=B())===me&&(e=pi,45===t.charCodeAt(pi)?(r=et,pi++):(r=me,0===mi&&s(tt)),r===me&&(43===t.charCodeAt(pi)?(r=Ke,pi++):(r=me,0===mi&&s($e))),r!==me&&(n=B())!==me?e=r=Kt(r,n):(pi=e,e=me)),e}function O(){var e,r,n;return e=pi,46===t.charCodeAt(pi)?(r=$t,pi++):(r=me,0===mi&&s(er)),r!==me?((n=B())===me&&(n=null),n!==me?e=r=tr(n):(pi=e,e=me)):(pi=e,e=me),e}function F(){var e,t,r;return e=pi,(t=R())!==me&&(r=B())!==me?e=t=rr(t,r):(pi=e,e=me),e}function B(){var e,t;if(pi,e=[],(t=j())!==me)for(;t!==me;)e.push(t),t=j();else e=me;return e!==me&&(e=nr(e)),e}function j(){var e;return ir.test(t.charAt(pi))?(e=t.charAt(pi),pi++):(e=me,0===mi&&s(or)),e}function R(){var e,r,n;return e=pi,ar.test(t.charAt(pi))?(r=t.charAt(pi),pi++):(r=me,0===mi&&s(sr)),r!==me?(ur.test(t.charAt(pi))?(n=t.charAt(pi),pi++):(n=me,0===mi&&s(lr)),n===me&&(n=null),n!==me?e=r=cr(r,n):(pi=e,e=me)):(pi=e,e=me),e}function V(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===fr?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(hr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=[r,n]:(pi=e,e=me)):(pi=e,e=me),e}function L(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===pr?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(dr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=[r,n]:(pi=e,e=me)):(pi=e,e=me),e}function z(){var e,r,n,i;return e=pi,t.substr(pi,5).toLowerCase()===vr?(r=t.substr(pi,5),pi+=5):(r=me,0===mi&&s(yr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=[r,n]:(pi=e,e=me)):(pi=e,e=me),e}function k(){var e,r,n,i;return e=pi,t.substr(pi,2).toLowerCase()===mr?(r=t.substr(pi,2),pi+=2):(r=me,0===mi&&s(gr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=_r():(pi=e,e=me)):(pi=e,e=me),e}function U(){var e,r,n,i;return e=pi,t.substr(pi,2).toLowerCase()===xr?(r=t.substr(pi,2),pi+=2):(r=me,0===mi&&s(br)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=wr():(pi=e,e=me)):(pi=e,e=me),e}function G(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===Ir?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(Pr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Tr():(pi=e,e=me)):(pi=e,e=me),e}function Y(){var e,r,n,i;return e=pi,t.substr(pi,6).toLowerCase()===Cr?(r=t.substr(pi,6),pi+=6):(r=me,0===mi&&s(Mr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Sr():(pi=e,e=me)):(pi=e,e=me),e}function q(){var e,r,n,i;return e=pi,t.substr(pi,3).toLowerCase()===Er?(r=t.substr(pi,3),pi+=3):(r=me,0===mi&&s(Ar)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Dr():(pi=e,e=me)):(pi=e,e=me),e}function X(){var e,r,n,i;return e=pi,t.substr(pi,3).toLowerCase()===Nr?(r=t.substr(pi,3),pi+=3):(r=me,0===mi&&s(Or)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Fr():(pi=e,e=me)):(pi=e,e=me),e}function Z(){var e,r,n,i;return e=pi,t.substr(pi,2).toLowerCase()===Br?(r=t.substr(pi,2),pi+=2):(r=me,0===mi&&s(jr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Rr():(pi=e,e=me)):(pi=e,e=me),e}function Q(){var e,r,n,i;return e=pi,t.substr(pi,7).toLowerCase()===Vr?(r=t.substr(pi,7),pi+=7):(r=me,0===mi&&s(Lr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=zr():(pi=e,e=me)):(pi=e,e=me),e}function W(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===kr?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(Ur)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Gr():(pi=e,e=me)):(pi=e,e=me),e}function J(){var e,r,n,i;return e=pi,t.substr(pi,3).toLowerCase()===Yr?(r=t.substr(pi,3),pi+=3):(r=me,0===mi&&s(qr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Xr():(pi=e,e=me)):(pi=e,e=me),e}function H(){var e,r,n,i;return e=pi,t.substr(pi,9).toLowerCase()===Zr?(r=t.substr(pi,9),pi+=9):(r=me,0===mi&&s(Qr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Wr():(pi=e,e=me)):(pi=e,e=me),e}function K(){var e,r,n,i;return e=pi,t.substr(pi,7).toLowerCase()===Jr?(r=t.substr(pi,7),pi+=7):(r=me,0===mi&&s(Hr)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Kr():(pi=e,e=me)):(pi=e,e=me),e}function $(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===$r?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(en)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=tn():(pi=e,e=me)):(pi=e,e=me),e}function ee(){var e,r,n,i;return e=pi,t.substr(pi,8).toLowerCase()===rn?(r=t.substr(pi,8),pi+=8):(r=me,0===mi&&s(nn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=on():(pi=e,e=me)):(pi=e,e=me),e}function te(){var e,r,n,i;return e=pi,t.substr(pi,9).toLowerCase()===an?(r=t.substr(pi,9),pi+=9):(r=me,0===mi&&s(sn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=un():(pi=e,e=me)):(pi=e,e=me),e}function re(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===ln?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(cn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=fn():(pi=e,e=me)):(pi=e,e=me),e}function ne(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===Ln?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(zn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=kn():(pi=e,e=me)):(pi=e,e=me),e}function ie(){var e,r,n,i;return e=pi,t.substr(pi,3).toLowerCase()===Un?(r=t.substr(pi,3),pi+=3):(r=me,0===mi&&s(Gn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Yn():(pi=e,e=me)):(pi=e,e=me),e}function oe(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===qn?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(Xn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Zn():(pi=e,e=me)):(pi=e,e=me),e}function ae(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===Qn?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(Wn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=Jn():(pi=e,e=me)):(pi=e,e=me),e}function se(){var e,r,n,i;return e=pi,t.substr(pi,4).toLowerCase()===Hn?(r=t.substr(pi,4),pi+=4):(r=me,0===mi&&s(Kn)),r!==me?(n=pi,mi++,i=I(),mi--,i===me?n=void 0:(pi=n,n=me),n!==me?e=r=$n():(pi=e,e=me)):(pi=e,e=me),e}function ue(){var e;return 44===t.charCodeAt(pi)?(e=ei,pi++):(e=me,0===mi&&s(ti)),e}function le(){var e;return 40===t.charCodeAt(pi)?(e=ri,pi++):(e=me,0===mi&&s(ni)),e}function ce(){var e;return 41===t.charCodeAt(pi)?(e=ii,pi++):(e=me,0===mi&&s(oi)),e}function fe(){var e,t;for(e=[],t=he();t!==me;)e.push(t),t=he();return e}function he(){var e;return ai.test(t.charAt(pi))?(e=t.charAt(pi),pi++):(e=me,0===mi&&s(si)),e}function pe(){var e,r,n,i;if(e=pi,(r=b())!==me&&(r=lt(r)),(e=r)===me)if(e=pi,96===t.charCodeAt(pi)?(r=ui,pi++):(r=me,0===mi&&s(li)),r!==me){if(n=[],ci.test(t.charAt(pi))?(i=t.charAt(pi),pi++):(i=me,0===mi&&s(fi)),i!==me)for(;i!==me;)n.push(i),ci.test(t.charAt(pi))?(i=t.charAt(pi),pi++):(i=me,0===mi&&s(fi));else n=me;n!==me?(96===t.charCodeAt(pi)?(i=ui,pi++):(i=me,0===mi&&s(li)),i!==me?e=r=hi(n):(pi=e,e=me)):(pi=e,e=me)}else pi=e,e=me;return e}function de(e,t,r,n){var i={type:"binary_expr",operator:e,left:t,right:r};return void 0!==n&&(i.escape=n),i}function ve(e,t){for(var r=e,n=0;n<t.length;n++)r=de(t[n][1],r,t[n][3]);return r}r=void 0!==r?r:{};var ye,me={},ge={start:u},_e=u,xe=function(e){return e},be=function(e,t){var r={type:"expr_list"},n=function(e,t,r){return function(e,t){for(var r=[e],n=0;n<t.length;n++)r.push(t[n][3]);return r}(e,t)}(e,t);return r.value=n,r},we=function(e,t){return ve(e,t)},Ie="!",Pe=n("!",!1),Te="=",Ce=n("=",!1),Me=function(e){return function(e,t){return{type:"unary_expr",operator:e,expr:t}}("NOT",e)},Se=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?ve(e,t.tail):de(t.op,e,t.right,t.escape)},Ee=function(e){return{type:"arithmetic",tail:e}},Ae=">=",De=n(">=",!1),Ne=">",Oe=n(">",!1),Fe="<=",Be=n("<=",!1),je="<>",Re=n("<>",!1),Ve="<",Le=n("<",!1),ze="!=",ke=n("!=",!1),Ue=function(e,t){return{op:e+"NOT",right:t}},Ge=function(e,t){return{op:e,right:t}},Ye=function(e,t,r){return{op:"NOT"+e,right:{type:"expr_list",value:[t,r]}}},qe=function(e,t,r){return{op:e,right:{type:"expr_list",value:[t,r]}}},Xe=function(e){return e[0]+" "+e[2]},Ze=function(e,t,r){return{op:e,right:t,escape:r.value}},Qe=function(e,t){return{op:e,right:t,escape:""}},We=function(e,t){return{op:e,right:t}},Je=function(e){return{op:e,right:{type:"expr_list",value:[]}}},He=function(e,t){return{op:e,right:t}},Ke="+",$e=n("+",!1),et="-",tt=n("-",!1),rt=function(e,t){return ve(e,t)},nt="*",it=n("*",!1),ot="/",at=n("/",!1),st=function(e){return e.paren=!0,e},ut=function(e){return{type:"column_ref",table:"",column:e}},lt=function(e){return e},ct=function(e,t){return e+t.join("")},ft=/^[A-Za-z_\x80-\uFFFF]/,ht=i([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),pt=/^[A-Za-z0-9_]/,dt=i([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),vt=/^[A-Za-z0-9_.\x80-\uFFFF]/,yt=i([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),mt="@",gt=n("@",!1),_t=function(e){return{type:"param",value:e[1]}},xt=function(e,t){return{type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:e},t]}}},bt=function(e,t,r){return{type:"function",name:"substring",args:{type:"expr_list",value:r?[e,t,r[2]]:[e,t]}}},wt=function(e,t,r){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==e?"BOTH":e},t,r]}}},It=function(e,t){return{type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==e?"BOTH":e},t]}}},Pt=function(e,t){return{type:"function",name:"position",args:{type:"expr_list",value:[e,t]}}},Tt=function(e,t){return{type:"function",name:e,args:t||{type:"expr_list",value:[]}}},Ct=function(e){return{type:"timestamp",value:e.value}},Mt=function(e){return{type:"date",value:e.value}},St=function(){return{type:"null",value:null}},Et=function(){return{type:"bool",value:!0}},At=function(){return{type:"bool",value:!1}},Dt="'",Nt=n("'",!1),Ot="N'",Ft=n("N'",!1),Bt="''",jt=n("''",!1),Rt=function(){return"'"},Vt=/^[^']/,Lt=i(["'"],!0,!1),zt=function(e){return{type:"string",value:e.join("")}},kt=function(e,t){return{type:"case_expression",format:"simple",operand:e,clauses:t,else:null}},Ut=function(e,t,r){return{type:"case_expression",format:"simple",operand:e,clauses:t,else:r.value}},Gt=function(e){return{type:"case_expression",format:"searched",clauses:e,else:null}},Yt=function(e,t){return{type:"case_expression",format:"searched",clauses:e,else:t.value}},qt=function(e,t){return{type:"when_clause",operand:e,value:t}},Xt=function(e){return{type:"else_clause",value:e}},Zt=function(e){return{type:"number",value:e}},Qt=function(e,t,r){return parseFloat(e+t+r)},Wt=function(e,t){return parseFloat(e+t)},Jt=function(e,t){return parseFloat(e+t)},Ht=function(e){return parseFloat(e)},Kt=function(e,t){return e[0]+t},$t=".",er=n(".",!1),tr=function(e){return"."+(null!=e?e:"")},rr=function(e,t){return e+t},nr=function(e){return e.join("")},ir=/^[0-9]/,or=i([["0","9"]],!1,!1),ar=/^[eE]/,sr=i(["e","E"],!1,!1),ur=/^[+\-]/,lr=i(["+","-"],!1,!1),cr=function(e,t){return"e"+(null===t?"":t)},fr="null",hr=n("NULL",!0),pr="true",dr=n("TRUE",!0),vr="false",yr=n("FALSE",!0),mr="in",gr=n("IN",!0),_r=function(){return"IN"},xr="is",br=n("IS",!0),wr=function(){return"IS"},Ir="like",Pr=n("LIKE",!0),Tr=function(){return"LIKE"},Cr="escape",Mr=n("ESCAPE",!0),Sr=function(){return"ESCAPE"},Er="not",Ar=n("NOT",!0),Dr=function(){return"NOT"},Nr="and",Or=n("AND",!0),Fr=function(){return"AND"},Br="or",jr=n("OR",!0),Rr=function(){return"OR"},Vr="between",Lr=n("BETWEEN",!0),zr=function(){return"BETWEEN"},kr="from",Ur=n("FROM",!0),Gr=function(){return"FROM"},Yr="for",qr=n("FOR",!0),Xr=function(){return"FOR"},Zr="substring",Qr=n("SUBSTRING",!0),Wr=function(){return"SUBSTRING"},Jr="extract",Hr=n("EXTRACT",!0),Kr=function(){return"EXTRACT"},$r="trim",en=n("TRIM",!0),tn=function(){return"TRIM"},rn="position",nn=n("POSITION",!0),on=function(){return"POSITION"},an="timestamp",sn=n("TIMESTAMP",!0),un=function(){return"TIMESTAMP"},ln="date",cn=n("DATE",!0),fn=function(){return"DATE"},hn="leading",pn=n("LEADING",!0),dn=function(){return"LEADING"},vn="trailing",yn=n("TRAILING",!0),mn=function(){return"TRAILING"},gn="both",_n=n("BOTH",!0),xn=function(){return"BOTH"},bn="year",wn=n("YEAR",!0),In=function(){return"YEAR"},Pn="month",Tn=n("MONTH",!0),Cn=function(){return"MONTH"},Mn="day",Sn=n("DAY",!0),En=function(){return"DAY"},An="hour",Dn=n("HOUR",!0),Nn=function(){return"HOUR"},On="minute",Fn=n("MINUTE",!0),Bn=function(){return"MINUTE"},jn="second",Rn=n("SECOND",!0),Vn=function(){return"SECOND"},Ln="case",zn=n("CASE",!0),kn=function(){return"CASE"},Un="end",Gn=n("END",!0),Yn=function(){return"END"},qn="when",Xn=n("WHEN",!0),Zn=function(){return"WHEN"},Qn="then",Wn=n("THEN",!0),Jn=function(){return"THEN"},Hn="else",Kn=n("ELSE",!0),$n=function(){return"ELSE"},ei=",",ti=n(",",!1),ri="(",ni=n("(",!1),ii=")",oi=n(")",!1),ai=/^[ \t\n\r]/,si=i([" ","\t","\n","\r"],!1,!1),ui="`",li=n("`",!1),ci=/^[^`]/,fi=i(["`"],!0,!1),hi=function(e){return e.join("")},pi=0,di=[{line:1,column:1}],vi=0,yi=[],mi=0;if("startRule"in r){if(!(r.startRule in ge))throw new Error("Can't start parsing from rule \""+r.startRule+'".');_e=ge[r.startRule]}if((ye=_e())!==me&&pi===t.length)return ye;throw ye!==me&&pi<t.length&&s({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(yi,vi<t.length?t.charAt(vi):null,vi<t.length?a(vi,vi+1):a(vi,vi))}}}.apply(null,[]))||(e.exports=n)},1271:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(341),r(348),r(337)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.typeKebabDictionary=o({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});var s=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return r(i,e),n([a.property({type:t.typeKebabDictionary.apiValues,readOnly:!0,nonNullable:!0,json:{type:t.typeKebabDictionary.jsonValues,read:!1,write:t.typeKebabDictionary.write}})],i.prototype,"type",void 0),n([a.subclass("esri.renderers.support.pointCloud.PointSizeAlgorithm")],i)}(a.declared(i));t.PointSizeAlgorithm=s,t.default=s}.apply(null,n))||(e.exports=i)},1273:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(766),r(456),r(838),r(900)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.TileInfoView=r,t.TileKey=n,t.TileQueue=i,t.TileStrategy=o}.apply(null,n))||(e.exports=i)},1274:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344)],void 0===(i=function(e,t,r){function n(e){return void 0===e&&(e=t.UP),[e[0],e[1],e[2],e[3]]}function i(e,t,i){return void 0===i&&(i=n()),r.vec3d.set(t,i),i[3]=-r.vec3d.dot(t,e),i}function o(e,t,o,a){return void 0===a&&(a=n()),r.vec3d.cross(t,e,u),i(o,r.vec3d.normalize(u),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.create=n,t.fromValues=function(e,t,r,i,o){return void 0===o&&(o=n()),o[0]=e,o[1]=t,o[2]=r,o[3]=i,o},t.fromNormalAndOffset=function(e,t,i){return void 0===i&&(i=n()),r.vec3d.set(e,i),i[3]=t,i},t.fromPositionAndNormal=i,t.projectVector=function(e,t,n){return void 0===n&&(n=t),r.vec3d.cross(e,r.vec3d.cross(t,e,s),n)},t.distance=function(e,t){return r.vec3d.dot(e,t)+e[3]},t.fromPoints=function(e,t,i,u){return void 0===u&&(u=n()),o(r.vec3d.subtract(e,t,a),r.vec3d.subtract(i,t,s),e,u)},t.set=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.negate=function(e,t){return void 0===t&&(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},t.fromVectorsAndPoint=o,t.intersectRay=function(e,t,n,i){var o=r.vec3d.dot(e,n);if(0===o)return!1;var a=-(r.vec3d.dot(e,t)+e[3])/o;return!(a<0||(r.vec3d.add(t,r.vec3d.scale(n,a,i),i),0))},t.UP=[0,0,1,0];var a=r.vec3d.create(),s=r.vec3d.create(),u=r.vec3d.create()}.apply(null,n))||(e.exports=i)},1275:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344),r(1007)],void 0===(i=function(e,t,r,n){function i(e,t,n){var i=r.vec2d.dist(e,t),o=r.vec2d.dist(t,n),a=r.vec2d.dist(n,e),s=(i+o+a)/2;return Math.sqrt(s*(s-i)*(s-o)*(s-a))}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(e,t,n){return void 0===e&&(e=r.vec3d.create()),void 0===t&&(t=r.vec3d.create()),void 0===n&&(n=r.vec3d.create()),{p0:e,p1:t,p2:n}},t.distance2=function(e,t){var i=e.p0,p=e.p1,d=e.p2,v=r.vec3d.subtract(p,i,o),y=r.vec3d.subtract(d,p,a),m=r.vec3d.subtract(i,d,s),g=r.vec3d.subtract(t,i,u),_=r.vec3d.subtract(t,p,l),x=r.vec3d.subtract(t,d,c),b=r.vec3d.cross(v,m),w=r.vec3d.dot(r.vec3d.cross(v,b,f),g),I=r.vec3d.dot(r.vec3d.cross(y,b,f),_),P=r.vec3d.dot(r.vec3d.cross(m,b,f),x);if(w>0&&I>0&&P>0){var T=r.vec3d.dot(b,g);return T*T/r.vec3d.dot(b,b)}var C=n.distance2(n.fromOriginAndVector(i,v,h),t),M=n.distance2(n.fromOriginAndVector(p,y,h),t),S=n.distance2(n.fromOriginAndVector(d,m,h),t);return Math.min(C,M,S)},t.areaPoints2d=i,t.area2d=function(e){return i(e.p0,e.p1,e.p2)};var o=r.vec3d.create(),a=r.vec3d.create(),s=r.vec3d.create(),u=r.vec3d.create(),l=r.vec3d.create(),c=r.vec3d.create(),f=r.vec3d.create(),h=n.create()}.apply(null,n))||(e.exports=i)},1277:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e,t,r,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=e,this.y=t,this.width=r,this.height=n}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.width<=0||this.height<=0},enumerable:!0,configurable:!0}),e}()}.apply(null,n))||(e.exports=i)},1278:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344),r(785),r(388)],void 0===(i=function(e,t,r,n,i){function o(e,t,i){var o,a,s,u=r.vec3d.create(),l=e[3],h=Math.ceil(Math.log(l)*Math.LOG2E/f),p=Math.pow(2,h*f+c);if(i.isGeographic){var d=p/n.earthRadius*180/Math.PI;a=Math.round(e[1]/d);var v=Math.max(-90,Math.min(90,a*d)),y=d/Math.cos((Math.abs(v)-d/2)/180*Math.PI),m=(o=Math.round(e[0]/y))*y;u[0]=m,u[1]=v}else o=Math.round(e[0]/p),a=Math.round(e[1]/p),u[0]=o*p,u[1]=a*p;var g=e[2]+t;return s=Math.round(g/p),u[2]=s*p,{center:u,id:h+"_"+o+"_"+a+"_"+s}}Object.defineProperty(t,"__esModule",{value:!0});var a=1e3,s=new Float64Array(3*a),u=r.vec3d.create(),l=r.mat4d.create();t.computeGlobalTransformation=function(e,t,n,a){var s=o(e,t,n).center,u=r.mat4d.create();return i.computeLinearTransformation(n,s,u,a),u},t.reprojectPoints=function(e,t,n,o,c,f,h){var p=e.data,d=e.offsetIdx,v=e.strideIdx;r.mat4d.inverse(n,l),r.vec3d.set(t,u),u[2]+=o;var y=[0,0,0],m=p.length/v;i.vectorToVector(u,c,y,f);for(var g=0;g<m;g+=a){for(var _=Math.min(a,m-g),x=0;x<_;x++){var b=d+v*(g+x);s[3*x]=p[b]+y[0],s[3*x+1]=p[b+1]+y[1],s[3*x+2]=p[b+2]+y[2]}for(i.bufferToBuffer(s,f,0,s,h,0,_),x=0;x<_;x++){var w=s[3*x],I=s[3*x+1],P=s[3*x+2],T=d+v*(g+x);p[T]=l[0]*w+l[4]*I+l[8]*P+l[12],p[T+1]=l[1]*w+l[5]*I+l[9]*P+l[13],p[T+2]=l[2]*w+l[6]*I+l[10]*P+l[14]}}},t.createOrigin=function(e,t,r,n){var a=o(e,t,r),s=a.center,u=a.id;return i.vectorToVector(s,r,s,n),{vec3:s,id:u}};var c=1,f=5-c}.apply(null,n))||(e.exports=i)},1279:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(592),r(342),r(1280),r(703),r(1055)],void 0===(i=function(e,t,r,n,i,o,a){function s(e){return e?t.invalidClauseCache.has(e)?t.invalidClauseCache.use(e):t.whereClausesCache.has(e)?t.whereClausesCache.get(e):(r=a.create(e),t.whereClausesCache.set(e,r),r):null;var r}function u(e,t,r,i){void 0===i&&(i=!0);for(var o=[],a=0,f=t;a<f.length;a++){var h=f[a];if("*"!==h&&!e.has(h))if(i){var p=l(h);try{var d=s(p);if(!d.isStandardized())throw new n(c,"expression is not standard",{clause:d});u(e,d.getFields(),"expression contains missing fields")}catch(e){var v=e&&e.details;if(v&&v.clause)throw e;v&&v.missingFields?Array.prototype.push.apply(o,v.missingFields):o.push(h)}}else o.push(h)}if(o.length)throw new n(c,r,{missingFields:o})}function l(e){return e.split(f)[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.invalidClauseCache=new i(500),t.whereClausesCache=new o(50);var c="feature-store:unsupported-query",f=" as ",h=new r.default(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);t.validateWhere=function(e,r){if(!r)return!0;var i;try{i=a.create(r),t.whereClausesCache.set(r,i)}catch(e){throw t.invalidClauseCache.insert(r,null),new n(c,"invalid SQL expression",{where:r})}if(!i.isStandardized())throw new n(c,"where clause is not standard",{where:r});return u(e,i.getFields(),"where clause contains missing fields"),!0},t.validateHaving=function(e,r,i){if(!r)return!0;var o;try{o=a.create(r),t.whereClausesCache.set(r,o)}catch(e){throw t.invalidClauseCache.insert(r,null),new n(c,"invalid SQL expression",{having:r})}if(!o.isAggregate())throw new n(c,"having does not contain a valid aggregate function",{having:r});var s=o.getFields();if(u(e,s,"having contains missing fields"),!o.getExpressions().every(function(t){var r=t.aggregateType,n=t.field,o=e.has(n)&&e.get(n).name;return i.some(function(t){var n=t.onStatisticField,i=t.statisticType,a=n.toLowerCase().trim();return(e.has(a)&&e.get(a).name)===o&&i.toLowerCase().trim()===r})}))throw new n(c,"expressions in having should also exist in outStatistics",{having:r});return!0},t.getWhereClause=s,t.validateFields=u,t.getExpressionFromFieldName=l,t.getAliasFromFieldName=function(e){return e.split(f)[1]},t.hasInvalidFieldType=function(e,t){var r=!1;if(-1!==s(e).getFields().indexOf(e)){var n=t.get(e);r=!h.has(n.type)}return r}}.apply(null,n))||(e.exports=i)},1280:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e){if(this._cache={},this._lruQueue=[],e<=0)throw new Error("LRU cache size must be bigger than zero!");this._maxSize=e}return e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.insert=function(e,t){null===this.use(e)?(this._collect(),this._cache[e]=t,this._lruQueue.unshift(e)):this._cache[e]=t},e.prototype.use=function(e){var t=this._cache[e];return t?(this._lruQueue.splice(this._lruQueue.indexOf(e),1),this._lruQueue.unshift(e),t):null},e.prototype.print=function(){for(var e=0,t=this._lruQueue;e<t.length;e++){var r=t[e];console.log("key: "+r+", value: "+this._cache[r])}},e.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var e=this._lruQueue.pop(),t=this._cache[e];t&&t.release&&t.release(),delete this._cache[e]}},e}()}.apply(null,n))||(e.exports=i)},1290:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e){this._array=[],e<=0&&console.error("strideInBytes must be positive!"),this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.array.length=0},e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,n){return 255&e|(255&t)<<8|(255&r)<<16|n<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()}.apply(null,n))||(e.exports=i)},1291:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(380),r(1519),r(360),r(1520)],void 0===(i=function(e,t,n,i,o,a){function s(e,t,r,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),null===n){var s=a.cacheKey(t,r);void 0!==f[s]?n=f[s]:(null===(n=u(t,r,null))&&(n=new a),f[s]=n)}return l._project(e,t,r instanceof o||!1===i?r:new o(r),n,i)}function u(e,t,r){void 0===r&&(r=null);var n=l._getTransformation(e,t,r);return null!==n?a.fromGE(n):null}Object.defineProperty(t,"__esModule",{value:!0});var l=null;t.isLoaded=function(){return!!l&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var c=null;t.load=function(){if(c)return c.promise;c=new n;var e=i.load();return r.e(19).then(function(){var t=[r(1321)];(function(t){l=t,e.then(function(){l._enableProjection(i),c.resolve()},function(e){c.reject(e)})}).apply(null,t)}).catch(r.oe),c.promise},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:s(e,e[0].spatialReference,t,r):s([e],e.spatialReference,t,r)[0]};var f={};t.projectMany=s,t.getTransformation=u,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=l._getTransformationBySuitability(e,t,r);if(null!==n){for(var i=[],o=0,s=n;o<s.length;o++){var u=s[o];i.push(a.fromGE(u))}return i}return[]}}.apply(null,n))||(e.exports=i)},1312:function(e,t,r){var n,i;n=[r(386),r(352),r(370),r(677)],void 0===(i=function(e,t,r,n){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return"function"==typeof this[t.g]?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if("object"==typeof e){for(var r in e)e.hasOwnProperty(r)&&"_watchCallbacks"!=r&&this.set(r,e[r]);return this}var i,o=this._getAttrNames(e),a=this._get(e,o),s=this[o.s];if("function"==typeof s?i=s.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t,this._watchCallbacks){var u=this;n(i,function(){u._watchCallbacks(e,a,t)})}return this},_changeAttrValue:function(e,t){var r=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,r,t),this},watch:function(e,t){var n=this._watchCallbacks;if(!n){var i=this;n=this._watchCallbacks=function(e,t,r,o){var a=function(n){if(n)for(var o=0,a=(n=n.slice()).length;o<a;o++)n[o].call(i,e,t,r)};a(n["_"+e]),o||a(n["*"])}}t||"function"!=typeof e?e="_"+e:(t=e,e="*");var o=n[e];"object"!=typeof o&&(o=n[e]=[]),o.push(t);var a={};return a.unwatch=a.remove=function(){var e=r.indexOf(o,t);e>-1&&o.splice(e,1)},a}})}.apply(null,n))||(e.exports=i)},1314:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities={supportsAttachments:!1,supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1}}.apply(null,n))||(e.exports=i)},1315:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(338),r(336),r(339),r(337),r(1040),r(426),r(1486)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-class-breaks",r.field=null,r.legendOptions=null,r.fieldTransformType=null,r.colorClassBreakInfos=null,r}var c;return n(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:o.clone(this.colorClassBreakInfos),legendOptions:o.clone(this.legendOptions)}))},i([a.enumeration.serializable()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],t.prototype,"type",void 0),i([a.property({json:{write:!0},type:String})],t.prototype,"field",void 0),i([a.property({type:u.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),i([a.property({type:s.fieldTransformTypeKebabDict.apiValues,json:{type:s.fieldTransformTypeKebabDict.jsonValues,read:s.fieldTransformTypeKebabDict.read,write:s.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),i([a.property({type:[l.default],json:{write:!0}})],t.prototype,"colorClassBreakInfos",void 0),c=i([a.subclass("esri.renderers.PointCloudClassBreaksRenderer")],t)}(a.declared(s))}.apply(null,n))||(e.exports=i)},1316:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(337),r(1271)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="fixed-size",t.size=0,t.useRealWorldSymbolSizes=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})},n([i.enumeration.serializable()({pointCloudFixedSizeAlgorithm:"fixed-size"})],t.prototype,"type",void 0),n([i.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"size",void 0),n([i.property({type:Boolean,json:{write:!0}})],t.prototype,"useRealWorldSymbolSizes",void 0),o=n([i.subclass("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],t)}(i.declared(o.default));t.PointSizeFixedSizeAlgorithm=a,t.default=a}.apply(null,n))||(e.exports=i)},1317:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(337),r(1271)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="splat",t.scaleFactor=1,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({scaleFactor:this.scaleFactor})},n([i.enumeration.serializable()({pointCloudSplatAlgorithm:"splat"})],t.prototype,"type",void 0),n([i.property({type:Number,value:1,nonNullable:!0,json:{write:!0}})],t.prototype,"scaleFactor",void 0),o=n([i.subclass("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],t)}(i.declared(o.default));t.PointSizeSplatAlgorithm=a,t.default=a}.apply(null,n))||(e.exports=i)},1318:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(338),r(336),r(339),r(337),r(1040),r(426),r(1487)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-stretch",r.field=null,r.legendOptions=null,r.fieldTransformType=null,r.stops=null,r}var c;return n(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:o.clone(this.field),fieldTransformType:o.clone(this.fieldTransformType),stops:o.clone(this.stops),legendOptions:o.clone(this.legendOptions)}))},i([a.enumeration.serializable()({pointCloudStretchRenderer:"point-cloud-stretch"})],t.prototype,"type",void 0),i([a.property({json:{write:!0},type:String})],t.prototype,"field",void 0),i([a.property({type:u.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),i([a.property({type:s.fieldTransformTypeKebabDict.apiValues,json:{type:s.fieldTransformTypeKebabDict.jsonValues,read:s.fieldTransformTypeKebabDict.read,write:s.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),i([a.property({type:[l.default],json:{write:!0}})],t.prototype,"stops",void 0),c=i([a.subclass("esri.renderers.PointCloudStretchRenderer")],t)}(a.declared(s))}.apply(null,n))||(e.exports=i)},1319:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(338),r(336),r(339),r(337),r(1040),r(426),r(1488)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l){return function(e){function t(t){var r=e.call(this)||this;return r.type="point-cloud-unique-value",r.field=null,r.fieldTransformType=null,r.colorUniqueValueInfos=null,r.legendOptions=null,r}var c;return n(t,e),c=t,t.prototype.clone=function(){return new c(r({},this.cloneProperties(),{field:o.clone(this.field),fieldTransformType:o.clone(this.fieldTransformType),colorUniqueValueInfos:o.clone(this.colorUniqueValueInfos),legendOptions:o.clone(this.legendOptions)}))},i([a.enumeration.serializable()({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],t.prototype,"type",void 0),i([a.property({json:{write:!0},type:String})],t.prototype,"field",void 0),i([a.property({type:s.fieldTransformTypeKebabDict.apiValues,json:{type:s.fieldTransformTypeKebabDict.jsonValues,read:s.fieldTransformTypeKebabDict.read,write:s.fieldTransformTypeKebabDict.write}})],t.prototype,"fieldTransformType",void 0),i([a.property({type:[l.default],json:{write:!0}})],t.prototype,"colorUniqueValueInfos",void 0),i([a.property({type:u.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),c=i([a.subclass("esri.renderers.PointCloudUniqueValueRenderer")],t)}(a.declared(s))}.apply(null,n))||(e.exports=i)},1380:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e,t){this.layerExtent=4096,this._features=[],this.layer=e,this.zoom=t,this._filter=e.getFeatureFilter()}return e.prototype.pushFeature=function(e){this._filter.filter(e)&&this._features.push(e)},e.prototype.hasFeatures=function(){return this._features.length>0},e.prototype.processFeatures=function(e,t){},e.prototype.assignBufferInfo=function(e){},e}()}.apply(null,n))||(e.exports=i)},1381:function(e,t,r){var n,i;n=[r(352),r(386),r(1312)],void 0===(i=function(e,t,r){e.getObject("string",!0,dojox);var n=t("dojox.string.BidiEngine",r,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(e,t,r){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(function(e,t,r){I=[],T=[];for(var n=0;n<r;n++)e[n]=n,t[n]=n,I[n]=n}(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(t,r))return e;t=this.inputFormat,r=this.outputFormat;var n=e,a=C,h=_(t.charAt(1)),p=_(r.charAt(1)),d=("I"===t.charAt(0)?"L":t.charAt(0))+h,M=("I"===r.charAt(0)?"L":r.charAt(0))+p,S=t.charAt(2)+r.charAt(2);a.defInFormat=d,a.defOutFormat=M,a.defSwap=S;var D=function e(t,r,n,a,u){var l=function(e,t,r){void 0===t.inFormat&&(t.inFormat=r.defInFormat);void 0===t.outFormat&&(t.outFormat=r.defOutFormat);void 0===t.swap&&(t.swap=r.defSwap);if(t.inFormat===t.outFormat)return t;var n,o=t.inFormat.substring(0,1),a=t.inFormat.substring(1,4),s=t.outFormat.substring(0,1),u=t.outFormat.substring(1,4);"C"===a.charAt(0)&&(n=i(e),a="ltr"===n||"rtl"===n?n.toUpperCase():"L"===t.inFormat.charAt(2)?"LTR":"RTL",t.inFormat=o+a);"C"===u.charAt(0)&&("rtl"===(n=i(e))?u="RTL":"ltr"===n?(n=function(e){var t=e.split("");return t.reverse(),i(t.join(""))}(e),u=n.toUpperCase()):u="L"===t.outFormat.charAt(2)?"LTR":"RTL",t.outFormat=s+u);return t}(t,{inFormat:r,outFormat:n,swap:a},u);if(l.inFormat===l.outFormat)return t;r=l.inFormat;n=l.outFormat;a=l.swap;var c=r.substring(0,1),f=r.substring(1,4),h=n.substring(0,1),p=n.substring(1,4);u.inFormat=r;u.outFormat=n;u.swap=a;if("L"===c&&"VLTR"===n){if("LTR"===f)return u.dir=E,o(t,u);if("RTL"===f)return u.dir=A,o(t,u)}if("V"===c&&"V"===h)return u.dir="RTL"===f?A:E,s(t,u);if("L"===c&&"VRTL"===n)return"LTR"===f?(u.dir=E,t=o(t,u)):(u.dir=A,t=o(t,u)),s(t);if("VLTR"===r&&"LLTR"===n)return u.dir=E,o(t,u);if("V"===c&&"L"===h&&f!==p)return t=s(t),"RTL"===f?e(t,"LLTR","VLTR",a,u):e(t,"LRTL","VRTL",a,u);if("VRTL"===r&&"LRTL"===n)return e(t,"LRTL","VRTL",a,u);if("L"===c&&"L"===h){var d=u.swap;return u.swap=d.substr(0,1)+"N","RTL"===f?(u.dir=A,t=o(t,u),u.swap="N"+d.substr(1,2),u.dir=E,t=o(t,u)):(u.dir=E,t=o(t,u),u.swap="N"+d.substr(1,2),t=e(t,"VLTR","LRTL",u.swap,u)),t}}(e,d,M,S,a),N=!1;return"R"===r.charAt(1)?N=!0:"C"!==r.charAt(1)&&"D"!==r.charAt(1)||(N=this.checkContextual(D)),this.sourceToTarget=I,this.targetToSource=function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[e[r]]=r;return t}(this.sourceToTarget),P=this.targetToSource,n=t.charAt(3)===r.charAt(3)?D:"S"===r.charAt(3)?function(e,t,r){if(0===t.length)return;void 0===e&&(e=!0);void 0===r&&(r=!0);var n=(t=String(t)).split(""),i=0,o=1,a=n.length;e||(i=n.length-1,o=-1,a=1);for(var s=function(e,t,r,n,i){for(var o=0,a=[],s=0,u=t;u*r<n;u+=r)if(l(e[u])||g(e[u])){if("ل"===e[u]&&f(e,u+r,r,n)){e[u]=b(e[u+r],0===o?B:j),x(e,u+=r,r,n),i&&(a[s]=u,s++),o=0;continue}var h=e[u];1===o?e[u]=c(e,u+r,r,n)?y(e[u]):m(e[u],L):!0===c(e,u+r,r,n)?e[u]=m(e[u],k):e[u]=m(e[u],V),g(h)||(o=1),!0===v(h)&&(o=0)}else o=0;return a}(n,i,o,a,r),h="",p=0;p<n.length;p++)r&&u(s,s.length,p)>-1?(w(P,p,!e,-1),I.splice(p,1)):h+=n[p];return h}(N,D,!0):function(e,t,r){if(0===e.length)return;void 0===r&&(r=!0);void 0===t&&(t=!0);e=String(e);var n="",i=[];i=e.split("");for(var o=0;o<e.length;o++){var a=!1;if(i[o]>="ﹰ"&&i[o]<"\ufeff"){var s=e.charCodeAt(o);i[o]>="ﻵ"&&i[o]<="ﻼ"?(t?(o>0&&r&&" "===i[o-1]?n=n.substring(0,n.length-1)+"ل":(n+="ل",a=!0),n+=F[(s-65269)/2]):(n+=F[(s-65269)/2],n+="ل",o+1<e.length&&r&&" "===i[o+1]?o++:a=!0),a&&(w(P,o,!0,1),I.splice(o,0,I[o]))):n+=G[s-65136]}else n+=i[o]}return n}(D,N,!0),this.sourceToTarget=I,this.targetToSource=P,this.levels=T,n},_inputFormatSetter:function(e){if(!D.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e},_outputFormatSetter:function(e){if(!D.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e},checkParameters:function(e,t){return e?this.set("inputFormat",e):e=this.inputFormat,t?this.set("outputFormat",t):t=this.outputFormat,e!==t},checkContextual:function(e){var t=i(e);if("ltr"!==t&&"rtl"!==t){try{t=document.dir.toLowerCase()}catch(e){}"ltr"!==t&&"rtl"!==t&&(t="ltr")}return t},hasBidiChar:function(e){return N.test(e)}});function i(e){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e);return t?t[0]<="z"?"ltr":"rtl":""}function o(e,t){var r=e.split(""),n=[];return a(r,n,t),function(e,t,r){if(0===r.hiLevel||r.swap.substr(0,1)===r.swap.substr(1,2))return;for(var n=0;n<e.length;n++)1===t[n]&&(e[n]=d(e[n]))}(r,n,t),h(2,r,n,t),h(1,r,n,t),T=n,r.join("")}function a(e,t,r){var n,i,o,a=e.length,s=r.dir?Z:X,u=null,l=null,c=null,f=0,h=null,d=-1,v=null,y=null,m=[],g=[];for(r.hiLevel=r.dir,r.lastArabic=!1,r.hasUbatAl=!1,r.hasUbatB=!1,r.hasUbatS=!1,v=0;v<a;v++)m[v]=(n=e[v],i=void 0,o=void 0,i=n.charCodeAt(0),(o=se[i>>8])<ae?o:ue[o-ae][255&i]);for(y=0;y<a;y++){if(u=f,g[y]=l=p(e,m,g,y,r),h=240&(f=s[u][l]),f&=15,t[y]=c=s[f][M],h>0)if(16===h){for(v=d;v<y;v++)t[v]=1;d=-1}else d=-1;if(s[f][S])-1===d&&(d=y);else if(d>-1){for(v=d;v<y;v++)t[v]=c;d=-1}m[y]===$&&(t[y]=0),r.hiLevel|=c}r.hasUbatS&&function(e,t,r,n){for(var i=0;i<r;i++)if(e[i]===ee){t[i]=n.dir;for(var o=i-1;o>=0&&e[o]===re;o--)t[o]=n.dir}}(m,t,a,r)}function s(e,t){var r=e.split("");if(t){var n=[];a(r,n,t),T=n}return r.reverse(),I.reverse(),r.join("")}function u(e,t,r){for(var n=0;n<t;n++)if(e[n]===r)return n;return-1}function l(e){for(var t=0;t<Y.length;t++)if(e>=Y[t]&&e<=q[t])return!0;return!1}function c(e,t,r,n){for(;t*r<n&&g(e[t]);)t+=r;return!!(t*r<n&&l(e[t]))}function f(e,t,r,n){for(;t*r<n&&g(e[t]);)t+=r;var i=" ";if(!(t*r<n))return!1;i=e[t];for(var o=0;o<F.length;o++)if(F[o]===i)return!0;return!1}function h(e,t,r,n){if(!(n.hiLevel<e)){if(1===e&&n.dir===A&&!n.hasUbatB)return t.reverse(),void I.reverse();for(var i,o,a,s,u=t.length,l=0;l<u;){if(r[l]>=e){for(i=l+1;i<u&&r[i]>=e;)i++;for(o=l,a=i-1;o<a;o++,a--)s=t[o],t[o]=t[a],t[a]=s,s=I[o],I[o]=I[a],I[a]=s;l=i}l++}}}function p(e,t,r,n,i){var o=t[n];return{UBAT_L:function(){return i.lastArabic=!1,Q},UBAT_R:function(){return i.lastArabic=!1,W},UBAT_ON:function(){return K},UBAT_AN:function(){return H},UBAT_EN:function(){return i.lastArabic?H:J},UBAT_AL:function(){return i.lastArabic=!0,i.hasUbatAl=!0,W},UBAT_WS:function(){return K},UBAT_CS:function(){var e,o;return n<1||n+1>=t.length||(e=r[n-1])!==J&&e!==H||(o=t[n+1])!==J&&o!==H?K:(i.lastArabic&&(o=H),o===e?o:K)},UBAT_ES:function(){return(n>0?r[n-1]:$)===J&&n+1<t.length&&t[n+1]===J?J:K},UBAT_ET:function(){if(n>0&&r[n-1]===J)return J;if(i.lastArabic)return K;for(var e=n+1,o=t.length;e<o&&t[e]===ne;)e++;return e<o&&t[e]===J?J:K},UBAT_NSM:function(){if("VLTR"===i.inFormat){for(var o=t.length,a=n+1;a<o&&t[a]===ie;)a++;if(a<o){var s=e[n],u=s>=1425&&s<=2303||64286===s,l=t[a];if(u&&(l===W||l===te))return W}}return n<1||t[n-1]===$?K:r[n-1]},UBAT_B:function(){return i.lastArabic=!0,i.hasUbatB=!0,i.dir},UBAT_S:function(){return i.hasUbatS=!0,K},UBAT_LRE:function(){return i.lastArabic=!1,K},UBAT_RLE:function(){return i.lastArabic=!1,K},UBAT_LRO:function(){return i.lastArabic=!1,K},UBAT_RLO:function(){return i.lastArabic=!1,K},UBAT_PDF:function(){return i.lastArabic=!1,K},UBAT_BN:function(){return K}}[oe[o]]()}function d(e){for(var t,r=0,n=O.length-1;r<=n;)if(t=Math.floor((r+n)/2),e<O[t][0])n=t-1;else{if(!(e>O[t][0]))return O[t][1];r=t+1}return e}function v(e){for(var t=0;t<U.length;t++)if(U[t]===e)return!0;return!1}function y(e){for(var t=0;t<R.length;t++)if(e===R[t])return z[t];return e}function m(e,t){for(var r=0;r<R.length;r++)if(e===R[r])return t[r];return e}function g(e){return e>="ً"&&e<="ٕ"}function _(e){return"L"===e?"LTR":"R"===e?"RTL":"C"===e?"CLR":"D"===e?"CRL":void 0}function x(e,t,r,n){for(;t*r<n&&g(e[t]);)t+=r;return t*r<n&&(e[t]=" ",!0)}function b(e,t){for(var r=0;r<F.length;r++)if(e===F[r])return t[r];return e}function w(e,t,r,n){for(var i=0;i<e.length;i++)(e[i]>t||!r&&e[i]===t)&&(e[i]+=n)}var I=[],P=[],T=[],C={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},M=5,S=6,E=0,A=1,D=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,N=/[\u0591-\u06ff\ufb1d-\ufefc]/,O=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],F=["آ","أ","إ","ا"],B=["ﻵ","ﻷ","ﻹ","ﻻ"],j=["ﻶ","ﻸ","ﻺ","ﻼ"],R=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],V=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],L=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],z=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],k=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],U=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],G=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],Y=["ء","ف"],q=["غ","ي"],X=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Z=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Q=0,W=1,J=2,H=3,K=4,$=5,ee=6,te=7,re=8,ne=11,ie=12,oe=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],ae=100,se=[ae+0,Q,Q,Q,Q,ae+1,ae+2,ae+3,W,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,ae+4,K,K,K,Q,K,Q,K,Q,K,K,K,Q,Q,K,K,Q,Q,Q,Q,Q,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,Q,Q,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,Q,Q,K,K,Q,Q,K,K,Q,Q,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,Q,Q,Q,ae+5,te,te,ae+6,ae+7],ue=[[18,18,18,18,18,18,18,18,18,ee,$,ee,re,$,18,18,18,18,18,18,18,18,18,18,18,18,18,18,$,$,$,ee,re,K,K,ne,ne,ne,K,K,K,K,K,10,9,10,9,9,J,J,J,J,J,J,J,J,J,J,9,K,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,K,18,18,18,18,18,18,$,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,K,ne,ne,ne,ne,K,K,K,K,Q,K,K,18,K,K,ne,ne,J,J,K,Q,K,K,K,J,Q,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,Q,Q,Q,Q,Q,Q,Q,Q],[Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,K,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,Q,Q,Q,Q,Q,Q,Q,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,Q,K,K,K,K,K,K,K,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,W,ie,W,ie,ie,W,ie,ie,W,ie,K,K,K,K,K,K,K,K,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,K,K,K,K,K,W,W,W,W,W,K,K,K,K,K,K,K,K,K,K,K],[H,H,H,H,K,K,K,K,te,ne,ne,te,9,te,K,K,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,te,K,K,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,H,H,H,H,H,H,H,H,H,H,ne,H,H,te,te,te,ie,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,ie,ie,ie,ie,ie,ie,ie,H,K,ie,ie,ie,ie,ie,ie,te,te,ie,ie,K,ie,ie,ie,ie,te,te,J,J,J,J,J,J,J,J,J,J,te,te,te,te,te,te],[te,te,te,te,te,te,te,te,te,te,te,te,te,te,K,te,te,ie,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,K,K,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,te,K,K,K,K,K,K,K,K,K,K,K,K,K,K,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,W,ie,ie,ie,ie,ie,ie,ie,ie,ie,W,W,K,K,K,K,W,K,K,K,K,K],[re,re,re,re,re,re,re,re,re,re,re,18,18,18,Q,W,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,re,$,13,14,15,16,17,9,ne,ne,ne,ne,ne,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,9,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,re,18,18,18,18,18,K,K,K,K,K,18,18,18,18,18,18,J,Q,K,K,J,J,J,J,J,J,10,10,K,K,K,Q,J,J,J,J,J,J,J,J,J,J,10,10,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,ne,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K],[Q,Q,Q,Q,Q,Q,Q,K,K,K,K,K,K,K,K,K,K,K,K,Q,Q,Q,Q,Q,K,K,K,K,K,W,ie,W,W,W,W,W,W,W,W,W,W,10,W,W,W,W,W,W,W,W,W,W,W,W,W,K,W,W,W,W,W,K,W,K,W,W,K,W,W,K,W,W,W,W,W,W,W,W,W,W,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te],[ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,ie,ie,ie,ie,ie,ie,ie,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,9,K,9,K,K,9,K,K,K,K,K,K,K,K,K,ne,K,K,10,10,K,K,K,K,K,ne,ne,K,K,K,K,K,te,te,te,te,te,K,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,te,K,K,18],[K,K,K,ne,ne,ne,K,K,K,K,K,10,9,10,9,9,J,J,J,J,J,J,J,J,J,J,9,K,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,K,K,K,K,K,K,K,K,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,Q,K,K,K,Q,Q,Q,Q,Q,Q,K,K,Q,Q,Q,Q,Q,Q,K,K,Q,Q,Q,Q,Q,Q,K,K,Q,Q,Q,K,K,K,ne,ne,K,K,K,ne,ne,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K,K]];return n}.apply(null,n))||(e.exports=i)},1382:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(794),r(344),r(1044),r(349)],void 0===(i=function(e,t,r,n,i,o){function a(e,t,r,n,i,o,a){switch(r){case 1:for(var s=0;s<a;s++)n[i]=e[t],t+=1,i+=o;break;case 2:for(s=0;s<a;s++)n[i]=e[t],n[i+1]=e[t+1],t+=2,i+=o;break;case 3:for(s=0;s<a;s++)n[i]=e[t],n[i+1]=e[t+1],n[i+2]=e[t+2],t+=3,i+=o;break;case 4:for(s=0;s<a;s++)n[i]=e[t],n[i+1]=e[t+1],n[i+2]=e[t+2],n[i+3]=e[t+3],t+=4,i+=o;break;default:throw h("Unhandled stride size "+r)}}function s(e,t,r,n,i,o){switch(t){case 1:for(var a=0;a<o;a++)r[n]=e,n+=i;break;case 2:for(a=0;a<o;a++)r[n]=e,r[n+1]=e,n+=i;break;case 3:for(a=0;a<o;a++)r[n]=e,r[n+1]=e,r[n+2]=e,n+=i;break;case 4:for(a=0;a<o;a++)r[n]=e,r[n+1]=e,r[n+2]=e,r[n+3]=e,n+=i;break;default:throw h("Unhandled stride size "+t)}}function u(e){switch(e){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw new Error("Unhandled data type: "+e)}function l(e){switch(e){case 5120:return"Int8";case 5126:return"Float32";case 5124:return"Int32";case 5122:return"Int16";case 5121:return"UInt8";case 5125:return"UInt32";case 5123:return"UInt16"}throw new Error("Unhandled data type: "+e)}function c(e){return e%Uint32Array.BYTES_PER_ELEMENT==0}function f(e){return e>0&&e%Uint32Array.BYTES_PER_ELEMENT==0}function h(e){return new Error("I3SGeometryUtil processing failed: "+e)}function p(e){var t=e.normals,r=e.positions,i=e.normalInd,a=e.positionInd;o.assert(e.normalInd.length===e.positionInd.length);for(var s=n.vec3.create(),u=n.vec3.create(),l=n.vec2.create(),c=r.data,f=r.offsetIdx,h=r.strideIdx,p=t.data,d=t.offsetIdx,v=t.strideIdx,y=0;y<a.length;y+=3){var m=a[y],g=f+h*m,_=c[g],x=c[g+1],b=c[g+2];g=f+h*(m=a[y+1]),s[0]=c[g]-_,s[1]=c[g+1]-x,s[2]=c[g+2]-b,g=f+h*(m=a[y+2]),u[0]=c[g]-_,u[1]=c[g+1]-x,u[2]=c[g+2]-b,n.vec3.cross(s,u,s),o.encodeNormal(s,l);for(var w=0;w<3;w++){var I=d+v*i[y+w];p[I]=o.encodeInt16(l[0]),p[I+1]=o.encodeInt16(l[1])}}}function d(e,t,r){var n=e.length/3,i=t.data,a=t.offsetIdx,s=t.strideIdx;if(null!=r)for(var u=r,l=u[0],c=u[1],f=u[2],h=u[4],p=u[5],d=u[6],v=u[8],y=u[9],_=u[10],x=0;x<n;x++){var b=e[3*x],w=e[3*x+1],I=e[3*x+2];m[0]=l*b+c*w+f*I,m[1]=h*b+p*w+d*I,m[2]=v*b+y*w+_*I,o.encodeNormal(m,g),i[a+x*s]=o.encodeInt16(g[0]),i[a+x*s+1]=o.encodeInt16(g[1])}else for(x=0;x<n;x++)m[0]=e[3*x],m[1]=e[3*x+1],m[2]=e[3*x+2],o.encodeNormal(m,g),i[a+x*s]=o.encodeInt16(g[0]),i[a+x*s+1]=o.encodeInt16(g[1])}Object.defineProperty(t,"__esModule",{value:!0});var v=new Uint8Array(64);t.interleaveGeometryBuffer=function(e,t,r,n,i){void 0===n&&(n=[]),void 0===i&&(i=[]);var o=e.params.vertexAttributes,p=o.position.count;if(!f(r[0].stride))throw h("Layout stride must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");for(var d=r[0].stride/Uint32Array.BYTES_PER_ELEMENT,y=new Uint32Array(d*p),m=0,g=r=r.slice(0).sort(function(e,t){return e.offset-t.offset});m<g.length;m++)!function(e){if(-1!==i.indexOf(e.name))return"continue";var r=o[e.name],d=u(e.type),m=void 0,g=!1;if(null==r){var _=n.filter(function(t){return t.name===e.name})[0];if(!_)throw h("Geometry definition is missing attribute");r={valueType:l(e.type),byteOffset:0,count:p,valuesPerElement:e.count};for(var x=0;x<v.length;x++)v[x]=_.byteValue;m=v.buffer,g=!0}else m=t;if(l(e.type)!==r.valueType)throw h("Geometry definition type must match attribute type");if(!c(r.byteOffset)||!c(e.offset))throw h(e.name+" offset must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");if(!f(r.valuesPerElement*d.BYTES_PER_ELEMENT)||!f(e.count*d.BYTES_PER_ELEMENT))throw h(e.name+" data must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");var b=new Uint32Array(m),w=r.byteOffset/Uint32Array.BYTES_PER_ELEMENT,I=r.valuesPerElement*d.BYTES_PER_ELEMENT/Uint32Array.BYTES_PER_ELEMENT,P=e.offset/Uint32Array.BYTES_PER_ELEMENT,T=e.stride/Uint32Array.BYTES_PER_ELEMENT;g?s(b[0],I,y,P,T,p):a(b,w,I,y,P,T,p)}(g[m]);return y.buffer},t.processAndInterleaveNormals=function(e,t,n,i,o){if("none"===e)p(o);else{var a="earth-centered"===e?i:null;d(r.createTypedView(n,t.params.vertexAttributes.normal),o.normals,a)}};var y=65536;t.extractPositionData=function(e,t,r){var n=t[0];if(null==n||"position"!==n.name||5126!==n.type)return null;for(var o=new Float32Array(e),a=n.stride/4,s=3*o.length/a,u=new Float32Array(s),l=0;l<s/3;l++)u[3*l]=o[l*a+n.offset],u[3*l+1]=o[l*a+n.offset+1],u[3*l+2]=o[l*a+n.offset+2];var c,f=i.deduplicate(u.buffer,3),h=f.uniqueCount<y;if(r)for(c=new(h?Uint16Array:Uint32Array)(r.length),l=0;l<r.length;l++)c[l]=f.indices[r[l]];else c=h?new Uint16Array(f.indices):f.indices;return{data:new Float32Array(f.buffer),indices:c}};var m=n.vec3.create(),g=n.vec2.create()}.apply(null,n))||(e.exports=i)},1383:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(814),r(724),r(342),r(343),r(1522)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=o.getLogger("esri.layers.graphics.data.FeatureStore"),u=[],l=function(){function e(e){this._featuresById=new n.default,this._store=new a.default(e)}return Object.defineProperty(e.prototype,"geometryType",{get:function(){return this._store.featureInfo.geometryType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasM",{get:function(){return this._store.featureInfo.hasM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasZ",{get:function(){return this._store.featureInfo.hasZ},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numFeatures",{get:function(){return this._store.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullBounds",{get:function(){return this._store.bounds},enumerable:!0,configurable:!0}),e.prototype.setEngine=function(e){this._engine=e},e.prototype.add=function(e){if(e){var t=e.objectId;if(null==t)return void s.error(new i("featurestore:invalid-feature","feature id is missing",{feature:e}));var r=this._featuresById.get(t);r?this._store.replace(r,e):this._store.add(e),this._featuresById.set(t,e),this._clearCache()}},e.prototype.addMany=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];if(n){var o=n.objectId;if(null!=o){var a=this._featuresById.get(o);a?this._store.replace(a,n):u.push(n),this._featuresById.set(o,n)}else s.error(new i("featurestore:invalid-feature","feature id is missing",{feature:n}))}}this._store.addMany(u),u.length=0,this._clearCache()},e.prototype.clear=function(){this._featuresById.clear(),this._store.clear(),this._clearCache()},e.prototype.removeManyById=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._store.remove(this._featuresById.get(n)),this._featuresById.delete(n)}this._clearCache()},e.prototype.forEachBounds=function(e,t){this._store.forEachBounds(e,t)},e.prototype.getAllFeatures=function(){return r.from(this._featuresById,function(e){return e[0],e[1]})},e.prototype.getFeature=function(e){return this._featuresById.get(e)},e.prototype.hasFeature=function(e){return this._featuresById.has(e)},e.prototype.forEachFeatureInBounds=function(e,t){this._store.forEachFeatureInBounds(e,t)},e.prototype.mapFeaturesInBounds=function(e,t){return this._store.mapFeaturesInBounds(e,t)},e.prototype.transferIds=function(e,t){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n],a=this._featuresById.get(o);a&&(this._store.remove(a),this._featuresById.delete(a.objectId),r.push(a))}e.addMany(r),this._clearCache()},e.prototype.transferIdRange=function(e,t,r){for(var n=[],i=t;i<r;i++){var o=this._featuresById.get(i);o&&(this._store.remove(o),this._featuresById.delete(o.objectId),n.push(o))}e.addMany(n),this._clearCache()},e.prototype.transferIf=function(e,t){var r=this,n=[];this._featuresById.forEach(function(e,i){t(e)&&(r._store.remove(e),r._featuresById.delete(e.objectId),n.push(e))}),e.addMany(n),this._clearCache()},e.prototype.transferAll=function(e){var t=this,r=[];this._featuresById.forEach(function(e,n){t._store.remove(e),t._featuresById.delete(e.objectId),r.push(e)}),e.addMany(r),this._clearCache()},e.prototype._clearCache=function(){this._engine&&this._engine.clearCache()},e}();t.default=l}.apply(null,n))||(e.exports=i)},1384:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(342),r(340),r(1291),r(410),r(383)],void 0===(i=function(e,t,r,n,i,o,a){function s(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,h,0),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}if("xmin"in t){o={xmin:0,ymin:0,xmax:0,ymax:0};return n=e(t.xmin,t.ymin,h,0),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,h,0),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o}return"rings"in t?{rings:u(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:u(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:l(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function u(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(l(o,t))}return r}function l(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],a=t(o[0],o[1],[0,0],0);r.push(a),o.length>2&&a.push(o[2]),o.length>3&&a.push(o[3])}return r}function c(e,t){return!(!e||!t||o.equals(e,t)||a.canProject(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var f="feature-store:unsupported-query",h=[0,0];t.checkProjectionSupport=function(e,t){if(Array.isArray(e)){for(var o=0,a=e;o<a.length;o++){var s=a[o];if(c(s.geometry&&s.geometry.spatialReference,t))return i.isSupported()?i.load():n.reject(new r(f,"projection not supported",{inSpatialReference:e,outSpatialReference:t}))}return n.resolve()}return c(e,t)?i.isSupported()?i.load():n.reject(new r(f,"projection not supported",{inSpatialReference:e,outSpatialReference:t})):n.resolve()};var p=s.bind(null,a.lngLatToXY),d=s.bind(null,a.xyToLngLat);t.project=function(e,t,r){return t&&r&&!o.equals(t,r)?a.canProject(t,r)?o.isWebMercator(r)?p(e):d(e):i.projectMany([e],t,r,null,!0)[0]:e};var v=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,r){var i=this;e&&e.length&&t&&r&&!o.equals(t,r)||n.resolve(e);var a={geometries:e,inSpatialReference:t,outSpatialReference:r,resolve:null};return this._jobs.push(a),n.create(function(e){a.resolve=e,null===i._timer&&(i._timer=setTimeout(i._process,10))},function(){var e=i._jobs.indexOf(a);e>-1&&i._jobs.splice(e,1)})},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference;(0,e.resolve)(a.canProject(r,n)?o.isWebMercator(n)?t.map(p):t.map(d):i.projectMany(t,r,n,null,!0)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,r){return v.push(e,t,r)}}.apply(null,n))||(e.exports=i)},1385:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1054),r(597)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=new n.default,o=new n.default,a={esriGeometryPoint:r.convertToPoint,esriGeometryPolyline:r.convertToPolyline,esriGeometryPolygon:r.convertToPolygon,esriGeometryMultipoint:r.convertToMultipoint};t.getCentroid=function(e,t,i){if("esriGeometryPolygon"!==e.geometryType)return null;if(!t.centroid&&!t.geometry)return null;if(t.centroid||(t.centroid=r.getCentroidOptimizedGeometry(new n.default,t.geometry,e.hasZ,e.hasM)),i){var a=r.quantizeOptimizedGeometry(o,t.centroid,e.hasZ,e.hasM,"esriGeometryPoint",i);return r.convertToPoint(a,e.hasZ,e.hasM)}return r.convertToPoint(t.centroid,e.hasZ,e.hasM)},t.getGeometry=function(e,t,n,s){if(!t.geometry)return null;if(n){var u=r.generalizeOptimizedGeometry(i,t.geometry,e.hasZ,e.hasM,e.geometryType,n);return s?(u=r.quantizeOptimizedGeometry(o,u,e.hasZ,e.hasM,e.geometryType,s),a[e.geometryType](u,e.hasZ,e.hasM)):a[e.geometryType](u,e.hasZ,e.hasM)}if(s)return u=r.quantizeOptimizedGeometry(o,t.geometry,e.hasZ,e.hasM,e.geometryType,s),a[e.geometryType](u,e.hasZ,e.hasM);return a[e.geometryType](t.geometry,e.hasZ,e.hasM)}}.apply(null,n))||(e.exports=i)},1428:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(342),r(340)],void 0===(i=function(e,t,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getControllerConfiguration=function(e){var t=e.source;return"stream"===e.type?o.resolve().then(function(){return{type:"stream",filter:function(e){if(!e)return null;var t={};return e.geometry&&(t.geometry=e.geometry.toJSON()),e.where&&(t.where=e.where),t}(e.filter),purgeOptions:e.purgeOptions}}):e.capabilities.operations.supportsQuery?function(e){return e&&"openPorts"in e}(t)?o.resolve().then(function(){return{type:"memory",processing:e.processing&&e.processing.toWorker()||null}}):o.resolve({type:"on-demand",gdbVersion:e.gdbVersion,historicMoment:e.historicMoment&&e.historicMoment.getTime(),processing:e.processing&&e.processing.toWorker()||null}):o.reject(new i("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:e}))},t.createController=function(e,t){return("memory"===e?o.create(function(e){return Promise.all([r.e(33),r.e(108)]).then(function(){var t=[r(1657)];e.apply(null,t)}.bind(this)).catch(r.oe)}):"stream"===e?o.create(function(e){return Promise.all([r.e(27),r.e(89)]).then(function(){var t=[r(1659)];e.apply(null,t)}.bind(this)).catch(r.oe)}):o.create(function(e){return Promise.all([r.e(27),r.e(33),r.e(90)]).then(function(){var t=[r(1660)];e.apply(null,t)}.bind(this)).catch(r.oe)})).then(function(e){return e.default}).then(function(e){var r=t.serviceAndViewInfo,i=t.remoteClient,o=t.tileStore;return new e(n({},r,{tileStore:o,remoteClient:i}))})}}.apply(null,n))||(e.exports=i)},1430:function(e,t,r){var n,i;n=[r(1049)],void 0===(i=function(e){"use strict";function t(e,r){if(!(this instanceof t))return new t(e,r);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),r&&("function"==typeof r?this.toBBox=r:this._initFormat(r)),this.clear()}function r(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function n(e,t){i(e,0,e.children.length,t,e)}function i(e,t,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a,s=t;s<r;s++)a=e.children[s],o(i,e.leaf?n(a):a);return i}function o(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function a(e,t){return e.minX-t.minX}function s(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function l(e){return e.maxX-e.minX+(e.maxY-e.minY)}function c(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function f(e,t){var r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,o-n)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function d(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,r,n,i,o){for(var a,s=[r,n];s.length;)(n=s.pop())-(r=s.pop())<=i||(a=r+Math.ceil((n-r)/i/2)*i,e(t,a,r,n,o),s.push(r,a,a,n))}return t.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!p(e,t))return r;for(var i,o,a,s,u=[];t;){for(i=0,o=t.children.length;i<o;i++)a=t.children[i],p(e,s=t.leaf?n(a):a)&&(t.leaf?r.push(a):h(e,s)?this._all(a,r):u.push(a));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!p(e,t))return!1;for(var n,i,o,a,s=[];t;){for(n=0,i=t.children.length;n<i;n++)if(o=t.children[n],p(e,a=t.leaf?r(o):o)){if(t.leaf||h(e,a))return!0;s.push(o)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(e,t){if(!e)return this;for(var n,i,o,a,s=this.data,u=this.toBBox(e),l=[],c=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=c.pop(),a=!0),s.leaf&&-1!==(o=r(e,s.children,t)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!h(s,u)?i?(n++,s=i.children[n],a=!1):s=null:(l.push(s),c.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:a,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var o,a=r-t+1,s=this._maxEntries;if(a<=s)return n(o=d(e.slice(t,r+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(o=d([])).leaf=!1,o.height=i;var u,l,c,f,h=Math.ceil(a/s),p=h*Math.ceil(Math.sqrt(s));for(v(e,t,r,p,this.compareMinX),u=t;u<=r;u+=p)for(v(e,u,c=Math.min(u+p-1,r),h,this.compareMinY),l=u;l<=c;l+=h)f=Math.min(l+h-1,c),o.children.push(this._build(e,l,f,i-1));return n(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var i,o,a,s,l,f,h,p;n.push(t),!t.leaf&&n.length-1!==r;){for(h=p=1/0,i=0,o=t.children.length;i<o;i++)l=u(a=t.children[i]),(f=c(e,a)-l)<p?(p=f,h=l<h?l:h,s=a):f===p&&l<h&&(h=l,s=a);t=s||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),a=[],s=this._chooseSubtree(i,this.data,t,a);for(s.children.push(e),o(s,i);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(i,a,t)},_split:function(e,t){var r=e[t],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);var a=this._chooseSplitIndex(r,o,i),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,n(r,this.toBBox),n(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=d([e,t]),this.data.height=e.height+1,this.data.leaf=!1,n(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,a,s,l,c,h,p;for(c=h=1/0,n=t;n<=r-t;n++)s=f(o=i(e,0,n,this.toBBox),a=i(e,n,r,this.toBBox)),l=u(o)+u(a),s<c?(c=s,p=n,h=l<h?l:h):s===c&&l<h&&(h=l,p=n);return p},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:a,i=e.leaf?this.compareMinY:s;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var a,s,u=this.toBBox,c=i(e,0,t,u),f=i(e,r-t,r,u),h=l(c)+l(f);for(a=t;a<r-t;a++)s=e.children[a],o(c,e.leaf?u(s):s),h+=l(c);for(a=r-t-1;a>=t;a--)s=e.children[a],o(f,e.leaf?u(s):s),h+=l(f);return h},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)o(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():n(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},t}.apply(null,n))||(e.exports=i)},1431:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(592),r(718),r(367),r(1262),r(456)],void 0===(i=function(e,t,r,n,i,o,a){function s(e,t){var r=e.bounds,n=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&r[0]<=n[0]&&r[1]<=n[1]&&r[2]>=n[2]&&r[3]>=n[3]}Object.defineProperty(t,"__esModule",{value:!0}),t.isParentOf=s,t.isChildOf=function(e,t){return s(t,e)};var u=function(){function e(e,t){this.bounds=i.create(),this.key=new a(0,0,0,0),this.objectIds=new r.default,this.key.set(t);var n=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.scale=n.scale,this.needsClear=!0}return Object.defineProperty(e.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.tileInfoView,this.id)},e.prototype.createChildTiles=function(){for(var t=this.key.getChildKeys(),r=n.acquire(),i=0;i<t.length;i++)r[i]=new e(this.tileInfoView,t[i]);return r},e.prototype.getQuantizationParameters=function(){return o.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})},e}();t.Tile=u,t.default=u}.apply(null,n))||(e.exports=i)},1432:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1315),r(1318),r(1319),r(794)],void 0===(i=function(e,t,r,n,i,o){function a(e,t){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i.name===t&&null!=i.attributeValues&&"UInt8"===i.attributeValues.valueType&&3===i.attributeValues.valuesPerElement)return{storageInfo:i,useElevation:!1}}return null}function s(e,t){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i.name===t){var o="embedded-elevation"===i.encoding;return{storageInfo:o?null:i,useElevation:o}}}return"elevation"===t.toLowerCase()?{storageInfo:null,useElevation:!0}:null}function u(e,t,r,n){if(e&&e.useElevation){for(var i=new Float64Array(n),a=0;a<n;a++)i[a]=r[3*a+2];return i}return e&&t?o.readBinaryAttribute(e.storageInfo,t,n):null}function l(e){return null==e||"none"===e?null:"low-four-bit"===e?function(e){return 15&e}:"high-four-bit"===e?function(e){return(240&e)>>4}:"absolute-value"===e?function(e){return Math.abs(e)}:"modulo-ten"===e?function(e){return e%10}:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getRendererInfo=function(e){var t=e.renderer,r=t&&t.type,n=t&&e.renderer.toJSON()||null,i=null,o=!1;"point-cloud-unique-value"===r?i=s(e.attributeStorageInfo,t.field):"point-cloud-stretch"===r?i=s(e.attributeStorageInfo,t.field):"point-cloud-class-breaks"===r?i=s(e.attributeStorageInfo,t.field):o="point-cloud-rgb"===r?null!=(i=a(e.attributeStorageInfo,t.field)):null!=(i=a(e.attributeStorageInfo,"RGB"));var u=null;return t&&t.colorModulation&&(u=s(e.attributeStorageInfo,t.colorModulation.field)),{rendererJSON:n,isRGBRenderer:o,primaryAttribute:i,modulationAttribute:u}},t.evaluateRenderer=function(e,t,o,a,s){var c=e.rendererJSON,f=e.isRGBRenderer,h=e.primaryAttribute,p=e.modulationAttribute,d=u(h,t,a,s),v=u(p,o,a,s),y=null,m=null;if(d&&f)y=d;else if(d&&"pointCloudUniqueValueRenderer"===c.type){var g=(m=i.fromJSON(c)).colorUniqueValueInfos;y=new Uint8Array(3*s);for(var _=l(m.fieldTransformType),x=0;x<s;x++)for(var b=(P=_?_(d[x]):d[x])+"",w=0;w<g.length;w++)if(g[w].values.indexOf(b)>=0){y[3*x]=g[w].color.r,y[3*x+1]=g[w].color.g,y[3*x+2]=g[w].color.b;break}}else if(d&&"pointCloudStretchRenderer"===c.type){var I=(m=n.fromJSON(c)).stops;for(y=new Uint8Array(3*s),_=l(m.fieldTransformType),x=0;x<s;x++){var P=_?_(d[x]):d[x],T=I.length-1;if(P<I[0].value)y[3*x]=I[0].color.r,y[3*x+1]=I[0].color.g,y[3*x+2]=I[0].color.b;else if(P>=I[T].value)y[3*x]=I[T].color.r,y[3*x+1]=I[T].color.g,y[3*x+2]=I[T].color.b;else for(w=1;w<I.length;w++)if(P<I[w].value){var C=(P-I[w-1].value)/(I[w].value-I[w-1].value);y[3*x]=I[w].color.r*C+I[w-1].color.r*(1-C),y[3*x+1]=I[w].color.g*C+I[w-1].color.g*(1-C),y[3*x+2]=I[w].color.b*C+I[w-1].color.b*(1-C);break}}}else if(d&&"pointCloudClassBreaksRenderer"===c.type){var M=(m=r.fromJSON(c)).colorClassBreakInfos;for(y=new Uint8Array(3*s),_=l(m.fieldTransformType),x=0;x<s;x++)for(P=_?_(d[x]):d[x],w=0;w<M.length;w++)if(P>=M[w].minValue&&P<=M[w].maxValue){y[3*x]=M[w].color.r,y[3*x+1]=M[w].color.g,y[3*x+2]=M[w].color.b;break}}else for(y=new Uint8Array(3*s),x=0;x<y.length;x++)y[x]=255;if(v&&m&&m.colorModulation){var S=m.colorModulation.minValue,E=m.colorModulation.maxValue;for(x=0;x<s;x++){var A=(P=v[x])>=E?1:P<=S?.3:.3+.7*(P-S)/(E-S);y[3*x]=A*y[3*x],y[3*x+1]=A*y[3*x+1],y[3*x+2]=A*y[3*x+2]}}return y},t.getSplatSizeAlgorithm=function(e){var t=e&&e.pointSizeAlgorithm;return t&&"splat"===t.type?t:null},t.getFixedSizeAlgorithm=function(e){var t=e&&e.pointSizeAlgorithm;return t&&"fixed-size"===t.type?t:null},t.rendererUsesFixedSizes=function(e){var t=e&&e.pointSizeAlgorithm;return!(!t||!t.type)&&"fixed-size"===t.type}}.apply(null,n))||(e.exports=i)},1433:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(724),r(592),r(365),r(342),r(343),r(340),r(1291),r(367),r(625),r(442),r(410),r(410),r(1279),r(1384),r(1314),r(1523),r(1525),r(1526),r(1385),r(418)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,f,h,p,d,v,y,m,g,_,x,b,w){function I(e){return e?JSON.parse(JSON.stringify(e,["latestWkid","wkid","wkt"])):e}function P(e,t,r,n,i,o,a,s){a&&!o?n.forEachFeatureInBounds(i,function(t){e.push({attributes:t.attributes,centroid:b.getCentroid(r,t,s)})}):o&&!a?n.forEachFeatureInBounds(i,function(n){t.add(n.objectId),e.push(new C(n.attributes,b.getGeometry(r,n,0,s)))}):n.forEachFeatureInBounds(i,function(n){t.add(n.objectId),e.push(new C(n.attributes,b.getGeometry(r,n,0,s),b.getCentroid(r,n,s)))})}Object.defineProperty(t,"__esModule",{value:!0});var T=s.getLogger("esri.layers.graphics.data.QueryEngine"),C=function(){return function(e,t,r){this.attributes=e,this.geometry=t,this.centroid=r}}(),M={},S=new i.default,E=function(){function e(e){var t=this;this.capabilities={query:m.queryCapabilities},this.fieldsMap=new n.default,this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.cacheSpatialQueries=e.cacheSpatialQueries||!1,this.gdbVersion=e.gdbVersion,this.historicMoment=e.historicMoment,this.spatialIndex=e.spatialIndex,this.spatialIndex.setEngine(this),this.timeInfo=e.timeInfo,this.cacheSpatialQueries&&(this._geometryQueryCache=new _.default),e.fields.forEach(function(e){t.fieldsMap.set(e.name.trim(),e),t.fieldsMap.set(e.name.trim().toLowerCase(),e)})}return e.prototype.destroy=function(){this.clearCache(),this.fieldsMap.clear()},Object.defineProperty(e.prototype,"fullExtent",{get:function(){var e=this.spatialIndex.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:I(this.spatialReference)}:null},enumerable:!0,configurable:!0}),e.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null},e.prototype.executeQuery=function(e){var t=this;void 0===e&&(e=new w);var r=e.clone();return this._normalizeQuery(r).then(function(e){return t._checkQuerySupport(e)}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return e.executeAttributesQuery(r)}).catch(function(e){if(e===M)return new g.default([],t);throw e}).then(function(e){return e.createQueryResponse(r)})},e.prototype.executeQueryForCount=function(e){var t=this;void 0===e&&(e=new w);var r=e.clone();return r.returnGeometry=!1,r.returnCentroid=!1,r.outSpatialReference=null,this._normalizeQuery(r).then(function(e){return t._checkQuerySupport(e)}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return e.executeAttributesQuery(r)}).then(function(e){return e.size}).catch(function(e){if(e===M)return 0;throw e})},e.prototype.executeQueryForExtent=function(e){var t=this;void 0===e&&(e=new w);var r=e.clone(),n=r.outSpatialReference;return this._normalizeQuery(r).then(function(e){return t._checkQuerySupport(e)}).then(function(){return r.returnGeometry=!0,r.returnCentroid=!1,r.outSpatialReference=null,r}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return e.executeAttributesQuery(r)}).then(function(e){var r=e.size;if(!r)return{count:r,extent:null};var i={xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:I(t.spatialReference)};t.spatialIndex.forEachBounds(e.items,function(e){i.xmin=Math.min(e[0],i.xmin),i.ymin=Math.min(e[1],i.ymin),i.xmax=Math.max(e[2],i.xmax),i.ymax=Math.max(e[3],i.ymax)});var o=y.project(i,e.spatialReference,n);if(o.spatialReference=I(n&&n.toJSON()||t.spatialReference),o.xmax-o.xmin==0){var a=h.getMetersPerUnitForSR(o.spatialReference);o.xmin-=a,o.xmax+=a}if(o.ymax-o.ymin==0){a=h.getMetersPerUnitForSR(o.spatialReference);o.ymin-=a,o.ymax+=a}return{count:r,extent:o}}).catch(function(e){if(e===M)return{count:0,extent:null};throw e})},e.prototype.executeQueryForIds=function(e){var t=this;void 0===e&&(e=new w);var r=e.clone();return r.returnGeometry=!1,r.returnCentroid=!1,r.outSpatialReference=null,this._normalizeQuery(r).then(function(e){return t._checkQuerySupport(e)}).then(function(e){return t._executeGeometryQuery(e)}).then(function(e){return e.executeObjectIdsQuery(r)}).then(function(e){return e.executeAttributesQuery(r)}).then(function(e){for(var t=e.items,r=[],n=0;n<t.length;n++)r[n]=t[n].objectId;return r}).catch(function(e){if(e===M)return[];throw e})},e.prototype.executeTileQuery=function(e,t){var r=this,n=t.returnGeometry,o=t.returnCentroid,a=t.pixelBuffer,s=new i.default,u=[],l=a*e.resolution,f=c.pad(e.bounds,l,c.create());if(P(u,s,this,this.spatialIndex,f,n,o,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}),"esriGeometryPoint"===this.geometryType||o){var h=p.getInfo(this.spatialReference);if(h){var d=h.valid,v=d[0],y=d[1];if(f[0]<v){var m=c.fromValues(y-l,f[1],y,f[3]);P(u,s,this,this.spatialIndex,m,n,o,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[y,e.bounds[3]]})}if(f[2]>y){var g=c.fromValues(v,f[1],v+l,f[3]);P(u,s,this,this.spatialIndex,g,n,o,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[v-y+e.bounds[0],e.bounds[3]]})}}}return u.sort(function(e,t){return e.attributes[r.objectIdField]-t.attributes[r.objectIdField]}),{features:u,objectIds:s}},e.prototype.executeTileQueryForIds=function(e,t){var r=t.pixelBuffer*e.resolution,n=c.pad(e.bounds,r,c.create());return this.spatialIndex.mapFeaturesInBounds(n,function(e){return e.objectId})},e.prototype.executeQueryForLatestObservations=function(e){var t=this;return this.timeInfo?this.executeQuery(e).then(function(e){return t._filterLatest(e,t.timeInfo)}):void T.error(new a("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))},e.prototype._filterLatest=function(e,t){for(var i=t.trackIdField,o=t.startTimeField,a=t.endTimeField||o,s=new n.default,u=[],l=0,c=e.features;l<c.length;l++){var f=c[l],h=f.attributes[i],p=f.attributes[a];(!s.has(h)||s.get(h).attributes[a]<p)&&s.set(h,f)}return s.forEach(function(e){return u.push(e)}),r({},e,{features:u})},e.prototype._getAll=function(){return this._allItems||(this._allItems=new g.default(this.spatialIndex.getAllFeatures(),this)),this._allItems},e.prototype._normalizeQuery=function(e){var t=this,r=this.definitionExpression,n=e.where,i=e.geometry,o=e.outFields,a=e.orderByFields,s=e.groupByFieldsForStatistics,l=e.outStatistics;if(e.where=n=n&&n.trim(),(!n||/^1 *= *1$/.test(n)||r&&r===n)&&(e.where=null),o)for(var c=0;c<o.length;c++)o[c]=o[c].trim();if(a)for(c=0;c<a.length;c++)a[c]=a[c].trim();if(s)for(c=0;c<s.length;c++)s[c]=s[c].trim();if(l)for(c=0;c<l.length;c++)l[c].onStatisticField=l[c].onStatisticField.trim();return i?(e.outSpatialReference||(e.outSpatialReference=i.spatialReference),this._getInputGeometry(e).then(function(t){return e.geometry=t}).then(function(e){return y.checkProjectionSupport(e.spatialReference,t.spatialReference)}).then(function(){return f.normalizeCentralMeridian(e.geometry)}).then(function(e){return y.project(e[0].toJSON(),e[0].spatialReference,t.spatialReference)}).then(function(r){if(!r)throw M;return r.spatialReference=t.spatialReference,e.read({geometry:r})})):u.resolve(e)},e.prototype._executeGeometryQuery=function(e){var t=this,r=e.geometry,n=e.outSpatialReference,i=e.spatialRelationship,o=n&&!d.equals(this.spatialReference,n),a=o?JSON.stringify({geometry:r,spatialRelationship:i,outSpatialReference:n}):JSON.stringify({geometry:r,spatialRelationship:i});if(this.cacheSpatialQueries&&this._geometryQueryCache.size&&this._geometryQueryCache.has(a))return u.resolve(this._geometryQueryCache.get(a));var s=null;if(r){var l=this._searchSpatialIndex(this._getQueryBBoxes(r));if(!l.length){var c=new g.default([],this);return this.cacheSpatialQueries&&this._geometryQueryCache.set(a,c),u.resolve(c)}s="envelope-intersects"===e.spatialRelationship||"esriGeometryPoint"===this.geometryType&&x.canQueryWithRBush(r)?u.resolve(new g.default(l,this)):x.getSpatialQueryOperator(i,r,this.geometryType).then(function(e){if(e){var r=l.filter(function(r){return e(b.getGeometry(t,r))});return new g.default(r,t)}})}else s=u.resolve(this._getAll());return s.then(function(r){return o&&(e.returnGeometry||e.returnCentroid)?r.project(n).then(function(e){return t.cacheSpatialQueries&&t._geometryQueryCache.set(a,e),e}):(t.cacheSpatialQueries&&t._geometryQueryCache.set(a,r),r)})},e.prototype._getInputGeometry=function(e){var t=e.geometry,r=e.distance,n=e.units;if(null==r)return u.resolve(t);var i=t.spatialReference,a=n||h.getUnitString(i);return(i&&(i.isGeographic||i.isWebMercator)?u.resolve(t):y.checkProjectionSupport(i,o.SpatialReference.WGS84).then(function(){return l.project(t,o.SpatialReference.WGS84)})).then(function(e){return x.getGeodesicBufferOperator().then(function(t){return t(e,r,a)})})},e.prototype._getQueryBBoxes=function(e){if("point"===e.type)return[c.fromValues(e.x,e.y,e.x,e.y)];var t=x.canQueryWithRBush(e)?e:e.extent;switch(t.type){case"extent":return[c.fromExtent(t)];case"polygon":return t.rings.map(function(e){return c.fromValues(e[0][0],e[0][1],e[2][0],e[2][1])})}},e.prototype._searchSpatialIndex=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.spatialIndex.forEachFeatureInBounds(i,function(e){S.has(e)||(t.push(e),S.add(e))})}return S.clear(),t},e.prototype._checkQuerySupport=function(e){return e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParameter||e.text||e.timeExtent?u.reject(new a("feature-store:unsupported-query","Unsupported query options",{query:e})):u.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),x.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),y.checkProjectionSupport(this.spatialReference,e.outSpatialReference)]).then(function(){return e})},e.prototype._checkAttributesQuerySupport=function(e){var t=e.outFields,r=e.orderByFields,n=e.returnDistinctValues;if(r&&r.length>0){var i=r.map(function(e){return e.indexOf(" ASC")>-1?e.split(" ASC")[0]:e.indexOf(" DESC")>-1?e.split(" DESC")[0]:e});v.validateFields(this.fieldsMap,i,"orderByFields contains missing fields")}if(t&&t.length>0)v.validateFields(this.fieldsMap,t,"outFields contains missing fields");else if(n)throw new a("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:e});v.validateWhere(this.fieldsMap,e.where)},e.prototype._checkStatisticsQuerySupport=function(e){var t=e.outStatistics,r=e.groupByFieldsForStatistics,n=e.having,i=r&&r.length,o=t&&t.length;if(n){if(!i||!o)return u.reject(new a("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:e}));v.validateHaving(this.fieldsMap,n,t)}if(o){var s=t.map(function(e){return e.onStatisticField.trim()});v.validateFields(this.fieldsMap,s,"onStatisticFields contains missing fields"),i&&v.validateFields(this.fieldsMap,r,"groupByFieldsForStatistics contains missing fields");for(var l=0,c=t;l<c.length;l++){var f=c[l],h=f.onStatisticField,p=f.statisticType;if((!i||"count"!==p)&&v.hasInvalidFieldType(h,this.fieldsMap))return u.reject(new a("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:f,query:e}))}}},e}();t.default=E}.apply(null,n))||(e.exports=i)},1483:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(341),r(337)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.field=null,t.minValue=0,t.maxValue=255,t}var i;return r(t,e),i=t,t.prototype.clone=function(){return new i({field:this.field,minValue:this.minValue,maxValue:this.maxValue})},n([o.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([o.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minValue",void 0),n([o.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxValue",void 0),i=n([o.subclass("esri.renderers.support.pointCloud.ColorModulation")],t)}(o.declared(i));t.ColorModulation=a,t.default=a}.apply(null,n))||(e.exports=i)},1484:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(440),r(1316),r(1317)],void 0===(i=function(e,t,r,n,i){function o(e){return e&&a[e.type]||null}Object.defineProperty(t,"__esModule",{value:!0});var a={pointCloudFixedSizeAlgorithm:n.default,pointCloudSplatAlgorithm:i.default};t.read=function(e,t,n){var i=o(e);if(i){var a=new i;return a.read(e,n),a}return n&&n.messages&&e&&n.messages.push(new r("pointsizealgorithm:unsupported","Point size algorithms of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:n})),null},t.fromJSON=function(e){var t=o(e);return t?t.fromJSON(e):null}}.apply(null,n))||(e.exports=i)},1485:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1271),r(1316),r(1317)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.pointSizeAlgorithmTypes={key:"type",base:r.default,typeMap:{"fixed-size":n.default,splat:i.default}}}.apply(null,n))||(e.exports=i)},1486:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(362),r(341),r(339),r(337),r(359)],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.minValue=0,t.maxValue=0,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:a.clone(this.color)})},n([s.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([s.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],t.prototype,"minValue",void 0),n([s.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],t.prototype,"maxValue",void 0),n([s.property({type:i,json:{type:[u.Integer],write:!0}})],t.prototype,"color",void 0),o=n([s.subclass("esri.renderers.support.pointCloud.ColorClassBreakInfo")],t)}(s.declared(o));t.ColorClassBreakInfo=l,t.default=l}.apply(null,n))||(e.exports=i)},1487:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(362),r(341),r(339),r(337),r(359)],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.value=0,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({label:this.label,value:this.value,color:a.clone(this.color)})},n([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([s.property({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"value",void 0),n([s.property({type:i,json:{type:[u.Integer],write:!0}})],t.prototype,"color",void 0),o=n([s.subclass("esri.renderers.support.pointCloud.StopInfo")],t)}(s.declared(o));t.StopInfo=l,t.default=l}.apply(null,n))||(e.exports=i)},1488:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(362),r(341),r(339),r(337),r(359)],void 0===(i=function(e,t,r,n,i,o,a,s,u){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.values=null,t.color=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({description:this.description,label:this.label,values:a.clone(this.values),color:a.clone(this.color)})},n([s.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([s.property({type:[String],json:{write:!0}})],t.prototype,"values",void 0),n([s.property({type:i,json:{type:[u.Integer],write:!0}})],t.prototype,"color",void 0),o=n([s.subclass("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],t)}(s.declared(o));t.ColorUniqueValueInfo=l,t.default=l}.apply(null,n))||(e.exports=i)},1517:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1277)],void 0===(i=function(e,t,r){return function(){function e(e,t,r,n,i,o,a,s){this._glyphItems=e,this._maxWidth=t,this._lineHeight=r,this._letterSpacing=n,this._offset=i,this._hAnchor=o,this._vAnchor=a,this._justify=s}return e.prototype.getShaping=function(e,t){for(var r=this._letterSpacing,n=this._lineHeight,i=this._justify,o=this._maxWidth,a=[],s=0,u=0,l=0,c=0,f=-1,h=0,p=-1,d=e.length,v=0;v<d;v++){var y=e.charCodeAt(v);if(10!==y){for(var m=void 0,g=0,_=this._glyphItems;g<_.length&&!(m=_[g][y]);g++);if(m){if(a.push({codePoint:y,x:s,y:u,glyphMosaicItem:m}),s+=m.metrics.advance+r,o>0&&s>o&&p>=0){var x=p+1,b=a[x].x;h=Math.max(b,h);for(var w=x;w<a.length;w++)t?a[w].y-=n:a[w].y+=n,a[w].x-=b;i&&this._applyJustification(a,c,p),t?u-=n:u+=n,s-=b,++l,c=x,p=-1}++f,32===y&&(p=a.length-1)}}else{if(v===d-1)continue;if(f>=c){b=(I=a[f]).x+I.glyphMosaicItem.metrics.advance;h=Math.max(b,h),i&&this._applyJustification(a,c,f),c=a.length}t?u-=n:u+=n,s=0,++l}}if(f>=c){var I,P=(I=a[f]).x+I.glyphMosaicItem.metrics.advance;h=Math.max(h,P),i&&this._applyJustification(a,c,f)}if(a.length>0){var T=(i-this._hAnchor)*h,C=(-this._vAnchor*(l+1)+.5)*n;t&&l&&(C+=l*n),T+=this._offset[0],C+=this._offset[1];for(var M=0,S=a;M<S.length;M++){var E=S[M];E.x+=T,E.y+=C}}return a},e.getBox=function(e){var t=e.length;if(0!==t){for(var r=e[0].x+e[0].glyphMosaicItem.metrics.left,n=r,i=e[0].y,o=i,a=i,s=1;s<t;s++){var u=e[s],l=u.x+u.glyphMosaicItem.metrics.left;l<r&&(r=l),l>n&&(n=l);var c=u.y;if(c<i&&(i=c),c>o&&(o=c),c!==a){var f=e[s-1].glyphMosaicItem.metrics.width;n=Math.max(n,e[s-1].x+e[s-1].glyphMosaicItem.metrics.left+f),a=c}}var h=e[t-1].glyphMosaicItem.metrics.width;return{x:r,y:o+=12,width:(n=Math.max(n,e[t-1].x+e[t-1].glyphMosaicItem.metrics.left+h))-r,height:o-(i-=12)}}},e.addDecoration=function(e,t){var n=e.length;if(0!==n){for(var i=e[0].x+e[0].glyphMosaicItem.metrics.left,o=e[0].y,a=1;a<n;a++){var s=e[a];if(s.y!==o){var u=e[a-1].x+e[a-1].glyphMosaicItem.metrics.left+e[a-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:i,y:o+t-3,glyphMosaicItem:{rect:new r(4,0,4,8),metrics:{width:u-i,height:8,left:0,top:0,advance:0},page:0}}),o=s.y,i=s.x+s.glyphMosaicItem.metrics.left}}var l=e[n-1].x+e[n-1].glyphMosaicItem.metrics.left+e[n-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:i,y:o+t-3,glyphMosaicItem:{rect:new r(4,0,4,8),metrics:{width:l-i,height:8,left:0,top:0,advance:0},page:0}})}},e.prototype._applyJustification=function(e,t,r){for(var n=e[r],i=n.glyphMosaicItem.metrics.advance,o=(n.x+i)*this._justify,a=t;a<=r;a++)e[a].x-=o},e}()}.apply(null,n))||(e.exports=i)},1518:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(774),r(1052),r(1022)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t,r){this.ratio=e,this.x=t,this.y=r}}(),a=function(){function e(e,t,n,i,o){void 0===i&&(i=8),void 0===o&&(o=8),this.lines=[],this.starts=[],this.pixelRatio=i,this.pixelMargin=o,this.tileSize=r.TILE_SIZE*i,this.dz=e,this.yPos=t,this.xPos=n}return e.prototype.setExtent=function(e){this.finalRatio=this.tileSize/e*(1<<this.dz);var t=this.pixelRatio*this.pixelMargin;t/=this.finalRatio;var r=e>>this.dz;t>r&&(t=r),this.margin=t,this.xmin=r*this.xPos-t,this.ymin=r*this.yPos-t,this.xmax=this.xmin+r+2*t,this.ymax=this.ymin+r+2*t},e.prototype.reset=function(e){this.type=e,this.lines=[],this.starts=[],this.line=null,this.start=0},e.prototype.moveTo=function(e,t){this._pushLine(),this._prevIsIn=this._isIn(e,t),this._moveTo(e,t,this._prevIsIn),this._prevPt=new n.Point(e,t),this._firstPt=new n.Point(e,t),this._dist=0},e.prototype.lineTo=function(e,t){var r,i,a,s,u,l,c,f,h=this._isIn(e,t),p=new n.Point(e,t),d=n.Point.distance(this._prevPt,p);if(h)this._prevIsIn?this._lineTo(e,t,!0):(r=this._prevPt,i=p,a=this._intersect(i,r),this.start=this._dist+d*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(i.x,i.y,!0));else if(this._prevIsIn)i=this._prevPt,r=p,a=this._intersect(i,r),this._lineTo(a.x,a.y,!0),this._lineTo(r.x,r.y,!1);else{var v=this._prevPt,y=p;if(v.x<=this.xmin&&y.x<=this.xmin||v.x>=this.xmax&&y.x>=this.xmax||v.y<=this.ymin&&y.y<=this.ymin||v.y>=this.ymax&&y.y>=this.ymax)this._lineTo(y.x,y.y,!1);else{var m=[];if((v.x<this.xmin&&y.x>this.xmin||v.x>this.xmin&&y.x<this.xmin)&&(s=(this.xmin-v.x)/(y.x-v.x),(f=v.y+s*(y.y-v.y))<=this.ymin?l=!1:f>=this.ymax?l=!0:m.push(new o(s,this.xmin,f))),(v.x<this.xmax&&y.x>this.xmax||v.x>this.xmax&&y.x<this.xmax)&&(s=(this.xmax-v.x)/(y.x-v.x),(f=v.y+s*(y.y-v.y))<=this.ymin?l=!1:f>=this.ymax?l=!0:m.push(new o(s,this.xmax,f))),(v.y<this.ymin&&y.y>this.ymin||v.y>this.ymin&&y.y<this.ymin)&&(s=(this.ymin-v.y)/(y.y-v.y),(c=v.x+s*(y.x-v.x))<=this.xmin?u=!1:c>=this.xmax?u=!0:m.push(new o(s,c,this.ymin))),(v.y<this.ymax&&y.y>this.ymax||v.y>this.ymax&&y.y<this.ymax)&&(s=(this.ymax-v.y)/(y.y-v.y),(c=v.x+s*(y.x-v.x))<=this.xmin?u=!1:c>=this.xmax?u=!0:m.push(new o(s,c,this.ymax))),0===m.length)u?l?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):l?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(m.length>1&&m[0].ratio>m[1].ratio)this.start=this._dist+d*m[1].ratio,this._lineTo(m[1].x,m[1].y,!0),this._lineTo(m[0].x,m[0].y,!0);else{this.start=this._dist+d*m[0].ratio;for(var g=0;g<m.length;g++)this._lineTo(m[g].x,m[g].y,!0)}this._lineTo(y.x,y.y,!1)}}this._dist+=d,this._prevIsIn=h,this._prevPt=p},e.prototype.close=function(){if(this.line.length>2){var e=this._firstPt,t=this._prevPt;e.x===t.x&&e.y===t.y||this.lineTo(e.x,e.y);for(var r=this.line,n=r.length;n>=4&&(r[0].x===r[1].x&&r[0].x===r[n-2].x||r[0].y===r[1].y&&r[0].y===r[n-2].y);)r.pop(),r[0].x=r[n-2].x,r[0].y=r[n-2].y,--n}},e.prototype.result=function(e){return void 0===e&&(e=!0),this._pushLine(),0===this.lines.length?null:(3===this.type&&e&&u.simplify(this.tileSize,this.margin*this.finalRatio,this.lines),this.lines)},e.prototype.resultWithStarts=function(){if(2!==this.type)throw new Error("Only valid for lines");this._pushLine();var e=this.lines,t=e.length;if(0===t)return null;for(var r=[],n=0;n<t;n++)r.push({line:e[n],start:this.starts[n]||0});return r},e.prototype._isIn=function(e,t){return e>=this.xmin&&e<=this.xmax&&t>=this.ymin&&t<=this.ymax},e.prototype._intersect=function(e,t){var r,i,o;if(t.x>=this.xmin&&t.x<=this.xmax)o=((i=t.y<=this.ymin?this.ymin:this.ymax)-e.y)/(t.y-e.y),r=e.x+o*(t.x-e.x);else if(t.y>=this.ymin&&t.y<=this.ymax)o=((r=t.x<=this.xmin?this.xmin:this.xmax)-e.x)/(t.x-e.x),i=e.y+o*(t.y-e.y);else{i=t.y<=this.ymin?this.ymin:this.ymax;var a=((r=t.x<=this.xmin?this.xmin:this.xmax)-e.x)/(t.x-e.x),s=(i-e.y)/(t.y-e.y);a<s?(o=a,i=e.y+a*(t.y-e.y)):(o=s,r=e.x+s*(t.x-e.x))}return this._r=o,new n.Point(r,i)},e.prototype._pushLine=function(){this.line&&(1===this.type?this.line.length>0&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?this.line.length>1&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&this.line.length>3&&(this.lines.push(this.line),this.starts.push(this.start))),this.line=[],this.start=0},e.prototype._moveTo=function(e,t,r){3!==this.type?r&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new n.Point(e,t))):(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.push(new n.Point(e,t)),this._is_h=!1,this._is_v=!1)},e.prototype._lineTo=function(e,t,r){var i,o;if(3!==this.type)if(r){if(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line.length>0&&(i=this.line[this.line.length-1]).equals(e,t))return;this.line.push(new n.Point(e,t))}else this.line&&this.line.length>0&&this._pushLine();else if(r||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),t<this.ymin&&(t=this.ymin),t>this.ymax&&(t=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),t=Math.round((t-(this.ymin+this.margin))*this.finalRatio),this.line&&this.line.length>0){var a=(i=this.line[this.line.length-1]).x===e,s=i.y===t;if(a&&s)return;this._is_h&&a?(i.x=e,i.y=t,(o=this.line[this.line.length-2]).x===e&&o.y===t?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===e,this._is_v=o.y===t)):(this._is_h=o.x===e,this._is_v=o.y===t)):this._is_v&&s?(i.x=e,i.y=t,(o=this.line[this.line.length-2]).x===e&&o.y===t?(this.line.pop(),this.line.length<=1?(this._is_h=!1,this._is_v=!1):(o=this.line[this.line.length-2],this._is_h=o.x===e,this._is_v=o.y===t)):(this._is_h=o.x===e,this._is_v=o.y===t)):(this.line.push(new n.Point(e,t)),this._is_h=a,this._is_v=s)}else this.line.push(new n.Point(e,t))},e}();t.TileClipper=a;var s=function(){function e(){}return e.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e},e.prototype.reset=function(e){this.type=e,this.lines=[],this.line=null},e.prototype.moveTo=function(e,t){this.line&&this.lines.push(this.line),this.line=[];var r=this._ratio;this.line.push(new n.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.lineTo=function(e,t){var r=this._ratio;this.line.push(new n.Point(Math.round(e*r),Math.round(t*r)))},e.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])},e.prototype.result=function(){return this.line&&this.lines.push(this.line),0===this.lines.length?null:(3===this.type&&1!==this._ratio&&u.simplify(4096,64,this.lines),this.lines)},e}();t.SimpleBuilder=s;var u=function(){function e(){}return e.simplify=function(t,r,n){if(n){for(var i=-r,o=t+r,a=-r,s=t+r,u=[],l=[],c=n.length,f=0;f<c;++f){var h=n[f];if(h&&!(h.length<2))for(var p=h[0],d=void 0,v=h.length,y=1;y<v;++y)d=h[y],p.x===d.x&&(p.x<=i&&(p.y>d.y?(u.push(f),u.push(y),u.push(0),u.push(-1)):(l.push(f),l.push(y),l.push(0),l.push(-1))),p.x>=o&&(p.y<d.y?(u.push(f),u.push(y),u.push(1),u.push(-1)):(l.push(f),l.push(y),l.push(1),l.push(-1)))),p.y===d.y&&(p.y<=a&&(p.x<d.x?(u.push(f),u.push(y),u.push(2),u.push(-1)):(l.push(f),l.push(y),l.push(2),l.push(-1))),p.y>=s&&(p.x>d.x?(u.push(f),u.push(y),u.push(3),u.push(-1)):(l.push(f),l.push(y),l.push(3),l.push(-1)))),p=d}if(0!==u.length&&0!==l.length){e.fillParent(n,l,u),e.fillParent(n,u,l);var m=[];e.calcDeltas(m,l,u),e.calcDeltas(m,u,l),e.addDeltas(m,n)}}},e.fillParent=function(e,t,r){for(var n=r.length,o=t.length,a=0;a<o;a+=4){for(var s=t[a],u=t[a+1],l=t[a+2],c=e[s][u-1],f=e[s][u],h=8092,p=-1,d=0;d<n;d+=4)if(r[d+2]===l){var v=r[d],y=r[d+1],m=e[v][y-1],g=e[v][y];switch(l){case 0:case 1:if(i.between(c.y,m.y,g.y)&&i.between(f.y,m.y,g.y))(_=Math.abs(g.y-m.y))<h&&(h=_,p=d);break;case 2:case 3:var _;if(i.between(c.x,m.x,g.x)&&i.between(f.x,m.x,g.x))(_=Math.abs(g.x-m.x))<h&&(h=_,p=d)}}t[a+3]=p}},e.calcDeltas=function(t,r,n){for(var i=r.length,o=0;o<i;o+=4){var a=e.calcDelta(o,r,n,[]);t.push(r[o]),t.push(r[o+1]),t.push(r[o+2]),t.push(a)}},e.calcDelta=function(t,r,n,i){var o=r[t+3];if(-1===o)return 0;var a=i.length;return a>1&&i[a-2]===o?0:(i.push(o),e.calcDelta(o,n,r,i)+1)},e.addDeltas=function(e,t){for(var r=e.length,n=0,i=0;i<r;i+=4){(s=e[i+3])>n&&(n=s)}for(i=0;i<r;i+=4){var o=t[e[i]],a=e[i+1],s=n-e[i+3];switch(e[i+2]){case 0:o[a-1].x-=s,o[a].x-=s,1===a&&(o[o.length-1].x-=s),a===o.length-1&&(o[0].x-=s);break;case 1:o[a-1].x+=s,o[a].x+=s,1===a&&(o[o.length-1].x+=s),a===o.length-1&&(o[0].x+=s);break;case 2:o[a-1].y-=s,o[a].y-=s,1===a&&(o[o.length-1].y-=s),a===o.length-1&&(o[0].y-=s);break;case 3:o[a-1].y+=s,o[a].y+=s,1===a&&(o[o.length-1].y+=s),a===o.length-1&&(o[0].y+=s)}}},e}()}.apply(null,n))||(e.exports=i)},1519:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(380),r(354)],void 0===(i=function(e,t,n,i,o){function a(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,h.init(),p.init(),d.init(),v.init(),y.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++){r(o[i].prototype,"getName",function(e){return function(){return e.call(this,new Array(h.PE_NAME_MAX))}})}for(var a=0,s=[t._pe.PeGeogtran,t._pe.PeProjcs];a<s.length;a++){r(s[a].prototype,"getParameters",function(e){return function(){for(var r=new Array(h.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}})}r(t._pe.PeHorizon.prototype,"getCoord",function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return c(r,t,e.call(this)),r}}),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+r*s,t._pe.PeGTlistExtendedGTs))}return n}});var u=t._pe._pe_getPeHorizonSize(),l=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var a=t._pe.getPointer(i),s=1;s<o;s++)n.push(t._pe.wrapPointer(a+u*s,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",l),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",l),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=h.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(h.PE_BUFFER_MAX));return t._pe.Pointer_stringify(t._pe._pe_object_to_string_ext(r,e,n))}}function s(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function u(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function l(e){var t;return Array.isArray(e[0])?(t=[],e.forEach(function(e){t.push(e[0],e[1])})):t=e,t}function c(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var a=0===e.length;for(o=0;o<r;o++)a&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}var f,h,p,d,v,y;Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!o("esri-wasm")},t.load=function(){return f?f.promise:(f=new i,Promise.resolve().then(function(){var t=[r(332)];(function(t){t({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){f.reject(new Error(e))}}).then(function(e){a(e),f.resolve()})}).apply(null,t)}).catch(r.oe),f.promise)},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=l(n),o=n===i,a=t._pe.ensureFloat64(i),s=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,a);return s&&c(n,r,a,o),s}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=l(n),a=n===o,s=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,s,i);return u&&c(n,r,s,a),u}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case h.PE_TRANSFORM_P_TO_G:return n(e,t,i);case h.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.get_PE_BUFFER_MAX(),e.PE_NAME_MAX=t._pe.PeDefs.prototype.get_PE_NAME_MAX(),e.PE_MGRS_MAX=t._pe.PeDefs.prototype.get_PE_MGRS_MAX(),e.PE_USNG_MAX=t._pe.PeDefs.prototype.get_PE_USNG_MAX(),e.PE_DD_MAX=t._pe.PeDefs.prototype.get_PE_DD_MAX(),e.PE_DDM_MAX=t._pe.PeDefs.prototype.get_PE_DDM_MAX(),e.PE_DMS_MAX=t._pe.PeDefs.prototype.get_PE_DMS_MAX(),e.PE_UTM_MAX=t._pe.PeDefs.prototype.get_PE_UTM_MAX(),e.PE_PARM_MAX=t._pe.PeDefs.prototype.get_PE_PARM_MAX(),e.PE_TYPE_NONE=t._pe.PeDefs.prototype.get_PE_TYPE_NONE(),e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.get_PE_TYPE_GEOGCS(),e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.get_PE_TYPE_PROJCS(),e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.get_PE_TYPE_GEOGTRAN(),e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.get_PE_TYPE_COORDSYS(),e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.get_PE_TYPE_UNIT(),e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.get_PE_STR_OPTS_NONE(),e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.get_PE_STR_AUTH_NONE(),e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.get_PE_STR_AUTH_TOP(),e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.get_PE_STR_NAME_CANON(),e.PE_PARM_X0=t._pe.PeDefs.prototype.get_PE_PARM_X0(),e.PE_PARM_ND=t._pe.PeDefs.prototype.get_PE_PARM_ND(),e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.get_PE_TRANSFORM_1_TO_2(),e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.get_PE_TRANSFORM_2_TO_1(),e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.get_PE_TRANSFORM_P_TO_G(),e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.get_PE_TRANSFORM_G_TO_P(),e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.get_PE_HORIZON_RECT(),e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.get_PE_HORIZON_POLY(),e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.get_PE_HORIZON_LINE(),e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.get_PE_HORIZON_DELTA()}}(h=t.PeDefs||(t.PeDefs={})),function(e){function r(e,r){var o=null,a=i[e];if(a||(a={},i[e]=a),a.hasOwnProperty(String(r)))o=a[r];else{var s=t._pe.PeFactory.prototype.factoryByType(e,r);t._pe.compare(s,t._pe.NULL)||(o=s,a[r]=o)}return n(o)}function n(e){if(e){var r=e.getType();switch(r){case h.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case h.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case h.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&h.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}var i={},o={};e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return r(h.PE_TYPE_COORDSYS,e)},e.factoryByType=r,e.fromString=function(e,r){var i=null,a=o[e];if(a||(a={},o[e]=a),a.hasOwnProperty(r))i=a[r];else{var s=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(s,t._pe.NULL)||(i=s,a[r]=i)}return n(i)},e.geogcs=function(e){return r(h.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return r(h.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return r(h.PE_TYPE_PROJCS,e)},e.unit=function(e){return r(h.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.get_PE_GTLIST_OPTS_COMMON(),r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,a,s){var u=null,l=new t._pe.PeInteger(s);try{var c=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,a,l);if((s=l.get_val())&&(u=[c],s>1))for(var f=t._pe.getPointer(c),h=1;h<s;h++)u.push(t._pe.wrapPointer(f+r*h,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(l)}return u}}(p=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})).destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];s(i),i.getEntries().forEach(function(e){s(e);var t=e.getGeogtran();s(t),t.getParameters().forEach(s),[t.getGeogcs1(),t.getGeogcs2()].forEach(function(e){s(e);var t=e.getDatum();s(t),s(t.getSpheroid()),s(e.getPrimem()),s(e.getUnit())})})}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(),function(e){(t.PeGTTransformations||(t.PeGTTransformations={})).geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=l(n),s=n===a,u=t._pe.ensureFloat64(a),f=0;i&&(f=t._pe.ensureFloat64(i));var h=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,u,f,o);return h&&c(n,r,u,s),h}}(),function(e){function r(e,r,n,i,o,a){var s,c;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_geog_to_dd,c=h.PE_DD_MAX;break;case"ddm":s=t._pe._pe_geog_to_ddm,c=h.PE_DDM_MAX;break;case"dms":s=t._pe._pe_geog_to_dms,c=h.PE_DMS_MAX}var f=0;r&&(f=t._pe.getPointer(r));var p=l(i),d=t._pe.ensureFloat64(p),v=u(n,c),y=s(f,n,d,o,t._pe.ensureInt32(v));if(y)for(var m=0;m<n;m++)a[m]=t._pe.Pointer_stringify(v[m]);return y}function n(e,r,n,i,o){var a;switch(t._pe.ensureCache.prepare(),e){case"dd":a=t._pe._pe_dd_to_geog;break;case"ddm":a=t._pe._pe_ddm_to_geog;break;case"dms":a=t._pe._pe_dms_to_geog}var s=0;r&&(s=t._pe.getPointer(r));var u=i.map(function(e){return t._pe.ensureString(e)}),l=t._pe.ensureInt32(u),f=t._pe.ensureFloat64(new Array(2*n)),h=a(s,n,l,f);return h&&c(o,n,f),h}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_NEW(),e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_OLD(),e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_AUTO(),e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.get_PE_MGRS_180_ZONE_1_PLUS(),e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.get_PE_MGRS_ADD_SPACES()},e.geog_to_mgrs_extended=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var c=0;e&&(c=t._pe.getPointer(e));var f=l(n),p=t._pe.ensureFloat64(f),d=u(r,h.PE_MGRS_MAX),v=t._pe.ensureInt32(d),y=t._pe._pe_geog_to_mgrs_extended(c,r,p,i,o,a,v);if(y)for(var m=0;m<r;m++)s[m]=t._pe.Pointer_stringify(d[m]);return y},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*r)),f=t._pe._pe_mgrs_to_geog_extended(a,r,u,i,l);return f&&c(o,r,l),f}}(d=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,a,s){t._pe.ensureCache.prepare();var c=0;e&&(c=t._pe.getPointer(e));var f=l(n),p=t._pe.ensureFloat64(f),d=u(r,h.PE_MGRS_MAX),v=t._pe.ensureInt32(d),y=t._pe._pe_geog_to_usng(c,r,p,i,o,a,v);if(y)for(var m=0;m<r;m++)s[m]=t._pe.Pointer_stringify(d[m]);return y},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var a=n.map(function(e){return t._pe.ensureString(e)}),s=t._pe.ensureInt32(a),u=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_usng_to_geog(o,r,s,u);return l&&c(i,r,u),l}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_NONE(),e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_ADD_SPACES(),e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_NS()},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=l(n),c=t._pe.ensureFloat64(s),f=u(r,h.PE_UTM_MAX),p=t._pe.ensureInt32(f),d=t._pe._pe_geog_to_utm(a,r,c,i,p);if(d)for(var v=0;v<r;v++)o[v]=t._pe.Pointer_stringify(f[v]);return d},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var a=0;e&&(a=t._pe.getPointer(e));var s=n.map(function(e){return t._pe.ensureString(e)}),u=t._pe.ensureInt32(s),l=t._pe.ensureFloat64(new Array(2*r)),f=t._pe._pe_utm_to_geog(a,r,u,i,l);return f&&c(o,r,l),f}}(v=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.get_PE_PCSINFO_OPTION_NONE(),e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.get_PE_PCSINFO_OPTION_DOMAIN(),e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.get_PE_POLE_OUTSIDE_BOUNDARY(),e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.get_PE_POLE_POINT()},e.generate=function(n,i){var o,a;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(a=r.get(n))[i]&&(o=a[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),a||(a=[],r.set(n,a)),a[i]=o),o}}(y=t.PePCSInfo||(t.PePCSInfo={})),function(e){(t.PeVersion||(t.PeVersion={})).version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(),t._init=a}.apply(null,n))||(e.exports=i)},1520:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1521)],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,a=t.steps;o<a.length;o++){var s=a[o],u=r.fromGE(s);n.steps.push(u),i+=u.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var a=this._cached_projection[e.cacheKey(t,r)];return void 0===a?null:a},e}()}.apply(null,n))||(e.exports=i)},1521:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},1522:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(724),r(354),r(1430),r(367),r(1054)],void 0===(i=function(e,t,r,n,i,o,a){function s(e,t){return u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],e.search(u)}Object.defineProperty(t,"__esModule",{value:!0});var u={minX:0,minY:0,maxX:0,maxY:0},l=[],c=function(){function e(e){this._boundsByFeature=new r.default,this._featuresByBounds=new r.default,this._index=i(9,n("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this.featureInfo=e}return Object.defineProperty(e.prototype,"bounds",{get:function(){if(!this.size)return null;var e=o.create(o.NEGATIVE_INFINITY);return this._boundsByFeature.forEach(function(t){t&&(e[0]=Math.min(t[0],e[0]),e[1]=Math.min(t[1],e[1]),e[2]=Math.max(t[2],e[2]),e[3]=Math.max(t[3],e[3]))}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._boundsByFeature.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){if(e){if(!e.geometry)return void this._boundsByFeature.set(e,null);var t=a.getBoundsOptimizedGeometry(o.create(),e.geometry,this.featureInfo.hasZ,this.featureInfo.hasM);this._boundsByFeature.set(e,t),this._featuresByBounds.set(t,e),this._index.insert(t)}},e.prototype.addMany=function(e){for(var t=this.featureInfo,r=t.hasM,n=t.hasZ,i=0,s=e;i<s.length;i++){var u=s[i];if(u)if(u.geometry){var c=a.getBoundsOptimizedGeometry(o.create(),u.geometry,n,r);this._boundsByFeature.set(u,c),this._featuresByBounds.set(c,u),l.push(c)}else this._boundsByFeature.set(u,null)}this._index.load(l),l.length=0},e.prototype.clear=function(){this._index.clear(),this._boundsByFeature.clear(),this._featuresByBounds.clear()},e.prototype.forEachBounds=function(e,t){for(var r=0,n=e;r<n.length;r++){var i=n[r],o=this.getBounds(i);o&&t(o,i)}},e.prototype.getBounds=function(e){return this._boundsByFeature.get(e)},e.prototype.has=function(e){return this._boundsByFeature.has(e)},e.prototype.remove=function(e){if(e){var t=this._boundsByFeature.get(e);t&&(this._index.remove(t),this._featuresByBounds.delete(t)),this._boundsByFeature.delete(e)}},e.prototype.removeMany=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.remove(n)}},e.prototype.replace=function(e,t){if(this._boundsByFeature.has(e)){var r=this._boundsByFeature.get(e);r&&(this._index.remove(r),this._boundsByFeature.delete(e),this._featuresByBounds.delete(r)),t&&(t.geometry?(a.getBoundsOptimizedGeometry(r,t.geometry,this.featureInfo.hasZ,this.featureInfo.hasM),this._boundsByFeature.set(t,r),this._featuresByBounds.set(r,t),this._index.insert(r)):this._boundsByFeature.set(t,null))}},e.prototype.forEachFeatureInBounds=function(e,t){for(var r=0,n=s(this._index,e);r<n.length;r++){var i=n[r];t(this._featuresByBounds.get(i))}},e.prototype.mapFeaturesInBounds=function(e,t){for(var r=[],n=0,i=s(this._index,e);n<i.length;n++){var o=i[n];r.push(t(this._featuresByBounds.get(o)))}return r},e}();t.default=c}.apply(null,n))||(e.exports=i)},1523:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(592),r(340),r(773),r(410),r(1054),r(1524),r(1279),r(1384),r(1385)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c){Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){this.items=e,this.definitionExpression=t.definitionExpression,this.geometryType=t.geometryType,this.hasM=t.hasM,this.hasZ=t.hasZ,this.objectIdField=t.objectIdField,this.spatialReference=t.spatialReference,this.fieldsMap=t.fieldsMap}return Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.createQueryResponse=function(e){return e.outStatistics?this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e)},e.prototype.executeAttributesQuery=function(e){var t=u.getWhereClause(e.where);if(!t)return n.resolve(this);if(t.isStandardized()){for(var r=0,i=[],o=0,a=this.items;o<a.length;o++){var s=a[o];t.testFeature(s.attributes)&&(i[r++]=s)}var l=this._createNew(i);return l.definitionExpression=e.where,n.resolve(l)}return n.reject(new TypeError("Where clause is not standardized"))},e.prototype.executeObjectIdsQuery=function(e){if(!e.objectIds||!e.objectIds.length)return n.resolve(this);var t=new r.default(e.objectIds);return n.resolve(this._createNew(this.items.filter(function(e){return t.has(e.objectId)})))},e.prototype.project=function(t){var r=this;return!t||o.equals(this.spatialReference,t)?n.resolve(this):l.projectMany(this.items.map(function(e){return c.getGeometry(r,e)}),this.spatialReference,t).then(function(n){for(var i=[],o=0;o<r.items.length;o++)i[o]={attributes:r.items[o].attributes,geometry:n[o]};var s=[];return a.convertFromFeatures(s,i,r.geometryType,r.hasZ,r.hasM,r.objectIdField),new e(s,{definitionExpression:r.definitionExpression,geometryType:r.geometryType,hasM:r.hasM,hasZ:r.hasZ,objectIdField:r.objectIdField,spatialReference:t,fieldsMap:r.fieldsMap})})},e.prototype._createFeatureQueryResponse=function(e){var t=this,r=this.items,n=this,o=n.geometryType,a=n.hasM,s=n.hasZ,u=n.objectIdField,l=n.spatialReference,c=e.outFields,f=e.outSpatialReference,h=e.quantizationParameters,p=!1;if(null!=e.num&&null!=e.start){var d=e.start+e.num;p=r.length>d,r=r.slice(e.start,Math.min(r.length,d))}return{exceededTransferLimit:p,features:this._createFeatures(e,r),fields:c&&c.map(function(e){return t.fieldsMap.get(e)}),geometryType:o,hasM:a,hasZ:s,objectIdFieldName:u,spatialReference:function(e){return e?JSON.parse(JSON.stringify(e,["latestWkid","wkid","wkt"])):e}(f?f.toJSON():l),transform:h&&i.toTransform(h)}},e.prototype._createFeatures=function(e,t){var r=new s.default(e,this.fieldsMap),n=e.quantizationParameters,o=e.returnGeometry,a=e.returnCentroid,u=e.maxAllowableOffset,l=e.orderByFields,f=[],h=0;if(t.length&&l&&l.length){var p=l[0].split(" "),d=p[0],v="DESC"===p[1];t.sort(function(e,t){var n=r.getFieldValue(e,d),i=r.getFieldValue(t,d);if("number"==typeof n&&"number"==typeof i)return v?i-n:n-i;if("string"==typeof n&&"string"==typeof i){var o=n.toUpperCase(),a=i.toUpperCase();return(v?o>a:o<a)?-1:(v?o<a:o>a)?1:0}})}if(o||a){var y=i.toTransform(n);if(o&&!a)for(var m=0,g=t;m<g.length;m++){var _=g[m];f[h++]={attributes:r.getAttributes(_),geometry:c.getGeometry(this,_,u,y)}}else if(!o&&a)for(var x=0,b=t;x<b.length;x++){_=b[x];f[h++]={attributes:r.getAttributes(_),centroid:c.getCentroid(this,_,y)}}else for(var w=0,I=t;w<I.length;w++){_=I[w];f[h++]={attributes:r.getAttributes(_),centroid:c.getCentroid(this,_,y),geometry:c.getGeometry(this,_,u,y)}}}else for(var P=0,T=t;P<T.length;P++){_=T[P];var C=r.getAttributes(_);C&&(f[h++]={attributes:C})}return f},e.prototype._createNew=function(t){return new e(t,this)},e.prototype._createStatisticsQueryResponse=function(e){for(var t=new s.default(e,this.fieldsMap),r=e.outStatistics,n=[],i=[],o=e.groupByFieldsForStatistics,a=e.having,u=o&&o.length,l=u&&o[0],c={},f={},h={},p={attributes:{}},d=0,v=r;d<v.length;d++){var y=v[d],m=y.onStatisticField,g=y.outStatisticFieldName,_=y.statisticType,x="1"===m;if(u&&(m===l||x)&&"count"===_){c[m]||(c[m]=this._calculateUniqueValues(t,x?l:m));var b=c[m];for(var w in b){var I=b[w],P=I.count,T=I.data,C=I.items,M=f[T]||{attributes:{}};a&&!t.validateItems(C,a)||(M.attributes[g]=P,M.attributes[x?"EXPR_1":m]=T,f[T]=M)}i.push({name:g,alias:g,type:"esriFieldTypeString"})}else{if(u){var S=this._calculateUniqueValues(t,l);for(var w in S){var E=S[w];T=E.data,C=E.items;if(!a||t.validateItems(C,a)){M=f[T]||{attributes:{}};var A=this._calculateStatistics(C,t,m),D="var"===_?"variance":_;M.attributes[g]=A[D],M.attributes[l]=T,f[T]=M}}}else{h[m]||(h[m]=this._calculateStatistics(this.items,t,m));A=h[m],D="var"===_?"variance":_;p.attributes[g]=A[D]}i.push({name:g,alias:g,type:"esriFieldTypeDouble"})}}if(u)for(var N in f)n.push(f[N]);else n.push(p);return{fields:i,features:n}},e.prototype._calculateStatistics=function(e,t,r){for(var n=e.length,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=null,s=null,u=null,l=null,c=[],f=0;f<n;f++){var h=e[f],p=c[f]=t.getFieldValue(h,r);isNaN(p)||(a+=p,i=Math.min(i,p),o=Math.max(o,p))}if(n){s=a/n;for(var d=0,v=0,y=c;v<y.length;v++){p=y[v];d+=Math.pow(p-s,2)}l=n>1?d/(n-1):0,u=Math.sqrt(l)}else i=null,o=null;return{avg:s,count:n,max:o,min:i,stddev:u,sum:a,variance:l}},e.prototype._calculateUniqueValues=function(e,t){for(var r={},n=0,i=this.items;n<i.length;n++){var o=i[n],a=e.getFieldValue(o,t);(null==a||"string"==typeof a&&""===a.trim())&&(a=null),null==r[a]?r[a]={count:1,data:a,items:[o]}:(r[a].count++,r[a].items.push(o))}return r},e}();t.default=f}.apply(null,n))||(e.exports=i)},1524:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(724),r(1279)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._fieldDataCache=new r.default,this._returnDistinctMap=new r.default,this.returnDistinctValues=e.returnDistinctValues,this.fieldsMap=t;var i=e.outFields;if(i&&-1===i.indexOf("*")){this.outFields=i;for(var o=0,a=0,s=i;a<s.length;a++){var u=s[a],l=n.getExpressionFromFieldName(u),c=this.fieldsMap.has(l),f=c?null:n.getWhereClause(l),h=c?this.fieldsMap.get(u).name:n.getAliasFromFieldName(u)||"FIELD_EXP_"+o++;this._fieldDataCache.set(u,{alias:h,clause:f})}}}return e.prototype.getAttributes=function(e){var t=e.attributes;return t=this._processAttributesForOutFields(t),this._processAttributesForDistinctValues(t)},e.prototype.getFieldValue=function(e,t){var r=e.attributes,i=this.fieldsMap.has(t),o=i?this.fieldsMap.get(t).name:t,a=null;return this._fieldDataCache.has(o)?a=this._fieldDataCache.get(o).clause:i||(a=n.getWhereClause(t),this._fieldDataCache.set(o,{alias:o,clause:a})),i?r[o]:a.calculateValue(r)},e.prototype.validateItem=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t)}),this._fieldDataCache.get(t).clause.testFeature(e.attributes)},e.prototype.validateItems=function(e,t){var r=this;this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t)});var i=e.map(function(e){return r.getAttributes(e)});return this._fieldDataCache.get(t).clause.testSet(i)},e.prototype._processAttributesForOutFields=function(e){var t=this.outFields;if(!e||!t||!t.length)return e;for(var r={},n=0,i=t;n<i.length;n++){var o=i[n],a=this._fieldDataCache.get(o),s=a.alias,u=a.clause;r[s]=u?u.calculateValue(e):e[s]}return r},e.prototype._processAttributesForDistinctValues=function(e){if(!e||!this.returnDistinctValues)return e;var t=this.outFields,r=[];if(t)for(var n=0,i=t;n<i.length;n++){var o=i[n],a=this._fieldDataCache.get(o).alias;r.push(e[a])}else for(var a in e)r.push(e[a]);var s=(t||["*"]).join(",")+"="+r.join(","),u=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++u),u>1?null:e},e}();t.default=i}.apply(null,n))||(e.exports=i)},1525:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(659),r(703)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t,r){this.cache=e,this.key=t,this.result=r}}(),o=new n(2e6,{disposeFunction:function(e,t){t.cache.has(t.key)&&t.cache.delete(t.key)},sizeOfFunction:function(e){return e.result.size}}),a=function(){function e(){this._id=e.id_gen+++"$$",this._keys=new Set}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;0!==this._keys.size&&(r.forOf(this._keys,function(t){o.delete(e._getGlobalKey(t))}),this._keys.clear())},e.prototype.delete=function(e){return this._keys.delete(e),o.delete(this._getGlobalKey(e))},e.prototype.get=function(e){var t=o.get(this._getGlobalKey(e));return t&&t.result},e.prototype.has=function(e){return o.has(this._getGlobalKey(e))},e.prototype.set=function(e,t){return this._keys.add(e),o.set(this._getGlobalKey(e),new i(this,e,t)),this},e.prototype._getGlobalKey=function(e){return this._id+e},e.id_gen=0,e}();t.default=a}.apply(null,n))||(e.exports=i)},1526:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(342),r(340),r(730),r(910),r(383)],void 0===(i=function(e,t,n,i,o,a,s){function u(){return i.create(function(e){return r.e(19).then(function(){var t=[r(1321)];e.apply(null,t)}.bind(this)).catch(r.oe)})}Object.defineProperty(t,"__esModule",{value:!0});var l="feature-store:unsupported-query",c={spatialRelationship:{intersects:!0,contains:!0,within:!0,crosses:!0,touches:!0,overlaps:!0,"envelope-intersects":!0},queryGeometry:{point:!0,multipoint:!0,polyline:!0,polygon:!0,extent:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0}};t.importGeometryEngine=u,t.getGeodesicBufferOperator=function(){return u().then(function(e){return e.geodesicBuffer})},t.getSpatialQueryOperator=function(e,t,r){if("intersects"===e){if("polygon"===t.type&&"esriGeometryPoint"===r)return i.resolve(o.polygonContainsPoint.bind(null,t.toJSON()));if("extent"===t.type)return i.resolve(a.getExtentIntersector(r).bind(null,t))}return u().then(function(r){return r[e].bind(null,t.toJSON())})},t.checkSpatialQuerySupport=function(e,t,r){var o=e.spatialRelationship,a=e.geometry;return a?function(e){return!0===c.spatialRelationship[e]}(o)?function(e){return!0===c.queryGeometry[e]}(a.type)?function(e){return!0===c.layerGeometry[e]}(t)?s.canProject(a.spatialReference,r)?(a.hasZ,i.resolve()):i.reject(new n(l,"Unsupported geometry spatialReference",{query:e})):i.reject(new n(l,"Unsupported layer geometry type",{query:e})):i.reject(new n(l,"Unsupported query geometry type",{query:e})):i.reject(new n(l,"Unsupported query spatial relationship",{query:e})):null},t.canQueryWithRBush=function(e){switch(e.type){case"extent":return!0;case"polygon":return e.rings.every(function(e){return 5===e.length&&e[0][0]===e[1][0]&&e[0][0]===e[4][0]&&e[2][0]===e[3][0]&&e[0][1]===e[3][1]&&e[0][1]===e[4][1]&&e[1][1]===e[2][1]});default:return!1}}}.apply(null,n))||(e.exports=i)},1640:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(354),r(1031),r(701),r(340)],void 0===(i=function(e,t,r,n,i,o){function a(){var e=0===u.length;if(!e){for(var t=i();!e&&i()-t<s;){var r=u[c];if(r){if(!0===r()){var o=l.get(r);u[c]=null,l.delete(r),o()}c=(c+1)%u.length}else u.splice(c,1),(e=0===u.length)?c=0:c%=u.length}e||n(a)}}var s=r("host-browser")?6:200,u=[],l=new Map,c=0;return function(e){return e?o.create(function(t){u.push(e),l.set(e,t),1===u.length&&n(a)},function(){u[u.indexOf(e)]=null,l.delete(e)}):o.reject(new TypeError("callback is not a function"))}}.apply(null,n))||(e.exports=i)},1641:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(1380)],void 0===(i=function(e,t,r,n,i){return function(e){function t(t,r){return e.call(this,t,r)||this}return r(t,e),t}(i)}.apply(null,n))||(e.exports=i)},1642:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(1380)],void 0===(i=function(e,t,r,n,i){return function(e){function t(t,r,n,i){var o=e.call(this,t,r)||this;return o._circleVertexBuffer=n,o._circleIndexBuffer=i,o}return r(t,e),Object.defineProperty(t.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._circleIndexStart=this._circleIndexStart,t._circleIndexCount=this._circleIndexCount},t.prototype.processFeatures=function(e,t){var r=this._circleVertexBuffer,n=this._circleIndexBuffer;this._circleIndexStart=n.index,this._circleIndexCount=0;var i=this.layer,o=this.zoom;e&&e.setExtent(this.layerExtent);for(var a=1,s=[1,1,1,1],u=1,l=0,c=1,f=[1,1,1,1],h=1,p=0,d=this._features;p<d.length;p++){var v=d[p],y=v.getGeometry(e);if(y){i.hasDataDrivenRadius&&(a=i.getPaintValue("circle-radius",o,v)),i.hasDataDrivenColor&&(s=i.getPaintValue("circle-color",o,v)),i.hasDataDrivenOpacity&&(u=i.getPaintValue("circle-opacity",o,v)),i.hasDataDrivenStrokeWidth&&(c=i.getPaintValue("circle-stroke-width",o,v)),i.hasDataDrivenStrokeColor&&(f=i.getPaintValue("circle-stroke-color",o,v)),i.hasDataDrivenStrokeOpacity&&(h=i.getPaintValue("circle-stroke-opacity",o,v)),i.hasDataDrivenBlur&&(l=i.getPaintValue("circle-blur",o,v));for(var m=0,g=y;m<g.length;m++){var _=g[m];if(_)for(var x=0,b=_;x<b.length;x++){var w=b[x],I=r.index;r.add(w.x,w.y,0,0,a,s,u,l,c,f,h),r.add(w.x,w.y,0,1,a,s,u,l,c,f,h),r.add(w.x,w.y,1,0,a,s,u,l,c,f,h),r.add(w.x,w.y,1,1,a,s,u,l,c,f,h),n.add(I+0,I+1,I+2),n.add(I+1,I+2,I+3),this._circleIndexCount+=6}}}}},t}(i)}.apply(null,n))||(e.exports=i)},1643:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(718),r(829),r(1052),r(1380)],void 0===(i=function(e,t,r,n,i,o,a,s){return function(e){function t(t,r,n,i,o,a){var s=e.call(this,t,r)||this;if(t.hasDataDrivenFill!==n.isDataDriven())throw new Error("incompatible fill buffer");if(t.hasDataDrivenOutline!==o.isDataDriven())throw new Error("incompatible outline buffer");return s._fillVertexBuffer=n,s._fillIndexBuffer=i,s._outlineVertexBuffer=o,s._outlineIndexBuffer=a,s}return r(t,e),Object.defineProperty(t.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._fillIndexStart=this._fillIndexStart,t._fillIndexCount=this._fillIndexCount,e.layer.getPaintProperty("fill-outline-color")?(t._outlineIndexStart=this._outlineIndexStart,t._outlineIndexCount=this._outlineIndexCount):(t._outlineIndexStart=0,t._outlineIndexCount=0)},t.prototype.processFeatures=function(e,t){this._fillIndexStart=this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=this._outlineIndexBuffer.index,this._outlineIndexCount=0;var r=this.layer,n=this.zoom,i=r.hasDataDrivenFill,o=r.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var a=r.getPaintValue("fill-pattern",n),s=r.getPaintValue("fill-antialias",n)&&void 0===a,u=[1,1,1,1],l=[1,1,1,1],c=1;if(r.outlineUsesFillColor){if(s&&!r.hasDataDrivenOpacity){var f=r.getPaintValue("fill-opacity",n),h=r.getPaintValue("fill-opacity",n+1);f<1&&h<1&&(s=!1)}if(s&&!r.hasDataDrivenColor){var p=r.getPaintValue("fill-color",n),d=r.getPaintValue("fill-color",n+1);p[3]<1&&d[3]<1&&(s=!1)}}for(var v=0,y=this._features;v<y.length;v++){var m=y[v];!a&&r.hasDataDrivenColor&&(u=r.getPaintValue("fill-color",n,m)),r.hasDataDrivenOpacity&&(c=r.getPaintValue("fill-opacity",n,m)),!a&&r.hasDataDrivenOutlineColor&&(l=r.getPaintValue("fill-outline-color",n,m));var g=void 0;i&&(g={color:u,opacity:c});var _=void 0;o&&(_={color:r.outlineUsesFillColor?u:l,opacity:c});var x=m.getGeometry(e);this._processFeature(x,s,r.outlineUsesFillColor,g,_)}},t.prototype._processFeature=function(e,r,n,i,o){if(e){var a=e.length;if(r&&(!n||!o||o.color[3]*o.opacity==1))for(var s=0;s<a;s++)this._processOutline(e[s],o);var u;for(s=0;s<a;s++){var l=t._area(e[s]);l>128?(void 0!==u&&this._processFill(e,u,i),u=[s]):l<-128&&void 0!==u&&u.push(s)}void 0!==u&&this._processFill(e,u,i)}},t.prototype._processOutline=function(e,t){var r,n,i,o=this._outlineVertexBuffer,s=this._outlineIndexBuffer,u=s.index,l=new a.Point(0,0),c=new a.Point(0,0),f=new a.Point(0,0),h=-1,p=-1,d=-1,v=-1,y=-1,m=!1,g=e.length;if(!(g<2)){for(var _=e[0],x=e[g-1];g&&x.isEqual(_);)x=e[--g-1];if(!(g-0<2)){for(var b=0;b<g;++b){0===b?(r=e[g-1],n=e[0],i=e[1],l.assignSub(n,r),l.normalize(),l.rightPerpendicular()):(r=n,n=i,i=b!==g-1?e[b+1]:e[0],l.assign(c));var w=this._isClipEdge(r,n);-1===v&&(m=w),c.assignSub(i,n),c.normalize(),c.rightPerpendicular();var I=l.x*c.y-l.y*c.x;f.assignAdd(l,c),f.normalize();var P=-f.x*-l.x+-f.y*-l.y,T=Math.abs(0!==P?1/P:1);T>8&&(T=8),I>=0?(d=o.add(n.x,n.y,l.x,l.y,0,1,t),-1===v&&(v=d),h>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d),p=o.add(n.x,n.y,T*-f.x,T*-f.y,0,-1,t),-1===y&&(y=p),h>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d),h=p,p=d,d=o.add(n.x,n.y,f.x,f.y,0,1,t),h>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d),p=o.add(n.x,n.y,c.x,c.y,0,1,t),h>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d)):(d=o.add(n.x,n.y,T*f.x,T*f.y,0,1,t),-1===v&&(v=d),h>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d),p=o.add(n.x,n.y,-l.x,-l.y,0,-1,t),-1===y&&(y=p),h>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d),h=p,p=d,d=o.add(n.x,n.y,-f.x,-f.y,0,-1,t),h>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d),(h=o.add(n.x,n.y,-c.x,-c.y,0,-1,t))>=0&&p>=0&&d>=0&&!w&&s.add(h,p,d))}h>=0&&p>=0&&v>=0&&!m&&s.add(h,p,v),h>=0&&v>=0&&y>=0&&!m&&s.add(h,y,v),this._outlineIndexCount+=3*(s.index-u)}}},t.prototype._processFill=function(e,t,r){var n;t.length>1&&(n=[]);for(var a=0,s=0,u=t;s<u.length;s++){var l=u[s];0!==a&&n.push(a),a+=e[l].length}for(var c=2*a,f=i.acquire(),h=0,p=t;h<p.length;h++)for(var d=e[l=p[h]],v=d.length,y=0;y<v;++y)f.push(d[y].x),f.push(d[y].y);var m=o(f,n,2),g=m.length;if(g>0){for(var _=this._fillVertexBuffer.index,x=0;x<c;)this._fillVertexBuffer.add(f[x++],f[x++],r);for(var b=0;b<g;)this._fillIndexBuffer.add(_+m[b++],_+m[b++],_+m[b++]);this._fillIndexCount+=g}i.release(f)},t.prototype._isClipEdge=function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)},t._area=function(e){for(var t=0,r=e.length-1,n=0;n<r;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return.5*(t+(e[r].x-e[0].x)*(e[r].y+e[0].y))},t}(s)}.apply(null,n))||(e.exports=i)},1644:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(1645),r(1380),r(831)],void 0===(i=function(e,t,r,n,i,o,a){var s=20,u=new i.Tessellator({distanceAlongCorrection:!0});return function(e){function t(t,r,n,o){var a=e.call(this,t,r)||this;if(a.extrudeVectorsDoubleBuffer=[i.allocExtrudeVectors(),i.allocExtrudeVectors()],a.firstExtrudeVectors=i.allocExtrudeVectors(),a.recycledTriangleBridge=i.allocTriangles(s),a.recycledTrianglePie=i.allocTriangles(s),t.hasDataDrivenLine!==n.isDataDriven())throw new Error("incompatible line buffer");return a._lineVertexBuffer=n,a._lineIndexBuffer=o,a}return r(t,e),Object.defineProperty(t.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0}),t.prototype.assignBufferInfo=function(e){var t=e;t._lineIndexStart=this._lineIndexStart,t._lineIndexCount=this._lineIndexCount},t.prototype.processFeatures=function(e,t){this._lineIndexStart=this._lineIndexBuffer.index,this._lineIndexCount=0;var r=this.layer,n=this.zoom,i=r.hasDataDrivenLine;e&&e.setExtent(this.layerExtent);for(var o=r.getPaintValue("line-pattern",n),s=[1,1,1,1],u=1,l=1,c=0,f=this._features;c<f.length;c++){var h=f[c],p=new a.LineLayout(r,n,h);!o&&r.hasDataDrivenColor&&(s=r.getPaintValue("line-color",n,h)),r.hasDataDrivenOpacity&&(u=r.getPaintValue("line-opacity",n,h)),r.hasDataDrivenWidth&&(l=r.getPaintValue("line-width",n,h));var d=void 0;if(!(i&&(d={color:s,opacity:u,size:Math.max(Math.min(l,256),0)},d.size<=0||d.opacity<=0||d.color[3]<=0))){var v=h.getGeometry(e);this._processFeature(p,v,d)}}},t.prototype._processFeature=function(e,t,r){if(t)for(var n=t.length,i=0;i<n;i++)this._processGeometry(t[i],e,r)},t.prototype._processGeometry=function(e,t,r){if(!(e.length<2)){for(var n=e[0],o=e[e.length-1],a=o.x-n.x,s=o.y-n.y,u=a*a+s*s<1e-6,l=e[0],c=1;c<e.length;)(a=e[c].x-l.x)*a+(s=e[c].y-l.y)*s<1e-6?e.splice(c,1):(l=e[c],++c);if(!(e.length<2)){this.vertices=e,this.verticesLen=e.length,this.isClosed=u,this.cap=t.cap,this.join=t.join,this.almostParallelRads=.05,this.veryShallowRads=.1,this.miterSafeRads=i.MITER_SAFE_RADS,this.miterLimitMag=Math.min(t.miterLimit,i.SYSTEM_MAG_LIMIT),this.roundLimitRads=Math.min(t.roundLimit,.5),this.newRoundJoinsSafeRads=2.3;for(var f=this._lineIndexBuffer.index,h=0,p=void 0,d=this.verticesLen,v=0;v<d;++v){var y=e[v],m=e[(v+d-1)%d],g=u&&this._isClipEdge(m,y),_=p===this.extrudeVectorsDoubleBuffer[v%2]?this.extrudeVectorsDoubleBuffer[(v+1)%2]:this.extrudeVectorsDoubleBuffer[v%2];if(v<d-1||!u||this.hasPattern?(this._computeExtrudeVectors(_,v),this._writeGPUVertices(y.x,y.y,h,_,r),!_.capCenter||u&&v===d-1||this._writeGPUPieElements(_,g),u&&0===v&&!this.hasPattern&&i.copyExtrudeVectors(this.firstExtrudeVectors,_)):i.copyExtrudeVectors(_,this.firstExtrudeVectors),p&&this._writeGPUBridgeElements(p,_,g),v<d-1){var x=e[v+1];h+=i.length([x.x-y.x,x.y-y.y])}p=_}this._lineIndexCount+=3*(this._lineIndexBuffer.index-f)}}},t.prototype._computeExtrudeVectors=function(e,t){var r=this.vertices,n=this.verticesLen,o=this.isClosed,a=r[t],s=[void 0,void 0],u=[void 0,void 0];if(t>0&&t<n-1){var l=r[(t+n-1)%n],c=r[(t+1)%n];i.normalize(s,[a.x-l.x,a.y-l.y]),i.normalize(u,[c.x-a.x,c.y-a.y])}else if(0===t){c=r[(t+1)%n];if(i.normalize(u,[c.x-a.x,c.y-a.y]),o){var f=r[n-2];i.normalize(s,[a.x-f.x,a.y-f.y])}else s=u}else{if(t!==n-1)return void console.error("Vertex index 'i' out of range.");l=r[(t+n-1)%n];if(i.normalize(s,[a.x-l.x,a.y-l.y]),o){var h=r[1];i.normalize(u,[h.x-a.x,h.y-a.y])}else u=s}o||0!==t?o||t!==n-1?this._computeJoinExtrudeVectors(e,s,u):this._computeCapExtrudeVectors(e,s,u,i.CapPosition.END):this._computeCapExtrudeVectors(e,s,u,i.CapPosition.START)},t.prototype._computeCapExtrudeVectors=function(e,t,r,n){0===this.cap?u.buttCap(e,t,r):1===this.cap?u.roundCap(e,t,r,n,i.getNumberOfSlices(Math.PI),n===i.CapPosition.START?-1:1):2===this.cap?u.squareCap(e,t,r,n):u.buttCap(e,t,r)},t.prototype._computeJoinExtrudeVectors=function(e,t,r){var n=i.getRads(t,r);if(n>Math.PI-this.almostParallelRads)u.rectJoin(e,t,r);else if(0===this.join&&n>=this.veryShallowRads)u.bevelJoin(e,t,r,1);else if(1===this.join&&n>=this.veryShallowRads){var o=i.getNumberOfSlices(n);n<this.newRoundJoinsSafeRads?o<2||n<this.roundLimitRads?u.bevelJoin(e,t,r,1):u.roundJoin(e,t,r,o):u.unitRoundJoin(e,t,r,o)}else n<this.almostParallelRads?u.fastMiterJoin(e,t,r):n<this.miterSafeRads?u.miterJoin(e,t,r):u.bevelJoin(e,t,r,this.miterLimitMag)},t.prototype._writeGPUVertices=function(e,t,r,n,i){for(var o=0;o<n.vectors.count;++o){var a=n.vectors.items[o].vector[0],s=n.vectors.items[o].vector[1],u=n.vectors.items[o].texCoords[0],l=n.vectors.items[o].texCoords[1];n.vectors.items[o].base=this._lineVertexBuffer.index,this._lineVertexBuffer.add(e,t,a,s,u,l,r,i)}},t.prototype._writeGPUBridgeElements=function(e,t,r){if(u.bridge(this.recycledTriangleBridge,e,t),!r)for(var n=0;n<this.recycledTriangleBridge.count;++n){var i=this.recycledTriangleBridge.items[n];this._lineIndexBuffer.add(i.v1.base,i.v2.base,i.v3.base)}},t.prototype._writeGPUPieElements=function(e,t){if(u.pie(this.recycledTrianglePie,e),!t)for(var r=0;r<this.recycledTrianglePie.count;++r){var n=this.recycledTrianglePie.items[r];this._lineIndexBuffer.add(n.v1.base,n.v2.base,n.v3.base)}},t.prototype._isClipEdge=function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)},t}(o)}.apply(null,n))||(e.exports=i)},1645:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e){var t,r={items:new Array,count:0};for(t=0;t<e;++t)r.items.push(void 0);return r}function n(e,t){x.vector[0]=e.vector[0],x.vector[1]=e.vector[1],x.texCoords[0]=e.texCoords[0],x.texCoords[1]=e.texCoords[1],x.direction[0]=e.direction[0],x.direction[1]=e.direction[1],x.base=e.base,e.vector[0]=t.vector[0],e.vector[1]=t.vector[1],e.texCoords[0]=t.texCoords[0],e.texCoords[1]=t.texCoords[1],e.direction[0]=t.direction[0],e.direction[1]=t.direction[1],e.base=t.base,t.vector[0]=x.vector[0],t.vector[1]=x.vector[1],t.texCoords[0]=x.texCoords[0],t.texCoords[1]=x.texCoords[1],t.direction[0]=x.direction[0],t.direction[1]=x.direction[1],t.base=x.base}function i(e,t){return e[0]*t[0]+e[1]*t[1]}function o(e){return Math.sqrt(i(e,e))}function a(e,t){var r=o(t);return e[0]=t[0]/r,e[1]=t[1]/r,e}function s(e,t){return e[0]=-t[1],e[1]=t[0],e}function u(e,t){return e[0]*t[1]-e[1]*t[0]}function l(e,t){return e[0]=-t[0],e[1]=-t[1],e}function c(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function f(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function h(e,t,r){return function(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}(e,t,r)<0}function p(e,t){var r=i(e,t);return r>.999?0:r<-.999?Math.PI:Math.acos(r)}function d(e,t,r,n,i){if(0!==n){var a,s=o(t),u=(i?-1:1)*p(c(w[0],t,1/s),c(w[1],r,1/s))/n,l=Math.cos(u),f=Math.sin(u),h=t[0],d=t[1];for(a=0;a<n-1;++a){var v=h;h=l*v-f*d,d=f*v+l*d,e.items[a][0]=h,e.items[a][1]=d}e.count=n-1}else e.count=0}function v(e){var t,r=e.count,n=Math.floor(r/2);for(t=0;t<n;++t){var i=e.items[t];e.items[t]=e.items[r-t-1],e.items[r-t-1]=i}}var y,m;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ENTRY=1]="ENTRY",e[e.EXIT=2]="EXIT",e[e.CAP=3]="CAP"}(y=t.VectorRole||(t.VectorRole={})),function(e){e[e.START=1]="START",e[e.END=2]="END"}(m=t.CapPosition||(t.CapPosition={})),t.SYSTEM_MAG_LIMIT=3.8,t.MITER_SAFE_RADS=2*Math.acos(1/t.SYSTEM_MAG_LIMIT);var g=t.SYSTEM_MAG_LIMIT*t.SYSTEM_MAG_LIMIT,_=8/(2*Math.PI);t.allocTriangles=function(e){var t,r={items:new Array,count:0};for(t=0;t<e;++t)r.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return r},t.allocExtrudeVectors=function(){var e=function(e){var t,r={items:new Array,count:0};for(t=0;t<e;++t)r.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});return r}(30),t={};return t[y.ENTRY]=r(20),t[y.EXIT]=r(20),t[y.CAP]=r(20),{vectors:e,lists:t}},t.copyExtrudeVectors=function(e,t){var r;for(r=0;r<t.vectors.count;++r)e.vectors.items[r].vector[0]=t.vectors.items[r].vector[0],e.vectors.items[r].vector[1]=t.vectors.items[r].vector[1],e.vectors.items[r].texCoords[0]=t.vectors.items[r].texCoords[0],e.vectors.items[r].texCoords[1]=t.vectors.items[r].texCoords[1],e.vectors.items[r].direction[0]=t.vectors.items[r].direction[0],e.vectors.items[r].direction[1]=t.vectors.items[r].direction[1],e.vectors.items[r].base=t.vectors.items[r].base;e.vectors.count=t.vectors.count;var n=t.lists[y.ENTRY],i=e.lists[y.ENTRY],o=t.lists[y.EXIT],a=e.lists[y.EXIT],s=t.lists[y.CAP],u=e.lists[y.CAP];for(r=0;r<n.count;++r)i.items[r]=n.items[r];for(i.count=n.count,r=0;r<o.count;++r)a.items[r]=o.items[r];for(a.count=o.count,r=0;r<s.count;++r)u.items[r]=s.items[r];u.count=s.count,e.capCenter=t.capCenter};var x={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};t.swapExtrudeVectors=n;var b,w=[];for(b=0;b<32;++b)w.push([void 0,void 0]);var I=function(e){var t,r={items:new Array,count:0};for(t=0;t<8;++t)r.items.push([void 0,void 0]);return r}();t.length=o,t.normalize=a,t.getNumberOfSlices=function(e){return Math.max(Math.round(e*_),1)},t.getRads=p,t.reverse=v;var P=[void 0,void 0],T=[void 0,void 0],C=[0,0],M=[0,0],S=[0,0],E=[0,0],A=Math.cos(Math.PI/4),D=Math.sin(Math.PI/4),N=Math.sqrt(2),O=function(){function e(e){this._distanceAlongCorrection=e.distanceAlongCorrection}return e.prototype.bridge=function(e,t,r){var i,o,a,s,u=t.vectors,l=t.lists[y.EXIT],c=r.vectors,f=r.lists[y.ENTRY];if(l.count===f.count+1)i=l.items,o=u.items,a=f.items,s=c.items;else if(f.count===l.count+1)i=f.items,o=c.items,a=l.items,s=u.items;else{if(l.count!==f.count)return console.error("Cannot bridge "+l.count+" to "+f.count+"."),void(e.count=0);i=f.items,o=c.items,a=l.items,s=u.items}var p,d=l.count+f.count-2;for(e.count=d,P[0]=i,P[1]=a,T[0]=o,T[1]=s,p=0;p<d;++p){var v=e.items[p],m=(p+0)%2,g=Math.floor((p+0)/2),_=T[m][P[m][g]];v.v1.vector[0]=_.vector[0],v.v1.vector[1]=_.vector[1],v.v1.texCoords[0]=_.texCoords[0],v.v1.texCoords[1]=_.texCoords[1],v.v1.direction[0]=_.direction[0],v.v1.direction[1]=_.direction[1],v.v1.base=_.base;var x=(p+1)%2,b=Math.floor((p+1)/2),w=T[x][P[x][b]];v.v2.vector[0]=w.vector[0],v.v2.vector[1]=w.vector[1],v.v2.texCoords[0]=w.texCoords[0],v.v2.texCoords[1]=w.texCoords[1],v.v2.direction[0]=w.direction[0],v.v2.direction[1]=w.direction[1],v.v2.base=w.base;var I=(p+2)%2,A=Math.floor((p+2)/2),D=T[I][P[I][A]];v.v3.vector[0]=D.vector[0],v.v3.vector[1]=D.vector[1],v.v3.texCoords[0]=D.texCoords[0],v.v3.texCoords[1]=D.texCoords[1],v.v3.direction[0]=D.direction[0],v.v3.direction[1]=D.direction[1],v.v3.base=D.base;var N=v.v1.base&&v.v1.base.point||C,O=v.v2.base&&v.v2.base.point||C,F=v.v3.base&&v.v3.base.point||C;M[0]=N[0]+v.v1.vector[0],M[1]=N[1]+v.v1.vector[1],S[0]=O[0]+v.v2.vector[0],S[1]=O[1]+v.v2.vector[1],E[0]=F[0]+v.v3.vector[0],E[1]=F[1]+v.v3.vector[1],h(M,S,E)||n(v.v2,v.v3)}},e.prototype.pie=function(e,t){if(0!==t.lists[y.CAP].count){if(1===t.lists[y.CAP].count)return console.error("A single vector is not enough to define a pie."),void(e.count=0);var r;for(e.count=t.lists[y.CAP].count-1,r=0;r<e.count;++r){var i=e.items[r],o=t.lists[y.CAP].items[r],a=t.vectors.items[o];i.v1.vector[0]=a.vector[0],i.v1.vector[1]=a.vector[1],i.v1.texCoords[0]=a.texCoords[0],i.v1.texCoords[1]=a.texCoords[1],i.v1.direction[0]=a.direction[0],i.v1.direction[1]=a.direction[1],i.v1.base=a.base;var s=t.lists[y.CAP].items[r+1],u=t.vectors.items[s];i.v2.vector[0]=u.vector[0],i.v2.vector[1]=u.vector[1],i.v2.texCoords[0]=u.texCoords[0],i.v2.texCoords[1]=u.texCoords[1],i.v2.direction[0]=u.direction[0],i.v2.direction[1]=u.direction[1],i.v2.base=u.base;var l=t.capCenter,c=t.vectors.items[l];i.v3.vector[0]=c.vector[0],i.v3.vector[1]=c.vector[1],i.v3.texCoords[0]=c.texCoords[0],i.v3.texCoords[1]=c.texCoords[1],i.v3.direction[0]=c.direction[0],i.v3.direction[1]=c.direction[1],i.v3.base=c.base;var f=i.v1.base&&i.v1.base.point||C,p=i.v2.base&&i.v2.base.point||C,d=i.v3.base&&i.v3.base.point||C;M[0]=f[0]+i.v1.vector[0],M[1]=f[1]+i.v1.vector[1],S[0]=p[0]+i.v2.vector[0],S[1]=p[1]+i.v2.vector[1],E[0]=d[0]+i.v3.vector[0],E[1]=d[1]+i.v3.vector[1],h(M,S,E)||n(i.v2,i.v3)}}else e.count=0},e.prototype.buttCap=function(e,t,r){this.fastMiterJoin(e,t,r)},e.prototype.roundCap=function(e,t,r,n,i,o){void 0===o&&(o=0),this.fastMiterJoin(e,t,r);var a=n===m.START?0:1,s=n===m.START?1:0;e.capCenter=e.vectors.count;var u=e.vectors.items[e.capCenter];u.vector[0]=0,u.vector[1]=0,u.texCoords[0]=0,u.texCoords[1]=0,u.direction[0]=0,u.direction[1]=0,++e.vectors.count,d(I,e.vectors.items[a].vector,e.vectors.items[s].vector,i,!1);var l=e.vectors.count,c=e.lists[y.CAP];c.items[0]=a;var f,h=e.vectors.items[a].texCoords[1],p=e.vectors.items[s].texCoords[1];for(f=0;f<I.count;++f){var v=o*(1-Math.abs(I.count/2-f)/(I.count/2)),g=h+f/(I.count-1)*(p-h),_=I.items[f],x=e.vectors.items[l+f];x.vector[0]=_[0],x.vector[1]=_[1],x.texCoords[0]=v,x.texCoords[1]=g,x.direction[0]=0,x.direction[1]=0,c.items[f+1]=l+f}c.items[I.count+1]=s,c.count=I.count+2,e.vectors.count=l+I.count},e.prototype.squareCap=function(e,t,r,n){this.fastMiterJoin(e,t,r);var i=n===m.START?0:1,o=n===m.START?1:0,a=w[0],s=w[1],u=w[2],l=w[3],f=w[4],h=e.vectors.items[i].vector;a[0]=A*h[0]-D*h[1],a[1]=D*h[0]+A*h[1],c(l,a,N),s[0]=A*a[0]-D*a[1],s[1]=D*a[0]+A*a[1],u[0]=A*s[0]-D*s[1],u[1]=D*s[0]+A*s[1],c(f,u,N);var p=e.vectors.items[i];p.vector[0]=l[0],p.vector[1]=l[1];var d=e.vectors.items[o];d.vector[0]=f[0],d.vector[1]=f[1]},e.prototype.fastMiterJoin=function(e,t,r){var n=s(w[0],r),i=n,o=l(w[1],n),a=e.vectors.items[0];a.vector[0]=i[0],a.vector[1]=i[1],a.texCoords[0]=0,a.texCoords[1]=-1,a.direction[0]=0,a.direction[1]=0;var u=e.vectors.items[1];u.vector[0]=o[0],u.vector[1]=o[1],u.texCoords[0]=0,u.texCoords[1]=1,u.direction[0]=0,u.direction[1]=0,e.vectors.count=2;var c=e.lists[y.ENTRY];c.items[0]=0,c.items[1]=1,c.count=2;var f=e.lists[y.EXIT];f.items[0]=0,f.items[1]=1,f.count=2,e.lists[y.CAP].count=0,e.capCenter=void 0},e.prototype.miterJoin=function(e,t,r){var n=s(w[0],t),o=s(w[1],r),u=w[2];u[0]=n[0]+o[0],u[1]=n[1]+o[1];var f=a(w[3],u),h=i(f,n);f=c(w[4],f,1/h);var p=l(w[5],f);if(this._distanceAlongCorrection){(m=e.vectors.items[0]).vector[0]=f[0],m.vector[1]=f[1],m.texCoords[0]=0,m.texCoords[1]=-1,m.direction[0]=t[0],m.direction[1]=t[1],(g=e.vectors.items[1]).vector[0]=p[0],g.vector[1]=p[1],g.texCoords[0]=0,g.texCoords[1]=1,g.direction[0]=t[0],g.direction[1]=t[1];var d=e.vectors.items[2];d.vector[0]=f[0],d.vector[1]=f[1],d.texCoords[0]=0,d.texCoords[1]=-1,d.direction[0]=r[0],d.direction[1]=r[1];var v=e.vectors.items[3];v.vector[0]=p[0],v.vector[1]=p[1],v.texCoords[0]=0,v.texCoords[1]=1,v.direction[0]=r[0],v.direction[1]=r[1],e.vectors.count=4,(_=e.lists[y.ENTRY]).items[0]=0,_.items[1]=1,_.count=2,(x=e.lists[y.EXIT]).items[0]=2,x.items[1]=3,x.count=2}else{var m,g,_,x;(m=e.vectors.items[0]).vector[0]=f[0],m.vector[1]=f[1],m.texCoords[0]=0,m.texCoords[1]=-1,m.direction[0]=0,m.direction[1]=0,(g=e.vectors.items[1]).vector[0]=p[0],g.vector[1]=p[1],g.texCoords[0]=0,g.texCoords[1]=1,g.direction[0]=0,g.direction[1]=0,e.vectors.count=2,(_=e.lists[y.ENTRY]).items[0]=0,_.items[1]=1,_.count=2,(x=e.lists[y.EXIT]).items[0]=0,x.items[1]=1,x.count=2}e.lists[y.CAP].count=0,e.capCenter=void 0},e.prototype.bevelJoin=function(e,t,r,n){var o=n*n,h=u(t,r),p=h>0?[-1,1]:[1,-1],d=p[0],m=p[1],_=h>0?l(w[0],s(w[1],t)):s(w[2],t),x=h>0?l(w[3],s(w[4],r)):s(w[5],r),b=w[6];b[0]=_[0]+x[0],b[1]=_[1]+x[1];var I=a(w[7],b),P=l(w[8],I),T=i(I,_),C=u(I,_),M=Math.abs(C/T),S=1+M*M,E=S<g?[M,this._distanceAlongCorrection]:[Math.sqrt(g-1),!0],A=E[0],D=E[1],N=S<o?[M,this._distanceAlongCorrection]:[Math.sqrt(o-1),!0],O=N[0],F=N[1];if(F&&D){f((L=e.vectors.items[0]).vector,l(w[9],_),c(w[10],l(w[11],t),A)),L.texCoords[0]=0,L.texCoords[1]=d,L.direction[0]=this._distanceAlongCorrection?t[0]:0,L.direction[1]=this._distanceAlongCorrection?t[1]:0,f((z=e.vectors.items[1]).vector,l(w[12],x),c(w[13],r,A)),z.texCoords[0]=0,z.texCoords[1]=d,z.direction[0]=this._distanceAlongCorrection?r[0]:0,z.direction[1]=this._distanceAlongCorrection?r[1]:0,(j=e.vectors.items[2]).vector[0]=0,j.vector[1]=0,j.texCoords[0]=0,j.texCoords[1]=0,j.direction[0]=0,j.direction[1]=0,f((R=e.vectors.items[3]).vector,_,c(w[14],t,O)),R.texCoords[0]=0,R.texCoords[1]=m,R.direction[0]=this._distanceAlongCorrection?t[0]:0,R.direction[1]=this._distanceAlongCorrection?t[1]:0;var B=e.vectors.items[4];if(f(B.vector,x,c(w[15],l(w[16],r),O)),B.texCoords[0]=0,B.texCoords[1]=m,B.direction[0]=this._distanceAlongCorrection?r[0]:0,B.direction[1]=this._distanceAlongCorrection?r[1]:0,e.vectors.count=5,(k=e.lists[y.ENTRY]).items[0]=0,k.items[1]=2,k.items[2]=3,k.count=3,(U=e.lists[y.EXIT]).items[0]=1,U.items[1]=2,U.items[2]=4,U.count=3,S<o)(V=e.lists[y.CAP]).count=0,e.capCenter=void 0;else(V=e.lists[y.CAP]).items[0]=3,V.items[1]=4,V.count=2,e.capCenter=2}else if(!F&&D){f((L=e.vectors.items[0]).vector,l(w[9],_),c(w[10],l(w[11],t),A)),L.texCoords[0]=0,L.texCoords[1]=d,L.direction[0]=this._distanceAlongCorrection?t[0]:0,L.direction[1]=this._distanceAlongCorrection?t[1]:0,f((z=e.vectors.items[1]).vector,l(w[12],x),c(w[13],r,A)),z.texCoords[0]=0,z.texCoords[1]=d,z.direction[0]=this._distanceAlongCorrection?r[0]:0,z.direction[1]=this._distanceAlongCorrection?r[1]:0,(j=e.vectors.items[2]).vector[0]=0,j.vector[1]=0,j.texCoords[0]=0,j.texCoords[1]=0,j.direction[0]=0,j.direction[1]=0,c((R=e.vectors.items[3]).vector,I,1/T),R.texCoords[0]=0,R.texCoords[1]=m,R.direction[0]=0,R.direction[1]=0,e.vectors.count=4,(k=e.lists[y.ENTRY]).items[0]=0,k.items[1]=2,k.items[2]=3,k.count=3,(U=e.lists[y.EXIT]).items[0]=1,U.items[1]=2,U.items[2]=3,U.count=3,e.lists[y.CAP].count=0,e.capCenter=void 0}else if(F&&!D){var j,R,V;if(c((L=e.vectors.items[0]).vector,P,1/T),L.texCoords[0]=0,L.texCoords[1]=d,L.direction[0]=0,L.direction[1]=0,(z=e.vectors.items[1]).vector[0]=0,z.vector[1]=0,z.texCoords[0]=0,z.texCoords[1]=0,z.direction[0]=0,z.direction[1]=0,f((j=e.vectors.items[2]).vector,_,c(w[9],t,O)),j.texCoords[0]=0,j.texCoords[1]=m,j.direction[0]=this._distanceAlongCorrection?t[0]:0,j.direction[1]=this._distanceAlongCorrection?t[1]:0,f((R=e.vectors.items[3]).vector,x,c(w[10],l(w[11],r),O)),R.texCoords[0]=0,R.texCoords[1]=m,R.direction[0]=this._distanceAlongCorrection?r[0]:0,R.direction[1]=this._distanceAlongCorrection?r[1]:0,e.vectors.count=4,(k=e.lists[y.ENTRY]).items[0]=0,k.items[1]=1,k.items[2]=2,k.count=3,(U=e.lists[y.EXIT]).items[0]=0,U.items[1]=1,U.items[2]=3,U.count=3,S<o)(V=e.lists[y.CAP]).count=0,e.capCenter=void 0;else(V=e.lists[y.CAP]).items[0]=2,V.items[1]=3,V.count=2,e.capCenter=1}else if(!F&&!D){var L,z,k,U;c((L=e.vectors.items[0]).vector,P,1/T),L.texCoords[0]=0,L.texCoords[1]=d,L.direction[0]=0,L.direction[1]=0,c((z=e.vectors.items[1]).vector,I,1/T),z.texCoords[0]=0,z.texCoords[1]=m,z.direction[0]=0,z.direction[1]=0,e.vectors.count=2,(k=e.lists[y.ENTRY]).items[0]=0,k.items[1]=1,k.count=2,(U=e.lists[y.EXIT]).items[0]=0,U.items[1]=1,U.count=2,e.lists[y.CAP].count=0,e.capCenter=void 0}h<0&&(v(e.lists[y.ENTRY]),v(e.lists[y.EXIT]))},e.prototype.roundJoin=function(e,t,r,n){var o=u(t,r),h=o>0?[-1,1]:[1,-1],p=h[0],m=h[1],_=o>0?l(w[0],s(w[1],t)):s(w[2],t),x=o>0?l(w[3],s(w[4],r)):s(w[5],r),b=w[6];b[0]=_[0]+x[0],b[1]=_[1]+x[1];var P=a(w[7],b),T=l(w[8],P),C=i(P,_),M=u(P,_),S=Math.abs(M/C),E=1+S*S<g?[S,this._distanceAlongCorrection]:[Math.sqrt(g-1),!0],A=E[0];if(E[1]){(N=e.vectors.items[0]).vector[0]=_[0],N.vector[1]=_[1],N.texCoords[0]=0,N.texCoords[1]=m,N.direction[0]=0,N.direction[1]=0,(O=e.vectors.items[1]).vector[0]=x[0],O.vector[1]=x[1],O.texCoords[0]=0,O.texCoords[1]=m,O.direction[0]=0,O.direction[1]=0,f((F=e.vectors.items[2]).vector,l(w[9],_),c(w[10],l(w[11],t),A)),F.texCoords[0]=0,F.texCoords[1]=p,F.direction[0]=this._distanceAlongCorrection?t[0]:0,F.direction[1]=this._distanceAlongCorrection?t[1]:0,f((B=e.vectors.items[3]).vector,l(w[12],x),c(w[13],r,A)),B.texCoords[0]=0,B.texCoords[1]=p,B.direction[0]=this._distanceAlongCorrection?r[0]:0,B.direction[1]=this._distanceAlongCorrection?r[1]:0;var D=e.vectors.items[4];D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=0,D.texCoords[1]=0,D.direction[0]=0,D.direction[1]=0,e.vectors.count=5,(j=e.lists[y.ENTRY]).items[0]=2,j.items[1]=4,j.items[2]=0,j.count=3,(R=e.lists[y.EXIT]).items[0]=3,R.items[1]=4,R.items[2]=1,R.count=3,e.capCenter=4}else{var N,O,F,B,j,R;(N=e.vectors.items[0]).vector[0]=_[0],N.vector[1]=_[1],N.texCoords[0]=0,N.texCoords[1]=m,N.direction[0]=0,N.direction[1]=0,(O=e.vectors.items[1]).vector[0]=x[0],O.vector[1]=x[1],O.texCoords[0]=0,O.texCoords[1]=m,O.direction[0]=0,O.direction[1]=0,c((F=e.vectors.items[2]).vector,T,1/C),F.texCoords[0]=0,F.texCoords[1]=p,F.direction[0]=0,F.direction[1]=0,(B=e.vectors.items[3]).vector[0]=0,B.vector[1]=0,B.texCoords[0]=0,B.texCoords[1]=0,B.direction[0]=0,B.direction[1]=0,e.vectors.count=4,(j=e.lists[y.ENTRY]).items[0]=2,j.items[1]=3,j.items[2]=0,j.count=3,(R=e.lists[y.EXIT]).items[0]=2,R.items[1]=3,R.items[2]=1,R.count=3,e.capCenter=3}d(I,_,x,n,o<0);var V,L=e.vectors.count,z=e.lists[y.CAP];for(z.items[0]=0,V=0;V<I.count;++V){var k=I.items[V],U=e.vectors.items[L+V];U.vector[0]=k[0],U.vector[1]=k[1],U.texCoords[0]=0,U.texCoords[1]=m,U.direction[0]=0,U.direction[1]=0,z.items[V+1]=L+V}z.items[I.count+1]=1,z.count=I.count+2,e.vectors.count=L+I.count,o<0&&(v(e.lists[y.ENTRY]),v(e.lists[y.EXIT]))},e.prototype.unitRoundJoin=function(e,t,r,n){var i=u(t,r),o=i>0?[-1,1]:[1,-1],a=o[0],c=o[1],f=i>0?l(w[0],s(w[1],t)):s(w[2],t),h=i>0?l(w[3],s(w[4],r)):s(w[5],r),p=e.vectors.items[0];p.vector[0]=f[0],p.vector[1]=f[1],p.texCoords[0]=0,p.texCoords[1]=c,p.direction[0]=0,p.direction[1]=0;var m=e.vectors.items[1];m.vector[0]=h[0],m.vector[1]=h[1],m.texCoords[0]=0,m.texCoords[1]=c,m.direction[0]=0,m.direction[1]=0;var g=e.vectors.items[2];l(g.vector,f),g.texCoords[0]=0,g.texCoords[1]=a,g.direction[0]=0,g.direction[1]=0;var _=e.vectors.items[3];l(_.vector,h),_.texCoords[0]=0,_.texCoords[1]=a,_.direction[0]=0,_.direction[1]=0;var x=e.vectors.items[4];x.vector[0]=0,x.vector[1]=0,x.texCoords[0]=0,x.texCoords[1]=0,x.direction[0]=0,x.direction[1]=0,e.vectors.count=5;var b=e.lists[y.ENTRY];b.items[0]=2,b.items[1]=0,b.count=2;var P=e.lists[y.EXIT];P.items[0]=3,P.items[1]=1,P.count=2,e.capCenter=4,d(I,f,h,n,i<0);var T,C=e.vectors.count,M=e.lists[y.CAP];for(M.items[0]=0,T=0;T<I.count;++T){var S=I.items[T],E=e.vectors.items[C+T];E.vector[0]=S[0],E.vector[1]=S[1],E.texCoords[0]=0,E.texCoords[1]=c,E.direction[0]=0,E.direction[1]=0,M.items[T+1]=C+T}M.items[I.count+1]=1,M.count=I.count+2,e.vectors.count=C+I.count,i<0&&(v(e.lists[y.ENTRY]),v(e.lists[y.EXIT]))},e.prototype.rectJoin=function(e,t,r){var n=s(w[0],t),i=s(w[1],r),o=e.vectors.items[0];o.vector[0]=n[0],o.vector[1]=n[1],o.texCoords[0]=0,o.texCoords[1]=-1,o.direction[0]=0,o.direction[1]=0;var a=e.vectors.items[1];a.vector[0]=i[0],a.vector[1]=i[1],a.texCoords[0]=0,a.texCoords[1]=-1,a.direction[0]=0,a.direction[1]=0;var u=e.vectors.items[2];l(u.vector,n),u.texCoords[0]=0,u.texCoords[1]=1,u.direction[0]=0,u.direction[1]=0;var c=e.vectors.items[3];l(c.vector,i),c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=0,c.direction[1]=0,e.vectors.count=4;var f=e.lists[y.ENTRY];f.items[0]=0,f.items[1]=2,f.count=2;var h=e.lists[y.EXIT];h.items[0]=1,h.items[1]=3,h.count=2,e.capCenter=void 0},e}();t.Tessellator=O}.apply(null,n))||(e.exports=i)},1646:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1052),r(2333),r(616)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t,r,n,i){void 0===r&&(r=0),void 0===n&&(n=-1),void 0===i&&(i=l),this.x=e,this.y=t,this.angle=r,this.segment=n,this.minzoom=i}}();t.Anchor=o;var a=function(){return function(e,t,r,n,o,a,s){void 0===o&&(o=!1),void 0===a&&(a=l),void 0===s&&(s=i.C_INFINITY),this.anchor=e,this.labelAngle=t,this.glyphAngle=r,this.page=n,this.upsideDown=o,this.minzoom=a,this.maxzoom=s}}(),s=function(){return function(e,t,r,n,i,o,a,s,u,l){this.tl=e,this.tr=t,this.bl=r,this.br=n,this.mosaicRect=i,this.labelAngle=o,this.anchor=a,this.minzoom=s,this.maxzoom=u,this.page=l}}();t.PlacedSymbol=s;var u=function(){return function(e,t){this.footprint=e,this.shapes=t}}();t.Placement=u;var l=.5,c=function(){function e(){this.mapAngle=0,this._conflictEngine=new n.ConflictEngine}return e.prototype.reset=function(){this._conflictEngine.reset()},e.prototype.setAngle=function(e){this.mapAngle=e,this._conflictEngine.setAngle(e)},e.prototype.getIconPlacement=function(e,t,o,a,c,f,h){var p=o.width/o.pixelRatio,d=o.height/o.pixelRatio,v=f.offset[0]-p/2,y=f.offset[1]-d/2,m=v+p,g=y+d,_=o.rect,x=o.sdf?17:2,b=v-x,w=y-x,I=b+_.width/o.pixelRatio,P=w+_.height/o.pixelRatio,T=new r.Point(b,w),C=new r.Point(I,P),M=new r.Point(b,P),S=new r.Point(I,w),E=f.rotate*i.C_DEG_TO_RAD,A=1===f.rotationAlignment;if(e.segment>=0&&!A&&(E+=e.angle),0!==E){var D=Math.cos(E),N=Math.sin(E);T.rotate(D,N),C.rotate(D,N),M.rotate(D,N),S.rotate(D,N)}var O=8*f.padding,F=new r.Point(e.x,e.y),B=new n.Footprint(this.mapAngle,O,A);B.addBox(F,new n.Box(v,y,m,g),a,E,t,l,i.C_INFINITY);var j=new s(T,S,M,C,_,0,F,l,i.C_INFINITY,0),R=new u(B,[j]),V=l;return f.allowOverlap||(V=this._conflictEngine.getMinZoom(R.footprint,V,h,A)),B.minzoom=V,R},e.prototype.getTextPlacement=function(e,t,o,c,f,h,p,d){for(var v,y=new r.Point(e.x,e.y),m=p.rotate*i.C_DEG_TO_RAD,g=0===p.rotationAlignment,_=p.keepUpright,x=l,b=!g,w=b?0:e.angle,I=e.segment>=0&&g,P=8*p.padding,T=new n.Footprint(this.mapAngle,P,b),C=[],M=!I,S=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,A=S,D=E,N=I?_:g&&_,O=0,F=c;O<F.length;O++){var B=F[O],j=B.glyphMosaicItem;if(j&&!j.rect.isEmpty){var R=j.rect,V=j.metrics,L=j.page;M&&(v&&v!==B.y&&(T.addBox(y,new n.Box(S,A,E,D),f,m,t,l,i.C_INFINITY),A=S=Number.POSITIVE_INFINITY,D=E=Number.NEGATIVE_INFINITY),v=B.y);var z=[];if(I){var k=.5*j.metrics.width,U=(o.x+B.x+V.left-4+k)*f;if(x=this._placeGlyph(e,x,U,h,e.segment,1,L,z),_&&(x=this._placeGlyph(e,x,U,h,e.segment,-1,L,z)),x>=2)break}else z.push(new a(y,w,w,L)),g&&_&&z.push(new a(y,w+i.C_PI,w+i.C_PI,L,!0));for(var G=B.x+o.x+V.left,Y=B.y+o.y-V.top,q=G+V.width,X=Y+V.height,Z=new r.Point(G-4,Y-4),Q=new r.Point(Z.x+R.width,Z.y+R.height),W=new r.Point(Z.x,Q.y),J=new r.Point(Q.x,Z.y),H=0,K=z;H<K.length;H++){var $=K[H],ee=Z.clone(),te=W.clone(),re=J.clone(),ne=Q.clone(),ie=Y,oe=X,ae=$.glyphAngle+m;if(0!==ae){var se=Math.cos(ae),ue=Math.sin(ae);ee.rotate(se,ue),ne.rotate(se,ue),te.rotate(se,ue),re.rotate(se,ue)}C.push(new s(ee,re,te,ne,R,$.labelAngle,$.anchor,$.minzoom,$.maxzoom,$.page)),N&&!this._legible($.labelAngle)||(M?(G<S&&(S=G),ie<A&&(A=ie),q>E&&(E=q),oe>D&&(D=oe)):$.minzoom<2&&T.addBox($.anchor,new n.Box(G,ie,q,oe),f,ae,t,$.minzoom,$.maxzoom))}}}if(x>=2)return null;M&&T.addBox(y,new n.Box(S,A,E,D),f,m,t,l,i.C_INFINITY);var le=new u(T,C);return p.allowOverlap||(x=this._conflictEngine.getMinZoom(le.footprint,x,d,b)),T.minzoom=x,le},e.prototype.add=function(e){this._conflictEngine.add(e.footprint)},e.prototype._legible=function(e){var t=i.radToByte(e);return t<65||t>=193},e.prototype._placeGlyph=function(e,t,n,o,s,u,l,c){var f=u,h=f<0?i.positiveMod(e.angle+i.C_PI,i.C_2PI):e.angle,p=this._legible(h),d=0;n<0&&(f*=-1,n*=-1,d=i.C_PI),f>0&&++s;var v=new r.Point(e.x,e.y),y=o[s],m=i.C_INFINITY;if(o.length<=s)return m;for(;;){var g=y.x-v.x,_=y.y-v.y,x=Math.sqrt(g*g+_*_),b=Math.max(n/x,t),w=g/x,I=_/x,P=i.positiveMod(Math.atan2(I,w)+d,i.C_2PI);if(c.push(new a(v,h,P,l,p,b,m)),b<=t)return b;v=y.clone();do{if(s+=f,o.length<=s||s<0)return b;y=o[s]}while(v.isEqual(y));var T=y.x-v.x,C=y.y-v.y,M=Math.sqrt(T*T+C*C);T*=x/M,C*=x/M,v.x-=T,v.y-=C,m=b}},e}();t.PlacementEngine=c}.apply(null,n))||(e.exports=i)},1647:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(1381),r(1052),r(1517),r(1380),r(616),r(1646),r(831)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c){function f(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page<t.iconMosaicItem.page?-1:1:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}return function(e){function t(t,r,n,i,o,a,s,u){var l=e.call(this,t,r)||this;if(l._markerMap=new Map,l._glyphMap=new Map,l._glyphBufferDataStorage=new Map,l._sdfMarkers=!1,t.hasDataDrivenIcon!==n.isDataDriven())throw new Error("incompatible icon buffer");if(t.hasDataDrivenText!==o.isDataDriven())throw new Error("incompatible text buffer");return l._iconVertexBuffer=n,l._iconIndexBuffer=i,l._textVertexBuffer=o,l._textIndexBuffer=a,l._placementEngine=s,l._workerTileHandler=u,l}return r(t,e),Object.defineProperty(t.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0}),t.prototype.copy=function(e,r,n,i,o){var a=new t(this.layer,this.zoom,e,r,n,i,o,this._workerTileHandler);return a.layerIndex=this.layerIndex,a.layerExtent=this.layerExtent,a._iconIndexStart=r.index,a._textIndexStart=i.index,a._iconIndexCount=0,a._textIndexCount=0,a._symbolInstances=this._symbolInstances,a._workerTileHandler=this._workerTileHandler,a._fontArray=this._fontArray,a._textLayout=this._textLayout,a._iconLayout=this._iconLayout,a._isLinePlacement=this._isLinePlacement,a._avoidEdges=this._avoidEdges,a},t.prototype.getResources=function(e,r,n){var i=this.layer,o=this.zoom,a=i.hasDataDrivenIcon,s=i.hasDataDrivenText;e&&e.setExtent(this.layerExtent);for(var u=i.getLayoutProperty("icon-image"),l=i.getLayoutProperty("text-field"),c=i.getLayoutValue("text-font",o),f=i.getLayoutValue("text-transform",o),h=[],p=[1,1,1,1],d=1,v=1,y=[1,1,1,1],m=1,g=1,_=0,x=this._features;_<x.length;_++){var b=x[_],w=b.getGeometry(e);if(w&&0!==w.length){var I=void 0;u&&(I=i.getLayoutValue("icon-image",o,b),u.isDataDriven||(I=this._replaceKeys(I,b.values)),I&&r.add(I));var P=void 0,T=!1;if(l&&(P=i.getLayoutValue("text-field",o,b),l.isDataDriven||(P=this._replaceKeys(P,b.values)),P=P.replace(/\\n/g,"\n"))){switch(f){case 2:P=P.toLowerCase();break;case 1:P=P.toUpperCase()}if(t._bidiEngine.hasBidiChar(P)){var C;C="rtl"===t._bidiEngine.checkContextual(P)?"IDNNN":"ICNNN",P=t._bidiEngine.bidiTransform(P,C,"VLYSN"),T=!0}var M=P.length;if(M>0)for(var S=0,E=c;S<E.length;S++){var A=E[S],D=n[A];D||(D=n[A]=new Set);for(var N=0;N<M;N++){var O=P.charCodeAt(N);D.add(O)}}}if(I||P){var F=i.getLayoutValue("icon-size",o,b),B=i.getLayoutValue("text-size",o,b);i.hasDataDrivenIconColor&&(p=i.getPaintValue("icon-color",o,b)),i.hasDataDrivenIconOpacity&&(d=i.getPaintValue("icon-opacity",o,b)),i.hasDataDrivenIconSize&&(v=F),i.hasDataDrivenTextColor&&(y=i.getPaintValue("text-color",o,b)),i.hasDataDrivenTextOpacity&&(m=i.getPaintValue("text-opacity",o,b)),i.hasDataDrivenTextSize&&(g=B);var j={sprite:I,label:P,rtl:T,type:b.type,geometry:w,iconSize:F,iconRotate:i.getLayoutValue("icon-rotate",o,b),ddIconValues:a?{color:p,opacity:d,size:v}:null,textSize:B,textRotate:i.getLayoutValue("text-rotate",o,b),ddTextValues:s?{color:y,opacity:m,size:g}:null};h.push(j)}}}this._symbolFeatures=h},t.prototype.processFeatures=function(e,r){e&&e.setExtent(this.layerExtent);var n,i,o,s,h,p=this.layer,d=this.zoom,v=this._isLinePlacement=1===p.getLayoutValue("symbol-placement",d),y=this._avoidEdges=p.getLayoutValue("symbol-avoid-edges",d)&&!v,m=8*p.getLayoutValue("symbol-spacing",d),g=p.getLayoutProperty("icon-image"),_=p.getLayoutProperty("text-field"),x=this._workerTileHandler;if(g&&(this._iconLayout=new c.IconLayout(p,d,v),n=x.getSpriteItems(),i=this._getTranslate(!0)),_){var b=this._textLayout=new c.TextLayout(p,d,v);this._fontArray=b.fontArray;var w=.5;switch(b.anchor){case 5:case 1:case 7:w=0;break;case 6:case 2:case 8:w=1}var I=.5;switch(b.anchor){case 5:case 3:case 6:I=0;break;case 7:case 4:case 8:I=1}var P=.5;switch(b.justify){case 0:P=0;break;case 2:P=1}var T=24*b.letterSpacing,C=v?0:24*b.maxWidth,M=24*b.lineHeight,S=[24*b.offset[0],24*b.offset[1]];o=this._fontArray.map(function(e){return x.getGlyphItems(e)}),s=new a(o,C,M,T,S,w,I,P),h=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var E=[];this._symbolInstances=E;var A=this._textLayout,D=1;A&&A.size&&(D=A.size/24);for(var N=A?A.maxAngle*u.C_DEG_TO_RAD:0,O=A?8*A.size:0,F=0,B=this._symbolFeatures;F<B.length;F++){var j=B[F],R=void 0;j.sprite&&(R=n[j.sprite])&&R.sdf&&(this._sdfMarkers=!0);var V=void 0,L=j.label,z=0;if(L&&(V=s.getShaping(L,j.rtl))&&V.length>0){for(var k=1e30,U=-1e30,G=0,Y=V;G<Y.length;G++){var q=Y[G];k=Math.min(k,q.x),U=Math.max(U,q.x)}z=(U-k+48)*D*8}for(var X=0,Z=j.geometry;X<Z.length;X++){var Q=Z[X],W=void 0;if(v){if(V&&V.length>0&&A&&A.size){var J=8*A.size*(2+Math.min(2,4*Math.abs(A.offset[1])));t._smoothVertices(Q,J)}W=t._findAnchors(Q,m,z)}else W=3===j.type?t._findCentroid(Q):[new l.Anchor(Q[0].x,Q[0].y)];for(var H=0,K=W;H<K.length;H++){var $=K[H];$.x<0||$.x>4096||$.y<0||$.y>4096||v&&z>0&&0===A.rotationAlignment&&!t._honorsTextMaxAngle(Q,$,z,N,O)||E.push({shaping:V,line:Q,iconMosaicItem:R,anchor:$,iconSize:j.iconSize,iconRotate:j.iconRotate,ddIconValues:j.ddIconValues,textSize:j.textSize,textRotate:j.textRotate,ddTextValues:j.ddTextValues})}}}E.sort(f);for(var ee=0,te=E;ee<te.length;ee++){var re=te[ee];this._processFeature(re,i,h,y)}this._addPlacedGlyphs()},t.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index,this._textIndexStart=this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var e,t,r=this._avoidEdges,n=this.layer;n.getLayoutProperty("icon-image")&&(e=this._getTranslate(!0)),n.getLayoutProperty("text-field")&&(t=this._getTranslate(!1));for(var i=0,o=this._symbolInstances;i<o.length;i++){var a=o[i];this._processFeature(a,e,t,r)}this._addPlacedGlyphs()},t.prototype._getTranslate=function(e){var t=this.layer.getPaintValue(e?"icon-translate":"text-translate",this.zoom);if(0!==t[0]||0!==t[1]){var r=this._placementEngine.mapAngle;if(0!==r&&0===this.layer.getPaintValue(e?"icon-translate-anchor":"text-translate-anchor",this.zoom)){var n=Math.sin(r),i=Math.cos(r);return[8*(t[0]*i-t[1]*n),8*(t[0]*n+t[1]*i)]}return[8*t[0],8*t[1]]}},t.prototype._replaceKeys=function(e,t){return e.replace(/{([^{}]+)}/g,function(e,r){return r in t?t[r]:""})},t.prototype._processFeature=function(e,t,r,n){var i=e.line,a=e.iconMosaicItem,s=e.shaping,l=e.anchor,c=this._iconLayout,f=c&&!!a,h=!0,p=1;f&&(c.size=e.iconSize,c.rotate=e.iconRotate,p=8*c.size,h=c.optional||!a);var d=this._textLayout,v=d&&s&&s.length>0,y=1,m=y,g=!0;v&&(d.size=e.textSize,d.rotate=e.textRotate,m=8*(y=d.size/24),g=d.optional||!s||0===s.length);var _,x,b=new o.Point(0,-17);if((f&&(_=this._placementEngine.getIconPlacement(l,t,a,p,i,c,n),l.minzoom>_.footprint.minzoom&&(_.footprint.minzoom=l.minzoom),_.footprint.minzoom===u.C_INFINITY&&(_=null)),_||h)&&(v&&(x=this._placementEngine.getTextPlacement(l,r,b,s,m,i,d,n))&&(l.minzoom>x.footprint.minzoom&&(x.footprint.minzoom=l.minzoom),x.footprint.minzoom===u.C_INFINITY&&(x=null)),x||g)){if(_&&x||(g||h?g||x?h||_||(x=null):_=null:(_=null,x=null)),_&&x&&!g&&!h){var w=Math.max(_.footprint.minzoom,x.footprint.minzoom);_.footprint.minzoom=w,x.footprint.minzoom=w}x&&(d.ignorePlacement||this._placementEngine.add(x),this._storePlacedGlyphs(x.shapes,x.footprint.minzoom,this.zoom,e.ddTextValues)),_&&(c.ignorePlacement||this._placementEngine.add(_),this._addPlacedIcons(_.shapes,_.footprint.minzoom,this.zoom,a.page,e.ddIconValues))}},t.prototype._addPlacedIcons=function(e,t,r,n,i){for(var o=Math.max(r+u.log2(t),0),a=this._iconVertexBuffer,s=this._iconIndexBuffer,l=0,c=e;l<c.length;l++){var f=c[l],h=Math.max(r+u.log2(f.minzoom),o),p=Math.min(r+u.log2(f.maxzoom),25);if(!(p<=h)){var d=f.tl,v=f.tr,y=f.bl,m=f.br,g=f.mosaicRect,_=f.labelAngle,x=f.anchor,b=a.index,w=g.x,I=g.y,P=w+g.width,T=I+g.height;a.add(x.x,x.y,d.x,d.y,w,I,_,h,p,o,i),a.add(x.x,x.y,v.x,v.y,P,I,_,h,p,o,i),a.add(x.x,x.y,y.x,y.y,w,T,_,h,p,o,i),a.add(x.x,x.y,m.x,m.y,P,T,_,h,p,o,i),s.add(b+0,b+1,b+2),s.add(b+1,b+2,b+3),this._markerMap.has(n)?this._markerMap.get(n)[1]+=6:this._markerMap.set(n,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=2}}},t.prototype._addPlacedGlyphs=function(){var e=this,t=this._textVertexBuffer,r=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(n,i){for(var o=0,a=n;o<a.length;o++){var s=a[o],u=t.index;t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tl[0],s.tl[1],s.xmin,s.ymin,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.tr[0],s.tr[1],s.xmax,s.ymin,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.bl[0],s.bl[1],s.xmin,s.ymax,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),t.add(s.glyphAnchor[0],s.glyphAnchor[1],s.br[0],s.br[1],s.xmax,s.ymax,s.labelAngle,s.minLod,s.maxLod,s.placementLod,s.ddValues),r.add(u+0,u+1,u+2),r.add(u+1,u+2,u+3),e._glyphMap.has(i)?e._glyphMap.get(i)[1]+=6:e._glyphMap.set(i,[e._textIndexStart+e._textIndexCount,6]),e._textIndexCount+=2}}),this._glyphBufferDataStorage.clear()},t.prototype._storePlacedGlyphs=function(e,t,r,n){for(var i=Math.max(r+u.log2(t),0),o=0,a=e;o<a.length;o++){var s=a[o],l=Math.max(r+u.log2(s.minzoom),i),c=Math.min(r+u.log2(s.maxzoom),25);if(!(c<=l)){var f=s.tl,h=s.tr,p=s.bl,d=s.br,v=s.labelAngle,y=s.anchor,m=s.mosaicRect;this._glyphBufferDataStorage.has(s.page)||this._glyphBufferDataStorage.set(s.page,[]),this._glyphBufferDataStorage.get(s.page).push({glyphAnchor:[y.x,y.y],tl:[f.x,f.y],tr:[h.x,h.y],bl:[p.x,p.y],br:[d.x,d.y],xmin:m.x,ymin:m.y,xmax:m.x+m.width,ymax:m.y+m.height,labelAngle:v,minLod:l,maxLod:c,placementLod:i,ddValues:n})}}},t._findAnchors=function(e,t,r){t+=r;for(var n=0,i=e.length-1,a=0;a<i;a++)n+=o.Point.distance(e[a],e[a+1]);var s=r||t;if(n<=(s*=.5))return[];var c=s/n,f=0,h=-(t=n/Math.max(Math.round(n/t),1))/2,p=[],d=e.length-1;for(a=0;a<d;a++){for(var v=e[a],y=e[a+1],m=y.x-v.x,g=y.y-v.y,_=Math.sqrt(m*m+g*g),x=void 0;h+t<f+_;){var b=((h+=t)-f)/_,w=u.interpolate(v.x,y.x,b),I=u.interpolate(v.y,y.y,b);void 0===x&&(x=Math.atan2(g,m)),p.push(new l.Anchor(w,I,x,a,c))}f+=_}return p},t._deviation=function(e,t,r){var n=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),i=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(i,n)},t._honorsTextMaxAngle=function(e,t,r,n,i){for(var a=0,s=r/2,u=new o.Point(t.x,t.y),l=t.segment+1;a>-s;){if(--l<0)return!1;a-=o.Point.distance(e[l],u),u=e[l]}a+=o.Point.distance(e[l],e[l+1]);for(var c=[],f=0,h=e.length;a<s;){var p=e[l],d=l,v=void 0;do{if(++d===h)return!1;v=e[d]}while(v.isEqual(p));var y=d,m=void 0;do{if(++y===h)return!1;m=e[y]}while(m.isEqual(v));var g=this._deviation(p,v,m);for(c.push({deviation:g,distToAnchor:a}),f+=g;a-c[0].distToAnchor>i;)f-=c.shift().deviation;if(Math.abs(f)>n)return!1;a+=o.Point.distance(v,m),l=d}return!0},t._smoothVertices=function(e,t){if(!(t<=0)){var r=e.length;if(!(r<3)){var n=[],i=0;n.push(0);for(var a=1;a<r;a++)i+=o.Point.distance(e[a],e[a-1]),n.push(i);t=Math.min(t,.2*i);var s=[];s.push(e[0].x),s.push(e[0].y);var u=e[r-1].x,l=e[r-1].y,c=o.Point.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y;for(a=1;a<r;a++)n[a]+=t;n[r-1]+=t;var f=.5*t;for(a=1;a<r-1;a++){for(var h=0,p=0,d=0,v=a-1;v>=0&&!(n[v+1]<n[a]-f);v--){var y=f+n[v+1]-n[a],m=n[v+1]-n[v],g=n[a]-n[v]<f?1:y/m;if(Math.abs(g)<1e-6)break;var _=g*y-.5*(P=g*g)*m,x=g*m/t,b=e[v+1],w=e[v].x-b.x,I=e[v].y-b.y;h+=x/_*(b.x*g*y+.5*P*(y*w-m*b.x)-P*g*m*w/3),p+=x/_*(b.y*g*y+.5*P*(y*I-m*b.y)-P*g*m*I/3),d+=x}for(v=a+1;v<r&&!(n[v-1]>n[a]+f);v++){y=f-n[v-1]+n[a],m=n[v]-n[v-1],g=n[v]-n[a]<f?1:y/m;if(Math.abs(g)<1e-6)break;var P;_=g*y-.5*(P=g*g)*m,x=g*m/t,b=e[v-1],w=e[v].x-b.x,I=e[v].y-b.y;h+=x/_*(b.x*g*y+.5*P*(y*w-m*b.x)-P*g*m*w/3),p+=x/_*(b.y*g*y+.5*P*(y*I-m*b.y)-P*g*m*I/3),d+=x}s.push(h/d),s.push(p/d)}s.push(u),s.push(l);for(a=0,v=0;a<r;a++)e[a].x=s[v++],e[a].y=s[v++]}}},t._findCentroid=function(e){var t=e.length-1,r=0,n=0,i=0,o=e[0].x,a=e[0].y;o>4096&&(o=4096),o<0&&(o=0),a>4096&&(a=4096),a<0&&(a=0);for(var s=1;s<t;s++){var u=e[s].x,c=e[s].y,f=e[s+1].x,h=e[s+1].y;u>4096&&(u=4096),u<0&&(u=0),c>4096&&(c=4096),c<0&&(c=0),f>4096&&(f=4096),f<0&&(f=0),h>4096&&(h=4096),h<0&&(h=0);var p=(u-o)*(h-a)-(f-o)*(c-a);r+=p*(o+u+f),n+=p*(a+c+h),i+=p}return r/=3*i,n/=3*i,isNaN(r)||isNaN(n)?[]:[new l.Anchor(r,n)]},t._bidiEngine=new i,t}(s)}.apply(null,n))||(e.exports=i)},2331:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(380),r(1640),r(412),r(340),r(725),r(1641),r(1642),r(1643),r(616),r(2332),r(1644),r(1646),r(1647),r(2334),r(2337)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,f,h,p,d,v,y){return function(){function e(){this.rotation=0,this.status=a.TileStatus.INITIALIZED,this._symbolBuckets=[],this.placementEngine=new p.PlacementEngine,this.fillVertexBuffer=new y.FillVertexBuffer(!1),this.fillDDVertexBuffer=new y.FillVertexBuffer(!0),this.fillIndexBuffer=new f.TriangleIndexBuffer,this.outlineVertexBuffer=new y.OutlineVertexBuffer(!1),this.outlineDDVertexBuffer=new y.OutlineVertexBuffer(!0),this.outlineIndexBuffer=new f.TriangleIndexBuffer,this.lineVertexBuffer=new y.LineVertexBuffer(!1),this.lineDDVertexBuffer=new y.LineVertexBuffer(!0),this.lineIndexBuffer=new f.TriangleIndexBuffer,this.iconVertexBuffer=new y.SymbolVertexBuffer(!1),this.iconDDVertexBuffer=new y.SymbolVertexBuffer(!0),this.iconIndexBuffer=new f.TriangleIndexBuffer,this.textVertexBuffer=new y.SymbolVertexBuffer(!1),this.textDDVertexBuffer=new y.SymbolVertexBuffer(!0),this.textIndexBuffer=new f.TriangleIndexBuffer,this.circleVertexBuffer=new y.CircleVertexBuffer,this.circleIndexBuffer=new f.TriangleIndexBuffer}return e.prototype.initialize=function(e,t,r,n){void 0===n&&(n=0),this.tileKey=e,this.refKey=t,this._workerTileHandler=r,this.rotation=n,this.placementEngine.setAngle(c.C_DEG_TO_RAD*n)},e.prototype.release=function(){this.tileKey=this.refKey="",this.status=a.TileStatus.INITIALIZED,this.rotation=0,this.fillVertexBuffer.reset(),this.fillDDVertexBuffer.reset(),this.fillIndexBuffer.reset(),this.outlineVertexBuffer.reset(),this.outlineDDVertexBuffer.reset(),this.outlineIndexBuffer.reset(),this.lineVertexBuffer.reset(),this.lineDDVertexBuffer.reset(),this.lineIndexBuffer.reset(),this.iconVertexBuffer.reset(),this.iconDDVertexBuffer.reset(),this.iconIndexBuffer.reset(),this.textVertexBuffer.reset(),this.textDDVertexBuffer.reset(),this.textIndexBuffer.reset(),this.circleVertexBuffer.reset(),this.circleIndexBuffer.reset(),this.placementEngine.reset(),this._symbolBuckets.length=0,this._workerTileHandler=null},e.prototype.setDataAndParse=function(e,t){var n=this,i=new r(function(e){n.status=a.TileStatus.INVALID});return this._parse(e,t).then(function(e){n.status=a.TileStatus.READY;for(var t=[1,n.fillVertexBuffer.sizeInBytes,2,n.fillDDVertexBuffer.sizeInBytes,3,n.fillIndexBuffer.sizeInBytes,4,n.outlineVertexBuffer.sizeInBytes,5,n.outlineDDVertexBuffer.sizeInBytes,6,n.outlineIndexBuffer.sizeInBytes,7,n.lineVertexBuffer.sizeInBytes,8,n.lineDDVertexBuffer.sizeInBytes,9,n.lineIndexBuffer.sizeInBytes,10,n.iconVertexBuffer.sizeInBytes,11,n.iconDDVertexBuffer.sizeInBytes,12,n.iconIndexBuffer.sizeInBytes,13,n.textVertexBuffer.sizeInBytes,14,n.textDDVertexBuffer.sizeInBytes,15,n.textIndexBuffer.sizeInBytes,16,n.circleVertexBuffer.sizeInBytes,17,n.circleIndexBuffer.sizeInBytes],r=new Uint32Array(t),o=[],c=e.length,f=0;f<c;f++){var p=e[f];if(p instanceof l)o.push(p.layerIndex),o.push(1),o.push(p.fillIndexStart),o.push(p.fillIndexCount),o.push(p.outlineIndexStart),o.push(p.outlineIndexCount);else if(p instanceof h)o.push(p.layerIndex),o.push(2),o.push(p.lineIndexStart),o.push(p.lineIndexCount);else if(p instanceof d){o.push(p.layerIndex),o.push(3),o.push(p.sdfMarker?1:0);var v=p.markerPageMap;o.push(v.size),v.forEach(function(e,t){o.push(t),o.push(e[0]),o.push(e[1])});var y=p.glyphsPageMap;o.push(y.size),y.forEach(function(e,t){o.push(t),o.push(e[0]),o.push(e[1])})}else p instanceof u?(o.push(p.layerIndex),o.push(4),o.push(p.circleIndexStart),o.push(p.circleIndexCount)):p instanceof s&&(o.push(p.layerIndex),o.push(0))}var m=new Uint32Array(o),g=n.fillVertexBuffer.toBuffer(),_=n.fillDDVertexBuffer.toBuffer(),x=n.fillIndexBuffer.toBuffer(),b=n.outlineVertexBuffer.toBuffer(),w=n.outlineDDVertexBuffer.toBuffer(),I=n.outlineIndexBuffer.toBuffer(),P=n.lineVertexBuffer.toBuffer(),T=n.lineDDVertexBuffer.toBuffer(),C=n.lineIndexBuffer.toBuffer(),M=n.iconVertexBuffer.toBuffer(),S=n.iconDDVertexBuffer.toBuffer(),E=n.iconIndexBuffer.toBuffer(),A=n.textVertexBuffer.toBuffer(),D=n.textDDVertexBuffer.toBuffer(),N=n.textIndexBuffer.toBuffer(),O=n.circleVertexBuffer.toBuffer(),F=n.circleIndexBuffer.toBuffer();i.resolve({result:{bufferDataInfo:r.buffer,bucketDataInfo:m.buffer,bufferData:[g,_,x,b,w,I,P,T,C,M,S,E,A,D,N,O,F]},transferList:[g,_,x,b,w,I,P,T,C,M,S,E,A,D,N,O,F,r.buffer,m.buffer]})}),i.promise},e.prototype.addBucket=function(e){this._symbolBuckets.push(e)},e.prototype.updateSymbols=function(e){var t=this,r=this._symbolBuckets;if(!r||0===r.length)return o.resolve();this.rotation=e;var i=this.placementEngine;i.reset(),i.setAngle(e/256*360*c.C_DEG_TO_RAD);var s=this.iconVertexBuffer;s.reset();var u=this.iconDDVertexBuffer;u.reset();var l=this.iconIndexBuffer;l.reset();var f=this.textVertexBuffer;f.reset();var h=this.textDDVertexBuffer;h.reset();var p=this.textIndexBuffer;p.reset();var d=[],v=r.length,y=0;return n(function(){if(t.status===a.TileStatus.INVALID||t.status===a.TileStatus.INITIALIZED)return!0;if(y<v){var e=r[y++],n=e.layer,o=e.copy(n.hasDataDrivenIcon?u:s,l,n.hasDataDrivenText?h:f,p,i);o&&(d.push(o),o.updateSymbols())}return y>=v}).then(function(){if(t.status===a.TileStatus.INVALID||t.status===a.TileStatus.INITIALIZED||0===s.sizeInBytes&&0===u.sizeInBytes&&0===l.sizeInBytes&&0===f.sizeInBytes&&0===h.sizeInBytes&&0===p.sizeInBytes)return{result:null,transferList:null};var e=[10,s.sizeInBytes,11,u.sizeInBytes,12,l.sizeInBytes,13,f.sizeInBytes,14,h.sizeInBytes,15,p.sizeInBytes],r=new Uint32Array(e),n=[];v=d.length;for(var i=0;i<v;i++){var o=d[i];n.push(o.layerIndex),n.push(3),n.push(o.sdfMarker?1:0);var c=o.markerPageMap;n.push(c.size),c.forEach(function(e,t){n.push(t),n.push(e[0]),n.push(e[1])});var y=o.glyphsPageMap;n.push(y.size),y.forEach(function(e,t){n.push(t),n.push(e[0]),n.push(e[1])})}var m=new Uint32Array(n),g=s.toBuffer(),_=u.toBuffer(),x=l.toBuffer(),b=f.toBuffer(),w=h.toBuffer(),I=p.toBuffer();return{result:{bufferDataInfo:r.buffer,bucketDataInfo:m.buffer,bufferData:[g,_,x,b,w,I]},transferList:[g,_,x,b,w,I,r.buffer,m.buffer]}}).catch(function(){return null})},e.prototype.setObsolete=function(){this.status=a.TileStatus.INVALID},e.prototype.getLayers=function(){return this._workerTileHandler.getLayers()},e.prototype.getWorkerTileHandler=function(){return this._workerTileHandler},e.prototype._parse=function(e,t){return e&&0!==e.byteLength?(this.status=a.TileStatus.MODIFIED,new v(e,this,t).parse()):o.resolve([])},e.pool=new i(e),e}()}.apply(null,n))||(e.exports=i)},2332:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(1290)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this,12)||this}return r(t,e),t.prototype.add=function(e,t,r){var n=this.array;n.push(e),n.push(t),n.push(r)},t}(i);t.TriangleIndexBuffer=o;var a=function(e){function t(){return e.call(this,4)||this}return r(t,e),t.prototype.add=function(e){this.array.push(e)},t}(i);t.PointElementMemoryBuffer=a}.apply(null,n))||(e.exports=i)},2333:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1052),r(616)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r,n){this.left=e,this.top=t,this.right=r,this.bottom=n}return e.prototype.clone=function(){return new e(this.left,this.top,this.right,this.bottom)},e.prototype.move=function(e,t){this.left+=e,this.top+=t,this.right+=e,this.bottom+=t},e.prototype.rotate=function(e,t){var r=this.left,n=this.right,i=this.top,o=this.bottom,a=r*e-i*t,s=r*t+i*e,u=n*e-i*t,l=n*t+i*e,c=r*e-o*t,f=r*t+o*e,h=n*e-o*t,p=n*t+o*e;this.left=Math.min(a,u,c,h),this.top=Math.min(s,l,f,p),this.right=Math.max(a,u,c,h),this.bottom=Math.max(s,l,f,p)},e.overlaps=function(e,t){return e.right>t.left&&e.left<t.right&&e.bottom>t.top&&e.top<t.bottom},e}();t.Box=i;var o=function(){function e(e,t,r,n){this.anchor=e,this.corners=t,this.minzoom=r,this.maxzoom=n}return e.prototype.left=function(){return this.corners[0].x},e.prototype.right=function(){return this.corners[2].x},e.prototype.top=function(){return this.corners[1].y},e.prototype.bottom=function(){return this.corners[3].y},e}();t.Obstacle=o;var a=function(){function e(e,t,r){this.obstacles=[],this.mapAngle=e,this.padding=t,this.isScreenAligned=r,this.minzoom=s}return e.prototype.addBox=function(e,t,n,i,a,s,u){var l=t.left*n-this.padding,c=t.top*n-this.padding,f=t.right*n+this.padding,h=t.bottom*n+this.padding,p=[new r.Point(l,c),new r.Point(f,c),new r.Point(f,h),new r.Point(l,h)];if(0!==this.mapAngle){var d=Math.cos(this.mapAngle),v=Math.sin(this.mapAngle);(e=e.clone()).rotate(d,v)}if(this.isScreenAligned||(i+=this.mapAngle),0!==i){d=Math.cos(i),v=Math.sin(i);p[0].rotate(d,v),p[1].rotate(d,v),p[2].rotate(d,v),p[3].rotate(d,v);for(var y=0,m=1;m<4;m++)p[m].x<p[y].x?y=m:p[m].x===p[y].x&&p[m].y<p[y].y&&(y=m);if(y){var g=[];for(m=0;m<4;m++)g.push(p[(m+y)%4]);p=g}}if(a)for(var _=0,x=p;_<x.length;_++){x[_].move(a[0],a[1])}this.obstacles.push(new o(e,p,s,u))},e}();t.Footprint=a;var s=.5,u=function(){function e(){this._grid=[]}return e.prototype.setAngle=function(e){},e.prototype.reset=function(){this._grid=[]},e.prototype.add=function(t){for(var r=this._grid,n=0,i=t.obstacles;n<i.length;n++)for(var o=i[n],a=o.anchor,s=e._gridClamp(Math.min(o.left()+a.x,a.x)),u=e._gridClamp(Math.max(o.right()+a.x,a.x)),l=e._gridClamp(Math.min(o.top()+a.y,a.y)),c=e._gridClamp(Math.max(o.bottom()+a.y,a.y)),f=l;f<=c;f++)for(var h=s;h<=u;h++){var p=r[16*f+h];p||(p=r[16*f+h]=[]),p.push(o)}},e.prototype.getMinZoom=function(t,r,i,o){if(0===t.obstacles.length)return n.C_INFINITY;for(var a=r,s=this._grid,u=0,l=t.obstacles;u<l.length;u++)for(var c=l[u],f=c.anchor,h=e._gridClamp(Math.min(c.left()+f.x,f.x)),p=e._gridClamp(Math.max(c.right()+f.x,f.x)),d=e._gridClamp(Math.min(c.top()+f.y,f.y)),v=e._gridClamp(Math.max(c.bottom()+f.y,f.y)),y=d;y<=v;y++)for(var m=h;m<=p;m++){var g=s[16*y+m];if(g)for(var _=0,x=g;_<x.length;_++){var b=x[_];if(!(c.minzoom>=b.maxzoom||b.minzoom>=c.maxzoom)&&(a=e._calcPlacementZoom(c,b,a))>=2)return n.C_INFINITY}}return a<2?a:n.C_INFINITY},e._gridClamp=function(e){return n.clamp(e>>9,-7,8)},e._calcPlacementZoom=function(t,r,i){var o=r.anchor.x-t.anchor.x;if(0===o&&(t.right()<r.left()||r.right()<t.left()))return i;var a=r.anchor.y-t.anchor.y;if(0===a&&(t.bottom()<r.top()||r.bottom()<t.top()))return i;var s=n.C_INFINITY;if(0!==o){var u=(o>0?t.right()-r.left():t.left()-r.right())/o;u<s&&(s=u);var l=o>0?e._calcExtZoomX(t,r,u):e._calcExtZoomX(r,t,u);l<s&&(s=l)}if(0!==a){var c=(a>0?t.bottom()-r.top():t.top()-r.bottom())/a;c<s&&(s=c);var f=a>0?e._calcExtZoomY(t,r,c):e._calcExtZoomY(r,t,c);f<s&&(s=f)}return s<t.minzoom||s<r.minzoom?i:((s=Math.min(s,t.maxzoom,r.maxzoom))<i&&(s=i),s)},e._calcExtZoomX=function(e,t,r){var n,i,o,a;if(e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[0].y/r){var s=e.corners[2].x-e.corners[3].x,u=e.corners[2].y-e.corners[3].y,l=t.corners[1].x-t.corners[0].x;s*(t.corners[1].y-t.corners[0].y)-u*l>=0?e.anchor.y+e.corners[3].y/r<t.anchor.y+t.corners[0].y/r?(n=e.corners[3],i=t.corners[0],o=t.corners[1],a=1):(n=t.corners[0],i=e.corners[3],o=e.corners[2],a=-1):e.anchor.y+e.corners[2].y/r>t.anchor.y+t.corners[1].y/r?(n=e.corners[2],i=t.corners[0],o=t.corners[1],a=1):(n=t.corners[1],i=e.corners[3],o=e.corners[2],a=-1)}else{s=e.corners[2].x-e.corners[1].x,u=e.corners[2].y-e.corners[1].y,l=t.corners[3].x-t.corners[0].x;s*(t.corners[3].y-t.corners[0].y)-u*l<0?e.anchor.y+e.corners[1].y/r>t.anchor.y+t.corners[0].y/r?(n=e.corners[1],i=t.corners[0],o=t.corners[3],a=1):(n=t.corners[0],i=e.corners[1],o=e.corners[2],a=-1):e.anchor.y+e.corners[2].y/r<t.anchor.y+t.corners[3].y/r?(n=e.corners[2],i=t.corners[0],o=t.corners[3],a=1):(n=t.corners[3],i=e.corners[1],o=e.corners[2],a=-1)}var c=o.x-i.x,f=o.y-i.y;return a*((n.y-i.y)*c-(n.x-i.x)*f)/((e.anchor.x-t.anchor.x)*f-(e.anchor.y-t.anchor.y)*c)},e._calcExtZoomY=function(e,t,r){var n,i,o,a;if(e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[1].x/r){var s=e.corners[3].x-e.corners[2].x,u=e.corners[3].y-e.corners[2].y,l=t.corners[0].x-t.corners[1].x;s*(t.corners[0].y-t.corners[1].y)-u*l<0?e.anchor.x+e.corners[2].x/r<t.anchor.x+t.corners[1].x/r?(n=e.corners[2],i=t.corners[1],o=t.corners[0],a=1):(n=t.corners[1],i=e.corners[2],o=e.corners[3],a=-1):e.anchor.x+e.corners[3].x/r>t.anchor.x+t.corners[0].x/r?(n=e.corners[3],i=t.corners[1],o=t.corners[0],a=1):(n=t.corners[0],i=e.corners[2],o=e.corners[3],a=-1)}else{s=e.corners[3].x-e.corners[0].x,u=e.corners[3].y-e.corners[0].y,l=t.corners[2].x-t.corners[1].x;s*(t.corners[2].y-t.corners[1].y)-u*l>0?e.anchor.x+e.corners[0].x/r>t.anchor.x+t.corners[1].x/r?(n=e.corners[0],i=t.corners[1],o=t.corners[2],a=1):(n=t.corners[1],i=e.corners[0],o=e.corners[3],a=-1):e.anchor.x+e.corners[3].x/r<t.anchor.x+t.corners[2].x/r?(n=e.corners[3],i=t.corners[1],o=t.corners[2],a=1):(n=t.corners[2],i=e.corners[0],o=e.corners[3],a=-1)}var c=o.x-i.x,f=o.y-i.y;return a*((n.y-i.y)*c-(n.x-i.x)*f)/((e.anchor.x-t.anchor.x)*f-(e.anchor.y-t.anchor.y)*c)},e}();t.ConflictEngine=u}.apply(null,n))||(e.exports=i)},2334:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(433),r(1640),r(594),r(340),r(1518),r(725),r(1641),r(1642),r(2335),r(1643),r(1644),r(2336),r(1647)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,f,h,p,d){return function(){function e(e,t,r){this._pbfTile=new i(new Uint8Array(e),new DataView(e)),this._tile=t,this._connection=r,this._layers=t.getLayers();var n=t.tileKey.split("/").map(parseFloat),o=n[0],s=n[1],u=n[2];if(this._level=o,t.refKey){var l=o-t.refKey.split("/").map(parseFloat)[0];if(l>0){var c=(1<<l)-1,f=s&c,h=u&c;this._tileClipper=new a.TileClipper(l,f,h)}}this._tileClipper||(this._tileClipper=new a.SimpleBuilder)}return e.prototype.parse=function(){for(var e,t=this,i=this._parseTileData(this._pbfTile),a=this._layers,u=a.length,l=this._level,f=[],h={},p=new Set,d=u-1;d>=0;d--)if(!((e=a[d]).minzoom&&l<e.minzoom||e.maxzoom&&l>=e.maxzoom||e.layout&&"none"===e.layout.visibility))if(0!==e.type){var v=e.sourceLayer,y=i[v];if(y)if(p.add(v),g=this._createBucket(e)){g.layerIndex=d,g.layerExtent=y.extent;var m=h[v];m||(m=h[v]=[]),m.push(g)}}else{var g;(g=this._createBucket(e)).layerIndex=d,f.push(g)}var _=10*this._level,x=10*(this._level+1),b=[],w=[],I=[],P=[],T=this._tileClipper,C=new Set,M={},S=[];p.forEach(function(e){return S.push(e)});var E=0,A=0,D=S.length;return n(function(){if(t._tile.status===s.TileStatus.INVALID)return!0;switch(E){case 0:if(A<D){var e=S[A++],r=i[e];if(!(v=h[e])||0===v.length)break;for(var n=r.getData();n.next(2);){var o=new c(n.getMessage(),r),a=o.values;if(a){var u=a._minzoom;if(u&&u>=x)continue;var l=a._maxzoom;if(l&&l<=_)continue}for(var f=0,p=v;f<p.length;f++){(g=p[f]).pushFeature(o)}}}else{var d=t._tile;for(var e in h)for(var v,y=0,m=v=h[e];y<m.length;y++){var g;(g=m[y]).hasFeatures()&&(3===g.layer.type?(b.push(g),d.addBucket(g)):g.layer.refLayerId?I.push(g):(w.push(g),P[g.layer.id]=g))}E=1,A=0,D=b.length}break;case 1:A<D?b[A++].getResources(T,C,M):E=2}return 2===E}).then(function(){if(t._tile.status===s.TileStatus.INVALID)return[];var e,i,a=[],u=t._tile.getWorkerTileHandler();for(var l in C.size>0&&(e=u.fetchSprites(C,t._connection),a.push(e)),M){var c=M[l];c.size>0&&(i=u.fetchGlyphs(t._tile.tileKey,l,c,t._connection),a.push(i))}return r(a).then(function(e){if(t._tile.status===s.TileStatus.INVALID)return[];var r=0,i=0,o=w.length;return n(function(){if(t._tile.status===s.TileStatus.INVALID)return!0;switch(r){case 0:if(i<o)(a=w[i++]).processFeatures(T,t._tile),f.push(a);else r=1,i=0,o=I.length;break;case 1:for(var e=0,n=I;e<n.length;e++){var a=n[e],u=P[a.layer.refLayerId];u&&(u.assignBufferInfo(a),f.push(a))}r=2,i=0,o=b.length;break;case 2:if(i<o)(a=b[i++]).processFeatures(T,t._tile),f.push(a);else r=3}return 3===r}).then(function(){return f.sort(function(e,t){return e.layerIndex-t.layerIndex}),f})}).catch(function(e){return o.reject(new Error(e))})}).catch(function(e){return o.reject(new Error(e))})},e.prototype._parseTileData=function(e){for(var t={};e.next();)switch(e.tag()){case 3:var r=new p(e.getMessage());t[r.name]=r;break;default:e.skip()}return t},e.prototype._createBucket=function(e){switch(e.type){case 0:return this._createBackgroundBucket(e);case 1:return this._createFillBucket(e);case 2:return this._createLineBucket(e);case 4:return this._createCircleBucket(e);case 3:return this._createSymbolBucket(e)}},e.prototype._createBackgroundBucket=function(e){return new u(e,this._level)},e.prototype._createFillBucket=function(e){var t=this._tile;return new f(e,this._level,e.hasDataDrivenFill?t.fillDDVertexBuffer:t.fillVertexBuffer,t.fillIndexBuffer,e.hasDataDrivenOutline?t.outlineDDVertexBuffer:t.outlineVertexBuffer,t.outlineIndexBuffer)},e.prototype._createLineBucket=function(e){var t=this._tile;return new h(e,this._level,e.hasDataDrivenLine?t.lineDDVertexBuffer:t.lineVertexBuffer,t.lineIndexBuffer)},e.prototype._createCircleBucket=function(e){var t=this._tile;return new l(e,this._level,t.circleVertexBuffer,t.circleIndexBuffer)},e.prototype._createSymbolBucket=function(e){var t=this._tile;return new d(e,this._level,e.hasDataDrivenIcon?t.iconDDVertexBuffer:t.iconVertexBuffer,t.iconIndexBuffer,e.hasDataDrivenText?t.textDDVertexBuffer:t.textVertexBuffer,t.textIndexBuffer,t.placementEngine,t.getWorkerTileHandler())},e}()}.apply(null,n))||(e.exports=i)},2335:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1052)],void 0===(i=function(e,t,r){return function(){function e(e,t){this.values={};for(var r=t.keys,n=t.values;e.next();)switch(e.tag()){case 1:this.id=e.getUInt64();break;case 2:for(var i=e.getMessage(),o=this.values;!i.empty();){var a=i.getUInt32(),s=i.getUInt32();o[r[a]]=n[s]}break;case 3:this.type=e.getUInt32();break;case 4:this._pbfGeometry=e.getMessage();break;default:e.skip()}}return e.prototype.getGeometry=function(e){if(void 0!==this._geometry)return this._geometry;var t,n,i,o=this._pbfGeometry;e?e.reset(this.type):t=[];for(var a=1,s=0,u=0,l=0;!o.empty();){if(0===s){var c=o.getUInt32();a=7&c,s=c>>3}switch(s--,a){case 1:u+=o.getSInt32(),l+=o.getSInt32(),e?e.moveTo(u,l):(n&&t.push(n),(n=[]).push(new r.Point(u,l)));break;case 2:u+=o.getSInt32(),l+=o.getSInt32(),e?e.lineTo(u,l):n.push(new r.Point(u,l));break;case 7:e?e.close():n&&!n[0].equals(u,l)&&n.push(n[0].clone());break;default:throw new Error("Invalid path operation")}}return e?i=e.result():(n&&t.push(n),i=t),this._geometry=i,i},e}()}.apply(null,n))||(e.exports=i)},2336:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(t){for(this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(e._parseValue(t.getMessage()));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}return e.prototype.getData=function(){return this._pbfLayer},e._parseValue=function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null},e}()}.apply(null,n))||(e.exports=i)},2337:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(616),r(1290)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=new Float32Array(1),s=new Uint32Array(a.buffer),u=function(e){function t(t){var r=e.call(this,t?20:12)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,n,i,u,l,c){var f=this.array,h=o.i1616to32(e,t);if(f.push(h),h=o.i8888to32(Math.round(31*r),Math.round(31*n),Math.round(31*i),Math.round(31*u)),f.push(h),h=o.i1616to32(l,0),f.push(h),this._isDataDriven){if(!c)throw new Error("Expecting data driven values.");var p=c.color,d=p[3]*c.opacity*255;f.push(o.i8888to32(p[0]*d,p[1]*d,p[2]*d,d)),a[0]=c.size,f.push(s[0])}},t}(o);t.LineVertexBuffer=u;var l=function(e){function t(t){var r=e.call(this,t?8:4)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r){var n=this.array;if(n.push(o.i1616to32(e,t)),this._isDataDriven){if(!r)throw new Error("Expecting data driven values.");var i=r.color,a=i[3]*r.opacity*255;n.push(o.i8888to32(i[0]*a,i[1]*a,i[2]*a,a))}},t}(o);t.FillVertexBuffer=l;var c=function(e){function t(t){var r=e.call(this,t?12:8)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,n,i,a,s){var u=this.array,l=this.index,c=o.i1616to32(e,t);if(u.push(c),c=o.i8888to32(Math.round(15*r),Math.round(15*n),i,a),u.push(c),this._isDataDriven){if(!s)throw new Error("Expecting data driven values.");var f=s.color,h=f[3]*s.opacity*255;u.push(o.i8888to32(f[0]*h,f[1]*h,f[2]*h,h))}return l},t}(o);t.OutlineVertexBuffer=c;var f=function(e){function t(t){var r=e.call(this,t?24:16)||this;return r._isDataDriven=t,r}return r(t,e),t.prototype.isDataDriven=function(){return this._isDataDriven},t.prototype.add=function(e,t,r,n,u,l,c,f,h,p,d){var v=this.array,y=o.i1616to32(e,t);if(v.push(y),y=o.i1616to32(Math.round(8*r),Math.round(8*n)),v.push(y),y=o.i8888to32(u/4,l/4,0,0),v.push(y),y=o.i8888to32(Math.ceil(10*p),i.radToByte(c),10*f,Math.min(10*h,255)),v.push(y),this._isDataDriven){if(!d)throw new Error("Expecting data driven values.");var m=d.color,g=m[3]*d.opacity*255;v.push(o.i8888to32(m[0]*g,m[1]*g,m[2]*g,g)),a[0]=d.size,v.push(s[0])}},t}(o);t.SymbolVertexBuffer=f;var h=function(e){function t(){return e.call(this,16)||this}return r(t,e),t.prototype.add=function(e,t,r,n,i,a,s,u,l,c,f){var h=this.array,p=o.i1616to32(2*e+r,2*t+n);h.push(p);var d=a[3]*s*255;p=o.i8888to32(a[0]*d,a[1]*d,a[2]*d,d),h.push(p);var v=c[3]*f*255;p=o.i8888to32(c[0]*v,c[1]*v,c[2]*v,v),h.push(p),p=o.i8888to32(Math.min(32*u,255),Math.min(4*l,255),Math.min(i,255),0),h.push(p)},t}(o);t.CircleVertexBuffer=h}.apply(null,n))||(e.exports=i)},2338:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(340)],void 0===(i=function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createProcessor=function(e,t){var o;return"heatmap"===e?o=i.create(function(e){return r.e(95).then(function(){var t=[r(2441)];e.apply(null,t)}.bind(this)).catch(r.oe)}):"symbol"===e&&(o=i.create(function(e){return Promise.all([r.e(29),r.e(14),r.e(79)]).then(function(){var t=[r(2442)];e.apply(null,t)}.bind(this)).catch(r.oe)})),o.then(function(e){return e.default}).then(function(e){var r=t.serviceAndViewInfo,i=t.remoteClient,o=t.tileStore;return new e(n({},r,{tileStore:o,remoteClient:i}))})}}.apply(null,n))||(e.exports=i)},2339:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(592),r(354),r(1430),r(1273),r(1431),r(1071),r(456)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c){Object.defineProperty(t,"__esModule",{value:!0});var f={added:[],removed:[]},h=new i.default,p=new c(0,0,0,0),d=function(e){function t(t){var r=e.call(this)||this;return r._tiles=new Map,r._index=a(9,o("csp-restrictions")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),r.tiles=[],r.tileInfo=t,r._tileInfoView=new s.TileInfoView(t),r.spatialReference=t.spatialReference,r}return r(t,e),t.prototype.destroy=function(){this._tiles.clear()},t.prototype.has=function(e){return this._tiles.has(e)},t.prototype.get=function(e){return this._tiles.get(e)},t.prototype.findByKey=function(e){return this._tiles.get(e.id)},t.prototype.intersections=function(e,t){var r="string"==typeof e?this.get(e):e;if(!r)return[];for(var n=t*r.resolution,i=r.bounds[0]-n,o=r.bounds[1]-n,a=r.bounds[2]+n,s=r.bounds[3]+n,u=[],l=0,c=this._index.search({minX:i,minY:o,maxX:a,maxY:s});l<c.length;l++){var f=c[l],h=f.bounds.slice();h[0]=Math.max(h[0],i),h[1]=Math.max(h[1],o),h[2]=Math.min(h[2],a),h[3]=Math.min(h[3],s),h[2]-h[0]>0&&h[3]-h[1]>0&&u.push({bounds:h,tile:f})}return u},t.prototype.setViewState=function(e){var t=this._tileInfoView.getTileCoverage(e,0);if(t){var r=t.spans,n=t.lodInfo,i=n.level;if(r.length>0)for(var o=0,a=r;o<a.length;o++)for(var s=a[o],l=s.row,c=s.colFrom,d=s.colTo,v=c;v<=d;v++){var y=p.set(i,l,n.normalizeCol(v),n.getWorldForColumn(v)).id;if(h.add(y),!this.has(y)){var m=new u.default(this._tileInfoView,y);this._tiles.set(y,m),this._index.insert(m),this.tiles.push(m),f.added.push(m)}}for(var g=this.tiles.length-1;g>=0;g--){m=this.tiles[g];h.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(g,1),this._index.remove(m),f.removed.push(m))}(f.added.length||f.removed.length)&&this.emit("update",f),h.clear(),f.added.length=0,f.removed.length=0}},t}(l.default);t.default=d}.apply(null,n))||(e.exports=i)},2340:function(e,t,r){var n,i;n=[r(352),r(386)],void 0===(i=function(e,t){var r=/^\s*"([\S\s]*)"\s*$/,n=/""/g,i=/"/g;function o(e,t){var r,n={},i=e.length;for(r=0;r<i;r++)n[e[r]]=t[r];return n}return t(null,{fieldNames:null,delimiter:",",newline:"\r\n",trim:!1,parse:function(t){var i,a,s,u,l,c,f,h,p=[],d=t.split(this.newline),v=this.fieldNames,y=0,m=[],g="",_="";e:for(c=0,s=d.length;c<s;c++)if(e.trim(d[c])){for(f=0,u=(i=d[c].split(this.delimiter)).length;f<u;f++){for(h=-1,g+=_+(a=i[f]),_="";(h=a.indexOf('"',h+1))>=0;)y++;if(y%2==0){if(y>0){if(!(l=r.exec(g))){console.warn("Csv: discarding row with invalid value: "+g),m=[],g="",y=0;continue e}m.push(l[1].replace(n,'"'))}else m.push(this.trim||!v?e.trim(g):g);g="",y=0}else _=this.delimiter}0===y?(v?p.push(o(v,m)):v=this.fieldNames=m,m=[]):_=this.newline}return p},toCsv:function(e){return this.stringify(this.data,e)},stringify:function(e,t){var r,n,o,a=(t=t||{}).alwaysQuote,s=this.fieldNames,u=this.delimiter,l=this.newline,c="";for(r=-1;r<e.length;r++)for(r>-1&&(c+=l),n=0;n<s.length;n++)null==(o=r<0?s[n]:e[r][s[n]])&&(o=""),"string"!=typeof o&&(o=o.toString()),c+=(n>0?u:"")+(a||o.indexOf('"')>=0||o.indexOf(u)>=0?'"'+o.replace(i,'""')+'"':o);return t.trailingNewline&&(c+=l),c}})}.apply(null,n))||(e.exports=i)},349:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344),r(622),r(364)],void 0===(i=function(e,t,r,n,i){function o(e,t){if(!e){var r=new Error("dummy");throw r.stack&&console.log(r.stack),new E(t)}}function a(e,t,n){r.mat4d.multiply(t,e,h),r.mat4d.inverse(h);for(var i=0;i<8;++i)r.mat4d.multiplyVec4(h,p[i],d),r.vec3d.set3(d[0]/d[3],d[1]/d[3],d[2]/d[3],n[i])}function s(e,t){n.plane.fromPoints(e[4],e[0],e[3],t[0]),n.plane.fromPoints(e[1],e[5],e[6],t[1]),n.plane.fromPoints(e[4],e[5],e[1],t[2]),n.plane.fromPoints(e[3],e[2],e[6],t[3]),n.plane.fromPoints(e[0],e[1],e[2],t[4]),n.plane.fromPoints(e[5],e[4],e[7],t[5])}function u(e){for(var t in e)return t}function l(e,t){e[12]=t[0],e[13]=t[1],e[14]=t[2]}function c(e,t){void 0===t&&(t=0);for(var r=0,n=0;n<4;n++)r+=e[t+n]*D[n];return r}function f(e){return e-Math.floor(e)}Object.defineProperty(t,"__esModule",{value:!0});var h=r.mat4d.create(),p=[r.vec4d.createFrom(-1,-1,-1,1),r.vec4d.createFrom(1,-1,-1,1),r.vec4d.createFrom(1,1,-1,1),r.vec4d.createFrom(-1,1,-1,1),r.vec4d.createFrom(-1,-1,1,1),r.vec4d.createFrom(1,-1,1,1),r.vec4d.createFrom(1,1,1,1),r.vec4d.createFrom(-1,1,1,1)],d=r.vec4d.create(),v=[r.vec3d.create(),r.vec3d.create(),r.vec3d.create(),r.vec3d.create(),r.vec3d.create(),r.vec3d.create(),r.vec3d.create(),r.vec3d.create()],y=r.vec3d.create(),m=r.vec3d.create(),g=r.vec3d.create(),_=r.vec3d.create(),x=r.vec3d.create(),b=r.vec3d.create(),w=r.vec3d.create(),I=r.vec3d.create(),P=r.vec3d.create(),T=r.vec3d.create(),C=r.vec3d.create(),M=r.vec3d.create(),S=r.vec3d.createFrom(0,0,0),E=function(){function e(e){this.message=e}return e.prototype.toString=function(){return"AssertException: "+this.message},e}();t.AssertException=E,t.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"},t.assert=o,t.verify=function(e,t){e||(console.log("Verify failed: "+t),console.log(new Error("dummy").stack))},t.encodeInt16=function(e){return i.clamp(Math.round(32767*e),-32767,32767)},t.encodeNormal=function(e,t){var r=Math.abs(e[0]),n=Math.abs(e[1]),i=1/(r+n+Math.abs(e[2])),o=r*i,a=n*i,s=Math.min(e[2]*i,0);t[0]=(e[0]<0?-1:1)*(o-s),t[1]=(e[1]<0?-1:1)*(a-s)},t.fallbackIfUndefined=function(e,t){return void 0===e?t:e},t.hex2rgb=function(e){return[((e=Math.floor(e))>>16&255)/255,(e>>8&255)/255,(255&e)/255]},t.rgb2hex=function(e){return"0x"+((i.clamp(Math.round(255*e[0]),0,255)<<16)+(i.clamp(Math.round(255*e[1]),0,255)<<8)+i.clamp(Math.round(255*e[2]),0,255)).toString(16)},t.dec2hex=function(e){var t=e.toString(16);return"00000000".substr(0,8-t.length)+t},t.raySphere=function(e,t,n,i,o){n=n||S;var a=r.vec3d.subtract(e,n,y),s=r.vec3d.dot(t,t),u=2*r.vec3d.dot(t,a),l=u*u-4*s*(r.vec3d.dot(a,a)-i*i);if(l<0)return!1;var c=Math.sqrt(l),f=(-u-c)/(2*s),h=(-u+c)/(2*s);return(f<0||h<f&&h>0)&&(f=h),f>0&&(o&&r.vec3d.add(e,r.vec3d.scale(t,f,M),o),!0)},t.rayTriangle3D=function(e,t,n,i,o,a,s,u,l){void 0===l&&(l=r.vec3d.create());var c=i[s]-n[a],f=i[s+1]-n[a+1],h=i[s+2]-n[a+2],p=o[u]-n[a],d=o[u+1]-n[a+1],v=o[u+2]-n[a+2],y=t[1]*v-d*t[2],m=t[2]*p-v*t[0],g=t[0]*d-p*t[1],_=c*y+f*m+h*g;if(_>-1e-5&&_<1e-5)return!1;var x=1/_,b=e[0]-n[a],w=e[1]-n[a+1],I=e[2]-n[a+2];if(l[1]=x*(b*y+w*m+I*g),l[1]<0||l[1]>1)return!1;var P=w*h-f*I,T=I*c-h*b,C=b*f-c*w;return l[2]=x*(t[0]*P+t[1]*T+t[2]*C),!(l[2]<0||l[1]+l[2]>1||(l[0]=x*(p*P+d*T+v*C),0))},t.rayBoxTest=function(e,t,r,n){var i,o=(r[0]-e[0])/t[0],a=(n[0]-e[0])/t[0];o>a&&(i=o,o=a,a=i);var s=(r[1]-e[1])/t[1],u=(n[1]-e[1])/t[1];if(s>u&&(i=s,s=u,u=i),o>u||s>a)return!1;s>o&&(o=s),u<a&&(a=u);var l=(r[2]-e[2])/t[2],c=(n[2]-e[2])/t[2];return l>c&&(i=l,l=c,c=i),!(o>c||l>a||(c<a&&(a=c),a<0))},t.rayRay2D=function(e,t,n,i,o,a){void 0===a&&(a=r.vec2d.create());var s=(i[o]-n[o])*(t[0]-e[0])-(i[0]-n[0])*(t[o]-e[o]),u=(i[0]-n[0])*(e[o]-n[o])-(i[o]-n[o])*(e[0]-n[0]);if(0===s)return!1;var l=u/s;return a[0]=e[0]+l*(t[0]-e[0]),a[1]=e[o]+l*(t[o]-e[o]),!0},t.matrixToFrustumPoints=a,t.matrixToFrustumPlanes=function(e,t,r,n){void 0===n&&(n=r,r=v),a(e,t,r),s(r,n)},t.frustumPointsToPlanes=s,t.project=function(e,t,n,i,a){a||(a=e),d[0]=e[0],d[1]=e[1],d[2]=e[2],d[3]=1,r.mat4d.multiplyVec4(t,d),a.length>2&&(a[2]=-d[2]),r.mat4d.multiplyVec4(n,d),o(0!==d[3]),a[0]=d[0]/d[3],a[1]=d[1]/d[3],a[2]=d[2]/d[3],a[0]=(.5*a[0]+.5)*i[2]+i[0],a[1]=(.5*a[1]+.5)*i[3]+i[1]},t.getFirstObjectKey=u,t.getFirstObjectValue=function(e){return e[u(e)]},t.objectEmpty=function(e){for(var t in e)return!1;return!0},t.logWithBase=function(e,t){return Math.log(e)/Math.log(t)},t.setMatrixTranslation=l,t.setMatrixTranslation3=function(e,t,r,n){e[12]=t,e[13]=r,e[14]=n},t.getMatrixTranslation=function(e,t){return void 0===t&&(t=r.vec3d.create()),t[0]=e[12],t[1]=e[13],t[2]=e[14],t},t.createTranslationMatrix=function(e,t){return l(e=r.mat4d.identity(e),t),e},t.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]},t.fovx2fovy=function(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/t)},t.fovy2fovx=function(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/r)},t.fovx2fovd=function(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/t)},t.fovy2fovd=function(e,t,r){return 2*Math.atan(Math.sqrt(t*t+r*r)*Math.tan(.5*e)/r)},t.fovd2fovx=function(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+r*r))},t.fovd2fovy=function(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/Math.sqrt(t*t+r*r))},t.lineLineDistanceSquared3D=function(e,t,n,o,a){var s=m,u=g;if(s[0]=e[0]-n[0],s[1]=e[1]-n[1],s[2]=e[2]-n[2],u[0]=o[0]-n[0],u[1]=o[1]-n[1],u[2]=o[2]-n[2],Math.abs(u[0])<1e-4&&Math.abs(u[1])<1e-4&&Math.abs(u[2])<1e-4)return a.success=!1,a;var l=_;if(l[0]=t[0]-e[0],l[1]=t[1]-e[1],l[2]=t[2]-e[2],Math.abs(l[0])<1e-4&&Math.abs(l[1])<1e-4&&Math.abs(l[2])<1e-4)return a.success=!1,a;var c=s[0]*u[0]+s[1]*u[1]+s[2]*u[2],f=u[0]*l[0]+u[1]*l[1]+u[2]*l[2],h=s[0]*l[0]+s[1]*l[1]+s[2]*l[2],p=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],d=(l[0]*l[0]+l[1]*l[1]+l[2]*l[2])*p-f*f;if(Math.abs(d)<1e-4)return a.success=!1,a;var v=c*f-h*p,y=i.clamp(v/d,0,1),w=i.clamp((c+f*y)/p,0,1),I=x,P=b;I[0]=e[0]+y*l[0],I[1]=e[1]+y*l[1],I[2]=e[2]+y*l[2],P[0]=n[0]+w*u[0],P[1]=n[1]+w*u[1],P[2]=n[2]+w*u[2];var T=r.vec3d.dist2(I,P);return a.success=!0,a.dist2=T,a.pa=I,a.pb=P,a},t.pointLineSegmentDistanceSquared2D=function(e,t,n){var o=T,a=C,s=M,u=P,l=w,c=I;o[0]=t[0]-e[0],o[1]=t[1]-e[1],o[2]=0,a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=0,s[0]=n[0],s[1]=n[1],s[2]=0;var f=r.vec2d.dot(a,o),h=r.vec2d.dot(o,o),p=i.clamp(f/h,0,1);u[0]=o[0]*p,u[1]=o[1]*p,l[0]=e[0]+u[0],l[1]=e[1]+u[1],r.vec2d.subtract(s,l,c);var d=r.vec2d.dot(c,c),v=r.vec2d.dot(a,a),y=r.vec2d.dot(o,o),m=r.vec2d.dot(u,u);return(m>v||m>y)&&(d=Number.MAX_VALUE),d},t.packFloatRGBA=function(e,t,r){void 0===r&&(r=0);for(var n=i.clamp(e,0,N),o=0;o<4;o++)t[r+o]=Math.floor(256*f(n*A[o]))},t.unpackFloatRGBA=c;var A=[1,256,65536,16777216],D=[1/256,1/65536,1/16777216,1/4294967296],N=c(new Uint8ClampedArray([255,255,255,255]));t.inverseProjectionInfo=function(e,t,n,i,o){var a=e;0===e[11]?(i[0]=2/(t*a[0]),i[1]=2/(n*a[5]),i[2]=(1+a[12])/a[0],i[3]=(1+a[13])/a[5],r.vec2d.set2(0,1,o)):(i[0]=-2/(t*a[0]),i[1]=-2/(n*a[5]),i[2]=(1-a[8])/a[0],i[3]=(1-a[9])/a[5],r.vec2d.set2(1,0,o))}}.apply(null,n))||(e.exports=i)},389:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(361),r(367)],void 0===(i=function(e,t,r,n){function i(e){return e}function o(e){return void 0===e&&(e=t.ZERO),i([e[0],e[1],e[2],e[3],e[4],e[5]])}function a(e){return e[0]>=e[3]?0:e[3]-e[0]}function s(e){return e[1]>=e[4]?0:e[4]-e[1]}function u(e){return e[2]>=e[5]?0:e[5]-e[2]}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function c(e){return 6===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.fromValues=function(e,t,r,n,o,a){return i([e,t,r,n,o,a])},t.fromExtent=function(e,t){return void 0===t&&(t=o()),t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.toExtent=function(e,t){var n=isFinite(e[2])||isFinite(e[5]);return new r(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.fromMinMax=function(e,t,r){return void 0===r&&(r=o()),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r},t.expandPointInPlace=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[3]&&(e[3]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[4]&&(e[4]=t[1]),t[2]<e[2]&&(e[2]=t[2]),t[2]>e[5]&&(e[5]=t[2])},t.expand=function(e,t,r){return void 0===r&&(r=e),c(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r[4]=Math.max(e[4],t[4]),r[5]=Math.max(e[5],t[5])):n.is(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[2]),r[4]=Math.max(e[4],t[3])):2===t.length?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1])):3===t.length&&(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1]),r[5]=Math.max(e[5],t[2])),r},t.expandWithBuffer=function(e,t,r,n,i){void 0===i&&(i=e);for(var o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],f=0;f<n;f++)o=Math.min(o,t[r+3*f]),a=Math.min(a,t[r+3*f+1]),s=Math.min(s,t[r+3*f+2]),u=Math.max(u,t[r+3*f]),l=Math.max(l,t[r+3*f+1]),c=Math.max(c,t[r+3*f+2]);return i[0]=o,i[1]=a,i[2]=s,i[3]=u,i[4]=l,i[5]=c,i},t.expandWithNestedArray=function(e,t,r,n){void 0===n&&(n=e);var i=t.length,o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5];if(r)for(var f=0;f<i;f++){var h=t[f];o=Math.min(o,h[0]),a=Math.min(a,h[1]),s=Math.min(s,h[2]),u=Math.max(u,h[0]),l=Math.max(l,h[1]),c=Math.max(c,h[2])}else for(f=0;f<i;f++)h=t[f],o=Math.min(o,h[0]),a=Math.min(a,h[1]),u=Math.max(u,h[0]),l=Math.max(l,h[1]);return n[0]=o,n[1]=a,n[2]=s,n[3]=u,n[4]=l,n[5]=c,n},t.allFinite=function(e){for(var t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0},t.width=a,t.depth=s,t.height=u,t.diameter=function(e){var t=a(e),r=u(e),n=s(e);return Math.sqrt(t*t+r*r+n*n)},t.center=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=e[0]+a(e)/2,t[1]=e[1]+s(e)/2,t[2]=e[2]+u(e)/2,t},t.size=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=a(e),t[1]=s(e),t[2]=u(e),t},t.maximumDimension=function(e){return Math.max(a(e),u(e),s(e))},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[2]>=e[2]-r&&t[0]<=e[3]+r&&t[1]<=e[4]+r&&t[2]<=e[5]+r},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.intersects=function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])},t.offset=function(e,t,r,n,i){return void 0===i&&(i=e),i[0]=e[0]+t,i[1]=e[1]+r,i[2]=e[2]+n,i[3]=e[3]+t,i[4]=e[4]+r,i[5]=e[5]+n,i},t.setMin=function(e,t,r){return void 0===r&&(r=e),r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},t.setMax=function(e,t,r){return void 0===r&&(r=e),r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e},t.set=l,t.empty=function(e){return e?l(e,t.NEGATIVE_INFINITY):o(t.NEGATIVE_INFINITY)},t.toRect=function(e,t){return t||(t=n.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[3]=t[2],e[4]=t[3],e},t.is=c,t.isPoint=function(e){return 0===a(e)&&0===s(e)&&0===u(e)},t.equals=function(e,t,r){if(null==e||null==t)return e===t;if(!c(e)||!c(t))return!1;if(r){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.POSITIVE_INFINITY=i([-1/0,-1/0,-1/0,1/0,1/0,1/0]),t.NEGATIVE_INFINITY=i([1/0,1/0,1/0,-1/0,-1/0,-1/0]),t.ZERO=i([0,0,0,0,0,0])}.apply(null,n))||(e.exports=i)},397:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(342)],void 0===(i=function(e,t,r,n){function i(e){return e[0].stride}function o(e){switch(e){case 5126:case 5124:case 5125:return 4;case 5122:case 5123:return 2;case 5120:case 5121:return 1;default:throw new Error("Unknown data type")}}Object.defineProperty(t,"__esModule",{value:!0}),t.vertexCount=function(e,t){return e.vertexBuffers[t].size/i(e.layout[t])},t.getStride=i,t.getBytesPerElement=o,t.addDescriptor=function(e,t,r,n,i,a){var s=o(n);if(e.length>0){var u=e[0].stride,l=u+s*r;e.forEach(function(e){return e.stride=l}),e.push({name:t,count:r,type:n,offset:u,stride:l,normalized:i,divisor:a})}else e.push({name:t,count:r,type:n,offset:0,stride:s*r,normalized:i,divisor:a})},t.assertCompatibleVertexAttributeLocations=function(e,t){var r=e.locations===t.locations;return r||console.error("VertexAttributeLocations are incompatible"),r},t.hasAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return!0;return!1},t.findAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null},t.copyFramebufferToTexture=function(e,t,r,n,i){void 0===i&&(i=0);var o=e.getBoundFramebufferObject(),a=e.getBoundTexture(0);e.bindFramebuffer(t),e.bindTexture(r,0),e.gl.copyTexImage2D(e.gl.TEXTURE_2D,i,r.descriptor.pixelFormat,n[0],n[1],n[2],n[3],0),e.gl.flush(),e.bindFramebuffer(o),e.bindTexture(a,0)},t.assert=function(e,t){if(!e)throw new n(t)},t.setBaseInstanceOffset=function(e,t){var n={};for(var i in e)n[i]=e[i].map(function(e){return e.divisor?r({},e,{baseInstance:t}):e});return n},t.bindVertexBufferLayout=function(e,t,r,n,i){var o=e.gl,a=e.capabilities.instancing;e.bindBuffer(r),n.forEach(function(e){var r=t[e.name],n=(i||(0+e.baseInstance?e.baseInstance:0))*e.stride;if(void 0===r&&console.error("There is no location for vertex attribute '"+e.name+"' defined."),e.baseInstance&&!e.divisor&&console.error("Vertex attribute '"+e.name+"' uses baseInstanceOffset without divisor."),e.count<=4)o.vertexAttribPointer(r,e.count,e.type,e.normalized,e.stride,e.offset+n),o.enableVertexAttribArray(r),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r,e.divisor);else if(9===e.count)for(var s=0;s<3;s++)o.vertexAttribPointer(r+s,3,e.type,e.normalized,e.stride,e.offset+12*s+n),o.enableVertexAttribArray(r+s),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r+s,e.divisor);else if(16===e.count)for(s=0;s<4;s++)o.vertexAttribPointer(r+s,4,e.type,e.normalized,e.stride,e.offset+16*s+n),o.enableVertexAttribArray(r+s),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r+s,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count)})},t.unbindVertexBufferLayout=function(e,t,r,n){var i=e.gl,o=e.capabilities.instancing;e.bindBuffer(r),n.forEach(function(e){var r=t[e.name];if(e.count<=4)i.disableVertexAttribArray(r),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r,0);else if(9===e.count)for(var n=0;n<3;n++)i.disableVertexAttribArray(r+n),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r+n,0);else if(16===e.count)for(n=0;n<4;n++)i.disableVertexAttribArray(r+n),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r+n,0);else console.error("Unsupported vertex attribute element count: "+e.count)}),e.unbindBuffer(34962)}}.apply(null,n))||(e.exports=i)},426:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(341),r(337)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}var i;return r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title})},n([o.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),i=n([o.subclass("esri.renderers.support.LegendOptions")],t)}(o.declared(i));t.LegendOptions=a,t.default=a}.apply(null,n))||(e.exports=i)},427:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1}}();t.default=r}.apply(null,n))||(e.exports=i)},430:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(382)],void 0===(i=function(e,t,r){function n(e,t){if(null!=e){var r=e.isVisibleBit,n=e.data,i=y(n);return t<n.length*i?v(r,n,t,i):d(e)}return!0}function i(e){return null===e.component?-1:e.component}function o(e,t,r,i,o){n(t,i)&&a(e,t,r,r[i],g(r[i+1]),o)}function a(e,t,r,n,i,o){var a=e.length>0?e[e.length-1]:null,s=a?a.range[1]:-1,u=a?a.options:null;if(!(s>=n))if(s+1===n&&u===o)a.range[1]=i;else{var l={range:[n,i],options:o};e.push(l)}}function s(e){return void 0===e&&(e=!0),{isVisibleBit:!e,data:new Uint32Array(0)}}function u(e,t){return!c(e,t)}function l(e,t){return f(e,t,!0)}function c(e,t){return f(e,t,!1)}function f(e,t,r){var n=!1,i=(e=e||x).isVisibleBit,o=e.data,a=_(t),s=y(o),u=o.length*s,l=r===i;if(0===o.length||0===a)n=!l;else if(u<a&&!l)n=!0;else{for(var c=m(s),f=m(0),h=0;h<o.length-1;h++)if(n=!l&&o[h]!==c||l&&o[h]!==f)return n;var p=o.length-1,d=m((a-1)%s+1);n=!l&&(o[p]&d)!==d||l&&(o[p]&d)!==f}return n}function h(e,t){return t<_(e)}function p(e){return e.length>0}function d(e){return!e.isVisibleBit}function v(e,t,r,n){var i=r/n|0,o=r-i*n;return function(e,t){return 0!=(e&1<<t)}(t[i],o)===e}function y(e){return 8*e.BYTES_PER_ELEMENT}function m(e){return b[e]}function g(e){return e-1}function _(e){return Math.max(0,e.length-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateVisibility=function(e,t,r,n){if(h(t,r)){null==e&&(e=s());var i=e.isVisibleBit,o=e.data,a=y(o),u=r/a|0,l=r-a*u,c=(_(t)-1)/a|0,f=o,p=n===i;if(!(r<f.length*a)&&p){var d=u+1,v=Math.ceil(1.5*f.length),m=c+1,g=Math.max(d,v);g=Math.min(g,m),(o=new Uint32Array(g)).set(f)}u<o.length&&(o[u]=function(e,t,r){return e&~(1<<t)|(r?1:0)<<t}(o[u],l,p)),e.data=o}return e},t.getVisibility=n,t.hideAllComponents=function(e){var t;if(null==e)t=s(!1);else{(t=e).isVisibleBit=!0;for(var r=0;r<t.data.length;r++)t.data[r]=0}return t},t.unhideAllComponents=function(e){var t;if(null==e);else{(t=e).isVisibleBit=!1;for(var r=0;r<t.data.length;r++)t.data[r]=0}return t},t.generateVisibleIndexRanges=function(e,t){var r;if(e)if(p(t))if(0===e.data.length){var n=[],i=[[t[0],g(t[t.length-1])]];r=d(e)?i:n}else{r=[];for(var o=e.isVisibleBit,a=e.data,s=y(a),u=a.length*s,l=_(t),c=!1,f=0;f<u&&f<l;f++){var h=v(o,a,f,s);if(h!==c){var m=t[f];h?r.push([m,0]):(b=r[r.length-1])[1]=g(m),c=h}}var x=d(e);if(l>u&&x&&!c)r.push([t[u],g(t[l])]);else if(c){var b=r[r.length-1],w=x?l:Math.min(l,u);b[1]=g(t[w])}}else n=[],i=null,r=d(e)?i:n;else r=null;return r},t.addHighlight=function(e,t,r,n){var o,a={component:t,options:r,id:n};(e=e||[]).push(a);for(var s=i(a),u=e.length-1;u>0&&s<i(e[u-1]);)o=[e[u],e[u-1]],e[u-1]=o[0],e[u]=o[1],--u;return e},t.removeHighlight=function(e,t){if(e){var r=e.filter(function(e){return e.id!==t});return 0===r.length?null:r}return e},t.generateHighlightedIndexRanges=function(e,t,r){if(!t)return null;if(!p(r))return!e||d(e)?t.map(function(e){return{range:null,options:e.options}}):null;for(var n=r[0],i=g(r[r.length-1]),s=[],l=u(e,r),c=0;c<t.length;++c){var f=t[c].options,h=t[c].component;if(null!==h)o(s,e,r,h,f);else if(l)a(s,0,0,n,i,f);else for(var v=0;v<_(r);++v)o(s,e,r,v,f)}return s.length>0?s:null},t.defaultVisibilities=s,t.isAllVisible=u,t.isAllHidden=function(e,t){return!l(e,t)},t.hasVisible=l,t.hasHidden=c;var x=s();t.createOffsets=function(e){return Array.isArray(e)?new Uint32Array(e):e},t.hasComponent=h,t.hasComponents=p;for(var b=[],w=0;w<65;w++)b.push(Math.pow(2,w)-1);t.componentCount=_,t.componentFind=function(e,t){var n=r.binaryIndexOf(e,t,!0);return n>=0?n:null}}.apply(null,n))||(e.exports=i)},450:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(338),r(336),r(365),r(341),r(348),r(337),r(359),r(367),r(442),r(410),r(383),r(637)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,f,h,p,d){var v=s({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(e){function t(t){var r=e.call(this)||this;return r.dpi=96,r.format=null,r.origin=null,r.minScale=0,r.maxScale=0,r.size=null,r.spatialReference=null,r}var a;return n(t,e),a=t,t.create=function(e){void 0===e&&(e={size:256,spatialReference:o.SpatialReference.WebMercator});var t=e.resolutionFactor||1,r=e.scales,n=e.size||256,i=e.spatialReference||o.SpatialReference.WebMercator,s=h.getInfo(i),u=s?new o.Point(s.origin[0],s.origin[1],i):new o.Point(0,0,i),l=1/(39.37*f.getMetersPerUnitForSR(i)*96),c=[];if(r)for(var p=0;p<r.length;p++){var d=(m=r[p])*l;c.push({level:p,scale:m,resolution:d})}else{var v=h.isGeographic(i)?512/n*147748799.285417:256/n*591657527.591555,y=Math.ceil(24/t);c.push({level:0,scale:v,resolution:v*l});for(p=1;p<y;p++){var m;d=(m=v/Math.pow(2,t))*l;c.push({level:p,scale:m,resolution:d}),v=m}}return new a({dpi:96,lods:c,origin:u,size:n,spatialReference:i})},Object.defineProperty(t.prototype,"isWrappable",{get:function(){var e=this.spatialReference,t=this.origin;if(e&&t){var r=h.getInfo(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1},enumerable:!0,configurable:!0}),t.prototype.readOrigin=function(e,t){return o.Point.fromJSON(r({spatialReference:t.spatialReference},e))},Object.defineProperty(t.prototype,"lods",{set:function(e){var t=this,r=0,n=0,i=[];this._levelToLOD={},e&&(r=-1/0,n=1/0,e.forEach(function(e){i.push(e.scale),r=e.scale>r?e.scale:r,n=e.scale<n?e.scale:n,t._levelToLOD[e.level]=e})),this._set("scales",i),this._set("minScale",r),this._set("maxScale",n),this._set("lods",e),this._initializeUpsampleLevels()},enumerable:!0,configurable:!0}),t.prototype.readSize=function(e,t){return[t.cols,t.rows]},t.prototype.writeSize=function(e,t){t.cols=e[0],t.rows=e[0]},t.prototype.zoomToScale=function(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var r=Math.round(e-.5),n=Math.round(e);return t[n]+(n-e)*(t[r]-t[n])},t.prototype.scaleToZoom=function(e){for(var t=this.scales,r=t.length-1,n=0;n<r;n++){var i=t[n],o=t[n+1];if(i<=e)return n;if(o===e)return n+1;if(i>e&&o<e)return n+1-(e-o)/(i-o)}return n},t.prototype.snapScale=function(e,t){void 0===t&&(t=.95);var r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))},t.prototype.tileAt=function(e,t,r,n){var i,o,a=this.lodAt(e);if(!a)return null;if("number"==typeof t)i=t,o=r;else if(h.equals(t.spatialReference,this.spatialReference))i=t.x,o=t.y,n=r;else{var s=p.project(t,this.spatialReference);if(!s)return null;i=s.x,o=s.y,n=r}var u=a.resolution*this.size[0],l=a.resolution*this.size[1];return n||(n={id:null,level:0,row:0,col:0,extent:c.create()}),n.level=e,n.row=Math.floor((this.origin.y-o)/l+.001),n.col=Math.floor((i-this.origin.x)/u+.001),this.updateTileInfo(n),n},t.prototype.updateTileInfo=function(e){var t=this.lodAt(e.level);if(t){var r=t.resolution*this.size[0],n=t.resolution*this.size[1];e.id=e.level+"/"+e.row+"/"+e.col,e.extent||(e.extent=c.create()),e.extent[0]=this.origin.x+e.col*r,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+r,e.extent[3]=e.extent[1]+n}},t.prototype.upsampleTile=function(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))},t.prototype.getTileBounds=function(e,t){var r=this.lodAt(t.level).resolution,n=r*this.size[0],i=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+n,e[3]=e[1]+i,e},t.prototype.lodAt=function(e){return this._levelToLOD&&this._levelToLOD[e]||null},t.prototype.clone=function(){return a.fromJSON(this.write({}))},t.prototype._initializeUpsampleLevels=function(){var e=this.lods;this._upsampleLevels=[];for(var t=null,r=0;r<e.length;r++){var n=e[r];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}},i([u.property({type:Number,json:{write:!0}})],t.prototype,"compressionQuality",void 0),i([u.property({type:Number,json:{write:!0}})],t.prototype,"dpi",void 0),i([u.property({type:String,json:{read:v.read,write:v.write}})],t.prototype,"format",void 0),i([u.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],t.prototype,"isWrappable",null),i([u.property({type:o.Point,json:{write:!0}})],t.prototype,"origin",void 0),i([u.reader("origin")],t.prototype,"readOrigin",null),i([u.property({type:[d],value:null,json:{write:!0}})],t.prototype,"lods",null),i([u.property({readOnly:!0})],t.prototype,"minScale",void 0),i([u.property({readOnly:!0})],t.prototype,"maxScale",void 0),i([u.property({readOnly:!0})],t.prototype,"scales",void 0),i([u.property({cast:function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]}})],t.prototype,"size",void 0),i([u.reader("size",["rows","cols"])],t.prototype,"readSize",null),i([u.writer("size",{cols:{type:l.Integer},rows:{type:l.Integer}})],t.prototype,"writeSize",null),i([u.property({type:o.SpatialReference,json:{write:!0}})],t.prototype,"spatialReference",void 0),a=i([u.subclass("esri.layers.support.TileInfo")],t)}(u.declared(a))}.apply(null,n))||(e.exports=i)},456:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(412)],void 0===(i=function(e,t,r){return function(){function e(e,t,r,n){this.set(e,t,r,n)}return e.from=function(t,r,n,i){return e.pool.acquire(t,r,n,i)},e.getId=function(e,t,r,n){return"object"==typeof e?e.level+"/"+e.row+"/"+e.col+"/"+e.world:e+"/"+t+"/"+r+"/"+n},Object.defineProperty(e.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world},e.prototype.release=function(){this.level=0,this.row=0,this.col=0,this.world=0},e.prototype.set=function(e,t,r,n){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){var i=e.split("/"),o=i[0],a=i[1],s=i[2],u=i[3];this.level=parseFloat(o),this.row=parseFloat(a),this.col=parseFloat(s),this.world=parseFloat(u)}else this.level=+e,this.row=+t,this.col=+r,this.world=+n||0;return this},e.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world},e.prototype.getChildKeys=function(){var t=this.level+1,r=this.row<<1,n=this.col<<1,i=this.world;return[e.pool.acquire(t,r,n,i),e.pool.acquire(t,r,n+1,i),e.pool.acquire(t,r+1,n,i),e.pool.acquire(t,r+1,n+1,i)]},e.prototype._compare=function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0},e.sort=function(t){return t.map(function(t){return e.from(t)}).sort(function(e,t){return e._compare(t)}).map(function(e){return e.id})},e.pool=new r(e,!0,null,25,50),e}()}.apply(null,n))||(e.exports=i)},592:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(658),o=r(461),a=r(659),s=r(621);r(669),t.Set=o.default.Set,s.default("es6-set")||(t.Set=((n=function(){function e(e){if(this._setData=[],this[Symbol.toStringTag]="Set",e)if(a.isArrayLike(e))for(var t=0;t<e.length;t++)this.add(e[t]);else try{for(var r=i.__values(e),n=r.next();!n.done;n=r.next()){var o=n.value;this.add(o)}}catch(e){s={error:e}}finally{try{n&&!n.done&&(u=r.return)&&u.call(r)}finally{if(s)throw s.error}}var s,u}return e.prototype.add=function(e){return this.has(e)?this:(this._setData.push(e),this)},e.prototype.clear=function(){this._setData.length=0},e.prototype.delete=function(e){var t=this._setData.indexOf(e);return-1!==t&&(this._setData.splice(t,1),!0)},e.prototype.entries=function(){return new a.ShimIterator(this._setData.map(function(e){return[e,e]}))},e.prototype.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},e.prototype.has=function(e){return this._setData.indexOf(e)>-1},e.prototype.keys=function(){return new a.ShimIterator(this._setData)},Object.defineProperty(e.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0}),e.prototype.values=function(){return new a.ShimIterator(this._setData)},e.prototype[Symbol.iterator]=function(){return new a.ShimIterator(this._setData)},e}())[Symbol.species]=n,n)),t.default=t.Set},594:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e,t,r,n){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=n||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,n=new e(this._data,this._dataView,r,r+t);return this._skip(t),n},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,n=0;if(this._end-r>=10)do{if(n|=127&(e=t[r++]),0==(128&e))break;if(n|=(127&(e=t[r++]))<<7,0==(128&e))break;if(n|=(127&(e=t[r++]))<<14,0==(128&e))break;if(n|=(127&(e=t[r++]))<<21,0==(128&e))break;if(n+=268435456*(127&(e=t[r++])),0==(128&e))break;if(n+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(n+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(n+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(n+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(n+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var i=1;r!==this._end&&0!=(128&(e=t[r]));)++r,n+=(127&e)*i,i*=128;if(r===this._end)throw new Error("Varint overrun!");++r,n+=e*i}return this._pos=r,n},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var n="",i="";r=Math.min(this._end,r);for(var o=t;o<r;++o){var a=e[o];128&a?i+="%"+a.toString(16):(n+=decodeURIComponent(i)+String.fromCharCode(a),i="")}return i.length&&(n+=decodeURIComponent(i)),n},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()}.apply(null,n))||(e.exports=i)},597:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t}}();t.default=r}.apply(null,n))||(e.exports=i)},607:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t,r,n){void 0===e&&(e=null),void 0===t&&(t={}),this.geometry=e,this.attributes=t,r&&(this.centroid=r),null!=n&&(this.objectId=n)}}();t.default=r}.apply(null,n))||(e.exports=i)},616:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return(e%=t)>=0?e:e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var n=1/Math.LN2;t.positiveMod=r,t.radToByte=function(e){return r(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return r(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*n},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}}.apply(null,n))||(e.exports=i)},622:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1007),r(1274),r(1275)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.plane=n,t.triangle=i,t.lineSegment=r}.apply(null,n))||(e.exports=i)},631:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r,e)},t.slice=function(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));for(var n=Math.max(0,r-t),i=new(0,e.constructor)(n),o=0;o<n;o++)i[o]=e[t+o];return i},t.isArrayBuffer=function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name},t.isInt8Array=function(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name},t.isUint8Array=function(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name},t.isInt16Array=function(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name},t.isUint16Array=function(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name},t.isInt32Array=function(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name},t.isUint32Array=function(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name},t.isFloat32Array=function(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name},t.isFloat64Array=function(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}}.apply(null,n))||(e.exports=i)},637:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(341),r(337),r(359)],void 0===(i=function(e,t,r,n,i,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.level=0,r.levelValue=null,r.resolution=0,r.scale=0,r}var i;return r(t,e),i=t,t.prototype.clone=function(){return new i({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})},n([o.property({type:a.Integer,json:{write:!0}})],t.prototype,"level",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"levelValue",void 0),n([o.property({type:Number,json:{write:!0}})],t.prototype,"resolution",void 0),n([o.property({type:Number,json:{write:!0}})],t.prototype,"scale",void 0),i=n([o.subclass("esri.layers.support.LOD")],t)}(o.declared(i))}.apply(null,n))||(e.exports=i)},703:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e,t){if(void 0===e&&(e=0),this.sizeOfFunction=function(){return 1},this._sizeOf=0,this._cache=new Map,this._queue=[],e<=0)throw new Error("LRU cache size must be bigger than zero!");this._maxSize=e,t&&(t.disposeFunction&&(this.disposeFunction=t.disposeFunction),t.sizeOfFunction&&(this.sizeOfFunction=t.sizeOfFunction))}return Object.defineProperty(e.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;this._queue.length=0,this.disposeFunction&&this._cache.forEach(function(t,r){e.disposeFunction(r,t)}),this._cache.clear(),this._sizeOf=0},e.prototype.delete=function(e){var t=this._cache.get(e);return!!this._cache.delete(e)&&(this._sizeOf-=this.sizeOfFunction(t),this._queue.splice(this._queue.indexOf(e),1),this.disposeFunction&&this.disposeFunction(e,t),!0)},e.prototype.forEach=function(e,t){this._cache.forEach(e,t)},e.prototype.get=function(e){var t=this._cache.get(e);if(void 0!==t)return this._queue.splice(this._queue.indexOf(e),1),this._queue.unshift(e),t},e.prototype.has=function(e){return this._cache.has(e)},e.prototype.set=function(e,t){var r=this.get(e);return void 0!==r?this._sizeOf-=this.sizeOfFunction(r):this._queue.unshift(e),this._sizeOf+=this.sizeOfFunction(t),this._cache.set(e,t),this._collect(),this},e.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var e=this._queue.pop(),t=this._cache.get(e);this._cache.delete(e)&&(this._sizeOf-=this.sizeOfFunction(t),this.disposeFunction&&this.disposeFunction(e,t))}},e}()}.apply(null,n))||(e.exports=i)},724:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(658),o=r(659),a=r(461),s=r(960),u=r(621);r(669),t.Map=a.default.Map,u.default("es6-map")||(t.Map=((n=function(){function e(e){if(this._keys=[],this._values=[],this[Symbol.toStringTag]="Map",e)if(o.isArrayLike(e))for(var t=0;t<e.length;t++){var r=e[t];this.set(r[0],r[1])}else try{for(var n=i.__values(e),a=n.next();!a.done;a=n.next()){r=a.value;this.set(r[0],r[1])}}catch(e){s={error:e}}finally{try{a&&!a.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}}var s,u}return e.prototype._indexOfKey=function(e,t){for(var r=0,n=e.length;r<n;r++)if(s.is(e[r],t))return r;return-1},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._keys.length=this._values.length=0},e.prototype.delete=function(e){var t=this._indexOfKey(this._keys,e);return!(t<0)&&(this._keys.splice(t,1),this._values.splice(t,1),!0)},e.prototype.entries=function(){var e=this,t=this._keys.map(function(t,r){return[t,e._values[r]]});return new o.ShimIterator(t)},e.prototype.forEach=function(e,t){for(var r=this._keys,n=this._values,i=0,o=r.length;i<o;i++)e.call(t,n[i],r[i],this)},e.prototype.get=function(e){var t=this._indexOfKey(this._keys,e);return t<0?void 0:this._values[t]},e.prototype.has=function(e){return this._indexOfKey(this._keys,e)>-1},e.prototype.keys=function(){return new o.ShimIterator(this._keys)},e.prototype.set=function(e,t){var r=this._indexOfKey(this._keys,e);return r=r<0?this._keys.length:r,this._keys[r]=e,this._values[r]=t,this},e.prototype.values=function(){return new o.ShimIterator(this._values)},e.prototype[Symbol.iterator]=function(){return this.entries()},e}())[Symbol.species]=n,n)),t.default=t.Map},725:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(t.TileStatus||(t.TileStatus={}))}.apply(null,n))||(e.exports=i)},726:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(340),r(360),r(1382),r(1278),r(344),r(1044),r(779),r(388),r(808),r(349)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,f){var h=function(){function e(){}return e.prototype.process=function(e){var t=[e.geometryBuffer];return r.resolve({result:this.transform(e,t),transferList:t})},e.prototype.transform=function(e,t){var r=n.fromJSON(e.indexSR),h=n.fromJSON(e.vertexSR),v=n.fromJSON(e.renderSR),y=!1,m=0,g=[],_=o.computeGlobalTransformation(e.mbs,e.elevationOffset,r,v),x=e.obb?null:u.create([0,0,0],[-1,-1,-1],[0,0,0,1]);a.vec3d.set(e.mbs,p),p[2]+=e.elevationOffset,a.vec3d.set(p,d);for(var b=0,w=e.geometryData;b<w.length;b++)for(var I=w[b],P=I.geometries,T=I.componentOffsets,C=0,M=P;C<M.length;C++){var S=M[C],E=e.layouts[m];++m;var A=[{name:f.VertexAttrConstants.COLOR,byteValue:255}],D=[f.VertexAttrConstants.NORMAL,f.VertexAttrConstants.NORMALCOMPRESSED,f.VertexAttrConstants.SYMBOLCOLOR,f.VertexAttrConstants.COMPONENTINDEX],N=i.interleaveGeometryBuffer(S,e.geometryBuffer,E,A,D),O=new c(new Float32Array(N),E,void 0,void 0,void 0,!0),F=O.getAttribute(f.VertexAttrConstants.POSITION);if(o.reprojectPoints(F,e.mbs,_,e.elevationOffset,r,h,v),x&&this._updateObb(x,F,_),e.needNormals){var B={normals:O.getAttribute(f.VertexAttrConstants.NORMALCOMPRESSED),positions:F,normalInd:O.getIndices(f.VertexAttrConstants.NORMALCOMPRESSED),positionInd:O.getIndices(f.VertexAttrConstants.POSITION)};i.processAndInterleaveNormals(e.normalReferenceFrame,S,e.geometryBuffer,_,B)}var j=O.getAttribute(f.VertexAttrConstants.COMPONENTINDEX);j&&this._createComponentNumbers(j,T);var R=O.getAttribute(f.VertexAttrConstants.COLOR);R&&!y&&(y=this._hasColors(R));var V={globalTrafo:_},L=E[0].stride,z=1-.8*L/(L+4),k=s.deduplicate(N,L/4,z);if(null!=k){var U=k.uniqueCount<65536?new Uint16Array(k.indices):k.indices,G=i.extractPositionData(k.buffer,E,U);g.push({layout:E,interleavedVertexData:k.buffer,indices:U,corMatrices:V,hasColors:y,positionData:G}),t&&(t.push(k.buffer),t.push(U.buffer),t.push(G.data.buffer),t.push(G.indices.buffer))}else{G=i.extractPositionData(N,E);g.push({layout:E,interleavedVertexData:N,corMatrices:V,hasColors:y,positionData:G}),t&&(t.push(N),t.push(G.data.buffer),t.push(G.indices.buffer))}}return x&&(a.mat4d.multiplyVec3(_,x.center,x.center),l.vectorToVector(x.center,v,x.center,r),x.center[2]-=e.elevationOffset),{geometryBuffer:e.geometryBuffer,transformedGeometries:g,obb:x}},e.prototype._hasColors=function(e){for(var t=e.data,r=e.size,n=e.offsetIdx,i=e.strideIdx,o=n;o<t.length;o+=i)for(var a=0;a<r;a++)if(255!==t[o+a])return!0;return!1},e.prototype._createComponentNumbers=function(e,t){for(var r=e.data,n=e.offsetIdx,i=e.strideIdx,o=r.length/i,a=0,s=n,u=0;u<o;u++)u>=t[a+1]&&a++,r[s]=a,s+=i},e.prototype._updateObb=function(e,t,r){if(e.halfSize[0]>0){a.vec3d.subtract(e.center,e.halfSize,p),a.vec3d.add(e.center,e.halfSize,d);for(var n=t.offsetIdx;n<t.data.length;n+=t.strideIdx)p[0]=Math.min(p[0],t.data[n]),p[1]=Math.min(p[1],t.data[n+1]),p[2]=Math.min(p[2],t.data[n+2]),d[0]=Math.max(d[0],t.data[n]),d[1]=Math.max(d[1],t.data[n+1]),d[2]=Math.max(d[2],t.data[n+2]);a.vec3d.subtract(d,p,e.halfSize),a.vec3d.scale(e.halfSize,.5),a.vec3d.add(p,d,e.center),a.vec3d.scale(e.center,.5)}else{u.compute(t,e);var i=2*Math.sqrt(1+r[0]+r[5]+r[10]);v[0]=(r[9]-r[6])/i,v[1]=(r[2]-r[8])/i,v[2]=(r[4]-r[1])/i,v[3]=.25*i,a.quat4.conjugate(v),a.quat4.multiply(v,e.quaternion,e.quaternion)}},e}(),p=a.vec3d.create(),d=a.vec3d.create(),v=a.quat4.create();return h}.apply(null,n))||(e.exports=i)},733:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(412)],void 0===(i=function(e,t,r){return function(){function e(e,t,r){this.row=e,this.colFrom=t,this.colTo=r}return e.pool=new r(e,!0),e}()}.apply(null,n))||(e.exports=i)},740:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(340),r(360),r(794),r(1012),r(1432),r(344),r(388)],void 0===(i=function(e,t,r,n,i,o,a,s,u){var l=function(){function e(){}return e.prototype.process=function(e){var t=this.transform(e);return r.resolve({result:t,transferList:[t.rgb]})},e.prototype.transform=function(e){var t=this.readGeometry(e.schema,e.geometryBuffer),r=a.evaluateRenderer(e.rendererInfo,e.primaryAttribute,e.modulationAttribute,t,t.length/3);this._applyElevationOffsetInPlace(t,e.elevationOffset);var i=this._transformCoordinates(t,e.obb,n.fromJSON(e.inSR),n.fromJSON(e.outSR));return{obb:e.obb,points:i,rgb:r.buffer}},e.prototype.readGeometry=function(e,t){if(null==e.encoding||""===e.encoding){for(var r=i.createGeometryDataIndex(t,e,!1),n=i.createTypedView(t,r.vertexAttributes.position),a=r.header.fields,s=[a.offsetX,a.offsetY,a.offsetZ],u=[a.scaleX,a.scaleY,a.scaleZ],l=n.length/3,c=new Float64Array(3*l),f=0;f<l;f++)c[3*f]=n[3*f]*u[0]+s[0],c[3*f+1]=n[3*f+1]*u[1]+s[1],c[3*f+2]=n[3*f+2]*u[2]+s[2];return c}if("lepcc-xyz"===e.encoding)return o.decodeXYZ(t).result},e.prototype._transformCoordinates=function(e,t,r,n){var i=e.length/3;if(!u.bufferToBuffer(e,r,0,e,n,0,i))throw Error("Can't reproject");var o=s.vec3.createFrom(t.center[0],t.center[1],t.center[2]),a=s.vec3.create(),l=s.vec3.create();s.quat4.conjugate(t.quaternion,c);for(var f=new Float32Array(3*i),h=0;h<i;h++)a[0]=e[3*h]-o[0],a[1]=e[3*h+1]-o[1],a[2]=e[3*h+2]-o[2],s.quat4.multiplyVec3(c,a,l),t.halfSize[0]=Math.max(t.halfSize[0],Math.abs(l[0])),t.halfSize[1]=Math.max(t.halfSize[1],Math.abs(l[1])),t.halfSize[2]=Math.max(t.halfSize[2],Math.abs(l[2])),f[3*h]=a[0],f[3*h+1]=a[1],f[3*h+2]=a[2];return f},e.prototype._applyElevationOffsetInPlace=function(e,t){var r=e.length/3;if(0!==t)for(var n=0;n<r;n++)e[3*n+2]+=t},e}(),c=s.quat4.create();return l}.apply(null,n))||(e.exports=i)},756:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(380),r(351),r(340),r(725),r(2331),r(953)],void 0===(i=function(e,t,r,n,i,o,a,s){return function(){function e(){this._tiles=new Map,this._spriteInfo={},this._glyphInfo={}}return e.prototype.reset=function(){var e=new r;this._spriteInfo={},this._glyphInfo={};var t=this._tiles;return t.forEach(function(e){return e.setObsolete()}),t.clear(),e.resolve(),e.promise},e.prototype.getLayers=function(){return this._layers},e.prototype.setLayers=function(e){var t=new s(e);return this._layers=t.layers,i.resolve({data:""})},e.prototype.getTile=function(e,t){var r=this,s=e.key,u=a.pool.acquire();u.initialize(e.key,e.refKey,this,e.rotation);var l=e.cacheTile;return n(e.url,{responseType:"array-buffer"}).then(function(e){return u.setDataAndParse(e.data,t).then(function(e){return l&&u.status!==o.TileStatus.INVALID&&r._tiles.set(s,u),e}).catch(function(e){return u.setObsolete(),a.pool.release(u),r._tiles.delete(u.tileKey),i.reject(e)})}).catch(function(e){return u.setObsolete(),r._tiles.has(u.tileKey)&&r._tiles.delete(u.tileKey),i.reject(e)}).always(function(e){return l||a.pool.release(u),e})},e.prototype.update=function(e){var t=this._tiles.get(e.key);return t?t.updateSymbols(e.rotation):i.reject()},e.prototype.destructTileData=function(e){return this._tiles.has(e)&&(a.pool.release(this._tiles.get(e)),this._tiles.delete(e)),i.resolve()},e.prototype.fetchSprites=function(e,t){var r=[],n=this._spriteInfo;return e.forEach(function(e){void 0===n[e]&&r.push(e)}),0===r.length?i.resolve():t.invoke("getSprites",r).then(function(e){for(var t in e){var r=e[t];n[t]=r}})},e.prototype.getSpriteItems=function(){return this._spriteInfo},e.prototype.fetchGlyphs=function(e,t,r,n){var o=[],a=this._glyphInfo[t];return a?r.forEach(function(e){a[e]||o.push(e)}):(a=this._glyphInfo[t]=[],r.forEach(function(e){return o.push(e)})),0===o.length?i.resolve():n.invoke("getGlyphs",{tileID:e,font:t,codePoints:o}).then(function(e){for(var t in e)a[t]=e[t]})},e.prototype.getGlyphItems=function(e){return this._glyphInfo[e]},e}()}.apply(null,n))||(e.exports=i)},757:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(346),r(340),r(337),r(450),r(980),r(1428),r(2338),r(2339)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,f){Object.defineProperty(t,"__esModule",{value:!0});var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.processor=null,t.remoteClient=null,t.serviceAndViewInfo=null,t.tileStore=null,t.viewState=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.watch("updating",function(t){e.remoteClient.invoke("setUpdating",t)})},t.prototype.destroy=function(){this.controller&&this.controller.destroy(),this.processor&&this.processor.destroy()},Object.defineProperty(t.prototype,"updating",{get:function(){var e=this.controller,t=this.processor;return!e||!t||e.updating||t.updating||!1},enumerable:!0,configurable:!0}),t.prototype.startup=function(e){var t=s.fromJSON(e.tileInfo);this.serviceAndViewInfo=e,this.tileStore=new f.default(t)},t.prototype.configure=function(e){var t=this,r=this.controller,n=this.processor,i=e.controller,a=e.processor,s=[null,null];return i&&(s[0]=l.createController(i.type,{remoteClient:this.remoteClient,tileStore:this.tileStore,serviceAndViewInfo:this.serviceAndViewInfo})),a&&(s[1]=c.createProcessor(a.type,{remoteClient:this.remoteClient,tileStore:this.tileStore,serviceAndViewInfo:this.serviceAndViewInfo})),o.all(s).then(function(e){var o=e[0],s=e[1];o&&(r&&r===t.controller&&r.destroy(),t.controller=o,o.configuration=i,o.setViewState(t.viewState),s||(o.processor=t.processor)),s&&(n&&n===t.processor&&n.destroy(),t.processor=s,s.configuration=a,r.processor=s)})},t.prototype.setViewState=function(e){var t=u.fromJSON(e);this._set("viewState",t),this.tileStore.setViewState(t),this.controller&&this.controller.setViewState(t)},n([a.property()],t.prototype,"controller",void 0),n([a.property()],t.prototype,"processor",void 0),n([a.property({dependsOn:["controller.updating","processor.updating"]})],t.prototype,"updating",null),n([a.property()],t.prototype,"viewState",void 0),n([a.subclass()],t)}(a.declared(i));t.default=h}.apply(null,n))||(e.exports=i)},758:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(398),r(592),r(687),r(2340),r(365),r(351),r(342),r(354),r(339),r(340),r(350),r(1291),r(410),r(383),r(607),r(597),r(1383),r(1433),r(418)],void 0===(i=function(e,t,r,n,i,o,a,s,u,l,c,f,h,p,d,v,y,m,g,_,x){Object.defineProperty(t,"__esModule",{value:!0});var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"];t.csvLatitudeFieldNames=["lat","latitude","y","ycenter","latitude83","latdecdeg","point-y"],t.csvLongitudeFieldNames=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","point-x"],t.csvDetectedDelimiters=[","," ",";","|","\t"];var w=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,I=[0,0],P=function(){return function(e,t){this.x=e,this.y=t}}(),T=function(){var e=i._parseInfo(),t=new RegExp("^"+e.regexp+"$"),r=new RegExp("["+e.group+"\\s\\xa0]","g"),n=e.factor;return function(i){var o=t.exec(i);if(e.factor=n,!o)return NaN;var a=o[1];if(!o[1]){if(!o[2])return NaN;a=o[2],e.factor*=-1}return+(a=a.replace(r,"").replace(e.decimal,"."))*e.factor}}(),C=function(){function e(){this._queryEngine=null}return e.prototype.load=function(e){var t=this;return f.all([this._fetch(e.url),this._checkProjection(e)]).then(function(r){var n=r[0],i=t._parse(n,e.parsing);return t._queryEngine=t._createQueryEngine(n,i),i.layerDefinition.extent=t._queryEngine.fullExtent,i})},e.prototype.applyEdits=function(e){return f.reject(new u("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer"))},e.prototype.queryFeatures=function(e){return void 0===e&&(e={}),this._queryEngine.executeQuery(x.fromJSON(e))},e.prototype.queryFeatureCount=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForCount(x.fromJSON(e))},e.prototype.queryObjectIds=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForIds(x.fromJSON(e))},e.prototype.queryExtent=function(e){return void 0===e&&(e={}),this._queryEngine.executeQueryForExtent(x.fromJSON(e))},e.prototype._fetch=function(e){if(!e)return f.reject(new u("csv-source:invalid-source","url not defined"));var t=h.urlToObject(e);return s(t.path,{query:t.query,responseType:"text"}).then(function(e){return e.data})},e.prototype._parse=function(e,t){void 0===t&&(t={});for(var r={columnDelimiter:t.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:t.latitudeField,longitudeFieldName:t.longitudeField}};e&&"\n"===e[0];)e=e.slice(1);"\n"!==e[e.length-1]&&(e+="\n");var n=this._readFirstLine(e);if(!n)throw new u("csv","CSV is empty",{csv:e});if(!t.columnDelimiter){var i=this._inferDelimiter(n);if(!i)throw new u("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");r.columnDelimiter=i}var o=n.split(r.columnDelimiter),a=r.layerDefinition={name:"csv",geometryType:"esriGeometryPoint",objectIdField:null,fields:[],extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:t.spatialReference||{wkid:102100}}};if(!t.latitudeField||!t.longitudeField){var s=this._inferLocationInfo(o);if(!t.longitudeField&&!s.longitudeFieldName||!t.latitudeField&&!s.latitudeFieldName)throw new u("csv","Unable to identify latitudeField and/or longitudeField from CSV");r.locationInfo={longitudeFieldName:t.longitudeField||s.longitudeFieldName,latitudeFieldName:t.latitudeField||s.latitudeFieldName}}var l=this._inferFields(e,r.columnDelimiter,o,r.locationInfo);if(t.fields&&t.fields.length){for(var f=new Map,h=0,p=t.fields;h<p.length;h++){var d=p[h];f.set(d.name.toLowerCase(),d)}for(var v=0,y=l;v<y.length;v++){d=y[v];var m=f.get(d.name.toLowerCase());if(m){var g=d.name;c.mixin(d,m),d.name=g}}}return a.fields=l,a.fields.some(function(e){return"esriFieldTypeOID"===e.type&&(a.objectIdField=e.name,!0)})||(a.objectIdField="__OBJECTID",a.fields.unshift({name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1})),r},e.prototype._inferLocationInfo=function(e){var r=null,n=null;return e.forEach(function(e){var i=e.toLowerCase();-1===t.csvLatitudeFieldNames.indexOf(i)||n||(n=e),-1===t.csvLongitudeFieldNames.indexOf(i)||r||(r=e)}),{longitudeFieldName:r,latitudeFieldName:n}},e.prototype._inferFields=function(e,t,r,n){for(var i=[],o=this._sampleLines(e).map(function(e){return e.split(t).map(function(e){return e.trim()})}),a=this,s=0;s<r.length;s++)!function(e){var t=r[e];if(t===n.longitudeFieldName||t===n.latitudeFieldName)i.push({name:t,type:"esriFieldTypeDouble",alias:t});else{var s=o.map(function(t){return t[e]}),u=a._inferFieldType(s),l={name:t.replace(/[\s\'’‘\.\-\/\(\)]+/g,"_"),type:null,alias:t};switch(u){case"integer":l.type="esriFieldTypeInteger";break;case"double":l.type="esriFieldTypeDouble";break;case"date":l.type="esriFieldTypeDate",l.length=36;break;default:l.type="esriFieldTypeString",l.length=255}i.push(l)}}(s);return i},e.prototype._inferFieldType=function(e){var t=this;if(!e.length)return"string";var r=/[^+-.,0-9]/;return e.map(function(e){var n=!1;if(""===e||r.test(e))n=!0;else{var i=T(e);if(!isNaN(i))return/[.,]/.test(e)?"double":i>214783647||i<-214783648?"double":"integer";if(-1===e.indexOf("E"))n=!0;else{if(i=Number(e),!isNaN(i))return"double";if(-1===e.indexOf(","))n=!0;else{if(e=e.replace(",","."),i=Number(e),!isNaN(i))return"double";n=!0}}}if(n){if(/^[-]?\d*[.,]?\d*$/.test(e))return"string";var o=new Date(e);return t._isValidDate(o,e)?"date":"string"}return"string"}).reduce(function(e,t){return e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0})},e.prototype._isValidDate=function(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;var r=!0;if(l("chrome")&&/\d+\W*$/.test(t)){var n=t.match(/[a-zA-Z]{2,}/);if(n){for(var i=!1,o=0;!i&&o<=n.length;)i=!w.test(n[o]),o++;r=!i}}return r},e.prototype._readFirstLine=function(e){return e.substring(0,e.indexOf("\n")).trim()},e.prototype._sampleLines=function(e,t){void 0===t&&(t=10);for(var r=!1,n=[],i=e.indexOf("\n")+1;!r&&n.length<t;){var o=e.indexOf("\n",i);if(-1!==o){var a;(a=-1===o&&i<e.length-1?e.substring(i).trim():e.substring(i,o).trim())&&n.push(a),i=o+1}else r=!0}return n},e.prototype._inferDelimiter=function(e){var r=0,n="";return t.csvDetectedDelimiters.forEach(function(t){var i=e.split(t).length;i>r&&(r=i,n=t)}),""===n?null:n},e.prototype._createQueryEngine=function(e,t){for(var r,i=t.locationInfo,s=i.latitudeFieldName,u=i.longitudeFieldName,l=t.layerDefinition,c=l.objectIdField,f=l.fields,h=l.extent,x=[],w=[],C=new n.Set,M=new n.Set,S=[],E=0,A=f;E<A.length;E++){var D=A[E],N=D.name,O=D.type;"esriFieldTypeDate"===O?C.add(N):b.indexOf(O)>-1&&M.add(N),N!==c&&S.push(N)}var F=new o;F.delimiter=t.columnDelimiter,F.fieldNames=S,F.newline="\n";var B=F.parse(e),j=0;B.shift();for(var R=0,V=B;R<V.length;R++){var L=V[R],z=this._parseCoordinateValue(L[s]),k=this._parseCoordinateValue(L[u]);if(null!=k&&null!=z&&!isNaN(z)&&!isNaN(k)){for(var U in L[s]=z,L[u]=k,L)if(U!==s&&U!==u)if(C.has(U)){var G=new Date(L[U]);L[U]=this._isValidDate(G,L[U])?G.getTime():null}else if(M.has(U)){var Y=T(L[U]);isNaN(Y)?L[U]=null:L[U]=Y}L[c]=j,j++,x.push(new P(k,z)),w.push(L)}}if(!d.equals({wkid:4326},h.spatialReference))if(d.isWebMercator(h.spatialReference))for(var q=0,X=x;q<X.length;q++){var Z=X[q];r=v.lngLatToXY(Z.x,Z.y,I),Z.x=r[0],Z.y=r[1]}else x=p.projectMany(x,a.SpatialReference.WGS84,h.spatialReference,null,!0);for(var Q=new g.default({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1}),W=new _.default({fields:t.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,objectIdField:c,spatialReference:h.spatialReference||{wkid:4326},cacheSpatialQueries:!0,spatialIndex:Q}),J=[],H=0;H<x.length;H++){var K=x[H],$=K.x,ee=K.y,te=w[H];te[c]=H+1,J.push(new y.default(new m.default([],[$,ee]),te,null,te[c]))}return Q.addMany(J),W},e.prototype._parseCoordinateValue=function(e){if(null==e||""===e)return null;var t=T(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t},e.prototype._checkProjection=function(e){if(!e||!e.parsing||!e.parsing.spatialReference)return f.resolve();var t=e.parsing&&e.parsing.spatialReference;return!t||v.canProject(a.SpatialReference.WGS84,t)?f.resolve():p.isSupported()?p.load():f.reject(new u("csv-layer","Projection not supported"))},e}();t.default=C}.apply(null,n))||(e.exports=i)},766:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(410),r(834),r(835),r(456),r(733)],void 0===(i=function(e,t,r,n,i,o,a){var s=new o("0/0/0/0"),u=function(){function e(e,t,r,n,i,o,a,s){this.x=e,this.ymin=t,this.ymax=r,this.invM=n,this.leftAdjust=i,this.rightAdjust=o,this.leftBound=a,this.rightBound=s}return e.create=function(t,r){var n;t[1]>r[1]&&(t=(n=[r,t])[0],r=n[1]);var i=t[0],o=t[1],a=r[0],s=r[1],u=a-i,l=s-o,c=0!==l?u/l:0,f=(Math.ceil(o)-o)*c,h=(Math.floor(o)-o)*c;return new e(i,Math.floor(o),Math.ceil(s),c,u<0?f:h,u<0?h:f,u<0?a:i,u<0?i:a)},e.prototype.incrRow=function(){this.x+=this.invM},e.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)},e.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)},e}(),l=[[0,0],[0,0],[0,0],[0,0]];return function(){function e(e,t){var r=this;this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};var i=e.lods.slice();i.sort(function(e,t){return t.scale-e.scale});var o=this._lodInfos=i.map(function(r){return n.create(e,r,t)});i.forEach(function(e,t){r._infoByLevel[e.level]=o[t],r._infoByScale[e.scale]=o[t],r.scales[t]=e.scale},this),this._wrap=e.isWrappable}return e.prototype.getLODInfoAt=function(e){return this._infoByLevel[e.level]},e.prototype.getTileBounds=function(e,t,r){void 0===r&&(r=!1),s.set(t);var n=this._infoByLevel[s.level];return n?n.getTileBounds(e,s,r):e},e.prototype.getTileCoords=function(e,t,r){void 0===r&&(r=!1),s.set(t);var n=this._infoByLevel[s.level];return n?n.getTileCoords(e,s,r):e},e.prototype.getTileCoverage=function(e,t){void 0===t&&(t=192);var r,n,o,s=this.getClosestInfoForScale(e.scale),c=i.pool.acquire(s),f=this._wrap,h=1/0,p=-1/0,d=c.spans;l[0][0]=l[0][1]=l[1][1]=l[3][0]=-t,l[1][0]=l[2][0]=e.size[0]+t,l[2][1]=l[3][1]=e.size[1]+t;for(var v=0,y=l;v<y.length;v++){var m=y[v];e.toMap(m,m),m[0]=s.getColumnForX(m[0]),m[1]=s.getRowForY(m[1])}for(var g=[],_=3,x=0;x<4;x++)if(l[x][1]!==l[_][1]){var b=u.create(l[x],l[_]);h=Math.min(b.ymin,h),p=Math.max(b.ymax,p),void 0===g[b.ymin]&&(g[b.ymin]=[]),g[b.ymin].push(b),_=x}else _=x;if(null==h||null==p||p-h>100)return null;var w=[];for(r=h;r<p;){null!=g[r]&&(w=w.concat(g[r])),n=1/0,o=-1/0;for(x=w.length-1;x>=0;x--){b=w[x];n=Math.min(n,b.getLeftCol()),o=Math.max(o,b.getRightCol())}if(n=Math.floor(n),o=Math.floor(o),r>=s.first[1]&&r<=s.last[1])if(f)if(s.size[0]<s.worldSize[0]){var I=Math.floor(o/s.worldSize[0]);for(x=Math.floor(n/s.worldSize[0]);x<=I;x++)d.push(new a(r,Math.max(s.getFirstColumnForWorld(x),n),Math.min(s.getLastColumnForWorld(x),o)))}else d.push(new a(r,n,o));else n>s.last[0]||o<s.first[0]||(n=Math.max(n,s.first[0]),o=Math.min(o,s.last[0]),d.push(new a(r,n,o)));r+=1;for(x=w.length-1;x>=0;x--){(b=w[x]).ymax>=r?b.incrRow():w.splice(x,1)}}return c},e.prototype.getTileIdAtParent=function(e,t){var r=o.pool.acquire(t),n=this._infoByLevel[r.level];if(e.resolution<n.resolution)throw new Error("Cannot calculate parent tile. destination LOD's resolution "+e.resolution+" is not a parent resolution of "+n.resolution);if(e.resolution===n.resolution)return r.id;var i=Math.floor(r.col*n.resolution/e.resolution+.01),a=Math.floor(r.row*n.resolution/e.resolution+.01);return o.getId(e.level,a,i,r.world)},e.prototype.getTileParentId=function(e){var t=o.pool.acquire(e),r=this._infoByLevel[t.level],n=this._lodInfos.indexOf(r)-1;if(n<0)return o.pool.release(t),null;var i=this._lodInfos[n],a=this.getTileIdAtParent(i,t);return o.pool.release(t),a},e.prototype.getTileResolution=function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1},e.prototype.getTileScale=function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1},e.prototype.intersects=function(e,t){var r=o.pool.acquire(t),n=this._infoByLevel[r.level],i=e.lodInfo;if(i.resolution>n.resolution){var a=o.pool.acquire(this.getTileIdAtParent(i,r)),s=i.denormalizeCol(a.col,a.world),u=e.spans.some(function(e){return e.row===a.row&&e.colFrom<=s&&e.colTo>=s});return o.pool.release(r),o.pool.release(a),u}if(i.resolution<n.resolution){var l=e.spans.reduce(function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e},[1/0,-1/0,1/0,-1/0]),c=l[0],f=l[1],h=l[2],p=l[3],d=n.denormalizeCol(r.col,r.world),v=i.getColumnForX(n.getXForColumn(d)),y=i.getRowForY(n.getYForRow(r.row)),m=i.getColumnForX(n.getXForColumn(d+1))-1,g=i.getRowForY(n.getYForRow(r.row+1))-1;return o.pool.release(r),!(v>p||m<h||y>f||g<c)}var _=i.denormalizeCol(r.col,r.world),x=e.spans.some(function(e){return e.row===r.row&&e.colFrom<=_&&e.colTo>=_});return o.pool.release(r),x},e.prototype.normalizeBounds=function(e,t,n){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var i=r.getInfo(this.tileInfo.spatialReference),o=-n*(i.valid[1]-i.valid[0]);e[0]+=o,e[2]+=o}return e},e.prototype.getClosestInfoForScale=function(e){var t=this.scales;return this._infoByScale[e]?this._infoByScale[e]:(e=t.reduce(function(t,r,n,i){return Math.abs(r-e)<Math.abs(t-e)?r:t},t[0]),this._infoByScale[e])},e.prototype.scaleToLevel=function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var r=t.length-1;r>=0;r--)if(e<t[r]){return r===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[r]].level+(t[r]-e)/(t[r]-t[r+1])}return this._infoByScale[t[0]].level},e}()}.apply(null,n))||(e.exports=i)},774:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EXTRUDE_SCALE=64,t.PICTURE_FILL_COLOR=4294967295,t.TILE_SIZE=512,t.ANGLE_FACTOR_256=256/360,t.COLLISION_BUCKET_SIZE=128,t.COLLISION_MAX_ZOOM_DELTA=4,t.COLLISION_EARLY_REJECT_BUCKET_SIZE=32}.apply(null,n))||(e.exports=i)},779:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(389),r(344),r(1053),r(622)],void 0===(i=function(e,t,r,n,i,o){function a(e,t,r){return{center:n.vec3d.createFrom(e[0],e[1],e[2]),halfSize:n.vec3.createFrom(t[0],t[1],t[2]),quaternion:n.quat4.createFrom(r[0],r[1],r[2],r[3])}}function s(e,t){var r=o.plane.distance(t,e.center),n=u(e,t);return r>n?1:r<-n?-1:0}function u(e,t){n.quat4.conjugate(e.quaternion,l),n.quat4d.multiplyVec3(l,t,c);var r=e.halfSize;return Math.abs(c[0]*r[0])+Math.abs(c[1]*r[1])+Math.abs(c[2]*r[2])}Object.defineProperty(t,"__esModule",{value:!0});var l=n.quat4.create(),c=n.vec3.create(),f=n.vec3.create(),h=n.mat3.create(),p=function(){return function(e){var t=56*e;this.buffer=new ArrayBuffer(t),this.obbs=new Array(e);for(var r=0;r<e;r++)this.obbs[r]={center:new Float64Array(this.buffer,56*r+0,3),halfSize:new Float32Array(this.buffer,56*r+24,3),quaternion:new Float32Array(this.buffer,56*r+36,4)}}}();t.ObbArray=p,t.create=a,t.clone=function(e){return a(e.center,e.halfSize,e.quaternion)},t.set=function(e,t){n.vec3d.set(e.center,t.center),n.vec3.set(e.halfSize,t.halfSize),n.quat4.set(e.quaternion,t.quaternion)},t.compute=function(e,t){return t||(t=a([0,0,0],[-1,-1,-1],[0,0,0,1])),i.computeOBB(e,t),t},t.intersectPlane=s,t.toAaBoundingBox=function(e,t){t||(t=r.create());var i=n.quat4.toMat3(e.quaternion,h),o=e.halfSize[0]*Math.abs(i[0])+e.halfSize[1]*Math.abs(i[3])+e.halfSize[2]*Math.abs(i[6]),a=e.halfSize[0]*Math.abs(i[1])+e.halfSize[1]*Math.abs(i[4])+e.halfSize[2]*Math.abs(i[7]),s=e.halfSize[0]*Math.abs(i[2])+e.halfSize[1]*Math.abs(i[5])+e.halfSize[2]*Math.abs(i[8]);return t[0]=e.center[0]-o,t[1]=e.center[1]-a,t[2]=e.center[2]-s,t[3]=e.center[0]+o,t[4]=e.center[1]+a,t[5]=e.center[2]+s,t},t.minimumDistancePlane=function(e,t){return o.plane.distance(t,e.center)-u(e,t)},t.maximumDistancePlane=function(e,t){return o.plane.distance(t,e.center)+u(e,t)},t.isVisible=function(e,t){return s(e,t[0])<=0&&s(e,t[1])<=0&&s(e,t[2])<=0&&s(e,t[3])<=0&&s(e,t[4])<=0&&s(e,t[5])<=0},t.intersectLine=function(e,t,r,i){void 0===i&&(i=0),n.quat4.conjugate(e.quaternion,l),n.vec3d.subtract(t,e.center,c);for(var o=n.quat4d.multiplyVec3(l,c,c),a=n.quat4d.multiplyVec3(l,r,f),s=-1/0,u=1/0,h=0;h<3;h++)if(Math.abs(a[h])>1e-6){var p=(i+e.halfSize[h]-o[h])/a[h],d=(-i-e.halfSize[h]-o[h])/a[h];s=Math.max(s,Math.min(p,d)),u=Math.min(u,Math.max(p,d))}else if(o[h]>e.halfSize[h]+i||o[h]<-e.halfSize[h]-i)return!1;return s<=u}}.apply(null,n))||(e.exports=i)},794:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(342),r(339),r(343),r(1012)],void 0===(i=function(e,t,r,n,i,o){function a(e,t,n){for(var i="",o=0;o<n;){var a=e[t+o];if(a<128)i+=String.fromCharCode(a),o++;else if(a>=192&&a<224){if(o+1>=n)throw new r("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var s=(31&a)<<6|63&e[t+o+1];i+=String.fromCharCode(s),o+=2}else if(a>=224&&a<240){if(o+2>=n)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");s=(15&a)<<12|(63&e[t+o+1])<<6|63&e[t+o+2];i+=String.fromCharCode(s),o+=3}else{if(!(a>=240&&a<248))throw new r("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");if(o+3>=n)throw new r("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");if((s=(7&a)<<18|(63&e[t+o+1])<<12|(63&e[t+o+2])<<6|63&e[t+o+3])>=65536){var u=55296+(s-65536>>10),l=56320+(1023&s);i+=String.fromCharCode(u,l)}else i+=String.fromCharCode(s);o+=4}}return i}function s(e,r){for(var n={byteOffset:0,byteCount:0,fields:Object.create(null)},i=0,o=0;o<r.length;o++){var a=r[o],s=a.valueType||a.type,u=t.valueType2ArrayBufferReader[s];n.fields[a.property]=u(e,i),i+=t.valueType2TypedArrayClassMap[s].BYTES_PER_ELEMENT}return n.byteCount=i,n}function u(e,t,n){var i,o,s=[],u=0;for(o=0;o<e;o+=1){if((i=t[o])>0){if(s.push(a(n,u,i-1)),0!==n[u+i-1])throw new r("string-array-error","Invalid string array: missing null termination.")}else s.push(null);u+=i}return s}function l(e,r){return new(0,t.valueType2TypedArrayClassMap[r.valueType])(e,r.byteOffset,r.count*r.valuesPerElement)}function c(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}function f(e,t,i){for(var o=null!=t.header?s(e,t.header):{byteOffset:0,byteCount:0,fields:{count:i}},a={header:o,byteOffset:o.byteCount,byteCount:0,entries:Object.create(null)},u=o.byteCount,l=0;l<t.ordering.length;l++){var c=t.ordering[l],f=n.clone(t[c]);if(f.count=o.fields.count,"String"===f.valueType){if(f.byteOffset=u,f.byteCount=o.fields[c+"ByteCount"],"UTF-8"!==f.encoding)throw new r("unsupported-encoding","Unsupported String encoding.",{encoding:f.encoding})}else{if(!p(f.valueType))throw new r("unsupported-value-type","Unsupported binary valueType",{valueType:f.valueType});var h=d(f.valueType);u+=u%h!=0?h-u%h:0,f.byteOffset=u,f.byteCount=h*f.valuesPerElement*f.count}u+=f.byteCount,a.entries[c]=f}return a.byteCount=u-a.byteOffset,a}function h(e,t,n){if(t!==e&&v.error("Invalid "+n+" buffer size\n expected: "+e+", actual: "+t+")"),t<e)throw new r("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function p(e){return t.valueType2TypedArrayClassMap.hasOwnProperty(e)}function d(e){return p(e)&&t.valueType2TypedArrayClassMap[e].BYTES_PER_ELEMENT}Object.defineProperty(t,"__esModule",{value:!0});var v=i.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");t.readHeader=s,t.readStringArray=u,t.createTypedView=l,t.createRawView=c,t.createAttributeDataIndex=f,t.createGeometryDataIndex=function(e,t,r){var i=s(e,t&&t.header),o=i.byteCount,a={header:i,byteOffset:i.byteCount,byteCount:0,vertexAttributes:n.clone(t.vertexAttributes)},u=a.vertexAttributes;r||null==u.region||delete u.region;for(var l=i.fields,c=null!=l.vertexCount?l.vertexCount:l.count,f=0;f<t.ordering.length;f++){var p=t.ordering[f];null!=u[p]&&(u[p].byteOffset=o,u[p].count=c,o+=d(u[p].valueType)*u[p].valuesPerElement*c)}var v=l.faceCount;if(t.faces&&v){a.faces=n.clone(t.faces);var y=a.faces;for(f=0;f<t.ordering.length;f++){var m=t.ordering[f];null!=y[m]&&(y[m].byteOffset=o,y[m].count=v,o+=d(y[m].valueType)*y[m].valuesPerElement*v)}}var g=l.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&g){a.featureAttributes=n.clone(t.featureAttributes);var _=a.featureAttributes;for(f=0;f<t.featureAttributeOrder.length;f++){var x=t.featureAttributeOrder[f];_[x].byteOffset=o,_[x].count=g;var b=d(_[x].valueType);"UInt64"===_[x].valueType&&(b=8),o+=b*_[x].valuesPerElement*g}}return h(o,e.byteLength,"geometry"),a.byteCount=o-a.byteOffset,a},t.readBinaryAttribute=function(e,t,n){if("lepcc-rgb"===e.encoding)return o.decodeRGB(t);if("lepcc-intensity"===e.encoding)return o.decodeIntensity(t);if(null!=e.encoding&&""!==e.encoding)throw new r("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(v.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(v.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");var i=f(t,e,n);h(i.byteOffset+i.byteCount,t.byteLength,"attribute");var a=i.entries.attributeValues||i.entries.objectIds;if(a){if("String"===a.valueType){var s=i.entries.attributeByteCounts,p=l(t,s),d=c(t,a);return u(s.count,p,d)}return l(t,a)}throw new r("bad-attribute-storage-info","Bad attributeStorageInfo specification.")},t.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},t.valueType2ArrayBufferReader={Float32:function(e,t){return new DataView(e,0).getFloat32(t,!0)},Float64:function(e,t){return new DataView(e,0).getFloat64(t,!0)},UInt8:function(e,t){return new DataView(e,0).getUint8(t)},Int8:function(e,t){return new DataView(e,0).getInt8(t)},UInt16:function(e,t){return new DataView(e,0).getUint16(t,!0)},Int16:function(e,t){return new DataView(e,0).getInt16(t,!0)},UInt32:function(e,t){return new DataView(e,0).getUint32(t,!0)},Int32:function(e,t){return new DataView(e,0).getInt32(t,!0)}},t.isValueType=p,t.getBytesPerValue=d}.apply(null,n))||(e.exports=i)},814:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(658),i=r(461),o=r(659),a=r(962),s=r(621),u=r(1037);if(s.default("es6-array")&&s.default("es6-array-fill"))t.from=i.default.Array.from,t.of=i.default.Array.of,t.copyWithin=u.wrapNative(i.default.Array.prototype.copyWithin),t.fill=u.wrapNative(i.default.Array.prototype.fill),t.find=u.wrapNative(i.default.Array.prototype.find),t.findIndex=u.wrapNative(i.default.Array.prototype.findIndex);else{var l=function(e){return isNaN(e)?0:(e=Number(e),isFinite(e)&&(e=Math.floor(e)),Math.min(Math.max(e,0),a.MAX_SAFE_INTEGER))},c=function(e){return e=Number(e),isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},f=function(e,t){return e<0?Math.max(t+e,0):Math.min(e,t)};t.from=function(e,t,r){if(null==e)throw new TypeError("from: requires an array-like object");t&&r&&(t=t.bind(r));var i,a,s=l(e.length),u="function"==typeof this?Object(new this(s)):new Array(s);if(!o.isArrayLike(e)&&!o.isIterable(e))return u;if(o.isArrayLike(e)){if(0===s)return[];for(var c=0;c<e.length;c++)u[c]=t?t(e[c],c):e[c]}else{c=0;try{for(var f=n.__values(e),h=f.next();!h.done;h=f.next()){var p=h.value;u[c]=t?t(p,c):p,c++}}catch(e){i={error:e}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}}return void 0!==e.length&&(u.length=s),u},t.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.slice.call(e)},t.copyWithin=function(e,t,r,n){if(null==e)throw new TypeError("copyWithin: target must be an array-like object");var i=l(e.length);t=f(c(t),i),r=f(c(r),i),n=f(void 0===n?i:c(n),i);var o=Math.min(n-r,i-t),a=1;for(t>r&&t<r+o&&(a=-1,r+=o-1,t+=o-1);o>0;)r in e?e[t]=e[r]:delete e[t],t+=a,r+=a,o--;return e},t.fill=function(e,t,r,n){var i=l(e.length),o=f(c(r),i);for(n=f(void 0===n?i:c(n),i);o<n;)e[o++]=t;return e},t.find=function(e,r,n){var i=t.findIndex(e,r,n);return-1!==i?e[i]:void 0},t.findIndex=function(e,t,r){var n=l(e.length);if(!t)throw new TypeError("find: second argument must be a function");r&&(t=t.bind(r));for(var i=0;i<n;i++)if(t(e[i],i,e))return i;return-1}}if(s.default("es7-array"))t.includes=u.wrapNative(i.default.Array.prototype.includes);else{t.includes=function(e,t,r){void 0===r&&(r=0);for(var n,i=(n=e.length,n=Number(n),isNaN(n)?0:(isFinite(n)&&(n=Math.floor(n)),Math.min(Math.max(n,0),a.MAX_SAFE_INTEGER))),o=r;o<i;++o){var s=e[o];if(t===s||t!=t&&s!=s)return!0}return!1}}},815:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(380),r(839),r(460)],void 0===(i=function(e,t,r,n,i){return function(){function e(e){this._apiPromises=new Map,this._processingItems=new Map,this._isPaused=!1,this._scheduledNextHandle=null,this.concurrency=1,this.ordered=!1,e.concurrency&&(this.concurrency=e.concurrency),this.ordered=!!e.ordered,this._queue=new n(e.peeker?{peeker:e.peeker}:void 0),this.process=e.process}return Object.defineProperty(e.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._queue.clear();var e=[];this._processingItems.forEach(function(t){return e.push(t.resultPromise)}),this._processingItems.clear(),e.forEach(function(e){return e.cancel()}),e.length=0,this._apiPromises.forEach(function(t){return e.push(t)}),this._apiPromises.clear(),e.forEach(function(e){return e.cancel()}),this._cancelNext()},e.prototype.find=function(e,t){var r=this,n=void 0;return this._apiPromises.forEach(function(i,o){e.call(t,o)&&(n=r._apiPromises.get(o).promise)}),n},e.prototype.get=function(e){var t=this._apiPromises.get(e);return t&&t.promise||void 0},e.prototype.isOngoing=function(e){return this._processingItems.has(e)},e.prototype.has=function(e){return this._apiPromises.has(e)},e.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())},e.prototype.push=function(e){var t=this;if(this._apiPromises.has(e))return this._apiPromises.get(e).promise;var n=new r(function(r){var n=t._processingItems.get(e);n?n.resultPromise.cancel(r):(t._remove(e),t._scheduleNext())});return this._add(e,n),this._scheduleNext(),n.promise},e.prototype.reset=function(){var e=[];this._processingItems.forEach(function(t){return e.push(t)}),this._processingItems.clear();for(var t=0,r=e;t<r.length;t++){var n=r[t];n.resultPromise.isFulfilled()?this._processReset(n):(n.isReset=!0,n.resultPromise.cancel())}},e.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())},e.prototype._scheduleNext=function(){var e=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=i.schedule(function(){e._scheduledNextHandle=null,e._next()}))},e.prototype._next=function(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())},e.prototype._processResult=function(e,t){this._remove(e.item),this._scheduleNext(),e.dfd.resolve(t)},e.prototype._processError=function(e,t){e.isReset?this._processReset(e):(this._remove(e.item),this._scheduleNext(),e.dfd.reject(t))},e.prototype._processReset=function(e){this._remove(e.item),this._add(e.item,e.dfd),this._scheduleNext()},e.prototype._processOrdered=function(e,t){var r=this,n=!1;if(e.isReset)this._processReset(e);else{e.result=t,this._itemsToProcess||(this._itemsToProcess=[]),this._processingItems.forEach(function(e){n||(e.result?r._itemsToProcess.push(e):n=!0)});for(var i=0,o=this._itemsToProcess;i<o.length;i++){var a=o[i];!1===a.result.ok?this._processError(a,a.result.error):this._processResult(a,a.result.value)}this._itemsToProcess.length=0}},e.prototype._process=function(e){var t=this;if(null!=e){var r=this._apiPromises.get(e),n=this.process(e);if(function(e){return e&&"function"==typeof e.then}(n)){var i={item:e,resultPromise:n,result:null,dfd:r,isReset:!1};this._processingItems.set(e,i),this.ordered?n.then(function(e){return t._processOrdered(i,{ok:!0,value:e})},function(e){return t._processOrdered(i,{ok:!1,error:e})}):n.then(function(e){return t._processResult(i,e)},function(e){return t._processError(i,e)})}else r.resolve(n),this._remove(e)}},e.prototype._add=function(e,t){this._apiPromises.set(e,t),this._queue.push(e)},e.prototype._remove=function(e){this._queue.remove(e),this._apiPromises.delete(e),this._processingItems.delete(e)},e.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)},e}()}.apply(null,n))||(e.exports=i)},831:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(336),r(954),r(955),r(956)],void 0===(i=function(e,t,r,n,i,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r){switch(this.type=e,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=r,e){case 0:this._layoutDefinition=o.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=o.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=o.StyleDefinition.fillLayoutDefinition,this._paintDefinition=o.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=o.StyleDefinition.lineLayoutDefinition,this._paintDefinition=o.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=o.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=o.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=o.StyleDefinition.circleLayoutDefinition,this._paintDefinition=o.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=i.createFilter(this.filter)},e.prototype.getLayoutProperty=function(e){var t=this._layoutProperties;if(t)return t[e]},e.prototype.getPaintProperty=function(e){var t=this._paintProperties;if(t)return t[e]},e.prototype.getLayoutValue=function(e,t,r){var n,i=this._layoutProperties;if(i){var o=i[e];o&&(n=o.getValue(t,r))}var a=this._layoutDefinition[e];return void 0===n&&(n=a.default),"enum"===a.type&&(n=a.values.indexOf(n)),n},e.prototype.getPaintValue=function(e,t,r){var n,i=this._paintProperties;if(i){var o=i[e];o&&(n=o.getValue(t,r))}var a=this._paintDefinition[e];return void 0===n&&(n=a.default),"enum"===a.type&&(n=a.values.indexOf(n)),n},e.prototype._parseLayout=function(e){var t={};for(var r in e){var n=this._layoutDefinition[r];n&&(t[r]=new a(r,n,e[r]))}return t},e.prototype._parsePaint=function(e){var t={};for(var r in e){var n=this._paintDefinition[r];n&&(t[r]=new a(r,n,e[r]))}return t},e}();t.StyleLayer=s;var u=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return r(t,e),t}(s);t.BackgroundStyleLayer=u;var l=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this,o=i.getPaintProperty("fill-color");i.hasDataDrivenColor=!!o&&o.isDataDriven;var a=i.getPaintProperty("fill-opacity");i.hasDataDrivenOpacity=!!a&&a.isDataDriven,i.hasDataDrivenFill=i.hasDataDrivenColor||i.hasDataDrivenOpacity;var s=i.getPaintProperty("fill-outline-color");return i.outlineUsesFillColor=!s,i.hasDataDrivenOutlineColor=!!s&&s.isDataDriven,i.hasDataDrivenOutline=(s?i.hasDataDrivenOutlineColor:i.hasDataDrivenColor)||i.hasDataDrivenOpacity,i}return r(t,e),t}(s);t.FillStyleLayer=l;var c=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this,o=i.getPaintProperty("line-color");i.hasDataDrivenColor=!!o&&o.isDataDriven;var a=i.getPaintProperty("line-opacity");i.hasDataDrivenOpacity=!!a&&a.isDataDriven;var s=i.getPaintProperty("line-width");return i.hasDataDrivenWidth=!!s&&s.isDataDriven,i.hasDataDrivenLine=i.hasDataDrivenColor||i.hasDataDrivenOpacity||i.hasDataDrivenWidth,i}return r(t,e),t}(s);t.LineStyleLayer=c;var f=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this,o=i.getPaintProperty("icon-color");i.hasDataDrivenIconColor=!!o&&o.isDataDriven;var a=i.getPaintProperty("icon-opacity");i.hasDataDrivenIconOpacity=!!a&&a.isDataDriven;var s=i.getLayoutProperty("icon-size");i.hasDataDrivenIconSize=!!s&&s.isDataDriven,i.hasDataDrivenIcon=i.hasDataDrivenIconColor||i.hasDataDrivenIconOpacity||i.hasDataDrivenIconSize;var u=i.getPaintProperty("text-color");i.hasDataDrivenTextColor=!!u&&u.isDataDriven;var l=i.getPaintProperty("text-opacity");i.hasDataDrivenTextOpacity=!!l&&l.isDataDriven;var c=i.getLayoutProperty("text-size");return i.hasDataDrivenTextSize=!!c&&c.isDataDriven,i.hasDataDrivenText=i.hasDataDrivenTextColor||i.hasDataDrivenTextOpacity||i.hasDataDrivenTextSize,i}return r(t,e),t}(s);t.SymbolStyleLayer=f;var h=function(e){function t(t,r,n){var i=e.call(this,t,r,n)||this,o=i.getPaintProperty("circle-radius");i.hasDataDrivenRadius=!!o&&o.isDataDriven;var a=i.getPaintProperty("circle-color");i.hasDataDrivenColor=!!a&&a.isDataDriven;var s=i.getPaintProperty("circle-opacity");i.hasDataDrivenOpacity=!!s&&s.isDataDriven;var u=i.getPaintProperty("circle-stroke-width");i.hasDataDrivenStrokeWidth=!!u&&u.isDataDriven;var l=i.getPaintProperty("circle-stroke-color");i.hasDataDrivenStrokeColor=!!l&&l.isDataDriven;var c=i.getPaintProperty("circle-stroke-opacity");i.hasDataDrivenStrokeOpacity=!!c&&c.isDataDriven;var f=i.getPaintProperty("circle-blur");return i.hasDataDrivenBlur=!!f&&f.isDataDriven,i}return r(t,e),t}(s);t.CircleStyleLayer=h;var p=function(){return function(e,t,r){this.cap=e.getLayoutValue("line-cap",t,r),this.join=e.getLayoutValue("line-join",t,r),this.miterLimit=e.getLayoutValue("line-miter-limit",t,r),this.roundLimit=e.getLayoutValue("line-round-limit",t,r)}}();t.LineLayout=p;var d=function(){return function(e,t,r,n){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t,n),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t,n),this.optional=e.getLayoutValue("icon-optional",t,n),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t,n),this.size=e.getLayoutValue("icon-size",t,n),this.rotate=e.getLayoutValue("icon-rotate",t,n),this.padding=e.getLayoutValue("icon-padding",t,n),this.keepUpright=e.getLayoutValue("icon-keep-upright",t,n),this.offset=e.getLayoutValue("icon-offset",t,n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)}}();t.IconLayout=d;var v=function(){return function(e,t,r,n){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t,n),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t,n),this.optional=e.getLayoutValue("text-optional",t,n),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t,n),this.fontArray=e.getLayoutValue("text-font",t,n),this.maxWidth=e.getLayoutValue("text-max-width",t,n),this.lineHeight=e.getLayoutValue("text-line-height",t,n),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t,n),this.justify=e.getLayoutValue("text-justify",t,n),this.anchor=e.getLayoutValue("text-anchor",t,n),this.maxAngle=e.getLayoutValue("text-max-angle",t,n),this.size=e.getLayoutValue("text-size",t,n),this.rotate=e.getLayoutValue("text-rotate",t,n),this.padding=e.getLayoutValue("text-padding",t,n),this.keepUpright=e.getLayoutValue("text-keep-upright",t,n),this.transform=e.getLayoutValue("text-transform",t,n),this.offset=e.getLayoutValue("text-offset",t,n),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)}}();t.TextLayout=v}.apply(null,n))||(e.exports=i)},834:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(410),r(456)],void 0===(i=function(e,t,r,n){function i(e,t){return[e,t]}function o(e,t,r){return e[0]=t,e[1]=r,e}var a=new n("0/0/0/0");return function(){function e(e,t,r,n,i,o,a,s,u,l,c,f){this.level=e,this.resolution=t,this.scale=r,this.origin=n,this.first=i,this.last=o,this.size=a,this.norm=s,this.worldStart=u,this.worldEnd=l,this.worldSize=c,this.wrap=f}return e.create=function(t,n,a){var s,u,l,c,f=r.getInfo(t.spatialReference),h=i(t.origin.x,t.origin.y),p=i(t.size[0]*n.resolution,t.size[1]*n.resolution),d=i(-1/0,-1/0),v=i(1/0,1/0),y=i(1/0,1/0);return a&&(o(d,Math.max(0,Math.floor((a.xmin-h[0])/p[0])),Math.max(0,Math.floor((h[1]-a.ymax)/p[1]))),o(v,Math.max(0,Math.floor((a.xmax-h[0])/p[0])),Math.max(0,Math.floor((h[1]-a.ymin)/p[1]))),o(y,v[0]-d[0]+1,v[1]-d[1]+1)),t.isWrappable?(s=i(Math.ceil(Math.round(2*f.origin[1]/n.resolution)/t.size[0]),y[1]),u=i(Math.floor((f.origin[0]-h[0])/p[0]),d[1]),l=i(s[0]+u[0]-1,v[1]),c=!0):(u=d,l=v,s=y,c=!1),new e(n.level,n.resolution,n.scale,h,d,v,y,p,u,l,s,c)},e.prototype.normalizeCol=function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t},e.prototype.denormalizeCol=function(e,t){return this.wrap?this.worldSize[0]*t+e:e},e.prototype.getWorldForColumn=function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0},e.prototype.getFirstColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]},e.prototype.getLastColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1},e.prototype.getColumnForX=function(e){return(e-this.origin[0])/this.norm[0]},e.prototype.getXForColumn=function(e){return this.origin[0]+e*this.norm[0]},e.prototype.getRowForY=function(e){return(this.origin[1]-e)/this.norm[1]},e.prototype.getYForRow=function(e){return this.origin[1]-e*this.norm[1]},e.prototype.getTileBounds=function(e,t,r){void 0===r&&(r=!1),a.set(t);var n=r?a.col:this.denormalizeCol(a.col,a.world),i=a.row;return function(e,t,r,n,i){e[0]=t,e[1]=r,e[2]=n,e[3]=i}(e,this.getXForColumn(n),this.getYForRow(i+1),this.getXForColumn(n+1),this.getYForRow(i)),e},e.prototype.getTileCoords=function(e,t,r){void 0===r&&(r=!1),a.set(t);var n=r?a.col:this.denormalizeCol(a.col,a.world);return Array.isArray(e)?o(e,this.getXForColumn(n),this.getYForRow(a.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(a.row)),e},e}()}.apply(null,n))||(e.exports=i)},835:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(718),r(412),r(733)],void 0===(i=function(e,t,r,n,i){return function(){function e(e){this.lodInfo=e,this.spans=r.acquire()}return e.prototype.release=function(){for(var e=0,t=this.spans;e<t.length;e++){var n=t[e];i.pool.release(n)}r.release(this.spans)},e.prototype.forEach=function(e,t){var r=this.spans,n=this.lodInfo,i=n.level;if(0!==r.length)for(var o=0,a=r;o<a.length;o++)for(var s=a[o],u=s.row,l=s.colFrom,c=s.colTo,f=l;f<=c;f++)e.call(t,i,u,n.normalizeCol(f),n.getWorldForColumn(f))},e.pool=new n(e,!0),e}()}.apply(null,n))||(e.exports=i)},838:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(346),r(815),r(337),r(698)],void 0===(i=function(e,t,r,n,i,o,a,s){var u=new Set,l=[],c=new Map,f=[0,0];return function(e){function t(t){var r=e.call(this,t)||this;return r._keysToRequests=new Map,r.concurrency=6,r.process=null,r.strategy="scale-first",r.tileInfoView=null,r.tileServers=null,r}return r(t,e),t.prototype.initialize=function(){var e=this,t="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this),r=this,n=r.tileServers,i=r.concurrency,a=r.process;n&&n.length>0?this._queues=n.map(function(r){return new o({concurrency:i,process:function(t){var n=e._keysToRequests.get(t);return a(n,r)},peeker:t})}):this._queues=[new o({concurrency:i,process:function(t){var r=e._keysToRequests.get(t);return a(r)},peeker:t})]},Object.defineProperty(t.prototype,"length",{get:function(){return this._queues.reduce(function(e,t){return e+t.length},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this.length>0||this.onGoingCount>0},enumerable:!0,configurable:!0}),t.prototype.clear=function(){for(var e=0,t=this._queues;e<t.length;e++)t[e].clear();this._keysToRequests.clear(),this.notifyChange("updating")},t.prototype.find=function(e,t){for(var r=this,n=0,i=this._queues;n<i.length;n++){var o=i[n].find(function(t){return e(r._keysToRequests.get(t).key)});if(o)return o}},t.prototype.getPromise=function(e){for(var t="string"==typeof e?e:e.id,r=0,n=this._queues;r<n.length;r++){var i=n[r].get(t);if(i)return i}},t.prototype.getRequest=function(e){var t="string"==typeof e?e:e.id;return this._keysToRequests.get(t)},t.prototype.has=function(e){return"string"==typeof e?this._keysToRequests.has(e):this._keysToRequests.has(e.id)},t.prototype.isOngoing=function(e){var t="string"==typeof e?e:e.id;return this.has(t)&&this._queues.some(function(e){return e.isOngoing(t)})},t.prototype.pause=function(){for(var e=0,t=this._queues;e<t.length;e++)t[e].pause()},t.prototype.push=function(e){var t=this,r=e.key.id;if(this.has(r))return this.getPromise(r);var n=this._queues[e.key.row%this._queues.length].push(r),i=function(){t._keysToRequests.delete(r),t.notifyChange("updating")};return this._keysToRequests.set(r,e),n.then(i,i),this.notifyChange("updating"),n},t.prototype.reset=function(){for(var e=0,t=this._queues;e<t.length;e++)t[e].reset();this.notifyChange("updating")},t.prototype.resume=function(){for(var e=0,t=this._queues;e<t.length;e++)t[e].resume()},t.prototype._peekByScaleFirst=function(e){if(!this.state)return e[0];for(var t=this.tileInfoView,r=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=0,o=e;i<o.length;i++){var a=o[i],s=this._keysToRequests.get(a),f=this.tileInfoView.getTileScale(s.key);c.has(f)||(c.set(f,[]),r=Math.max(f,r),n=Math.min(f,n)),c.get(f).push(s.key),u.add(f)}var h=this.state.scale;c.has(h)||(function(e,t){e.length=0,t.forEach(function(t){return e.push(t)})}(l,u),l.sort(),h=l.reduce(function(e,t,r,n){return Math.abs(t-h)<Math.abs(e-h)?t:e},l[0])),h=Math.min(h,r),h=Math.max(h,n);var p=c.get(h),d=t.getClosestInfoForScale(h),v=d.getColumnForX(this.state.center[0]),y=d.getRowForY(this.state.center[1]);return p.sort(function(e,t){var r=d.denormalizeCol(e.col,e.world),n=d.denormalizeCol(t.col,t.world);return Math.sqrt((v-r)*(v-r)+(y-e.row)*(y-e.row))-Math.sqrt((v-n)*(v-n)+(y-t.row)*(y-t.row))}),u.clear(),c.clear(),p[0].id},t.prototype._peekByCenterFirst=function(e){if(!this.state)return e[0];for(var t=this.tileInfoView,r=this.state.center,n=Number.POSITIVE_INFINITY,i=null,o=0,a=e;o<a.length;o++){var u=a[o],l=this._keysToRequests.get(u);t.getTileCoords(f,l.key);var c=s.distance(f,r);c<n&&(n=c,i=l.key)}return i.id},n([a.property({constructOnly:!0})],t.prototype,"concurrency",void 0),n([a.property({constructOnly:!0})],t.prototype,"process",void 0),n([a.property()],t.prototype,"state",void 0),n([a.property({constructOnly:!0})],t.prototype,"strategy",void 0),n([a.property({constructOnly:!0})],t.prototype,"tileInfoView",void 0),n([a.property({constructOnly:!0})],t.prototype,"tileServers",void 0),n([a.property({readOnly:!0})],t.prototype,"updating",null),n([a.subclass()],t)}(a.declared(i))}.apply(null,n))||(e.exports=i)},839:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e){this._items=[],this._itemSet=new Set,this._peeker=function(e){return e[0]},this._length=0,e&&e.peeker&&(this._peeker=e.peeker)}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._itemSet.clear(),this._items.length=0,this._length=0},e.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)},e.prototype.push=function(e){this.contains(e)||this._add(e)},e.prototype.contains=function(e){return this._length>0&&this._itemSet.has(e)},e.prototype.pop=function(){if(0!==this._length){var e=this.peek();return this._remove(e),e}},e.prototype.remove=function(e){this.contains(e)&&this._remove(e)},e.prototype._add=function(e){this._items.push(e),this._itemSet.add(e),this._length++},e.prototype._remove=function(e){this._itemSet.delete(e),this._items.splice(this._items.indexOf(e),1),this._length--},e}()}.apply(null,n))||(e.exports=i)},900:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347),r(456)],void 0===(i=function(e,t,r,n){function i(e,t){e.delete(t)}var o=new n(0,0,0,0),a=new Map,s=[],u=[];return function(){function e(e){this._previousResolution=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),null!=e.buffer&&(this.buffer=e.buffer)}return e.prototype.destroy=function(){this.tileIndex.clear()},e.prototype.update=function(e){var t=this,r=this.tileIndex,n=this.tileInfoView.getTileCoverage(e.state,this.buffer);if(n){var l=n.spans,c=n.lodInfo,f=c.level,h=e.state.resolution,p=!e.stationary&&h>this._previousResolution;this._previousResolution=h,r.forEach(function(e){return e.visible=!0}),this.tiles.length=0,a.clear();var d=0,v=0;if(l.length>0)for(var y=0,m=l;y<m.length;y++)for(var g=m[y],_=g.row,x=g.colFrom,b=g.colTo,w=x;w<=b;w++){d++;var I=o.set(f,_,c.normalizeCol(w),c.getWorldForColumn(w)).id;if(r.has(I)){if((P=r.get(I)).attached){a.set(I,P),v++;continue}P.attached||p||this._addParentTile(I,a)}else{var P=this.acquireTile(o);this.tileIndex.set(I,P),p||this._addParentTile(I,a)}}var T=v===d;u.length=0,s.length=0,r.forEach(function(e,r){if(o.set(r),!a.has(r)){var i=t.tileInfoView.intersects(n,o);if(!i||!p&&T)if("purge"===t.cachePolicy){!(o.level!==f)&&i||s.push(r)}else(o.level>f||!i)&&s.push(r);else e.attached?u.push(r):o.level>f&&s.push(r)}});for(var C=0,M=u;C<M.length;C++){I=M[C];(P=r.get(I))&&P.attached&&a.set(I,P)}for(var S=0,E=s;S<E.length;S++){I=E[S],P=r.get(I);this.releaseTile(P),i(r,I)}return a.forEach(function(e){return t.tiles.push(e)}),r.forEach(function(e){a.has(e.key.id)||(e.visible=!1)}),u.length=0,s.length=0,a.clear(),T}},e.prototype.clear=function(){var e=this,t=this.tileIndex;t.forEach(function(t){e.releaseTile(t)}),t.clear()},e.prototype._addParentTile=function(e,t){for(var r=e,n=null;r=this.tileInfoView.getTileParentId(r);)if(this.tileIndex.has(r)&&(n=this.tileIndex.get(r))&&n.attached){t.has(n.key.id)||t.set(n.key.id,n);break}},e}()}.apply(null,n))||(e.exports=i)},953:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(354),r(831)],void 0===(i=function(e,t,r,n){return function(){function e(t,n){if(this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=n?n.spriteUrl:t.sprite,this.glyphs=n?n.glyphsUrl:t.glyphs,r("stable-symbol-rendering")){var i=(t.layers||[]).filter(function(e){return e.layout&&e.layout["text-font"]})[0];i&&(t.layers||[]).forEach(function(e){e.layout&&e.layout["text-font"]&&(e.layout["text-font"]=i.layout["text-font"])})}this.layers=(t.layers||[]).map(e._create),this._identifyRefLayers()}return e.prototype._identifyRefLayers=function(){for(var e=[],t=[],r=0,n=0,i=this.layers;n<i.length;n++){var o=i[n];if(1===o.type){var a=o,s=o.sourceLayer;s+="|"+JSON.stringify(o.minzoom),s+="|"+JSON.stringify(o.maxzoom),s+="|"+JSON.stringify(o.filter),(a.hasDataDrivenFill||a.hasDataDrivenOutline)&&(s+="|"+JSON.stringify(r)),e.push({key:s,layer:o})}if(2===o.type){var u=o;s=o.sourceLayer;s+="|"+JSON.stringify(o.minzoom),s+="|"+JSON.stringify(o.maxzoom),s+="|"+JSON.stringify(o.filter),s+="|"+JSON.stringify(o.layout&&o.layout["line-cap"]),s+="|"+JSON.stringify(o.layout&&o.layout["line-join"]),u.hasDataDrivenLine&&(s+="|"+JSON.stringify(r)),t.push({key:s,layer:o})}++r}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){e.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0});for(var t,r,n=e.length,i=0;i<n;i++){var o=e[i];if(o.key===t)o.layer.refLayerId=r;else if(t=o.key,r=o.layer.id,1===o.layer.type&&!o.layer.getPaintProperty("fill-outline-color"))for(var a=i+1;a<n;a++){var s=e[a];if(s.key!==t)break;if(s.layer.getPaintProperty("fill-outline-color")){e[i]=s,e[a]=o,r=s.layer.id;break}}}},e._create=function(e,t,r){var i=1-(1+t)*(1/(r.length+1));switch(e.type){case"background":return new n.BackgroundStyleLayer(0,e,i);case"fill":return new n.FillStyleLayer(1,e,i);case"line":return new n.LineStyleLayer(2,e,i);case"symbol":return new n.SymbolStyleLayer(3,e,i);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new n.CircleStyleLayer(4,e,i)}throw new Error("Unknown vector tile layer")},e}()}.apply(null,n))||(e.exports=i)},954:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(t,r,n){this._op=t,"$type"===r?(n instanceof Array?this._val=n.map(function(t){return e._types.indexOf(t)}):this._val=e._types.indexOf(n),this._op+=11):(this._key=r,this._val=n)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,r=this._val;t<r.length;t++){if(r[t].filter(e))return!0}return!1;case 10:for(var n=0,i=this._val;n<i.length;n++){if(!i[n].filter(e))return!1}return!0;case 11:for(var o=0,a=this._val;o<a.length;o++){if(a[o].filter(e))return!1}return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type)}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var r=t[0];if(t.length<=1)return new e(0,void 0,"any"!==r);switch(r){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));default:throw new Error("invalid operator: "+r)}},e._types=["Unknown","Point","LineString","Polygon"],e}()}.apply(null,n))||(e.exports=i)},955:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}},e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}},e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}},e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}},e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}},e}();t.StyleDefinition=r}.apply(null,n))||(e.exports=i)},956:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(362),r(616)],void 0===(i=function(e,t,r,n){return function(){function e(t,r,n){var i;switch(this.isDataDriven=!1,r.type){case"number":i=!0;break;case"color":i=!0,n=e._parseColor(n);break;case"array":i="number"===r.value;break;default:i=!1}null==n&&(n=r.default),i&&"interval"===n.type&&(i=!1);var o=n&&n.stops&&n.stops.length>0;if(o)for(var a=0,s=n.stops;a<s.length;a++){var u=s[a];u[1]=this._validate(u[1],r)}if(this.isDataDriven=!!n&&!!n.property,this.isDataDriven)if(void 0!==n.default&&(n.default=this._validate(n.default,r)),o)switch(n.type){case"identity":this.getValue=this._buildIdentity(n,r);break;case"categorical":this.getValue=this._buildCategorical(n,r);break;default:this.getValue=i?this._buildInterpolate(n,r):this._buildInterval(n,r)}else this.getValue=this._buildIdentity(n,r);else o?this.getValue=i?this._buildZoomInterpolate(n):this._buildZoomInterval(n):(n=this._validate(n,r),this.getValue=this._buildSimple(n))}return e.prototype._validate=function(e,t){if("number"===t.type){if(e<t.minimum)return t.minimum;if(e>t.maximum)return t.maximum}return e},e.prototype._buildSimple=function(e){return function(){return e}},e.prototype._buildIdentity=function(t,r){var n=this;return function(i,o){var a;return o&&(a=o.values[t.property],"color"===r.type&&(a=e._parseColor(a))),void 0===a&&(a=t.default),void 0!==a?n._validate(a,r):r.default}},e.prototype._buildCategorical=function(e,t){var r=this;return function(n,i){var o;return i&&(o=i.values[e.property]),void 0!==(o=r._categorical(o,e.stops))?o:void 0!==e.default?e.default:t.default}},e.prototype._buildInterval=function(e,t){var r=this;return function(n,i){var o;return i&&(o=i.values[e.property]),"number"==typeof o?r._interval(o,e.stops):void 0!==e.default?e.default:t.default}},e.prototype._buildInterpolate=function(e,t){var r=this;return function(n,i){var o;return i&&(o=i.values[e.property]),"number"==typeof o?r._interpolate(o,e.stops,e.base||1):void 0!==e.default?e.default:t.default}},e.prototype._buildZoomInterpolate=function(e){var t=this;return function(r){return t._interpolate(r,e.stops,e.base||1)}},e.prototype._buildZoomInterval=function(e){var t=this;return function(r){return t._interval(r,e.stops)}},e.prototype._categorical=function(e,t){for(var r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1]},e.prototype._interval=function(e,t){for(var r=t.length,n=0,i=0;i<r&&t[i][0]<=e;i++)n=i;return t[n][1]},e.prototype._interpolate=function(e,t,r){for(var i,o,a=t.length,s=0;s<a;s++){var u=t[s];if(!(u[0]<=e)){o=u;break}i=u}if(i&&o){var l=o[0]-i[0],c=e-i[0],f=1===r?c/l:(Math.pow(r,c)-1)/(Math.pow(r,l)-1);if(Array.isArray(i[1])){var h=i[1],p=o[1],d=[];for(s=0;s<h.length;s++)d.push(n.interpolate(h[s],p[s],f));return d}return n.interpolate(i[1],o[1],f)}return i?i[1]:o?o[1]:void 0},e._isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e._parseColor=function(t){if(Array.isArray(t))return t;if("string"!=typeof t)return t&&t.default&&(t.default=e._parseColor(t.default)),t&&t.stops&&(t.stops=t.stops.map(function(t){return[t[0],e._parseColor(t[1])]})),t;var n=new r(t);return this._isEmpty(n)?void 0:r.toUnitRGBA(n)},e}()}.apply(null,n))||(e.exports=i)},960:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(461),i=r(621),o=r(669);if(i.default("es6-object")){var a=n.default.Object;t.assign=a.assign,t.getOwnPropertyDescriptor=a.getOwnPropertyDescriptor,t.getOwnPropertyNames=a.getOwnPropertyNames,t.getOwnPropertySymbols=a.getOwnPropertySymbols,t.is=a.is,t.keys=a.keys}else t.keys=function(e){return Object.keys(e).filter(function(e){return!Boolean(e.match(/^@@.+/))})},t.assign=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(null==e)throw new TypeError("Cannot convert undefined or null to object");var i=Object(e);return r.forEach(function(e){e&&t.keys(e).forEach(function(t){i[t]=e[t]})}),i},t.getOwnPropertyDescriptor=function(e,t){return o.isSymbol(t),Object.getOwnPropertyDescriptor(e,t)},t.getOwnPropertyNames=function(e){return Object.getOwnPropertyNames(e).filter(function(e){return!Boolean(e.match(/^@@.+/))})},t.getOwnPropertySymbols=function(e){return Object.getOwnPropertyNames(e).filter(function(e){return Boolean(e.match(/^@@.+/))}).map(function(e){return Symbol.for(e.substring(2))})},t.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};if(i.default("es2017-object")){a=n.default.Object;t.getOwnPropertyDescriptors=a.getOwnPropertyDescriptors,t.entries=a.entries,t.values=a.values}else t.getOwnPropertyDescriptors=function(e){return t.getOwnPropertyNames(e).reduce(function(r,n){return r[n]=t.getOwnPropertyDescriptor(e,n),r},{})},t.entries=function(e){return t.keys(e).map(function(t){return[t,e[t]]})},t.values=function(e){return t.keys(e).map(function(t){return e[t]})}},962:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(461);function i(e){return"number"==typeof e&&n.default.isFinite(e)}function o(e){return i(e)&&Math.floor(e)===e}t.EPSILON=1,t.MAX_SAFE_INTEGER=Math.pow(2,53)-1,t.MIN_SAFE_INTEGER=-t.MAX_SAFE_INTEGER,t.isNaN=function(e){return"number"==typeof e&&n.default.isNaN(e)},t.isFinite=i,t.isInteger=o,t.isSafeInteger=function(e){return o(e)&&Math.abs(e)<=t.MAX_SAFE_INTEGER}}}]);