(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/BitmapContainer":1105,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/ImageryLayerView2D":2389})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{1105:function(t,e,a){var r,i;r=[a.dj.c(t.i),e,a(345),a(335),a(903),a(1073),a(696)],void 0===(i=function(t,e,a,r,i,n,o){var s=[0,0];return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._childrenCanvas=null,e._childrenRenderParameters={context:null,pixelRatio:1,state:new i,stationary:!0},e}return a(e,t),e.prototype.attach=function(e){return this._childrenCanvas||(this._childrenCanvas=document.createElement("canvas"),this._childrenRenderParameters.context=this._childrenCanvas.getContext("2d")),t.prototype.attach.call(this,e)},e.prototype.detach=function(e){t.prototype.detach.call(this,e),this._childrenCanvas=null,this._childrenRenderParameters.context=null},e.prototype.doRender=function(e){this.visible&&t.prototype.doRender.call(this,e)},e.prototype.prepareChildrenRenderParameters=function(t){var e=this._childrenCanvas,a=this._childrenRenderParameters,r=t.state,i=r.pixelRatio,o=a.state;o.copy(r);var h=n.getOuterSize(s,r),p=h[0],l=h[1];return p*=i,l*=i,o.size=s,o.viewpoint.rotation=0,e.width!==p||e.height!==l?(e.width=p,e.height=l):a.context.clearRect(0,0,p,l),a.pixelRatio=t.pixelRatio,a},e.prototype.beforeRenderChildren=function(t,e){this.sortChildren(function(t,e){return e.resolution-t.resolution})},e.prototype.afterRenderChildren=function(t,e){var a=t.context,r=t.state,i=e.context,n=e.state;0===r.rotation?a.drawImage(i.canvas,0,0):(a.save(),a.translate(.5*r.width,.5*r.height),a.rotate(r.rotation*Math.PI/180),a.translate(.5*-r.width,.5*-r.height),a.drawImage(i.canvas,.5*(r.width-n.width),.5*(r.height-n.height)),a.restore())},e}(o)}.apply(null,r))||(t.exports=i)},2389:function(t,e,a){var r,i;r=[a.dj.c(t.i),e,a(345),a(335),a(383),a(365),a(339),a(377),a(336),a(1105),a(982),a(981),a(768),a(1551),a(667)],void 0===(i=function(t,e,a,r,i,n,o,s,h,p,l,d,c,u,y){return function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._handles=new n,e.container=new d,e}return a(e,t),e.prototype.hitTest=function(t,e){var a=this.view.toMap(t,e);return o.resolve(new i({attributes:{},geometry:a}))},e.prototype.update=function(t){this.strategy.update(t),this.notifyChange("updating")},e.prototype.attach=function(){var t=this;this._tileContainer=new p,this.container.addChild(this._tileContainer),this.strategy=new u({container:this._tileContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:function(){return t.requestUpdate()}}),this._handles.add([s.watch(this,"layer.exportImageServiceParameters.version",function(e){t._exportImageVersion!==e&&(t._exportImageVersion=e,t.requestUpdate())}),this.layer.on("redraw",function(){t.strategy.updateExports(function(e){var a=e.source.data.getContext("2d");return t.pixelData=t.layer.applyFilter(t._rawPixelData),t._drawPixelData(a,t.pixelData,0,0),null})})])},e.prototype.detach=function(){this.container.removeChild(this._tileContainer),this.strategy.destroy(),this._handles.removeAll()},e.prototype.moveStart=function(){},e.prototype.viewChange=function(){},e.prototype.moveEnd=function(){this.requestUpdate()},e.prototype.doRefresh=function(){this.requestUpdate()},e.prototype.isUpdating=function(){return this.attached&&(this.strategy.updating||this.updateRequested)},e.prototype.fetchImage=function(t,e,a,r){var i=this;return this._exportImageVersion=this.get("layer.exportImageServiceParameters.version"),this.layer.fetchImage(t,e,a,r).then(function(t){i._rawPixelData=t.pixelData,i.pixelData=i.layer.applyFilter(i._rawPixelData);var r=document.createElement("canvas");r.width=e,r.height=a;var n=r.getContext("2d");return i._drawPixelData(n,i.pixelData,0,0),i.notifyChange("updating"),new l.default(r)})},e.prototype._drawPixelData=function(t,e,a,r){if(e.pixelBlock){var i=e.pixelBlock,n=t.createImageData(i.width,i.height),o=i.getAsRGBA();n.data.set(o),t.putImageData(n,a,r)}},r([h.subclass("esri.views.2d.layers.ImageryLayerView2D")],e)}(h.declared(c,y))}.apply(null,r))||(t.exports=i)}}]);