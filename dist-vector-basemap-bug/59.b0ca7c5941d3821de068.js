(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/FeatureLayer":331,"esri/core/screenUtils":354,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/screenUtils":354,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/Texture":368,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/Renderer":370,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/Symbol":371,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/FramebufferObject":372,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Domain":374,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/VertexArrayObject":376,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/utils":378,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/BufferObject":382,"esri/core/workers/RemoteClient":389,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/RemoteClient":389,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/Util":390,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/FeatureSet":392,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Field":395,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/domains":399,"esri/symbols/SimpleLineSymbol":402,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/SimpleLineSymbol":402,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/urlUtils":403,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/programUtils":408,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/SimpleRenderer":412,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/ClassBreaksRenderer":414,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/HeatmapRenderer":415,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/UniqueValueRenderer":416,"esri/renderers/support/jsonUtils":423,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/jsonUtils":423,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/LegendOptions":424,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeatureSet":425,"esri/layers/support/LabelClass":427,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/LabelClass":427,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/commonProperties":429,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers":437,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/RefreshableLayer":438,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/AttachmentQuery":440,"esri/views/2d/tiling/TileKey":441,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileKey":441,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/RelationshipQuery":444,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/requireUtils":446,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/fieldUtils":447,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/labelUtils":451,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureReduction":455,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/FillSymbol":457,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/MarkerSymbol":458,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/layerSourceUtils":459,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/support/urlUtils":586,"@dojo/framework/shim/Set":587,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureTemplate":588,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/LineSymbol":592,"esri/core/pbf":593,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/pbf":593,"esri/layers/graphics/OptimizedGeometry":595,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedGeometry":595,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/CodedValueDomain":597,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/InheritedDomain":598,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/RangeDomain":599,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/fieldType":600,"esri/layers/graphics/OptimizedFeature":603,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeature":603,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/workers":607,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/Connection":608,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/WorkerOwner":609,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/workerFactory":610,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/loaderConfig":611,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/WorkerFallback":612,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/graphicsUtils":613,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/typeUtils":615,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/diffUtils":621,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/support/buffer/typedArrayUtil":622,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/query":627,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfQueryUtils":628,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfFeatureServiceParser":629,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/support/styleUtils":634,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/styleUtils":635,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers":637,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/queryAttachments":639,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/AuthoringInfo":641,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/AuthoringInfoVisualVariable":642,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/ClassBreakInfo":643,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/HeatmapColorStop":644,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/UniqueValueInfo":645,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/types":646,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/QueryTask":647,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/queryRelatedRecords":648,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/LayerView":649,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureProcessing":652,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureReductionSelection":661,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/LabelExpressionInfo":662,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/string":663,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/labelingInfo":664,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/sources/MemorySource":671,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/accessorSupport/typescript":674,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/typescript":675,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureIndex":676,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureType":677,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Relationship":678,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/TilingScheme":686,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/TileLayer":691,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/PictureMarkerSymbol":701,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/SimpleFillSymbol":702,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/ElevationLayer":703,"esri/views/2d/tiling/enums":706,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/enums":706,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/DisplayObject":715,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/CollectionFlattener":721,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/LayerView3D":734,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/gl-matrix/mat4":745,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/gl-matrix/common":748,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/lazyLayerLoader":751,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/Program":760,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/support/layerViewUpdatingProperties":764,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/Evented":767,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/heightModelInfoUtils":777,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/arcgisLayers":782,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/sublayerUtils":794,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/gl-matrix/vec4":798,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/LercCodec":804,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISMapService":865,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/SublayersOwner":866,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Sublayer":867,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/support/basemapDefinitions":875,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtils":878,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/gl-matrix/vec3":881,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/TerrainConst":886,"esri/core/libs/gl-matrix/vec2":888,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/gl-matrix/vec2":888,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/Renderbuffer":891,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/rendererUtils":899,"dojo/i18n!C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/basemaps":927,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ar/basemaps":928,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/bs/basemaps":929,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ca/basemaps":930,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/cs/basemaps":931,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/da/basemaps":932,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/de/basemaps":933,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/el/basemaps":934,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/es/basemaps":935,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/et/basemaps":936,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/fi/basemaps":937,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/fr/basemaps":938,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/he/basemaps":939,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/hi/basemaps":940,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/hr/basemaps":941,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/hu/basemaps":942,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/id/basemaps":943,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/it/basemaps":944,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ja/basemaps":945,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ko/basemaps":946,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/lv/basemaps":947,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/lt/basemaps":948,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/nl/basemaps":949,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/nb/basemaps":950,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/pl/basemaps":951,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/pt-br/basemaps":952,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/pt-pt/basemaps":953,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ro/basemaps":954,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ru/basemaps":955,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/sl/basemaps":956,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/sr/basemaps":957,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/sv/basemaps":958,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/th/basemaps":959,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/tr/basemaps":960,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/vi/basemaps":961,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/zh-cn/basemaps":962,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/zh-hk/basemaps":963,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/zh-tw/basemaps":964,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/basemaps":965,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/TiledLayerView3D":977,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtilsPlanar":978,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtilsSpherical":979,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/ShaderCompiler":1093,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/LRUCache":1100,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/Rect":1107,"esri/views/vectorTiles/MemoryBuffer":1116,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/MemoryBuffer":1116,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/RectangleBinPack":1407,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/libs/gl-matrix/mat3":1408,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/VectorTileLayerView3D":1409,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/VectorTileDisplayObject":1430,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/ShaderTranspiler":1462,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/reservedWordsGLSL3":1463,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/lib/glsl-tokenizer/string":1464,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/lib/glsl-tokenizer/index":1465,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/lib/glsl-tokenizer/lib/literals":1466,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/lib/glsl-tokenizer/lib/operators":1467,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/webgl/lib/glsl-tokenizer/lib/builtins":1468,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/TileHandler":1557,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/GlyphMosaic":1558,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/GlyphSource":1559,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/SpriteMosaic":1560,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/SpriteSource":1561,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/TileIndex":1562,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/RenderBucket":1563,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/Renderer":1564,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/BackgroundRenderer":1565,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/CircleRenderer":1566,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/FadeRecorder":1567,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/FillRenderer":1568,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/LineRenderer":1569,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/SymbolRenderer":1570,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/IconRenderer":1571,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/SDFRenderer":1572,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/TileInfoRenderer":1573,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/shaders/ProgramCache":1574,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/shaders/Programs":1575,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/shaders/sources/resolver":1576,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/renderers/shaders/sources/shaderRepository":1577})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[59,4,11,14,48,49,50,51,96,102],{1093:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){this.readFile=e}return e.prototype.resolveIncludes=function(e){return this.resolve(e)},e.prototype.resolve=function(e,t){var r=this;if(void 0===t&&(t=new Map),t.has(e))return t.get(e);var i=this.read(e);if(!i)throw new Error("cannot find shader file "+e);for(var n=/^\h?#include\s+<(\S+)>\h?/gm,o=n.exec(i),a=[];null!=o;)a.push({path:o[1],start:o.index,length:o[0].length}),o=n.exec(i);var s=0,l="";return a.forEach(function(e){l+=i.slice(s,e.start),l+=t.has(e.path)?"":r.resolve(e.path,t),s=e.start+e.length}),l+=i.slice(s),t.set(e,l),l},e.prototype.read=function(e){return this.readFile(e)},e}()}.apply(null,i))||(e.exports=n)},1100:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){if(this._cache={},this._lruQueue=[],e<=0)throw new Error("LRU cache size must be bigger than zero!");this._maxSize=e}return e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.insert=function(e,t){null===this.use(e)?(this._collect(),this._cache[e]=t,this._lruQueue.unshift(e)):this._cache[e]=t},e.prototype.use=function(e){var t=this._cache[e];return t?(this._lruQueue.splice(this._lruQueue.indexOf(e),1),this._lruQueue.unshift(e),t):null},e.prototype.print=function(){for(var e=0,t=this._lruQueue;e<t.length;e++){var r=t[e];console.log("key: "+r+", value: "+this._cache[r])}},e.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var e=this._lruQueue.pop(),t=this._cache[e];t&&t.release&&t.release(),delete this._cache[e]}},e}()}.apply(null,i))||(e.exports=n)},1107:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),this.x=e,this.y=t,this.width=r,this.height=i}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.width<=0||this.height<=0},enumerable:!0,configurable:!0}),e}()}.apply(null,i))||(e.exports=n)},1116:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e){this._array=[],e<=0&&console.error("strideInBytes must be positive!"),this._stride=e}return Object.defineProperty(e.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.array.length=0},e.prototype.toBuffer=function(){return new Uint32Array(this._array).buffer},e.i1616to32=function(e,t){return 65535&e|t<<16},e.i8888to32=function(e,t,r,i){return 255&e|(255&t)<<8|(255&r)<<16|i<<24},e.i8816to32=function(e,t,r){return 255&e|(255&t)<<8|r<<16},e}()}.apply(null,i))||(e.exports=n)},1407:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1107)],void 0===(n=function(e,t,r){return function(){function e(e,t){this._width=0,this._height=0,this._free=[],this._width=e,this._height=t,this._free.push(new r(0,0,e,t))}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.allocate=function(e,t){if(e>this._width||t>this._height)return new r;for(var i=null,n=-1,o=0;o<this._free.length;++o){var a=this._free[o];e<=a.width&&t<=a.height&&(null===i||a.y<=i.y&&a.x<=i.x)&&(i=a,n=o)}return null===i?new r:(this._free.splice(n,1),i.width<i.height?(i.width>e&&this._free.push(new r(i.x+e,i.y,i.width-e,t)),i.height>t&&this._free.push(new r(i.x,i.y+t,i.width,i.height-t))):(i.width>e&&this._free.push(new r(i.x+e,i.y,i.width-e,i.height)),i.height>t&&this._free.push(new r(i.x,i.y+t,e,i.height-t))),new r(i.x,i.y,e,t))},e.prototype.release=function(e){for(var t=0;t<this._free.length;++t){var r=this._free[t];if(r.y===e.y&&r.height===e.height&&r.x+r.width===e.x)r.width+=e.width;else if(r.x===e.x&&r.width===e.width&&r.y+r.height===e.y)r.height+=e.height;else if(e.y===r.y&&e.height===r.height&&e.x+e.width===r.x)r.x=e.x,r.width+=e.width;else{if(e.x!==r.x||e.width!==r.width||e.y+e.height!==r.y)continue;r.y=e.y,r.height+=e.height}this._free.splice(t,1),this.release(e)}this._free.push(e)},e}()}.apply(null,i))||(e.exports=n)},1408:function(e,t,r){var i,n;i=[r(748)],void 0===(n=function(e){var t={create:function(){var t=new e.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(t){var r=new e.ARRAY_TYPE(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromValues:function(t,r,i,n,o,a,s,l,u){var c=new e.ARRAY_TYPE(9);return c[0]=t,c[1]=r,c[2]=i,c[3]=n,c[4]=o,c[5]=a,c[6]=s,c[7]=l,c[8]=u,c},set:function(e,t,r,i,n,o,a,s,l,u){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){if(e===t){var r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},invert:function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=c*a-s*u,d=-c*o+s*l,f=u*o-a*l,h=r*p+i*d+n*f;return h?(h=1/h,e[0]=p*h,e[1]=(-c*i+n*u)*h,e[2]=(s*i-n*a)*h,e[3]=d*h,e[4]=(c*r-n*l)*h,e[5]=(-s*r+n*o)*h,e[6]=f*h,e[7]=(-u*r+i*l)*h,e[8]=(a*r-i*o)*h,e):null},adjoint:function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=a*c-s*u,e[1]=n*u-i*c,e[2]=i*s-n*a,e[3]=s*l-o*c,e[4]=r*c-n*l,e[5]=n*o-r*s,e[6]=o*u-a*l,e[7]=i*l-r*u,e[8]=r*a-i*o,e},determinant:function(e){var t=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*n+a*s)+i*(l*n-o*s)},multiply:function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=r[0],f=r[1],h=r[2],y=r[3],m=r[4],g=r[5],v=r[6],_=r[7],b=r[8];return e[0]=d*i+f*a+h*u,e[1]=d*n+f*s+h*c,e[2]=d*o+f*l+h*p,e[3]=y*i+m*a+g*u,e[4]=y*n+m*s+g*c,e[5]=y*o+m*l+g*p,e[6]=v*i+_*a+b*u,e[7]=v*n+_*s+b*c,e[8]=v*o+_*l+b*p,e}};return t.mul=t.multiply,t.translate=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=r[0],f=r[1];return e[0]=i,e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=d*i+f*a+u,e[7]=d*n+f*s+c,e[8]=d*o+f*l+p,e},t.rotate=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=Math.sin(r),f=Math.cos(r);return e[0]=f*i+d*a,e[1]=f*n+d*s,e[2]=f*o+d*l,e[3]=f*a-d*i,e[4]=f*s-d*n,e[5]=f*l-d*o,e[6]=u,e[7]=c,e[8]=p,e},t.scale=function(e,t,r){var i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},t.fromRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},t.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},t.fromQuat=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r+r,s=i+i,l=n+n,u=r*a,c=i*a,p=i*s,d=n*a,f=n*s,h=n*l,y=o*a,m=o*s,g=o*l;return e[0]=1-p-h,e[3]=c-g,e[6]=d+m,e[1]=c+g,e[4]=1-u-h,e[7]=f-y,e[2]=d-m,e[5]=f+y,e[8]=1-u-p,e},t.normalFromMat4=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],f=t[11],h=t[12],y=t[13],m=t[14],g=t[15],v=r*s-i*a,_=r*l-n*a,b=r*u-o*a,x=i*l-n*s,w=i*u-o*s,S=n*u-o*l,M=c*y-p*h,I=c*m-d*h,D=c*g-f*h,T=p*m-d*y,A=p*g-f*y,j=d*g-f*m,O=v*j-_*A+b*T+x*D-w*I+S*M;return O?(O=1/O,e[0]=(s*j-l*A+u*T)*O,e[1]=(l*D-a*j-u*I)*O,e[2]=(a*A-s*D+u*M)*O,e[3]=(n*A-i*j-o*T)*O,e[4]=(r*j-n*D+o*I)*O,e[5]=(i*D-r*A-o*M)*O,e[6]=(y*S-m*w+g*x)*O,e[7]=(m*b-h*S-g*_)*O,e[8]=(h*w-y*b+g*v)*O,e):null},t.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},t.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e},t.sub=t.subtract,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},t.multiplyScalarAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},t.equals=function(t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=r[0],f=r[1],h=r[2],y=r[3],m=r[4],g=r[5],v=t[6],_=r[7],b=r[8];return Math.abs(i-d)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(n-f)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-h)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-y)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(s-m)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-g)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-v)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-_)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(p-b)<=e.EPSILON*Math.max(1,Math.abs(p),Math.abs(b))},t}.apply(null,i))||(e.exports=n)},1409:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(435),r(339),r(377),r(336),r(977),r(998),r(1557),r(1564)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p){return function(e){function t(t){return e.call(this)||this}return r(t,e),t.prototype.initialize=function(){var e,t,r=this,i=this.layer.compatibleTileInfo256,s=this._getTileInfoSupportError(i,this.layer.fullExtent);s?this.addResolvingPromise(o.reject(s)):t=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var e,t=r.view.basemapTerrain.tilingScheme,i=t.pixelSize[0];r.schemaHelper=new u(i,r.view.spatialReference.isWGS84),e=256===i?r.layer.compatibleTileInfo256:r.view.spatialReference.isWGS84?r.layer.compatibleTileInfo512:r.layer.tileInfo;var n=r._getTileInfoCompatibilityError(e,t);if(n)throw n;r.tileInfo=e,r._updateMinMaxDataLevel()});var l=null;e=this._initializeTileHandler(),this.tileHandler=e[0],this.renderer=e[1],l=e[2],this.watch("layer.currentStyleInfo",function(){var e,t,i;l.isFulfilled()||l.cancel(),e=r._initializeTileHandler(),t=e[0],i=e[1],(l=e[2]).then(function(){var e=r.tileHandler;r.renderer=i,r.tileHandler=t,r.emit("data-changed"),e.destroy()})});var c=n([t,l]);this.addResolvingPromise(c)},t.prototype.destroy=function(){this.renderer=null,this.tileHandler.destroy(),this.tileHandler=null},t.prototype._initializeTileHandler=function(){var e=new c(this.layer,function(){},1),t=new p,r=e.start();return r.then(function(){t.initialize(e.spriteMosaic,e.glyphMosaic,!1)}),[e,t,r]},i([s.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),i([s.property()],t.prototype,"layer",void 0),i([s.property()],t.prototype,"updatingPercentageValue",void 0),i([s.subclass("esri.views.3d.layers.VectorTileLayerView3D")],t)}(s.declared(l))}.apply(null,i))||(e.exports=n)},1430:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(413),r(745),r(888),r(409),r(715),r(706),r(441),r(1563),r(382)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p){var d=["fillVertexBuffer","fillDDVertexBuffer","fillIndexBuffer","outlineVertexBuffer","outlineDDVertexBuffer","outlineIndexBuffer","lineVertexBuffer","lineDDVertexBuffer","lineIndexBuffer","iconVertexBuffer","iconDDVertexBuffer","iconIndexBuffer","textVertexBuffer","textDDVertexBuffer","textIndexBuffer","circleVertexBuffer","circleIndexBuffer"];return function(e){function t(){for(var t,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e.call(this)||this;return a._renderBuckets=[],a._vectorTileData=null,a._symbolUpdateData=null,a.status=l.TileStatus.INITIALIZED,a.coords=[0,0],a.bounds=[0,0,0,0],a.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]},a.stencilData={mask:0,reference:0},a.status=l.TileStatus.INITIALIZED,a.tileTransform.transform=n.create(),a.tileTransform.displayCoord=o.create(),r.length>0&&(t=a.acquire).call.apply(t,[a].concat(r)),a}return r(t,e),t.prototype.reset=function(){u.pool.release(this.key),this.key=null,this.refKey=null,this.coords[0]=0,this.coords[1]=0,this.bounds[0]=0,this.bounds[1]=0,this.bounds[2]=0,this.bounds[3]=0,this.width=0,this.height=0,this.resolution=null,this.rotation=0,this._vectorTileData=null,this.styleLayers=null,this.client=null,this.id=null,this.tileTransform.transform.fill(0),this.tileTransform.displayCoord.fill(0),this.stencilData.mask=0,this.stencilData.reference=0,this._renderBuckets.length=0,this._symbolUpdateData=null,this.status=l.TileStatus.INITIALIZED},t.prototype.acquire=function(e,t,r,i,n){this.key=e,this.refKey=t;var o=r.lodAt(e.level),s=null!==o?o.resolution:0,l=r.size[0]*s,u=r.origin,c=e.col*l,p=e.row*l,d=r.spatialReference,f=0;if(d&&(d._isWrappable?d._isWrappable():d.isWrappable)){var h=a.getInfo(d);f=h.valid[1]-h.valid[0]}var y=e.world*f,m=u.x+c+y,g=u.y-p,v=m+l,_=g-l;this.coords[0]=m,this.coords[1]=g,this.bounds[0]=m,this.bounds[1]=g,this.bounds[2]=v,this.bounds[3]=_,this.widthInPixels=r.size[1],this.coordRange=4096,this.resolution=s,this.rotation=n,this.styleLayers=i,this.id=e.id},t.prototype.setData=function(e,t){this._vectorTileData=e,this.client=t,e&&e.bufferDataInfo||(this.status=l.TileStatus.NO_DATA)},t.prototype.updateSymbolData=function(e){e&&(this._symbolUpdateData=e,this.requestRender())},t.prototype.dispose=function(){for(var e=["fillVertexArrayObject","fillDDVertexArrayObject","outlineVertexArrayObject","lineVertexArrayObject","lineDDVertexArrayObject","iconVertexArrayObject","iconDDVertexArrayObject","textVertexArrayObject","textDDVertexArrayObject","circleVertexArrayObject","fillVertexBuffer","fillDDVertexBuffer","fillIndexBuffer","outlineVertexBuffer","outlineDDVertexBuffer","outlineIndexBuffer","lineVertexBuffer","lineDDVertexBuffer","lineIndexBuffer","iconVertexBuffer","iconDDVertexBuffer","iconIndexBuffer","textVertexBuffer","textDDVertexBuffer","textIndexBuffer","circleVertexBuffer","circleIndexBuffer","texture"],t=0;t<e.length;++t){var r=e[t];this[r]&&(this[r].dispose(),this[r]=null)}this._renderBuckets.length=0,this.status=l.TileStatus.INITIALIZED},t.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(e,t){return e+t.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0},t.prototype.getGpuMemoryUsage=function(){var e=this,t=d.reduce(function(t,r){return e[r]?t+e[r].size:t},0);return this.texture&&(t+=this.texture.descriptor.width*this.texture.descriptor.height*4),t},t.prototype.attach=function(e){return this.status!==l.TileStatus.INITIALIZED||(this._createRenderBuckets(),this._createBufferObjects(e),this._vectorTileData=null,this.status=l.TileStatus.READY,!0)},t.prototype._createRenderBuckets=function(){if(0===this._renderBuckets.length)for(var e=new Uint32Array(this._vectorTileData.bucketDataInfo),t=e.length,r=0;r<t;){var i=e[r];switch(e[r+1]){case 0:var n=new c.BackgroundRenderBucket;n.layerID=i,this._renderBuckets.push(n),r+=2;break;case 1:var o=new c.FillRenderBucket;o.layerID=i,o.triangleElementStart=e[r+2],o.triangleElementCount=e[r+3],o.outlineElementStart=e[r+4],o.outlineElementCount=e[r+5],this._renderBuckets.push(o),r+=6;break;case 2:var a=new c.LineRenderBucket;a.layerID=i,a.triangleElementStart=e[r+2],a.triangleElementCount=e[r+3],this._renderBuckets.push(a),r+=4;break;case 3:var s=new c.SymbolRenderBucket;s.layerID=i,s.isSDF=0!==e[r+2];var l=r+3,u=e[l];if(l++,u>0)for(var p=void 0,d=void 0,f=void 0,h=0;h<u;h++)p=e[l],d=e[l+1],f=e[l+2],s.markerPerPageElementsMap.set(p,[d,f]),l+=3;var y=l,m=e[y];if(y++,m>0)for(p=void 0,d=void 0,f=void 0,h=0;h<m;h++)p=e[y],d=e[y+1],f=e[y+2],s.glyphPerPageElementsMap.set(p,[d,f]),y+=3;this._renderBuckets.push(s),r+=5+3*u+3*m;break;case 4:var g=new c.CircleRenderBucket;g.layerID=i,g.triangleElementStart=e[r+2],g.triangleElementCount=e[r+3],this._renderBuckets.push(g),r+=4;break;default:console.error("Bad bucket type!"),r+=2}}},t._createBufferToObject=function(){var e=[];return e[1]={create:p.createVertex,var:"fillVertexBuffer"},e[2]={create:p.createVertex,var:"fillDDVertexBuffer"},e[3]={create:p.createIndex,var:"fillIndexBuffer"},e[4]={create:p.createVertex,var:"outlineVertexBuffer"},e[5]={create:p.createVertex,var:"outlineDDVertexBuffer"},e[6]={create:p.createIndex,var:"outlineIndexBuffer"},e[7]={create:p.createVertex,var:"lineVertexBuffer"},e[9]={create:p.createIndex,var:"lineIndexBuffer"},e[10]={create:p.createVertex,var:"iconVertexBuffer"},e[11]={create:p.createVertex,var:"iconDDVertexBuffer"},e[12]={create:p.createIndex,var:"iconIndexBuffer"},e[13]={create:p.createVertex,var:"textVertexBuffer"},e[14]={create:p.createVertex,var:"textDDVertexBuffer"},e[15]={create:p.createIndex,var:"textIndexBuffer"},e[16]={create:p.createVertex,var:"circleVertexBuffer"},e[17]={create:p.createIndex,var:"circleIndexBuffer"},e},t.prototype._createBufferObjects=function(e){for(var r=e.context,i=new Uint32Array(this._vectorTileData.bufferDataInfo),n=i.length,o=0,a=0;a<n;a+=2,o++){var s=i[a];if(!(i[a+1]<=0||0===this._vectorTileData.bufferData[o].byteLength)){var l=t.bufferToObject[s];l?this[l.var]?this[l.var].setData(this._vectorTileData.bufferData[o]):this[l.var]=l.create(r,35044,this._vectorTileData.bufferData[o]):console.error("Bad buffer type "+s)}}},t.prototype.detach=function(t){this.client&&this.status!==l.TileStatus.INVALID&&this.status!==l.TileStatus.INITIALIZED&&this.client.invoke("destructTileData",this.id),this.dispose(),e.prototype.detach.call(this,t)},t.prototype.doRender=function(e){if(this.visible&&this.status===l.TileStatus.READY){var t=e.context,r=e.renderer;if(t&&r){var i=e.drawphase;this._symbolUpdateData&&this._updateSymbolData(e),t.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var n=this.styleLayers,o=void 0!==e.layerOpacity?e.layerOpacity:1;if(0!==o){var a=this._renderBuckets.length;if(0===i)for(var s=a-1;s>=0;s--){1!==(u=this._renderBuckets[s]).type&&0!==u.type||!u.hasData()||r.renderBucket(t,u,e.displayLevel,e.requiredLevel,i,this,n.layers[u.layerID],o)}else for(s=0;s<a;s++){var u;(u=this._renderBuckets[s]).hasData()&&r.renderBucket(t,u,e.displayLevel,e.requiredLevel,i,this,n.layers[u.layerID],o)}}}}},t.prototype._updateSymbolData=function(e){if(!this._symbolUpdateData.bucketDataInfo)return!0;var t=new Uint32Array(this._symbolUpdateData.bucketDataInfo),r=t.length;if(0===r)return this._symbolUpdateData=null,!0;if(this.status!==l.TileStatus.READY)return this.requestRender(),!1;for(var i=e.context,n=new Uint32Array(this._symbolUpdateData.bufferDataInfo),o=n.length,a=0,s=0;s<o;s+=2,a++)switch(n[s]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null),this.iconVertexBuffer=p.createVertex(i,35044,this._symbolUpdateData.bufferData[a]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null),this.iconDDVertexBuffer=p.createVertex(i,35044,this._symbolUpdateData.bufferData[a]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null),this.iconIndexBuffer=p.createIndex(i,35044,this._symbolUpdateData.bufferData[a]);break;case 13:this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null),this.textVertexBuffer=p.createVertex(i,35044,this._symbolUpdateData.bufferData[a]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null),this.textDDVertexBuffer=p.createVertex(i,35044,this._symbolUpdateData.bufferData[a]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=p.createIndex(i,35044,this._symbolUpdateData.bufferData[a])}for(var u=this._renderBuckets.length,d=0;d<u;d++)if(this._renderBuckets[d]instanceof c.SymbolRenderBucket){var f=this._renderBuckets[d];f.markerPerPageElementsMap.clear(),f.glyphPerPageElementsMap.clear()}for(var h,y,m=0;m<r;){var g=t[m];y=-1;var v=this._renderBuckets.length;for(d=0;d<v;d++)if(this._renderBuckets[d].layerID===g){y=d;break}(h=this._renderBuckets[y])||((h=new c.SymbolRenderBucket).layerID=g,h.isSDF=0!==t[m+2],this._renderBuckets.push(h));var _=m+3,b=t[_];if(_++,b>0)for(var x=void 0,w=void 0,S=void 0,M=0;M<b;M++)x=t[_],w=t[_+1],S=t[_+2],h.markerPerPageElementsMap.set(x,[w,S]),_+=3;var I=_,D=t[I];if(I++,D>0)for(x=void 0,w=void 0,S=void 0,M=0;M<D;M++)x=t[I],w=t[I+1],S=t[I+2],h.glyphPerPageElementsMap.set(x,[w,S]),I+=3;m+=5+3*b+3*D}return this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null),this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null),this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null),this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null),this._symbolUpdateData=null,!0},t.pool=new i(t),t.bufferToObject=t._createBufferToObject(),t}(s)}.apply(null,i))||(e.exports=n)},1462:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1463),r(1464)],void 0===(n=function(e,t,r,i){function n(e){return i(e)}function o(e,t){for(var r=t-1;r>=0;r--){var i=e[r];if("whitespace"!==i.type&&"block-comment"!==i.type){if("keyword"!==i.type)break;if("attribute"===i.data||"in"===i.data)return!0}}return!1}function a(e,t,r,i){i=i||r;for(var n=0,o=e;n<o.length;n++){var s=o[n];if("ident"===s.type&&s.data===r)return i in t?t[i]++:t[i]=0,a(e,t,i+"_"+t[i],i)}return r}function s(e,t,r,i){void 0===i&&(i="lowp"),function(e,t,r){function i(e,t){for(var r=t;r<e.length;r++){var i=e[r];if("operator"===i.type&&";"===i.data)return r}return null}void 0===r&&(r="afterVersion");var n={data:"\n",type:"whitespace"},o=function(t){return t<e.length&&/[^\r\n]$/.test(e[t].data)},a=function(e){for(var t=-1,n=0,o=-1,a=0;a<e.length;a++){var s=e[a];if("preprocessor"===s.type&&(s.data.match(/\#(if|ifdef|ifndef)\s+.+/)?++n:s.data.match(/\#endif\s*.*/)&&--n),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===s.type&&/^#version/.test(s.data)&&(o=Math.max(o,a)),"afterPrecision"===r&&"keyword"===s.type&&"precision"===s.data){var l=i(e,a);if(null===l)throw new Error("precision statement not followed by any semicolons!");o=Math.max(o,l)}t<o&&0===n&&(t=a)}return t+1}(e);o(a-1)&&e.splice(a++,0,n);for(var s=0,l=t;s<l.length;s++){var u=l[s];e.splice(a++,0,u)}o(a-1)&&o(a)&&e.splice(a,0,n)}(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:i},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}Object.defineProperty(t,"__esModule",{value:!0});var l=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];t.transpileShader=function(e,t){var i=n(e);if("300 es"===function(e,t,r){void 0===t&&(t="100"),void 0===r&&(r="300 es");for(var i=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,n=0,o=e;n<o.length;n++){var a=o[n];if("preprocessor"===a.type){var s=i.exec(a.data);if(s){var l=s[1].replace(/\s\s+/g," ");if(l===r)return l;if(l===t)return a.data="#version "+r,t;throw new Error("unknown glsl version: "+l)}}}return e.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}(i,"100","300 es"))throw new Error("shader is already glsl 300 es");for(var u=null,c=null,p={},d={},f=0;f<i.length;++f)switch((h=i[f]).type){case"keyword":"vertex"===t&&"attribute"===h.data?h.data="in":"varying"===h.data&&(h.data="vertex"===t?"out":"in");break;case"builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(h.data.trim())&&(h.data=h.data.replace(/(2D|Cube|EXT)/g,"")),"fragment"===t&&"gl_FragColor"===h.data?(u||s(i,u=a(i,p,"fragColor"),"vec4"),h.data=u):"fragment"===t&&"gl_FragDepthEXT"===h.data&&(c||(c=a(i,p,"gl_FragDepth")),h.data=c);break;case"ident":if(r.indexOf(h.data)>=0){if("vertex"===t&&o(i,f))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");h.data in d||(d[h.data]=a(i,p,h.data)),h.data=d[h.data]}}for(f=i.length-1;f>=0;--f){var h;if("preprocessor"===(h=i[f]).type){var y=h.data.match(/\#extension\s+(.*)\:/);if(y&&y[1]&&l.indexOf(y[1].trim())>=0){var m=i[f+1];i.splice(f,m&&"whitespace"===m.type?2:1)}var g=h.data.match(/\#ifdef\s+(.*)/);g&&g[1]&&l.indexOf(g[1].trim())>=0&&(h.data="#if 1");var v=h.data.match(/\#ifndef\s+(.*)/);v&&v[1]&&l.indexOf(v[1].trim())>=0&&(h.data="#if 0")}}return function(e){return e.map(function(e){return"eof"!==e.type?e.data:""}).join("")}(i)}}.apply(null,i))||(e.exports=n)},1463:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]}.apply(null,i))||(e.exports=n)},1464:function(e,t,r){var i,n;i=[r(1465)],void 0===(n=function(e){return function(t){var r=e(),i=[];return(i=i.concat(r(t))).concat(r(null))}}.apply(null,i))||(e.exports=n)},1465:function(e,t,r){var i,n;i=[r(1466),r(1467),r(1468)],void 0===(n=function(e,t,r){var i=999,n=9999,o=0,a=1,s=2,l=3,u=4,c=5,p=6,d=7,f=8,h=9,y=10,m=11,g=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];return function(){function v(e){e.length&&O.push({type:g[A],data:e,position:P,line:F,column:E})}function _(){return"\r"!==S&&"\n"!==S||"\\"===M?(j.push(S),M=S,D+1):(v(j.join("")),A=i,D)}function b(){if("."===M&&/\d/.test(S))return A=c,D;if("/"===M&&"*"===S)return A=o,D;if("/"===M&&"/"===S)return A=a,D;if("."===S&&j.length){for(;x(j););return A=c,D}if(";"===S||")"===S||"("===S){if(j.length)for(;x(j););return v(S),A=i,D+1}var e=2===j.length&&"="!==S;if(/[\w_\d\s]/.test(S)||e){for(;x(j););return A=i,D}return j.push(S),M=S,D+1}function x(e){for(var r,i,n=0;;){if(r=t.indexOf(e.slice(0,e.length+n).join("")),i=t[r],-1===r){if(n--+e.length>0)continue;i=e.slice(0,1).join("")}return v(i),P+=i.length,(j=j.slice(i.length)).length}}function w(){if(/[^\d\w_]/.test(S)){var t=j.join("");return A=e.indexOf(t)>-1?f:r.indexOf(t)>-1?d:p,v(j.join("")),A=i,D}return j.push(S),M=S,D+1}var S,M,I,D=0,T=0,A=i,j=[],O=[],F=1,E=0,P=0,k=!1,C=!1,V="";return function(e){return O=[],null!==e?function(e){D=0,I=(V+=e).length;for(var t;S=V[D],D<I;){switch(t=D,A){case o:D="/"===S&&"*"===M?(j.push(S),v(j.join("")),A=i,D+1):(j.push(S),M=S,D+1);break;case a:case s:D=_();break;case l:D=b();break;case u:D="."===S?(j.push(S),A=c,M=S,D+1):/[eE]/.test(S)?(j.push(S),A=c,M=S,D+1):"x"===S&&1===j.length&&"0"===j[0]?(A=m,j.push(S),M=S,D+1):/[^\d]/.test(S)?(v(j.join("")),A=i,D):(j.push(S),M=S,D+1);break;case m:D=/[^a-fA-F0-9]/.test(S)?(v(j.join("")),A=i,D):(j.push(S),M=S,D+1);break;case c:"f"===S&&(j.push(S),M=S,D+=1),D=/[eE]/.test(S)?(j.push(S),M=S,D+1):"-"===S&&/[eE]/.test(M)?(j.push(S),M=S,D+1):/[^\d]/.test(S)?(v(j.join("")),A=i,D):(j.push(S),M=S,D+1);break;case n:D=w();break;case h:D=/[^\s]/g.test(S)?(v(j.join("")),A=i,D):(j.push(S),M=S,D+1);break;case i:j=j.length?[]:j,D="/"===M&&"*"===S?(P=T+D-1,A=o,M=S,D+1):"/"===M&&"/"===S?(P=T+D-1,A=a,M=S,D+1):"#"===S?(A=s,P=T+D,D):/\s/.test(S)?(A=h,P=T+D,D):(k=/\d/.test(S),C=/[^\w_]/.test(S),P=T+D,A=k?u:C?l:n,D)}if(t!==D)switch(V[t]){case"\n":E=0,++F;break;default:++E}}return T+=D,V=V.slice(D),O}(e.replace?e.replace(/\r\n/g,"\n"):e):(j.length&&v(j.join("")),A=y,v("(eof)"),O)}}}.apply(null,i))||(e.exports=n)},1466:function(e,t,r){var i;void 0===(i=function(){"use strict";return["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]}.apply(null,[]))||(e.exports=i)},1467:function(e,t,r){var i;void 0===(i=function(){return["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]}.apply(null,[]))||(e.exports=i)},1468:function(e,t,r){var i;void 0===(i=function(){"use strict";return["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]}.apply(null,[]))||(e.exports=i)},1557:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(380),r(435),r(350),r(353),r(1100),r(339),r(446),r(437),r(441),r(616),r(1558),r(1559),r(1560),r(1561),r(1562),r(1430),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f,h,y,m,g,v){var _=new a(10),b=new Map;return function(){function t(e,t,r,i,n){void 0===i&&(i=!1),this.devicePixelRatio=r,this.allowUpdates=i,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null,this._tileIndex=null,this._updateQueue=new Map,this._ongoingRequests=new Map,this._vectorTileLayer=e,this._styleRepository=e.styleRepository,this._requestUpdate=t}return t.prototype.destroy=function(){this.stop(),this._vectorTileLayer=this._requestUpdate=this._styleRepository=null,this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null),this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)},Object.defineProperty(t.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0}),t.prototype.start=function(){var t=this;this.stop();var n=this._styleRepository,a=new y(n.sprite,this.devicePixelRatio);a.devicePixelRatio=this.devicePixelRatio;var s=a.load().then(function(){t._spriteMosaic=new h(1024,1024,250),t._spriteMosaic.setSpriteSource(a),o("stable-symbol-rendering")&&t._spriteMosaic.preloadSpriteItems()}),c=new f(n.glyphs);this._glyphMosaic=new d(1024,1024,c);var p=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),m=u.open(l.getAbsMid("./WorkerTileHandler",e,v),{client:this}).then(function(e){t._connection=e}),g=new r(function(e){s.isFulfilled()||s.cancel(),p.isFulfilled()||p.cancel(),m.isFulfilled()||m.cancel()});return i([s,p,m]).then(function(e){i(t._connection.broadcast("setLayers",n.styleJSON)).then(function(){g.resolve()})}),this._broadcastPromise=g.promise,this._broadcastPromise},t.prototype.stop=function(){this._broadcastPromise&&!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel(),this._updateQueue.forEach(function(e){return e.cancel()}),this._ongoingRequests.forEach(function(e){return e.cancel()}),this._connection&&(this._connection.close(),this._connection=null)},t.prototype.updateTile=function(e,t){var r=this;if(!this.allowUpdates)return s.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return s.reject(new Error("no connection"));var i=Math.round(p.degToByte(t.state.rotation));if(e.rotation===i)return s.resolve(null);var n,o=e.key;return this._updateQueue.has(o.id)&&(n=this._updateQueue.get(o.id)).cancel(),e.rotation=i,n=this._connection.invoke("update",{key:e.id,rotation:i},null,{client:e.client}).then(function(t){return e.updateSymbolData(t),t}).always(function(){r._updateQueue.delete(o.id)}),this._updateQueue.set(e.id,n),n},t.prototype.getVectorTile=function(e,t,r,i){var n=this;void 0===i&&(i=0);var o=new c(e,t,r,0);return this.getRefKey(o).then(function(e){var t=new g(o,e,n._vectorTileLayer.tileInfo,n._styleRepository,0);return e?n.getTileData(t.key,0).then(function(e){return t.setData(e.tileData,e.client),t}):(t.setData(null,null),t)})},t.prototype.getTileData=function(e,t){var r=this;return this._broadcastPromise.isFulfilled()&&this._connection?this.getRefKey(e).then(function(i){if(!i)return s.resolve(null);var n=Math.round(p.degToByte(t));return r._getTileData(r._connection,e,i,n).then(function(e){return e&&e.tileData?e:s.reject("No data")})}):s.reject(new Error("no connection"))},t.prototype.getRefKey=function(e){return this._tileIndex?this._tileIndex.dataKey(e):s.resolve(e)},t.prototype.getSprites=function(e){return this._spriteMosaic.getSpriteItems(e)},t.prototype.getGlyphs=function(e){return this._glyphMosaic.getGlyphItems(e.tileID,e.font,e.codePoints)},t.prototype.getStyleRepository=function(){return this._styleRepository},t.prototype.getTileIndex=function(){return this._tileIndex},t.prototype._getTileData=function(e,t,r,i){var n=this,o={client:null},a=this._ongoingRequests.get(t.id);if(a)return a;var l=this._vectorTileLayer.getTileUrl(r.level,r.row,r.col);return a=this._connection.invoke("getTile",{key:t.id,refKey:r.id,url:l,rotation:i,cacheTile:this.allowUpdates},null,o).then(function(e){return n._ongoingRequests.delete(t.id),{tileData:e,client:o.client}}).catch(function(e){return n._ongoingRequests.delete(t.id),n._connection.invoke("destructTileData",t.id,null,o),s.reject(e)}),this._ongoingRequests.set(t.id,a),a},t.prototype._fetchTileMap=function(e){var t=this;if(this._vectorTileLayer.capabilities.operations.supportsTileMap&&this._vectorTileLayer.tilemapCache)return this._tileIndex=new m(this._vectorTileLayer.tilemapCache),s.resolve();if(!e)return s.resolve();if(_.has(e))return this._tileIndex=_.use(e),s.resolve();if(b.has(e))return b.get(e).then(function(e){t._tileIndex=new m(e.data)});var r=n(e,{responseType:"json"});return r.then(function(r){t._tileIndex=new m(r.data),b.delete(e),_.insert(e,t._tileIndex)}),b.set(e,r),r},t}()}.apply(null,i))||(e.exports=n)},1558:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353),r(339),r(1107),r(1407),r(368)],void 0===(n=function(e,t,r,i,n,o,a){var s;return r("stable-symbol-rendering")&&(s=new Set),function(){function e(e,t,r){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,(e<=0||t<=0)&&console.error("Glyph mosaic width and height must be greater than zero!"),this.width=e,this.height=t,this._glyphSource=r,this._binPack=new o(e-4,t-4),this._glyphData.push(new Uint8Array(e*t)),this._dirties.push(!0),this._textures.push(void 0)}return e.prototype.getGlyphItems=function(e,t,a){for(var l=this,u=[],c=this._glyphSource,p=new Set,d=0,f=a;d<f.length;d++){var h=f[d],y=Math.floor(h*(1/256));p.add(y)}var m=[];return p.forEach(function(e){if(e<=256){var r=t+e;if(l._rangePromises.has(r))m.push(l._rangePromises.get(r));else{var i=c.getRange(t,e).always(function(){l._rangePromises.delete(r)});l._rangePromises.set(r,i),m.push(i)}}}),i.all(m).then(function(e){var i,d=l._glyphIndex[t];if(d||(d={},l._glyphIndex[t]=d),r("stable-symbol-rendering")){s.clear();for(var f=0,h=a;f<h.length;f++){var y=h[f];s.add(y)}var m=[];p.forEach(function(e){m.push(e)}),m.sort(),i=[];for(var g=0,v=m;g<v.length;g++)for(var _=v[g],b=0;b<256;++b)i.push(256*_+b)}else i=a;for(var x=0,w=i;x<w.length;x++){var S=d[y=w[x]];if(S)r("stable-symbol-rendering")&&!s.has(y)||(u[y]={rect:S.rect,metrics:S.metrics,page:S.page});else{var M=c.getGlyph(t,y);if(M&&M.metrics){var I=M.metrics,D=void 0;if(0===I.width)D=new n(0,0,0,0);else{var T=I.width+6,A=I.height+6,j=T%4?4-T%4:4,O=A%4?4-A%4:4;1===j&&(j=5),1===O&&(O=5),(D=l._binPack.allocate(T+j,A+O)).isEmpty&&(l._dirties[l._currentPage]||(l._glyphData[l._currentPage]=null),l._currentPage=l._glyphData.length,l._glyphData.push(new Uint8Array(l.width*l.height)),l._dirties.push(!0),l._textures.push(void 0),l._binPack=new o(l.width-4,l.height-4),D=l._binPack.allocate(T+j,A+O));var F=l._glyphData[l._currentPage],E=M.bitmap,P=void 0,k=void 0;if(E)for(var C=0;C<A;C++){P=T*C,k=l.width*(D.y+C+1)+D.x;for(var V=0;V<T;V++)F[k+V+1]=E[P+V]}}d[y]={rect:D,metrics:I,tileIDs:null,page:l._currentPage},r("stable-symbol-rendering")&&!s.has(y)||(u[y]={rect:D,metrics:I,page:l._currentPage}),l._dirties[l._currentPage]=!0}}}return u})},e.prototype.removeGlyphs=function(e){for(var t in this._glyphIndex){var r=this._glyphIndex[t];if(r){var i=void 0;for(var n in r)if((i=r[n]).tileIDs.delete(e),0===i.tileIDs.size){for(var o=this._glyphData[i.page],a=i.rect,s=void 0,l=void 0,u=0;u<a.height;u++)for(s=this.width*(a.y+u)+a.x,l=0;l<a.width;l++)o[s+l]=0;delete r[n],this._dirties[i.page]=!0}}}},e.prototype.bind=function(e,t,r,i){void 0===i&&(i=0),this._textures[r]||(this._textures[r]=new a(e,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var n=this._textures[r];n.setSamplingMode(t),this._dirties[r]&&n.setData(this._glyphData[r]),e.bindTexture(n,i),this._dirties[r]=!1},e.prototype.dispose=function(){this._binPack=null;for(var e=0,t=this._textures;e<t.length;e++){var r=t[e];r&&r.dispose()}this._textures.length=0},e}()}.apply(null,i))||(e.exports=n)},1559:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(350),r(593),r(339)],void 0===(n=function(e,t,r,i,n){var o=function(){function e(e){if(this._metrics=[],this._bitmaps=[],e)for(;e.next();)switch(e.tag()){case 1:for(var t=e.getMessage();t.next();)switch(t.tag()){case 3:for(var r=t.getMessage(),i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,l=void 0,u=void 0;r.next();)switch(r.tag()){case 1:i=r.getUInt32();break;case 2:n=r.getBytes();break;case 3:o=r.getUInt32();break;case 4:a=r.getUInt32();break;case 5:s=r.getSInt32();break;case 6:l=r.getSInt32();break;case 7:u=r.getUInt32();break;default:r.skip()}i&&(this._metrics[i]={width:o,height:a,left:s,top:l,advance:u},this._bitmaps[i]=n);break;default:t.skip()}break;default:e.skip()}}return e.prototype.getMetrics=function(e){return this._metrics[e]},e.prototype.getBitmap=function(e){return this._bitmaps[e]},e}(),a=function(){function e(){this._ranges=[]}return e.prototype.getRange=function(e){return this._ranges[e]},e.prototype.addRange=function(e,t){this._ranges[e]=t},e}();return function(){function e(e){this._glyphInfo={},this._baseURL=e}return e.prototype.getRange=function(e,t){var a=this._getFontStack(e);if(a.getRange(t))return n.resolve();var s=256*t,l=s+255,u=this._baseURL.replace("{fontstack}",e).replace("{range}",s+"-"+l);return r(u,{responseType:"array-buffer"}).then(function(e){a.addRange(t,new o(new i(new Uint8Array(e.data),new DataView(e.data))))}).catch(function(){a.addRange(t,new o)})},e.prototype.getGlyph=function(e,t){var r=this._getFontStack(e);if(r){var i=Math.floor(t/256);if(!(i>256)){var n=r.getRange(i);if(n)return{metrics:n.getMetrics(t),bitmap:n.getBitmap(t)}}}},e.prototype._getFontStack=function(e){var t=this._glyphInfo[e];return t||(t=this._glyphInfo[e]=new a),t},e}()}.apply(null,i))||(e.exports=n)},1560:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(616),r(1107),r(1407),r(368)],void 0===(n=function(e,t,r,i,n,o){return function(){function e(e,t,r){void 0===r&&(r=0),this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,(e<=0||t<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=e,this._pageHeight=t,r>0&&(this._maxItemSize=r),this._binPack=new n(e-4,t-4)}return e.prototype.getWidth=function(e){return e>=this._size.length?-1:this._size[e][0]},e.prototype.getHeight=function(e){return e>=this._size.length?-1:this._size[e][1]},e.prototype.setSpriteSource=function(e){if(this.dispose(),this.pixelRatio=e.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new n(this._pageWidth-4,this._pageHeight-4);var t=Math.floor(this._pageWidth),r=Math.floor(this._pageHeight),i=new Uint32Array(t*r);this._mosaicsData[0]=i,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=e},e.prototype.getSpriteItem=function(e,t){void 0===t&&(t=!1);var r=this._mosaicRects[e];if(r)return r;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;var i=this._sprites.getSpriteInfo(e);if(!i||!i.width||!i.height||i.width<0||i.height<0)return null;var n=i.width,o=i.height,a=this._allocateImage(n,o),s=a[0],l=a[1],u=a[2];return s.width<=0?null:(this._copy(s,i,l,u,t),r={rect:s,width:n,height:o,anchorX:0,anchorY:0,sdf:i.sdf,pixelRatio:i.pixelRatio,page:l},this._mosaicRects[e]=r,r)},e.prototype.preloadSpriteItems=function(){for(var e=0,t=this._sprites.spriteNames;e<t.length;e++){var r=t[e];this.getSpriteItem(r,!0)}},e.prototype.getSpriteItems=function(e){for(var t={},r=0,i=e;r<i.length;r++){var n=i[r];t[n]=this.getSpriteItem(n)}return t},e.prototype.getMosaicItemPosition=function(e,t){var r=this.getSpriteItem(e,t),i=r&&r.rect;if(!i)return null;i.width=r.width,i.height=r.height;var n=r.width,o=r.height;return{size:[r.width,r.height],tl:[(i.x+2)/this._size[r.page][0],(i.y+2)/this._size[r.page][1]],br:[(i.x+2+n)/this._size[r.page][0],(i.y+2+o)/this._size[r.page][1]],page:r.page}},e.prototype.bind=function(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0),this._textures[r]||(this._textures[r]=new o(e,{pixelFormat:6408,dataType:5121,width:this._size[r][0],height:this._size[r][1]},new Uint8Array(this._mosaicsData[r].buffer)));var n=this._textures[r];n.setSamplingMode(t),this._dirties[r]&&n.setData(new Uint8Array(this._mosaicsData[r].buffer)),e.bindTexture(n,i),this._dirties[r]=!1},e._copyBits=function(e,t,r,i,n,o,a,s,l,u,c){var p=i*t+r,d=s*o+a;if(c){d-=o;for(var f=-1;f<=u;p=((++f+u)%u+i)*t+r,d+=o)for(var h=-1;h<=l;h++)n[d+h]=e[p+(h+l)%l]}else for(f=0;f<u;f++){for(h=0;h<l;h++)n[d+h]=e[p+h];p+=t,d+=o}},e.prototype._copy=function(t,r,i,n,o,a){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(i>=this._mosaicsData.length)){var s=new Uint32Array(a?a.buffer:this._sprites.image.buffer),l=this._mosaicsData[i];l&&s||console.error("Source or target images are uninitialized!");var u=a?r.width:this._sprites.width;e._copyBits(s,u,r.x,r.y,l,n[0],t.x+2,t.y+2,r.width,r.height,o),this._dirties[i]=!0}},e.prototype._allocateImage=function(e,t){e+=2,t+=2;var o=Math.max(e,t);if(this._maxItemSize&&this._maxItemSize<o){var a=Math.pow(2,Math.ceil(r.log2(e))),s=Math.pow(2,Math.ceil(r.log2(t))),l=new i(0,0,e,t);return this._mosaicsData.push(new Uint32Array(a*s)),this._dirties.push(!0),this._size.push([a,s]),this._textures.push(void 0),[l,this._mosaicsData.length-1,[a,s]]}var u=e%4?4-e%4:4,c=t%4?4-t%4:4;1===u&&(u=5),1===c&&(c=5);var p=this._binPack.allocate(e+u,t+c);return p.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new n(this._pageWidth-4,this._pageHeight-4),this._allocateImage(e,t)):[p,this._currentPage,[this._pageWidth,this._pageHeight]]},e.prototype.dispose=function(){this._binPack=null,this._mosaicRects={};for(var e=0,t=this._textures;e<t.length;e++){var r=t[e];r&&r.dispose()}this._textures.length=0},e}()}.apply(null,i))||(e.exports=n)},1561:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(380),r(620),r(350),r(339),r(349)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(){function e(e,t){this.baseURL=e,this.devicePixelRatio=t,this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded"}return Object.defineProperty(e.prototype,"spriteNames",{get:function(){var e=[];for(var t in this._spritesData)e.push(t);return e.sort(),e},enumerable:!0,configurable:!0}),e.prototype.getSpriteInfo=function(e){return this._spritesData[e]},e.prototype.load=function(){var e=this;return this.loadStatus="loading",this.baseURL?this._loadSprites().then(function(){return e.loadStatus="loaded",e}).catch(function(t){return e.loadStatus="failed",e}):s.resolve(this)},e.prototype._loadSprites=function(){var e=this;this._isRetina=this.devicePixelRatio>1.15;var t=this.baseURL,r=this._isRetina?"@2x":"";return a(t+r+".json",{responseType:"json"}).then(function(i){var a=Object.keys(i.data);if(!a||0===a.length||1===a.length&&"_ssl"===a[0])return s.resolve(null);e._spritesData=i.data;var u=new n,c=new Image;c.crossOrigin="anonymous",c.onload=function(){c.onload=null,e.width=c.width,e.height=c.height;var t=document.createElement("canvas");t.width=c.width,t.height=c.height;var r=t.getContext("2d");r.drawImage(c,0,0,c.width,c.height);for(var i,n=r.getImageData(0,0,c.width,c.height),o=new Uint8Array(n.data),a=0;a<o.length;a+=4)i=o[a+3]/255,o[a]=o[a]*i,o[a+1]=o[a+1]*i,o[a+2]=o[a+2]*i;e.image=o,u.resolve()};var p=""+t+r+".png";if(o.id){var d=o.id.findCredential(p);d&&d.token&&(p+="?token="+d.token)}return c.src=l.addProxy(p),u})},e}()}.apply(null,i))||(e.exports=n)},1562:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339),r(732),r(441)],void 0===(n=function(e,t,r,i,n){return function(){function e(e){if(e instanceof i)this._tilemapCache=e;else{if(!(e&&"index"in e))throw new Error("Invalid tilemap!");this._tilemap=e.index}}return e.prototype.dataKey=function(e){if(this._tilemapCache){var t=e.level,r=e.row,i=e.col,o=new n(e);return this._tilemapCache.fetchAvailabilityUpsample(t,r,i,o).then(function(){return o}).catch(function(e){if(e&&"cancel"===e.dojoType)throw e;return o.level=t,o.row=r,o.col=i,o})}return this._getIndexedDataKey(e)},e.prototype.forEach=function(e,t,r,i,n){this._callback=n,this._maxLevel=t+e,this._forEach(this._tilemap,t,r,i)},e.prototype._forEach=function(e,t,r,i){0!==e&&(this._callback(t,r,i),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*r,2*i),this._forEach(e[1],t+1,2*r,2*i+1),this._forEach(e[2],t+1,2*r+1,2*i),this._forEach(e[3],t+1,2*r+1,2*i+1)))},e.prototype._getIndexedDataKey=function(e){var t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return r.resolve(null);for(var i=e;0!==i.level;)i=new n(i.level-1,i.row>>1,i.col>>1,i.world),t.push(i);var o,a,s=this._tilemap,l=t.pop();if(1===s)return r.resolve(l);for(;t.length;)if(a=(1&(o=t.pop()).col)+((1&o.row)<<1),s){if(0===s[a]){l=null;break}if(1===s[a]){l=o;break}l=o,s=s[a]}return r.resolve(l)},e}()}.apply(null,i))||(e.exports=n)},1563:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e){this.type=e}}();t.RenderBucket=n;var o=function(e){function t(){var t=e.call(this,2)||this;return t.triangleElementStart=0,t.triangleElementCount=0,t}return r(t,e),t.prototype.hasData=function(){return this.triangleElementCount>0},t}(n);t.LineRenderBucket=o;var a=function(e){function t(){var t=e.call(this,1)||this;return t.triangleElementStart=0,t.triangleElementCount=0,t.outlineElementStart=0,t.outlineElementCount=0,t}return r(t,e),t.prototype.hasData=function(){return this.triangleElementCount>0||this.outlineElementCount>0},t}(n);t.FillRenderBucket=a;var s=function(e){function t(){var t=e.call(this,3)||this;return t.markerPerPageElementsMap=new Map,t.glyphPerPageElementsMap=new Map,t.isSDF=!1,t}return r(t,e),t.prototype.hasData=function(){return this.markerPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0},t}(n);t.SymbolRenderBucket=s;var l=function(e){function t(){var t=e.call(this,4)||this;return t.triangleElementStart=0,t.triangleElementCount=0,t}return r(t,e),t.prototype.hasData=function(){return this.triangleElementCount>0},t}(n);t.CircleRenderBucket=l;var u=function(e){function t(){return e.call(this,0)||this}return r(t,e),t.prototype.hasData=function(){return!0},t}(n);t.BackgroundRenderBucket=u}.apply(null,i))||(e.exports=n)},1564:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(745),r(616),r(1565),r(1566),r(1567),r(1568),r(1569),r(1570),r(1573),r(1574),r(372)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d){return function(){function e(){this._extrudeRotateVector=new Float32Array([0,0,1]),this._extrudeScaleVector=new Float32Array([1,1,1]),this._state={rotation:0,width:0,height:0},this._cachedWidth=0,this._cachedHeight=0,this._cachedRotation=0,this._programCache=null}return e.prototype.initialize=function(e,t,r){void 0===r&&(r=!0),this._SpriteMosaic=e,this._glyphMosaic=t,this._ignoreSpeed=!r,this._fadeRecorder=new a.FadeRecorder(300),this._extrudeMatrix=new Float32Array(16),this._extrudeNoRotationMatrix=new Float32Array(16),this._backgroundColor=new Float32Array([1,0,0,1])},e.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null),this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null),this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null),this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null),this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=null),this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null),this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null),this._programCache&&this._programCache.dispose()},e.prototype.initializeProgramCache=function(e){if(null===this._programCache){var t=new p.default;t.initialize(e),this._backgroundRenderer=new n(t),this._lineRenderer=new l(t),this._fillRenderer=new s(t),this._symbolRenderer=new u(t),this._circleRenderer=new o(t),this._tileInfoRenderer=new c(t),this._programCache=t}},e.prototype.setStateParams=function(e,t,n){this._fadeRecorder.recordLevel(n),this._state=e,this._state.width===this._cachedWidth&&this._state.height===this._cachedHeight&&this._state.rotation===this._cachedRotation||(this._extrudeScaleVector[0]=2/e.width,this._extrudeScaleVector[1]=-2/e.height,r.identity(this._extrudeMatrix),r.rotate(this._extrudeMatrix,this._extrudeMatrix,-e.rotation*i.C_DEG_TO_RAD,this._extrudeRotateVector),r.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),r.transpose(this._extrudeMatrix,this._extrudeMatrix),r.identity(this._extrudeNoRotationMatrix),r.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),r.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation)},e.prototype.drawClippingMasks=function(e,t){if(0!==t.length){e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(7680,7680,7681),e.setStencilWriteMask(255),e.setClearStencil(0);var r=e.gl;e.clear(r.STENCIL_BUFFER_BIT);for(var i=0,n=t;i<n.length;i++){var o=n[i];o.attached&&o.visible&&(e.setStencilFunctionSeparate(1032,519,o.stencilData.reference,o.stencilData.mask),this._backgroundRenderer.renderSolidColor(e,{u_matrix:o.tileTransform.transform,u_normalized_origin:o.tileTransform.displayCoord,u_coord_range:o.coordRange,u_depth:0,u_color:this._backgroundColor}))}e.setColorMask(!0,!0,!0,!0),e.setBlendingEnabled(!0)}},e.prototype.renderDebug=function(e,t){var r=t.key;this._backgroundColor.set([r.col%2,r.row%2,r.col%2==0&&r.row%2==0?1:0,.5]),this._backgroundRenderer.renderSolidColor(e,{u_matrix:t.tileTransform.transform,u_normalized_origin:t.tileTransform.displayCoord,u_coord_range:t.coordRange,u_depth:0,u_color:this._backgroundColor})},e.prototype.renderBucket=function(e,t,r,i,n,o,a,s){if(!(void 0!==a.minzoom&&a.minzoom>r+1e-6||void 0!==a.maxzoom&&a.maxzoom<=r-1e-6))switch(t.type){case 0:2!==n&&this._renderBackground(e,t,r,n,o,a,s);break;case 1:2!==n&&this._renderFill(e,t,r,n,o,a,s);break;case 2:1!==n&&3!==n||this._renderLine(e,t,r,n,o,a,s);break;case 3:2!==n&&3!==n||this._renderSymbol(e,t,r,n,i,o,a,s);break;case 4:2!==n&&3!==n||this._renderCircle(e,t,r,n,i,o,a,s)}},e.prototype.renderTileInfo=function(e,t){this._tileInfoRenderer.render(e,t)},e.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()},e.prototype.hitTest=function(e,t,r,i,n,o,a){var s=[0,0],l=[0,0],u=e.state;u.toMap(s,[0,0]),u.toMap(l,[o,o]);var c=i.filter(function(e){return!(s[0]>e.bounds[2]||l[0]<e.bounds[0]||s[1]<e.bounds[3]||l[1]>e.bounds[1])});if(0===c.length)return[];c.sort(function(e,t){return e.key.level-t.key.level});for(var p=c.length,f=1;f<=p;f++){(_=c[f-1]).attached&&(_.stencilData.reference=f,_.stencilData.mask=255)}a(u,n,c);var h=e.context;this._hittestFBO||(this._hittestFBO=d.create(h,{colorTarget:0,depthStencilTarget:3,width:o,height:o}));var y=h.getViewport(),m=h.getBoundFramebufferObject();h.bindFramebuffer(this._hittestFBO),h.setViewport(0,0,o,o);var g=h.gl;h.setDepthWriteEnabled(!0),h.setStencilWriteMask(255),h.setClearColor(1,1,1,1),h.setClearDepth(1),h.setClearStencil(0),h.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT|g.STENCIL_BUFFER_BIT),h.setDepthWriteEnabled(!1),this.drawClippingMasks(h,c),h.setBlendingEnabled(!1),h.setStencilWriteMask(0),h.setStencilOp(7680,7680,7681),h.setDepthFunction(515),h.setDepthTestEnabled(!0),h.setDepthWriteEnabled(!0),h.setStencilTestEnabled(!0);for(var v=0;v<p;v++){var _;(_=c[v]).attached&&_.doRender(e)}h.setStencilTestEnabled(!1),h.setDepthTestEnabled(!1),this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*o*o),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer)),this._hittestFBO.readPixels(0,0,o,o,6408,5121,this._readbackBuffer);var b=new Set,x=o*o,w=Math.round(x/2),S=this._readbackBuffer32[w];4294967295!==S&&b.add(S);for(f=0;f<x;f++)4294967295!==(S=this._readbackBuffer32[f])&&b.add(S);h.bindFramebuffer(m),h.setViewport(y.x,y.y,y.width,y.height);var M=[];return b.forEach(function(e){M.push(e)}),M},e.prototype._renderBackground=function(e,t,r,i,n,o,a){this._backgroundRenderer.render(e,t,r,i,n,o,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,a)},e.prototype._renderLine=function(e,t,r,i,n,o,a){this._lineRenderer.render(e,t,r,i,this._state,n,o,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,a)},e.prototype._renderFill=function(e,t,r,i,n,o,a){this._fillRenderer.render(e,t,r,this._state.rotation,i,n,o,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,a)},e.prototype._renderCircle=function(e,t,r,i,n,o,a,s){var l=!0;n===o.key.level&&(l=!1),e.setStencilTestEnabled(l),this._circleRenderer.render(e,t,r,i,this._state.rotation,o,a,this._extrudeMatrix,s)},e.prototype._renderSymbol=function(e,t,r,i,n,o,a,s){var l=!0;n===o.key.level&&(l=!1),e.setStencilTestEnabled(l),this._symbolRenderer.render(e,t,r,i,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),o,a,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,s)},e}()}.apply(null,i))||(e.exports=n)},1565:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1408),r(798),r(1116),r(899),r(382),r(376)],void 0===(n=function(e,t,r,i,n,o,a,s){return function(){function e(e){this._patternMatrix=r.create(),this._color=i.create(),this._solidrendererInitialized=!1,this._rendererInitialized=!1,this._programOptions={id:!1,pattern:!1},this._programCache=e,this._color.set([1,0,0,1])}return e.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null),this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)},e.prototype.renderSolidColor=function(e,t){this._solidrendererInitialized||this._initializeSolidRenderer(e),e.bindVAO(this._solidVertexArrayObject);var r=this._programOptions;r.id=!1,r.pattern=!1;var i=this._programCache.getProgram(0,0,r);e.bindProgram(i),i.setUniformMatrix4fv("u_transformMatrix",t.u_matrix),i.setUniform2fv("u_normalized_origin",t.u_normalized_origin),i.setUniform1f("u_coord_range",t.u_coord_range||4096),i.setUniform1f("u_depth",t.u_depth||0),i.setUniform4fv("u_color",t.u_color||this._color),e.drawArrays(5,0,4),e.bindVAO()},e.prototype.render=function(e,t,i,n,a,s,l,u,c){this._rendererInitialized||this._initialize(e);var p=s.getPaintValue("background-color",i),d=c*s.getPaintValue("background-opacity",i),f=s.getPaintValue("background-pattern",i),h=void 0!==f,y=p[3]*d,m=h||y<1;if((!m||0!==n)&&(m||1!==n)){var g=3===n,v=(g?1:0)<<1|(h?1:0),_=this._programOptions;_.id=g,_.pattern=h;var b=this._programCache.getProgram(0,v,_);if(e.bindVAO(this._vertexArrayObject),e.bindProgram(b),b.setUniform1f("u_coord_range",a.coordRange),b.setUniform1f("u_depth",s.z||0),b.setUniformMatrix4fv("u_transformMatrix",a.tileTransform.transform),b.setUniform2fv("u_normalized_origin",a.tileTransform.displayCoord),h){var x=l.getMosaicItemPosition(f,!0);if(!x)return;var w=512*Math.pow(2,Math.floor(i)-a.key.level)*u;r.identity(this._patternMatrix);var S=w/x.size[0],M=w/x.size[1];this._patternMatrix[0]=S,this._patternMatrix[4]=M,l.bind(e,9729,0),b.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),b.setUniform1f("u_opacity",d),b.setUniform2f("u_pattern_tl",x.tl[0],x.tl[1]),b.setUniform2f("u_pattern_br",x.br[0],x.br[1]),b.setUniform1i("u_texture",0)}else this._color[0]=y*p[0],this._color[1]=y*p[1],this._color[2]=y*p[2],this._color[3]=y,b.setUniform4fv("u_color",this._color);if(g){var I=o.int32To4Bytes(t.layerID);b.setUniform4f("u_id",I[0],I[1],I[2],I[3])}e.drawArrays(5,0,4),e.bindVAO()}},e.prototype._initializeSolidRenderer=function(e){if(this._solidrendererInitialized)return!0;var t=new Int8Array([0,0,1,0,0,1,1,1]),r=a.createVertex(e,35044,t),i=new s(e,this._programCache.getProgramAttributes(0),{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:r});return this._solidVertexArrayObject=i,this._solidrendererInitialized=!0,!0},e.prototype._initialize=function(e){if(this._rendererInitialized)return!0;var t=[];t.push(n.i1616to32(0,0)),t.push(n.i1616to32(1,0)),t.push(n.i1616to32(0,1)),t.push(n.i1616to32(1,1));var r=new Uint32Array(t),i=a.createVertex(e,35044,r),o=new s(e,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:i});return this._vertexArrayObject=o,this._rendererInitialized=!0,!0},e}()}.apply(null,i))||(e.exports=n)},1566:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(745),r(881),r(798),r(616),r(899),r(376)],void 0===(n=function(e,t,r,i,n,o,a,s){return function(){function e(e){this._initialized=!1,this._programOptions={id:!1},this._programCache=e,this._viewProjMat=r.create(),this._offsetVector=i.create(),this._color=n.create(),this._strokeColor=n.create()}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,i,n,s,l,u,c,p){if(0!==t.triangleElementCount){this._initialized||this._initialize(e);var d=u.hasDataDrivenRadius?1:u.getPaintValue("circle-radius",i),f=u.hasDataDrivenColor?[1,1,1,1]:u.getPaintValue("circle-color",i),h=u.hasDataDrivenOpacity?1:u.getPaintValue("circle-opacity",i),y=u.hasDataDrivenStrokeWidth?1:u.getPaintValue("circle-stroke-width",i),m=u.hasDataDrivenStrokeColor?[1,1,1,1]:u.getPaintValue("circle-stroke-color",i),g=u.hasDataDrivenStrokeOpacity?1:u.getPaintValue("circle-stroke-opacity",i),v=u.hasDataDrivenBlur?0:u.getPaintValue("circle-blur",i),_=h*f[3]*p;this._color[0]=_*f[0],this._color[1]=_*f[1],this._color[2]=_*f[2],this._color[3]=_,_=g*m[3]*p,this._strokeColor[0]=_*m[0],this._strokeColor[1]=_*m[1],this._strokeColor[2]=_*m[2],this._strokeColor[3]=_;var b=l.tileTransform.transform,x=u.getPaintValue("circle-translate",i);if(0!==x[0]||0!==x[1]){r.copy(this._viewProjMat,l.tileTransform.transform);var w=x[0],S=x[1],M=0,I=0,D=l.coordRange/512,T=(1<<l.key.level)/Math.pow(2,i)*D;if(1===u.getPaintValue("circle-translate-anchor",i)){var A=-o.C_DEG_TO_RAD*s,j=Math.sin(A),O=Math.cos(A);M=T*(w*O-S*j),I=T*(w*j+S*O)}else M=T*w,I=T*S;this._offsetVector[0]=M,this._offsetVector[1]=I,this._offsetVector[2]=0,r.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),b=this._viewProjMat}var F=this._getCircleVAO(e,l);if(F){e.bindVAO(F);var E=3===n,P=E?1:0,k=this._programOptions;k.id=E;var C=this._programCache.getProgram(5,P,k);if(e.bindProgram(C),C.setUniformMatrix4fv("u_transformMatrix",b),C.setUniformMatrix4fv("u_extrudeMatrix",c),C.setUniform2fv("u_normalized_origin",l.tileTransform.displayCoord),C.setUniform1f("u_depth",u.z),C.setUniform1f("u_radius",d),C.setUniform4fv("u_color",this._color),C.setUniform1f("u_blur",v),C.setUniform1f("u_stroke_width",y),C.setUniform4fv("u_stroke_color",this._strokeColor),C.setUniform1f("u_antialiasingWidth",1.2),E){var V=a.int32To4Bytes(t.layerID);C.setUniform4f("u_id",V[0],V[1],V[2],V[3])}e.drawElements(4,t.triangleElementCount,5125,12*t.triangleElementStart),e.bindVAO()}}},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getCircleVAO=function(e,t){if(t.circleVertexArrayObject)return t.circleVertexArrayObject;var r=t.circleVertexBuffer,i=t.circleIndexBuffer;return r&&i?(t.circleVertexArrayObject=new s(e,this._programCache.getProgramAttributes(5),this._vertexAttributes,{geometry:r},i),t.circleVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},1567:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(709)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t,r,i){this.fadeSpeed=e,this.minfadeLevel=t,this.maxfadeLevel=r,this.fadeChange=i}}();t.FadeProperties=i;var n=function(){function e(e){void 0===e&&(e=300),this._levelSnapshots=[],this._duration=e}return e.prototype.recordLevel=function(e){var t=r(),i=this._levelSnapshots;0===i.length&&(i.push({level:e,now:0}),i.push({level:e,now:0})),2!==i.length&&i[0].level===e||i.push({level:e,now:t})},e.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var e=this._duration,t=this._levelSnapshots,r=t.length,i=t[r-1],n=-1;r>n+1&&t[n+1].now+e<i.now;)n++;for(n<0&&(n=0);n<r;n++)if(t[n].level!==i.level)return!0;return!1},e.prototype.getFadeValues=function(e){void 0===e&&(e=!1);for(var t=this._duration,i=r(),n=this._levelSnapshots;n.length>3&&n[1].now+t<i;)n.shift();n[1].now+t<i&&(n[0].level=n[1].level);var o=n[0].level,a=n[n.length-1],s=a.level,l=Math.min(o,s),u=Math.max(o,s),c=(a.level-n[1].level)/((a.now-n[1].now)/t),p=(i-a.now)/t*c;return e?{fadeSpeed:0,minfadeLevel:l,maxfadeLevel:u,fadeChange:0}:{fadeSpeed:c,minfadeLevel:l,maxfadeLevel:u,fadeChange:p}},e}();t.FadeRecorder=n}.apply(null,i))||(e.exports=n)},1568:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1408),r(745),r(881),r(798),r(616),r(899),r(376)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(){function e(e){this._initialized=!1,this._fillProgramOptions={id:!1,dd:!1,pattern:!1},this._outlineProgramOptions={id:!1,dd:!1},this._programCache=e,this._viewProjMat=i.create(),this._offsetVector=n.create(),this._patternMatrix=r.create(),this._color=o.create(),this._outlineColor=o.create()}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,r,n,o,l,u,c,p,d,f){if(0!==t.triangleElementCount){this._initialized||this._initialize(e);var h=void 0!==u.getPaintValue("fill-pattern",r),y=u.hasDataDrivenColor?[1,1,1,1]:u.getPaintValue("fill-color",r),m=u.hasDataDrivenOpacity?1:u.getPaintValue("fill-opacity",r),g=m*y[3]*f;this._color[0]=g*y[0],this._color[1]=g*y[1],this._color[2]=g*y[2],this._color[3]=g;var v,_=3===o;_&&(v=s.int32To4Bytes(t.layerID));var b=l.tileTransform.transform,x=l.coordRange/512,w=u.getPaintValue("fill-translate",r);if(0!==w[0]||0!==w[1]){i.copy(this._viewProjMat,l.tileTransform.transform);var S=w[0],M=w[1],I=0,D=0,T=(1<<l.key.level)/Math.pow(2,r)*x;if(1===u.getPaintValue("fill-translate-anchor",r)){var A=-a.C_DEG_TO_RAD*n,j=Math.sin(A),O=Math.cos(A);I=T*(S*O-M*j),D=T*(S*j+M*O)}else I=T*S,D=T*M;this._offsetVector[0]=I,this._offsetVector[1]=D,this._offsetVector[2]=0,i.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),b=this._viewProjMat}if(this._drawFill(e,t,r,o,l,u,c,b,d,f,_,v),u.getPaintValue("fill-antialias",r)&&!h&&t.outlineElementCount>0&&(1===o||3===o)){var F=u.hasDataDrivenOutline;if(u.outlineUsesFillColor){if(1!==this._color[3])return;this._outlineColor[0]=this._color[0],this._outlineColor[1]=this._color[1],this._outlineColor[2]=this._color[2],this._outlineColor[3]=this._color[3]}else{var E=u.hasDataDrivenOutlineColor?[1,1,1,1]:u.getPaintValue("fill-outline-color",r),P=m*E[3]*f;this._outlineColor[0]=P*E[0],this._outlineColor[1]=P*E[1],this._outlineColor[2]=P*E[2],this._outlineColor[3]=P}var k=.75/d,C=this._getOutlineVAO(e,l,F);if(C){e.bindVAO(C);var V=(_?1:0)<<1|(F?1:0),R=this._outlineProgramOptions;R.id=_,R.dd=F;var L=this._programCache.getProgram(2,V,R);e.bindProgram(L),L.setUniformMatrix4fv("u_transformMatrix",b),L.setUniformMatrix4fv("u_extrudeMatrix",p),L.setUniform2fv("u_normalized_origin",l.tileTransform.displayCoord),L.setUniform1f("u_depth",u.z+1/65536),L.setUniform1f("u_outline_width",k),L.setUniform4fv("u_color",this._outlineColor),_&&L.setUniform4f("u_id",v[0],v[1],v[2],v[3]),e.drawElements(4,t.outlineElementCount,5125,12*t.outlineElementStart),e.bindVAO()}}}},e.prototype._initialize=function(e){return!!this._initialized||(this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]},this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:8,normalized:!1,divisor:0}]},this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]},this._initialized=!0,!0)},e.prototype._drawFill=function(e,t,i,n,o,a,s,l,u,c,p,d){var f=a.getPaintValue("fill-pattern",i),h=void 0!==f,y=a.hasDataDrivenOpacity?1:c*a.getPaintValue("fill-opacity",i),m=a.hasDataDrivenColor?[1,1,1,1]:a.getPaintValue("fill-color",i),g=y*m[3]*c;this._color[0]=g*m[0],this._color[1]=g*m[1],this._color[2]=g*m[2],this._color[3]=g;var v=a.hasDataDrivenFill,_=h||g<1||v;if((!_||0!==n)&&(_||1!==n)){var b=this._getFillVAO(e,o,v);if(b){e.bindVAO(b);var x=(p?1:0)<<2|(v?1:0)<<1|(h?1:0),w=this._fillProgramOptions;w.id=p,w.dd=v,w.pattern=h;var S=this._programCache.getProgram(1,x,w);if(e.bindProgram(S),h){var M=s.getMosaicItemPosition(f,!0);if(M){var I=o.coordRange/512/Math.pow(2,Math.round(i)-o.key.level)/u;r.identity(this._patternMatrix);var D=1/(M.size[0]*I),T=1/(M.size[1]*I);this._patternMatrix[0]=D,this._patternMatrix[4]=T,s.bind(e,9729,M.page,1),S.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),S.setUniform2f("u_pattern_tl",M.tl[0],M.tl[1]),S.setUniform2f("u_pattern_br",M.br[0],M.br[1]),S.setUniform1i("u_texture",1)}}S.setUniformMatrix4fv("u_transformMatrix",l),S.setUniform2fv("u_normalized_origin",o.tileTransform.displayCoord),S.setUniform1f("u_depth",a.z+1/65536),S.setUniform4fv("u_color",this._color),p&&S.setUniform4f("u_id",d[0],d[1],d[2],d[3]),e.drawElements(4,t.triangleElementCount,5125,12*t.triangleElementStart),e.bindVAO()}}},e.prototype._getFillVAO=function(e,t,r){if(r){if(t.fillDDVertexArrayObject)return t.fillDDVertexArrayObject;var i=t.fillDDVertexBuffer,n=t.fillIndexBuffer;return i&&n?(t.fillDDVertexArrayObject=new l(e,this._programCache.getProgramAttributes(1),this._fillVertexAttributesDD,{geometry:i},n),t.fillDDVertexArrayObject):null}if(t.fillVertexArrayObject)return t.fillVertexArrayObject;i=t.fillVertexBuffer,n=t.fillIndexBuffer;return i&&n?(t.fillVertexArrayObject=new l(e,this._programCache.getProgramAttributes(1),this._fillVertexAttributes,{geometry:i},n),t.fillVertexArrayObject):null},e.prototype._getOutlineVAO=function(e,t,r){if(r){if(t.outlineDDVertexArrayObject)return t.outlineDDVertexArrayObject;var i=t.outlineDDVertexBuffer,n=t.outlineIndexBuffer;return i&&n?(t.outlineDDVertexArrayObject=new l(e,this._programCache.getProgramAttributes(2),this._outlineVertexAttributesDD,{geometry:i},n),t.outlineDDVertexArrayObject):null}if(t.outlineVertexArrayObject)return t.outlineVertexArrayObject;i=t.outlineVertexBuffer,n=t.outlineIndexBuffer;return i&&n?(t.outlineVertexArrayObject=new l(e,this._programCache.getProgramAttributes(2),this._outlineVertexAttributes,{geometry:i},n),t.outlineVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},1569:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(745),r(888),r(881),r(798),r(616),r(899),r(376)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(){function e(e){this._initialized=!1,this._programOptions={id:!1,dd:!1,pattern:!1},this._programCache=e,this._viewProjMat=r.create(),this._offsetVector=n.create(),this._color=o.create(),this._dashArray=i.create()}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,i,n,o,l,u,c,p,d,f){if(0!==t.triangleElementCount){this._initialized||this._initialize(e);var h=l.tileTransform.transform,y=l.coordRange/512,m=u.getPaintValue("line-translate",i);if(0!==m[0]||0!==m[1]){r.copy(this._viewProjMat,l.tileTransform.transform);var g=m[0],v=m[1],_=0,b=0,x=(1<<l.key.level)/Math.pow(2,i)*y,w=o.rotation;if(1===u.getPaintValue("line-translate-anchor",i)){var S=-a.C_DEG_TO_RAD*w,M=Math.sin(S),I=Math.cos(S);_=x*(g*I-v*M),b=x*(g*M+v*I)}else _=x*g,b=x*v;this._offsetVector[0]=_,this._offsetVector[1]=b,this._offsetVector[2]=0,r.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),h=this._viewProjMat}var D=u.getPaintValue("line-pattern",i),T=void 0!==D,A=1/d,j=u.getPaintValue("line-blur",i),O=u.hasDataDrivenColor?[1,1,1,1]:u.getPaintValue("line-color",i),F=u.hasDataDrivenOpacity?1:u.getPaintValue("line-opacity",i),E=u.hasDataDrivenWidth?1:u.getPaintValue("line-width",i),P=F*O[3]*f;this._color[0]=P*O[0],this._color[1]=P*O[1],this._color[2]=P*O[2],this._color[3]=P;var k,C=u.hasDataDrivenLine,V=3===n;V&&(k=s.int32To4Bytes(t.layerID));var R=this._getLineVAO(e,l,C);if(R){e.bindVAO(R);var L=(V?1:0)<<2|(C?1:0)<<1|(T?1:0),U=this._programOptions;U.id=V,U.dd=C,U.pattern=T;var z=this._programCache.getProgram(3,L,U);if(e.bindProgram(z),z.setUniformMatrix4fv("u_transformMatrix",h),z.setUniformMatrix4fv("u_extrudeMatrix",p),z.setUniform2fv("u_normalized_origin",l.tileTransform.displayCoord),z.setUniform1f("u_depth",u.z),z.setUniform1f("u_blur",j),z.setUniform1f("u_antialiasing",A),z.setUniform4fv("u_color",this._color),z.setUniform1f("u_width",E),V&&z.setUniform4f("u_id",k[0],k[1],k[2],k[3]),T){var N=c.getMosaicItemPosition(D,!0);N&&(c.bind(e,9729,N.page,1),z.setUniform2f("u_pattern_tl",N.tl[0],N.br[1]),z.setUniform2f("u_pattern_br",N.br[0],N.tl[1]),z.setUniform2f("u_spriteSize",y*N.size[0],N.size[1]),z.setUniform1i("u_texture",1))}else{var B=u.getPaintValue("line-dasharray",i);B.length<2&&(B=[1,-1]);var q=y;this._dashArray[0]=q*B[0],this._dashArray[1]=q*B[1],z.setUniform2fv("u_dasharray",this._dashArray)}e.drawElements(4,t.triangleElementCount,5125,12*t.triangleElementStart),e.bindVAO()}}},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,offset:8,stride:12,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getLineVAO=function(e,t,r){if(r){if(t.lineDDVertexArrayObject)return t.lineDDVertexArrayObject;var i=t.lineDDVertexBuffer,n=t.lineIndexBuffer;return i&&n?(t.lineDDVertexArrayObject=new l(e,this._programCache.getProgramAttributes(3),this._vertexAttributesDD,{geometry:i},n),t.lineDDVertexArrayObject):null}if(t.lineVertexArrayObject)return t.lineVertexArrayObject;i=t.lineVertexBuffer,n=t.lineIndexBuffer;return i&&n?(t.lineVertexArrayObject=new l(e,this._programCache.getProgramAttributes(3),this._vertexAttributes,{geometry:i},n),t.lineVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},1570:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1571),r(1572)],void 0===(n=function(e,t,r,i){return function(){function e(e){this._iconRenderer=new r(e),this._sdfRenderer=new i(e)}return e.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null),this._sdfRenderer&&(this._sdfRenderer.dispose(),this._sdfRenderer=null)},e.prototype.render=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f){t.hasData()&&(t.markerPerPageElementsMap.size>0&&this._iconRenderer.render(e,t,r,i,n,o,a,s,l,c,p,f),t.glyphPerPageElementsMap.size>0&&this._sdfRenderer.render(e,t,r,i,n,o,a,s,u,c,p,d,f))},e}()}.apply(null,i))||(e.exports=n)},1571:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(745),r(881),r(798),r(616),r(899),r(376)],void 0===(n=function(e,t,r,i,n,o,a,s){return function(){function e(e){this._spritesTextureSize=new Float32Array(2),this._initialized=!1,this._programOptions={id:!1,dd:!1,sdf:!1},this._programCache=e,this._viewProjMat=r.create(),this._offsetVector=i.create(),this._color=n.create()}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,i,n,s,l,u,c,p,d,f,h){var y=this;this._initialized||this._initialize(e);var m=c.hasDataDrivenIconSize?1:c.getLayoutValue("icon-size",i),g=c.hasDataDrivenIconColor?[1,1,1,1]:c.getPaintValue("icon-color",i),v=c.hasDataDrivenIconOpacity?1:c.getPaintValue("icon-opacity",i),_=g[3]*v*h;this._color[0]=_*g[0],this._color[1]=_*g[1],this._color[2]=_*g[2],this._color[3]=_;var b=c.getLayoutValue("icon-rotation-alignment",i);2===b&&(b=1===c.getLayoutValue("symbol-placement",i)?0:1);var x=0===b,w=t.isSDF,S=c.hasDataDrivenIcon,M=3===n,I=o.degToByte(s),D=u.tileTransform.transform,T=c.getPaintValue("icon-translate",i);if(0!==T[0]||0!==T[1]){r.copy(this._viewProjMat,u.tileTransform.transform);var A=T[0],j=T[1],O=0,F=0,E=u.coordRange/512,P=(1<<u.key.level)/Math.pow(2,i)*E;if(1===c.getPaintValue("icon-translate-anchor",i)){var k=-o.C_DEG_TO_RAD*s,C=Math.sin(k),V=Math.cos(k);O=P*(A*V-j*C),F=P*(A*C+j*V)}else O=P*A,F=P*j;this._offsetVector[0]=O,this._offsetVector[1]=F,this._offsetVector[2]=0,r.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),D=this._viewProjMat}var R=x?d:f,L=this._getIconVAO(e,u,S);if(L){e.bindVAO(L);var U=(M?1:0)<<2|(S?1:0)<<1|(w?1:0),z=this._programOptions;z.id=M,z.dd=S,z.sdf=w;var N=this._programCache.getProgram(4,U,z);if(e.bindProgram(N),w){var B=c.getPaintValue("icon-halo-color",i),q=c.getPaintValue("icon-halo-width",i);N.setUniform4f("u_outlineColor",B[0],B[1],B[2],B[3]),N.setUniform1f("u_outlineSize",q)}if(N.setUniformMatrix4fv("u_transformMatrix",D),N.setUniformMatrix4fv("u_extrudeMatrix",R),N.setUniform2fv("u_normalized_origin",u.tileTransform.displayCoord),N.setUniform1f("u_depth",c.z),N.setUniform1f("u_mapRotation",I),N.setUniform1f("u_keepUpright",0),N.setUniform1f("u_level",10*i),N.setUniform1f("u_fadeSpeed",10*l.fadeSpeed),N.setUniform1f("u_minfadeLevel",10*l.minfadeLevel),N.setUniform1f("u_maxfadeLevel",10*l.maxfadeLevel),N.setUniform1f("u_fadeChange",10*(i+l.fadeChange)),N.setUniform1i("u_texture",1),N.setUniform1f("u_size",m),N.setUniform4fv("u_color",this._color),M){var G=a.int32To4Bytes(t.layerID);N.setUniform4f("u_id",G[0],G[1],G[2],G[3])}t.markerPerPageElementsMap.forEach(function(t,r){y._spritesTextureSize[0]=p.getWidth(r)/4,y._spritesTextureSize[1]=p.getHeight(r)/4,N.setUniform2fv("u_mosaicSize",y._spritesTextureSize),p.bind(e,9729,r,1),e.drawElements(4,t[1],5125,12*t[0])}),e.bindVAO()}},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getIconVAO=function(e,t,r){if(r){if(t.iconDDVertexArrayObject)return t.iconDDVertexArrayObject;var i=t.iconDDVertexBuffer,n=t.iconIndexBuffer;return i&&n?(t.iconDDVertexArrayObject=new s(e,this._programCache.getProgramAttributes(4),this._vertexAttributesDD,{geometry:i},n),t.iconDDVertexArrayObject):null}if(t.iconVertexArrayObject)return t.iconVertexArrayObject;i=t.iconVertexBuffer,n=t.iconIndexBuffer;return i&&n?(t.iconVertexArrayObject=new s(e,this._programCache.getProgramAttributes(4),this._vertexAttributes,{geometry:i},n),t.iconVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},1572:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353),r(745),r(881),r(798),r(616),r(899),r(376)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(){function e(e){this._initialized=!1,this._programOptions={id:!1,dd:!1},this._programCache=e,this._viewProjMat=i.create(),this._offsetVector=n.create(),this._extrudeMat=i.create(),this._haloColor=o.create(),this._sdfColor=o.create(),this._scaleVec=n.create()}return e.prototype.dispose=function(){},e.prototype.render=function(e,t,n,o,l,u,c,p,d,f,h,y,m){var g=this;if(!r("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(e);var v=a.degToByte(l),_=p.getLayoutValue("text-rotation-alignment",n);2===_&&(_=1===p.getLayoutValue("symbol-placement",n)?0:1);var b=0===_,x=p.getLayoutValue("text-keep-upright",n)&&b,w=3===o,S=.8*3/y,M=p.hasDataDrivenTextSize?1:p.getLayoutValue("text-size",n),I=p.hasDataDrivenTextColor?[1,1,1,1]:p.getPaintValue("text-color",n),D=p.hasDataDrivenTextOpacity?1:p.getPaintValue("text-opacity",n),T=I[3]*D*m;this._sdfColor[0]=T*I[0],this._sdfColor[1]=T*I[1],this._sdfColor[2]=T*I[2],this._sdfColor[3]=T,this._glyphTextureSize||(this._glyphTextureSize=new Float32Array([d.width/4,d.height/4]));var A=c.tileTransform.transform,j=p.getPaintValue("text-translate",n);if(0!==j[0]||0!==j[1]){i.copy(this._viewProjMat,c.tileTransform.transform);var O=j[0],F=j[1],E=0,P=0,k=c.coordRange/512,C=(1<<c.key.level)/Math.pow(2,n)*k;if(1===p.getPaintValue("text-translate-anchor",n)){var V=-a.C_DEG_TO_RAD*l,R=Math.sin(V),L=Math.cos(V);E=C*(O*L-F*R),P=C*(O*R+F*L)}else E=C*O,P=C*F;this._offsetVector[0]=E,this._offsetVector[1]=P,this._offsetVector[2]=0,i.translate(this._viewProjMat,this._viewProjMat,this._offsetVector),A=this._viewProjMat}b?i.copy(this._extrudeMat,f):i.copy(this._extrudeMat,h),this._scaleVec[0]=1/24,this._scaleVec[1]=1/24,this._scaleVec[2]=1,i.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);var U=p.hasDataDrivenText,z=this._getSDFVAO(e,c,U);if(z){e.bindVAO(z);var N=(w?1:0)<<1|(U?1:0),B=this._programOptions;B.id=w,B.dd=U;var q=this._programCache.getProgram(6,N,B);if(e.bindProgram(q),q.setUniformMatrix4fv("u_transformMatrix",A),q.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat),q.setUniform2fv("u_normalized_origin",c.tileTransform.displayCoord),q.setUniform1f("u_depth",p.z+1/65536),q.setUniform2fv("u_mosaicSize",this._glyphTextureSize),q.setUniform1f("u_mapRotation",v),q.setUniform1f("u_keepUpright",x?1:0),q.setUniform1f("u_level",10*n),q.setUniform1f("u_fadeSpeed",10*u.fadeSpeed),q.setUniform1f("u_minfadeLevel",10*u.minfadeLevel),q.setUniform1f("u_maxfadeLevel",10*u.maxfadeLevel),q.setUniform1f("u_fadeChange",10*(n+u.fadeChange)),q.setUniform1i("u_texture",0),q.setUniform1f("u_size",M),q.setUniform1f("u_antialiasingWidth",S),w){var G=s.int32To4Bytes(t.layerID);q.setUniform4f("u_id",G[0],G[1],G[2],G[3])}t.glyphPerPageElementsMap.forEach(function(t,r){g._renderGlyphRange(e,t,r,p,d,q,n,D*m,3)}),e.bindVAO()}}},e.prototype._renderGlyphRange=function(e,t,r,i,n,o,a,s,l){n.bind(e,9729,r,0);var u=i.getPaintValue("text-halo-color",a),c=i.getPaintValue("text-halo-width",a);if(u[3]>0&&c>0){var p=u[3]*s;this._haloColor[0]=p*u[0],this._haloColor[1]=p*u[1],this._haloColor[2]=p*u[2],this._haloColor[3]=p;var d=i.getPaintValue("text-halo-blur",a)*l,f=c*l;o.setUniform4fv("u_color",this._haloColor),o.setUniform1f("u_halo",1),o.setUniform1f("u_edgeDistance",f),o.setUniform1f("u_edgeBlur",d),e.drawElements(4,t[1],5125,12*t[0])}this._sdfColor[3]>0&&(o.setUniform4fv("u_color",this._sdfColor),o.setUniform1f("u_halo",0),o.setUniform1f("u_edgeDistance",0),o.setUniform1f("u_edgeBlur",0),e.drawElements(4,t[1],5125,12*t[0]))},e.prototype._initialize=function(e){return!!this._initialized||(this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]},this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]},this._initialized=!0,!0)},e.prototype._getSDFVAO=function(e,t,r){if(r){if(t.textDDVertexArrayObject)return t.textDDVertexArrayObject;var i=t.textDDVertexBuffer,n=t.textIndexBuffer;return i&&n?(t.textDDVertexArrayObject=new l(e,this._programCache.getProgramAttributes(6),this._vertexAttributesDD,{geometry:i},n),t.textDDVertexArrayObject):null}if(t.textVertexArrayObject)return t.textVertexArrayObject;i=t.textVertexBuffer,n=t.textIndexBuffer;return i&&n?(t.textVertexArrayObject=new l(e,this._programCache.getProgramAttributes(6),this._vertexAttributes,{geometry:i},n),t.textVertexArrayObject):null},e}()}.apply(null,i))||(e.exports=n)},1573:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(616),r(382),r(368),r(376)],void 0===(n=function(e,t,r,i,n,o){return function(){function e(e){this._initialized=!1,this._maxWidth=0,this._programOptions={id:!1,pattern:!1},this._programCache=e,this._color=new Float32Array([1,0,0,1])}return e.prototype.dispose=function(){this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null),this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null)},e.prototype.render=function(e,t){this._initialized||this._initialize(e);var r=this._programCache.getProgram(0,0,this._programOptions);if(r){e.bindVAO(this._outlineVertexArrayObject),e.bindProgram(r),r.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform),r.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord),r.setUniform1f("u_coord_range",t.coordRange),r.setUniform1f("u_depth",0),r.setUniform4fv("u_color",this._color),e.setLineWidth(2),e.drawArrays(3,0,4),e.bindVAO();var i=this._getTexture(e,t);if(i){var n=this._programCache.getProgram(7,0,null);n&&(e.bindVAO(this._tileInfoVertexArrayObject),e.bindProgram(n),e.bindTexture(i,0),n.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform),n.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord),n.setUniform1f("u_depth",0),n.setUniform1f("u_coord_ratio",t.coordRange/512),n.setUniform2f("u_delta",8,8),n.setUniform2f("u_dimensions",i.descriptor.width,i.descriptor.height),e.drawArrays(5,0,4),e.bindVAO())}}},e.prototype._initialize=function(e){if(this._initialized)return!0;var t={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},r=new Int8Array([0,0,1,0,1,1,0,1]),n=i.createVertex(e,35044,r),a=new o(e,this._programCache.getProgramAttributes(0),t,{geometry:n}),s=new Int8Array([0,0,1,0,0,1,1,1]),l=i.createVertex(e,35044,s),u=new o(e,this._programCache.getProgramAttributes(7),t,{geometry:l});return this._outlineVertexArrayObject=a,this._tileInfoVertexArrayObject=u,this._initialized=!0,!0},e.prototype._getTexture=function(e,t){if(t.texture)return t.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var i=t.key.id,o=this._canvas.getContext("2d");o.font="24px sans-serif",o.textAlign="left",o.textBaseline="middle";var a=o.measureText(i),s=Math.pow(2,Math.ceil(r.log2(a.width+2)));return s>this._maxWidth&&(this._maxWidth=s),o.clearRect(0,0,this._maxWidth,32),o.fillStyle=t.key.level>t.refKey.level?"red":"blue",o.fillText(i,0,16),t.texture=new n(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas),t.texture},e}()}.apply(null,i))||(e.exports=n)},1574:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1575),r(408)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._cache=new Array(8);for(var e=0;e<8;e++)this._cache[e]={}}return e.prototype.dispose=function(){this._programRepo&&(this._programRepo.dispose(),this._programRepo=null)},e.prototype.getProgram=function(e,t,r){var i=this._cache[e];if(!i[t]){var n=this._programRepo.getProgram(this._getProgramTemplate(e),r);i[t]=n}return i[t]},e.prototype.getProgramAttributes=function(e){switch(e){case 0:return r.background.attributes;case 5:return r.circle.attributes;case 1:return r.fill.attributes;case 4:return r.icon.attributes;case 3:return r.line.attributes;case 2:return r.outline.attributes;case 6:return r.text.attributes;case 7:return r.tileInfo.attributes}},e.prototype.initialize=function(e){this._programRepo||(this._programRepo=new i.ProgramCache(e))},e.prototype._getProgramTemplate=function(e){switch(e){case 0:return r.background;case 5:return r.circle;case 1:return r.fill;case 4:return r.icon;case 3:return r.line;case 2:return r.outline;case 6:return r.text;case 7:return r.tileInfo}},e}();t.default=n}.apply(null,i))||(e.exports=n)},1575:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1576),r(408)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return i.glslifyDefineMap({ID:e.id,PATTERN:e.pattern})};t.background={name:"background",shaders:function(e){return{vertexShader:n(e)+r.resolveIncludes("background/background.vert"),fragmentShader:n(e)+r.resolveIncludes("background/background.frag")}},attributes:{a_pos:0}};var o=function(e){return i.glslifyDefineMap({ID:e.id})};t.circle={name:"circle",shaders:function(e){return{vertexShader:o(e)+r.resolveIncludes("circle/circle.vert"),fragmentShader:o(e)+r.resolveIncludes("circle/circle.frag")}},attributes:{a_pos:0,a_color:1,a_stroke_color:2,a_data:3}};var a=function(e){return i.glslifyDefineMap({ID:e.id,DD:e.dd,PATTERN:e.pattern})};t.fill={name:"fill",shaders:function(e){return{vertexShader:a(e)+r.resolveIncludes("fill/fill.vert"),fragmentShader:a(e)+r.resolveIncludes("fill/fill.frag")}},attributes:{a_pos:0,a_color:1}};var s=function(e){return i.glslifyDefineMap({ID:e.id,DD:e.dd})};t.outline={name:"outline",shaders:function(e){return{vertexShader:s(e)+r.resolveIncludes("outline/outline.vert"),fragmentShader:s(e)+r.resolveIncludes("outline/outline.frag")}},attributes:{a_pos:0,a_offset:1,a_xnormal:2,a_color:3}};var l=function(e){return i.glslifyDefineMap({ID:e.id,DD:e.dd,SDF:e.sdf})};t.icon={name:"icon",shaders:function(e){return{vertexShader:l(e)+r.resolveIncludes("icon/icon.vert"),fragmentShader:l(e)+r.resolveIncludes("icon/icon.frag")}},attributes:{a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5}};var u=function(e){return i.glslifyDefineMap({ID:e.id,DD:e.dd,PATTERN:e.pattern})};t.line={name:"line",shaders:function(e){return{vertexShader:u(e)+r.resolveIncludes("line/line.vert"),fragmentShader:u(e)+r.resolveIncludes("line/line.frag")}},attributes:{a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4}};var c=function(e){return i.glslifyDefineMap({ID:e.id,DD:e.dd})};t.text={name:"text",shaders:function(e){return{vertexShader:c(e)+r.resolveIncludes("text/text.vert"),fragmentShader:c(e)+r.resolveIncludes("text/text.frag")}},attributes:{a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5}},t.tileInfo={name:"tileInfo",shaders:{vertexShader:r.resolveIncludes("tileInfo/tileInfo.vert"),fragmentShader:r.resolveIncludes("tileInfo/tileInfo.frag")},attributes:{a_pos:0}}}.apply(null,i))||(e.exports=n)},1576:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(1577),r(1093)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0});var n=new i(function(e){var t=r;return e.split("/").forEach(function(e){t&&(t=t[e])}),t});t.resolveIncludes=function(e){return n.resolveIncludes(e)}}.apply(null,i))||(e.exports=n)},1577:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform sampler2D u_texture;\n\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif // PATTERN\n\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif // ID\n\nvoid main() {\n#ifdef PATTERN\n  // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\n  mediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\n\n  // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\n  // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\n  // we need to only sample from area that has our sprite in the mosaic.\n  mediump vec2 samplePos = mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\n\n  // sample the sprite mosaic\n  lowp vec4 color = texture2D(u_texture, samplePos);\n  gl_FragColor = u_opacity * color;\n#else\n  gl_FragColor = u_color;\n#endif // PATTERN\n\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif // ID\n}\n","background.vert":"precision mediump float;\n\nattribute vec2 a_pos;\n\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif // ID\n\nuniform highp mat4 u_transformMatrix;\nuniform mediump vec2 u_normalized_origin;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix; // can we use medium precision?\nvarying mediump vec2 v_tileTextureCoord;\n#endif // PATTERN\n\nvoid main() {\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\n\n#ifdef PATTERN\n  // calculate the texture coordinates of the current vertex. It will of course get interpolated.\n  // The pattern matrix is a 3x3 scale matrix which 'tiles' the texture inside the tile, translating from tile coordinates\n  v_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\n#endif // PATTERN\n\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif // ID\n}\n"},circle:{"circle.frag":"precision lowp float;\n\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif // ID\n\nvoid main()\n{\n  mediump float dist = length(v_offset);\n\n  mediump float alpha = smoothstep(0.0, -v_blur, dist - 1.0);\n\n  lowp float color_mix_ratio = v_stroke_width < 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\n\n  gl_FragColor = alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif // ID\n}\n","circle.vert":"precision mediump float;\n\nattribute vec2 a_pos;\nattribute vec4 a_color;\nattribute vec4 a_stroke_color;\nattribute vec4 a_data;\n\nconst float sizePrecision = 0.25; // 1/4\nconst float blurPrecision = 0.03125; // 1/32\n\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif // ID\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n\n// the opacity of the layer given by the painter\nuniform mediump float u_radius;\nuniform lowp vec4 u_color;\nuniform mediump float u_blur;\nuniform mediump float u_stroke_width;\nuniform lowp vec4 u_stroke_color;\n\nuniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\n\nvoid main()\n{\n  v_color = a_color * u_color;\n  v_stroke_color = a_stroke_color * u_stroke_color;\n  v_stroke_width = a_data[1] * sizePrecision * u_stroke_width;\n  v_radius = a_data[2] * u_radius;\n  v_blur = max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\n\n  mediump vec2 offset = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n  v_offset = offset;\n\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif // ID\n\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\n}\n"},fill:{"fill.frag":"precision lowp float;\n\n#ifdef PATTERN\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\n#endif // PATTERN\n\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif // ID\n\nvarying lowp vec4 v_color;\n\nvec4 mixColors(vec4 color1, vec4 color2) {\n  // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\n  // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\n  float compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\n  vec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\n\n  return vec4(compositeColor, compositeAlpha);\n}\n\nvoid main()\n{\n#ifdef PATTERN\n  // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\n  mediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\n\n  // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\n  // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\n  // we need to only sample from area that has our sprite in the mosaic.\n  mediump vec2 samplePos = mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\n\n  // sample the sprite mosaic\n  lowp vec4 color = texture2D(u_texture, samplePos);\n  gl_FragColor = v_color[3] * color;\n#else\n  gl_FragColor = v_color;\n#endif // PATTERN\n\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif // ID\n}\n","fill.vert":"precision mediump float;\n\nattribute vec2 a_pos;\n\nuniform highp mat4 u_transformMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\n\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\n#endif // PATTERN\n\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif // ID\n\n#ifdef DD\nattribute vec4 a_color;\n#endif // DD\nuniform lowp vec4 u_color;\nvarying lowp vec4 v_color;\n\nvoid main()\n{\n#ifdef DD\n  v_color = a_color * u_color;\n#else\n  v_color = u_color;\n#endif // DD\n\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif // ID\n\n#ifdef PATTERN\n  // calculate the texture coordinates of the current vertex. It will of course get interpolated.\n  // The pattern matrix is a 3x3 scale matrix which 'tiles' the texture inside the tile, translating from tile coordinates\n  // (-4k to 8k -1) to texture coordinates.\n  v_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\n#endif // PATTERN\n\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\n}\n"},icon:{"icon.frag":"precision mediump float;\n\nuniform lowp sampler2D u_texture; // SDF texture\n#ifdef SDF\nuniform lowp vec4 u_color; // a color to override the one of the vertex\nuniform lowp vec4 u_outlineColor;\nuniform mediump float u_outlineSize;\n#endif // SDF\n\nvarying mediump vec2 v_tex;\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\n// opacity of the layer given by the painter\nvarying lowp float v_transparency;\n\nvarying mediump vec2 v_size;\n\nvarying lowp vec4 v_color;\n\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif // ID\n\n// we need the conversion function from RGBA to float\n#include <util/encoding.glsl>\n\nvec4 mixColors(vec4 color1, vec4 color2) {\n  // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\n  // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\n  float compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\n  vec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\n\n  return vec4(compositeColor, compositeAlpha);\n}\n\nvoid main()\n{\n#ifdef SDF\n  lowp vec4 fillPixelColor = v_color;\n\n  // calculate the distance from the edge [-0.5, 0.5]\n  float d = rgba2float(texture2D(u_texture, v_tex)) - 0.5;\n\n  // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\n  // 1 / 86 represents a single pixel given the size of the SDF is 128 and we add 4 pixels margins to deal with\n  // other non SDF types.\n  // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\n  const float sofetEdgeRatio = 0.248062016; // ==> (32.0 / 86.0) / 1.5;\n  float size = max(v_size.x, v_size.y);\n  float dist = d * sofetEdgeRatio * size;\n\n  // set the fragment's transparency according to the distance from the edge\n  fillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\n\n  // count for the outline\n  // therefore tint the entire icon area.\n  if (u_outlineSize > 0.25) {\n    lowp vec4 outlinePixelColor = u_outlineColor;\n    // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\n    // a single pixel.\n    const float outlineLimitRatio = (16.0 / 86.0);\n    float clampedOutlineSize = sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\n\n    outlinePixelColor *= clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\n\n    // finally combine the outline and the fill colors\n    gl_FragColor = v_transparency * mixColors(fillPixelColor, outlinePixelColor);\n  }\n  else {\n    gl_FragColor = v_transparency * fillPixelColor;\n  }\n#else // not an SDF\n  lowp vec4 texColor = texture2D(u_texture, v_tex);\n  gl_FragColor = v_transparency * texColor;\n#endif // SDF\n\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif // ID\n}\n","icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_tex;\nattribute vec4 a_levelInfo;\n\n#ifdef DD\nattribute vec4 a_color;\nattribute mediump float a_size;\n#endif // DD\nuniform lowp vec4 u_color;\nuniform mediump float u_size;\n\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif // ID\n\nvarying lowp vec4 v_color;\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n\n// the size of the mosaic given in pixels\nuniform vec2 u_mosaicSize;\n\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n\n// the map's rotation from the north\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\n\n// indicate whether the current set of iconst should be kept upright when the map is rotated\nuniform lowp float u_keepUpright;\n\n// the rate of the change in the opacity (fade) of the icons\nuniform mediump float u_fadeSpeed;\n\n// the low level we transition (to/from)\nuniform mediump float u_minfadeLevel;\n\n// the high level we transition (to/from)\nuniform mediump float u_maxfadeLevel;\n\n// the amount of fade given teh current time past the last recorded level\nuniform mediump float u_fadeChange;\n\n// the opacity of the layer given by the painter\nuniform mediump float u_opacity;\n\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\nvarying mediump vec2 v_tex;\n\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\n// opacity of the layer given by the painter\nvarying lowp float v_transparency;\n\nvarying mediump vec2 v_size;\n\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\n// by 8 and then at the shader devide by the same number\nconst float C_OFFSET_PRECISION = 1.0 / 8.0;\n\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float tileCoordRatio = 1.0 / 8.0;\n\nvoid main()\n{\n  mediump float a_labelMinLevel = a_levelInfo[0];\n  mediump float a_angle         = a_levelInfo[1];\n  mediump float a_minLevel      = a_levelInfo[2];\n  mediump float a_maxLevel      = a_levelInfo[3];\n\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\n  mediump float delta_z = 0.0;\n\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\n  mediump float rotated = mod(a_angle + u_mapRotation, 256.0);\n  delta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z += (flip > 0) && (64 <= rotated) && (rotated < 192)\n\n  // u_level is the current service level adjusted for the change in font size\n  delta_z += 1.0 - step(a_minLevel, u_level); // Test if (level < minLevel)\n  delta_z += step(a_maxLevel, u_level); // Test if (maxLevel <= level)\n\n  // calculate the alpha given the change in the fade and the fade-speed\n  lowp float alpha = clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\n\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\n  v_transparency = (u_fadeSpeed >= 0.0 ? alpha : 1.0 - alpha);\n\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\n  if (u_maxfadeLevel < a_labelMinLevel)\n  {\n    v_transparency = 0.0;\n  }\n  if (u_minfadeLevel >= a_labelMinLevel)\n  {\n    v_transparency = 1.0;\n  }\n\n  // if label had been faded out, clip it\n  delta_z += step(v_transparency, 0.0);\n\n  vec2 offset = C_OFFSET_PRECISION * a_vertexOffset;\n\n  v_size = abs(offset);\n\n#ifdef SDF\n  offset = (120.0 / 86.0) * offset;\n#endif // SDF\n\n#ifdef DD\n  mediump float icon_size = a_size * u_size;\n#else\n  mediump float icon_size = u_size;\n#endif // DD\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\n\n#ifdef DD\n  v_color = a_color * u_color;\n#else\n  v_color = u_color;\n#endif // DD\n\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif // ID\n\n  v_tex = a_tex.xy / u_mosaicSize;\n  v_transparency *= v_color.w;\n}\n"},line:{"line.frag":"varying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\n\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\n\nvarying mediump float v_blur;\n\n#ifdef PATTERN\nuniform mediump vec2 u_pattern_tl;\nuniform mediump vec2 u_pattern_br;\nuniform mediump vec2 u_spriteSize;\nuniform sampler2D u_texture;\n\n// Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\n// accumulated distance. Most vertices will have v_normal.x == 0, because the pattern must be sampled only depending on\n// the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x != 0, thus allowing to\n// \"keep moving\" for a few more pixel even when the line has ended or has not started yet.\nconst mediump float tileCoordRatio = 8.0;\n#else\nvarying mediump vec2 v_dasharray;\n#endif\n\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif // ID\n\nvoid main()\n{\n  // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\n  // and any value in between will be inside the line (the sign represent the direction - right or left).\n  // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\n  mediump float fragDist = length(v_normal) * v_lineHalfWidth;\n\n  // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\n  // We need to count for both sides of the line.\n  lowp float alpha = clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n\n#ifdef PATTERN\n  // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\n  // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\n  mediump float relativeTexX = mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\n\n  // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\n  // which range from -1.0 to 1.0. On the line's centerline, the value of the interpolated normal is 0.0, however the relative\n  // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\n  // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\n  //              | -> line-width / 2\n  //      - - - - - - - - - - - - - -\n  //              | -> line-width / 2\n  //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\n\n  mediump float relativeTexY = 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\n\n  // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\n  mediump vec2 texCoord = mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\n\n  // get the color from the texture\n  lowp vec4 color = texture2D(u_texture, texCoord);\n\n  // finally write the fragment value\n  gl_FragColor = alpha * v_color[3] * color;\n#else\n  // now calculate the dashes given the accumulated distance of the line:\n  // start with calculating a normalized position along the line\n  lowp float dashPos =  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\n\n  // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\n  // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\n  //   | <--- pos along the dash part\n  // -------_______-------_______\n  // when the dashPos is over the 'gap' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\n  // get clamped to zero.\n  // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\n  // along the direction of the line.\n  lowp float dashAlpha = clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\n\n  // if we don't have a no-data part to the dash then it is a solid line\n  dashAlpha = max(sign(-v_dasharray.y), dashAlpha);\n  // finally multiply the fragment's alpha by the calculated dash-alpha\n  alpha *= dashAlpha;\n\n  // output the fragment color\n  gl_FragColor = alpha * v_color;\n#endif // PATTERN\n\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif // ID\n}\n","line.vert":"/* The implementation of the renderer is based on the article and implementation of MB described here:\n* https://www.mapbox.com/blog/drawing-antialiased-lines/\n*/\n\nattribute vec2 a_pos;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistance;\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n\nuniform mediump float u_blur;\nuniform mediump float u_antialiasing; // the feather distance at which the line edge fades out\n\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n\n// the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\nvarying mediump vec2 v_normal;\n\n// the accumulated distance along the line. We need this information in order to render the dashes.\nvarying highp float v_accumulatedDistance;\n\nconst float scale = 1.0 / 31.0;\n\n#ifdef DD\nattribute vec4 a_color;\nattribute mediump float a_width;\n#endif // DD\nuniform lowp vec4 u_color;\nuniform mediump float u_width;\n\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif // ID\n\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth; // the inset and outset of the line\nvarying mediump float v_blur;\n\n#ifndef PATTERN\nuniform mediump vec2 u_dasharray;\nvarying mediump vec2 v_dasharray;\n#endif\n\nvoid main()\n{\n  v_normal = a_offsetAndNormal.zw * scale;\n\n#ifdef DD\n  v_lineHalfWidth = a_width * u_width;\n#else\n  v_lineHalfWidth = u_width;\n#endif // DD\n\n  v_lineHalfWidth += u_antialiasing;\n  v_lineHalfWidth *= 0.5;\n\n#ifndef PATTERN\n#ifdef DD\n  v_dasharray = u_dasharray * a_width;\n#else\n  v_dasharray = u_dasharray * u_width;\n#endif // DD\n#endif\n\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\n  mediump vec2 dist = v_lineHalfWidth * a_offsetAndNormal.xy * scale;\n\n  // transform the vertex\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\n\n  // the accumulated distance will be used to calculate the dashes (or the no-data...)\n  v_accumulatedDistance = a_accumulatedDistance.x;\n\n  v_blur = u_blur + u_antialiasing;\n\n  #ifdef DD\n    v_color = a_color * u_color;\n  #else\n    v_color = u_color;\n  #endif // DD\n\n  #ifdef ID\n    v_id = u_id / 255.0;\n  #endif // ID\n}\n"},outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif // ID\n\nvoid main()\n{\n  // Calculate the distance of the pixel from the line in pixels.\n  lowp float dist = abs(v_normal.y);\n\n  lowp float alpha = smoothstep(1.0, 0.0, dist);\n  gl_FragColor = alpha * v_color;\n\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif // ID\n}\n","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n\n#ifdef DD\nattribute vec4 a_color;\n#endif // DD\nuniform lowp vec4 u_color;\nvarying lowp vec4 v_color;\n\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif // ID\n\nuniform highp mat4 u_transformMatrix;\nuniform highp mat4 u_extrudeMatrix;\nuniform highp vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\n\nvarying lowp vec2 v_normal;\n\nconst float scale = 1.0 / 15.0;\n\nvoid main()\n{\n#ifdef DD\n  v_color = a_color * u_color;\n#else\n  v_color = u_color;\n#endif // DD\n\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif // ID\n\n  v_normal = a_xnormal;\n\n  // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\n  // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\n  mediump vec4 dist = vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\n\n  // Remove the texture normal bit of the position before scaling it with the\n  // model/view matrix. Add the extrusion vector *after* the model/view matrix\n  // because we're extruding the line in pixel space, regardless of the current\n  // tile's zoom level.\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\n}\n"},text:{"text.frag":"uniform lowp sampler2D u_texture;\nuniform mediump float u_edgeDistance;\n\nvarying lowp vec2 v_tex;\nvarying lowp float v_transparency;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif // ID\n\n// this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\n// and https://www.mapbox.com/blog/text-signed-distance-fields/\n// http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\n\nvoid main()\n{\n  // read the distance from the SDF texture\n  lowp float dist = texture2D(u_texture, v_tex).a;\n\n  // use a smooth-step in order to calculate the geometry of the shape given by the distance field\n  mediump float alpha = smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\n\n  gl_FragColor = alpha * v_color;\n\n#ifdef ID\n  if (gl_FragColor.a < 1.0 / 255.0) {\n    discard;\n  }\n  gl_FragColor = v_id;\n#endif // ID\n}\n","text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_tex;\nattribute vec4 a_levelInfo;\n\nuniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\n#ifdef DD\nattribute vec4 a_color;\n#endif // DD\nvarying lowp vec4 v_color;\n\nuniform mediump float u_size;\n#ifdef DD\nattribute mediump float a_size;\n#endif // DD\nvarying mediump float v_size;\n\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif // ID\n\n\n// attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\n\n// the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\n// relative to the tile's upper left corner\n// the extrusion vector.\nuniform highp mat4 u_transformMatrix;\n\n// the extrude matrix which is responsible for the 'anti-zoom' as well as the rotation\nuniform highp mat4 u_extrudeMatrix;\n\n// u_normalized_origin is the tile's upper left corner given in normalized coordinates\nuniform highp vec2 u_normalized_origin;\n\n// the size of the mosaic given in pixels\nuniform vec2 u_mosaicSize;\n\n// the z of the layer. Given by the order of the layers in the style\nuniform mediump float u_depth;\n\n// the map's rotation from the north\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\n\n// indicate whether the current set of iconst should be kept upright when the map is rotated\nuniform lowp float u_keepUpright;\n\n// the rate of the change in the opacity (fade) of the icons\nuniform mediump float u_fadeSpeed;\n\n// the low level we transition (to/from)\nuniform mediump float u_minfadeLevel;\n\n// the high level we transition (to/from)\nuniform mediump float u_maxfadeLevel;\n\n// the amount of fade given teh current time past the last recorded level\nuniform mediump float u_fadeChange;\n\n// the opacity of the layer given by the painter\nuniform mediump float u_opacity;\n\n// the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\nvarying lowp vec2 v_tex;\n\n// the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\n// opacity of the layer given by the painter\nvarying lowp float v_transparency;\n\n// the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\n// by 8 and then at the shader divide by the same number\nconst float offsetPrecision = 1.0 / 8.0;\n\n// outline position and appearance\nconst mediump float edgePos = 0.75; // defined by the SDF encoding\nuniform mediump float u_edgeDistance;\nuniform mediump float u_edgeBlur;\nuniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\n\nvarying mediump float v_edgeDistance; // will factor in the size\nvarying mediump float v_edgeWidth; // will factor in the size\n\nuniform lowp float u_halo; // needed to avoid using the color attribute for halo\n\nvoid main()\n{\n  mediump float a_labelMinLevel = a_levelInfo[0];\n  mediump float a_angle        = a_levelInfo[1];\n  mediump float a_minLevel    = a_levelInfo[2];\n  mediump float a_maxLevel    = a_levelInfo[3];\n\n  // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\n  mediump float delta_z = 0.0;\n\n  // TODO: force clipping the vertex in case that the vertex isn't visible\n  //delta_z += a_visible ? 0.0 : 1.0;\n\n  // If the label rotates with the map, and if the rotated label is upside down, hide it\n  mediump float rotated = mod(a_angle + u_mapRotation, 256.0);\n  delta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z += (flip > 0) && (64 <= rotated) && (rotated < 192)\n\n  // u_level is the current service level adjusted for the change in font size\n  delta_z += 1.0 - step(a_minLevel, u_level); // Test if (level < minLevel)\n  delta_z += step(a_maxLevel, u_level); // Test if (maxLevel <= level)\n\n  // calculate the alpha given the change in the fade and the fade-speed\n  lowp float alpha = clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\n\n  // if the speed is positive we are zooming in and therefore we need to 'fade-in'. Else we need to 'fade-out'\n  v_transparency = (u_fadeSpeed >= 0.0 ? alpha : 1.0 - alpha);\n\n  // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\n  if (u_maxfadeLevel < a_labelMinLevel)\n  {\n    v_transparency = 0.0;\n  }\n  if (u_minfadeLevel >= a_labelMinLevel)\n  {\n    v_transparency = 1.0;\n  }\n\n  // if label has been faded out, clip it\n  delta_z += step(v_transparency, 0.0);\n\n  v_tex = a_tex.xy / u_mosaicSize;\n\n#ifdef DD\n  if (u_halo > 0.5)\n  {\n    v_color = u_color;\n  }\n  else\n  {\n    v_color = a_color * u_color;\n    // opacity already factored in a_color\n  }\n#else\n  v_color = u_color;\n#endif // DD\n\n#ifdef DD\n  v_size = a_size * u_size;\n#else\n  v_size = u_size;\n#endif // DD\n\n#ifdef ID\n  v_id = u_id / 255.0;\n#endif // ID\n\n  v_edgeDistance = edgePos - u_edgeDistance / v_size;\n  v_edgeWidth = (u_antialiasingWidth + u_edgeBlur) / v_size;\n\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\n}\n"},tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\n\nvoid main(void) {\n  lowp vec4 color = texture2D(u_texture, v_tex);\n  gl_FragColor = 0.75 * color;\n}\n","tileInfo.vert":"attribute vec2 a_pos;\n\nuniform highp mat4 u_transformMatrix;\nuniform mediump vec2 u_normalized_origin;\nuniform mediump float u_depth;\nuniform mediump float u_coord_ratio;\nuniform mediump vec2 u_delta; // in tile coordinates\nuniform mediump vec2 u_dimensions; // in tile coordinates\n\nvarying mediump vec2 v_tex;\n\nvoid main() {\n  mediump vec2 offests = u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\n  gl_Position = vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\n\n  v_tex = a_pos;\n}\n"},util:{"encoding.glsl":"// Factors to convert rgba back to float\nconst vec4 rgba2float_factors = vec4(\n    255.0 / (256.0),\n    255.0 / (256.0 * 256.0),\n    255.0 / (256.0 * 256.0 * 256.0),\n    255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n  );\n\nfloat rgba2float(vec4 rgba) {\n  // Convert components from 0->1 back to 0->255 and then\n  // add the components together with their corresponding\n  // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\n  return dot(rgba, rgba2float_factors);\n}\n"}}}.apply(null,i))||(e.exports=n)},331:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(388),r(383),r(669),r(637),r(350),r(431),r(357),r(341),r(365),r(353),r(347),r(338),r(343),r(428),r(339),r(349),r(336),r(363),r(625),r(362),r(626),r(398),r(671),r(436),r(433),r(432),r(438),r(426),r(394),r(429),r(676),r(652),r(455),r(661),r(588),r(677),r(395),r(447),r(427),r(664),r(459),r(678),r(423),r(635),r(615),r(731),r(361),r(440),r(392),r(419),r(444)],void 0===(n=function(e,t,i,n,o,a,s,l,u,c,p,d,f,h,y,m,g,v,_,b,x,w,S,M,I,D,T,A,j,O,F,E,P,k,C,V,R,L,U,z,N,B,q,G,W,H,J,Q,Y,X,K,Z,$,ee,te,re){function ie(e){return e&&null!=e.applyEdits}function ne(e){return e&&oe(e)}function oe(e){return e&&e.isInstanceOf&&e.isInstanceOf(d)}function ae(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}var se=m({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),le="FeatureLayer",ue=v.getLogger("esri.layers.FeatureLayer");return function(e){function t(t){var r=e.call(this)||this;return r._handles=new h,r.featureReduction=null,r.capabilities=null,r.copyright=null,r.displayField=null,r.definitionExpression=null,r.dynamicDataSource=null,r.editFieldsInfo=null,r.elevationInfo=null,r.fields=null,r.fullExtent=null,r.gdbVersion=null,r.geometryType=null,r.hasM=void 0,r.hasZ=void 0,r.heightModelInfo=null,r.historicMoment=null,r.isTable=!1,r.labelsVisible=!0,r.labelingInfo=null,r.layerId=void 0,r.legendEnabled=!0,r.maxRecordCount=void 0,r.tileMaxRecordCount=void 0,r.minScale=0,r.maxScale=0,r.objectIdField=null,r.operationalLayerType="ArcGISFeatureLayer",r.popupEnabled=!0,r.popupTemplate=null,r.relationships=null,r.returnM=void 0,r.returnZ=void 0,r.screenSizePerspectiveEnabled=!0,r.serviceDefinitionExpression=null,r.spatialReference=I.WGS84,r.templates=null,r.timeInfo=null,r.title=null,r.sublayerTitleMode="item-title",r.trackIdField=null,r.type="feature",r.typeIdField=null,r.types=null,r.indexes=new(d.ofType(V.FeatureIndex)),r.userIsAdmin=!1,r.version=void 0,r.visible=!0,r}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(){var e=this;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var t=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){if(e.url&&null==e.layerId&&/FeatureServer|MapServer\/*$/i.test(e.url))return e._fetchFirstLayerId().then(function(t){null!=t&&(e.layerId=t)})}).then(function(){if(!e.url&&!e._hasMemorySource())throw new f("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return e.createGraphicsSource().then(function(t){return e._initLayerProperties(t)})});return this.addResolvingPromise(t),this.when()}this.addResolvingPromise(this.createGraphicsSource().then(function(t){return e._initLayerProperties(t)}))},Object.defineProperty(t.prototype,"allRenderers",{get:function(){return this._getAllRenderers(this.renderer)},enumerable:!0,configurable:!0}),t.prototype.readCapabilities=function(e,t){return t=t.layerDefinition||t,{data:this._readDataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}},Object.defineProperty(t.prototype,"hasAttachments",{get:function(){return ue.warn("FeatureLayer.hasAttachments is deprecated. Use FeatureLayer.capabilities.data.supportsAttachment instead."),this.hasService&&this._get("hasAttachments")||!1},enumerable:!0,configurable:!0}),t.prototype.readIsTable=function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type},Object.defineProperty(t.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0}),t.prototype.readMinScale=function(e,t){return t.effectiveMinScale||e||0},t.prototype.readMaxScale=function(e,t){return t.effectiveMaxScale||e||0},t.prototype.readObjectIdFieldFromService=function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(var r=0,i=t.fields;r<i.length;r++){var n=i[r];if("esriFieldTypeOID"===n.type)return n.name}},Object.defineProperty(t.prototype,"outFields",{get:function(){var e=this,t=this._userOutFields,r=this.requiredFields;return t=t&&t.slice(0),r=r&&r.slice(0),t?-1===t.indexOf("*")&&r.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}):t=r,-1!==t.indexOf("*")?t=["*"]:this.loaded&&(t=(t=(t=t.filter(function(t){var r=!!e.getField(t);return t&&!r&&ue.error("[outFields] Invalid field: ",t),r},this)).map(function(t){return e.getField(t).name},this)).filter(function(e,t,r){return r.indexOf(e)===t})),t},set:function(e){var t=this,r=this.requiredFields&&this.requiredFields.slice(0);e?-1===e.indexOf("*")&&r.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}):e=r,this.loaded&&(e=(e=e.filter(function(e){var r="*"===e||!!t.getField(e,t.fields);return e&&!r&&ue.error("[outFields] Invalid field: ",e),r},this)).map(function(e){return"*"===e?e:t.getField(e,t.fields).name},this)),this._userOutFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedUrl",{get:function(){var e=this.url?x.urlToObject(this.url):null;if(null!=e)if(null!=this.layerId)e.path=x.join(e.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var t={source:H.sourceToJSON(this.dynamicDataSource)};e.query={layer:JSON.stringify(t)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{set:function(e){var t=this._getAllRenderers(e);q.fixRendererFields(t,this.fields),this._set("renderer",e)},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var i,n,o=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(o)(i=Q.read(o,t,r)||void 0)||ue.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r});else if(t.defaultSymbol)Z.read(t.defaultSymbol,t,r),t.types&&t.types.length?(i=new u.UniqueValueRenderer({defaultSymbol:n,field:t.typeIdField}),t.types.forEach(function(e){o.addUniqueValueInfo(e.id,Z.read(e.symbol,e,r))})):i=new u.SimpleRenderer({symbol:n});else if("Table"!==t.type){switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":n=new p.SimpleMarkerSymbol;break;case"esriGeometryPolyline":n=new p.SimpleLineSymbol;break;case"esriGeometryPolygon":n=new p.SimpleFillSymbol}i=n&&new u.SimpleRenderer({symbol:n})}return i},t.prototype.writeRenderer=function(e,t,r,i){Q.writeTarget(e,t,r,i)},Object.defineProperty(t.prototype,"requiredFields",{get:function(){var e=this.timeInfo,t=[],r=[],i=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,this.editFieldsInfo&&this.editFieldsInfo.creationDateField,this.editFieldsInfo&&this.editFieldsInfo.editorField,this.editFieldsInfo&&this.editFieldsInfo.editDateField,e&&e.startTimeField,e&&e.endTimeField,this.trackIdField];this.allRenderers.forEach(function(e){t=t.concat(e.requiredFields)}),this.labelingInfo&&this.labelingInfo.length&&this.labelingInfo.forEach(function(e){r=r.concat(e.requiredFields)}),r=r.map(function(e){return e.replace(/['"]+/g,"")}),i=(i=i.concat(t)).concat(r);var n=this.elevationInfo&&this.elevationInfo.featureExpressionInfo;return n&&(i=i.concat(n.requiredFields)),this.popupTemplate&&(i=i.concat(this.popupTemplate.requiredFields)),i.filter(function(e,t,r){return!!e&&r.indexOf(e)===t&&"function"!=typeof e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{set:function(e){var t=this._get("source");t!==e&&(ne(t)&&this._resetMemorySource(t),ne(e)&&this._initMemorySource(e),this._set("source",e))},enumerable:!0,configurable:!0}),t.prototype.castSource=function(e){return e?Array.isArray(e)||oe(e)?new A.default({layer:this,items:e}):e:null},t.prototype.readSource=function(e,t){var r=ee.fromJSON(t.featureSet);return new A.default({layer:this,items:r&&r.features||[]})},t.prototype.readTemplates=function(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map(function(e){return z.fromJSON(e)}),this._fixTemplates(e,i),this._fixTemplates(e,n),e},t.prototype.readTitle=function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var n=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?k.titleFromUrlAndName(this.url,r):r;var o=r||this.url&&k.parse(this.url).title;if(!o)return;return"item-title-and-service-name"===this.sublayerTitleMode&&n&&(o=n+" - "+o),k.cleanTitle(o)}if("item-title"===this.sublayerTitleMode&&i)return i},t.prototype.readTitleFromWebMap=function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name},t.prototype.readTypeIdField=function(e,t){if(e=(t=t.layerDefinition||t).typeIdField){var r=this.getField(e,t.fields);r&&(e=r.name)}return e},t.prototype.readTypes=function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var i=t.editFieldsInfo,n=i&&i.creatorField,o=i&&i.editorField;return e&&e.map(function(e){return e=N.fromJSON(e),r._fixTemplates(e.templates,n),r._fixTemplates(e.templates,o),e})},Object.defineProperty(t.prototype,"url",{set:function(e){var t=k.sanitizeUrlWithLayerId(this,e,ue);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)},enumerable:!0,configurable:!0}),t.prototype.writeUrl=function(e,t,r,i){k.writeUrlWithLayerId(this,e,t)},t.prototype.readVersion=function(e,t){return(t=t.layerDefinition||t).currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3},t.prototype.readVisible=function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0},t.prototype.addAttachment=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){return"addAttachment"in r.source?r.source.addAttachment(e,t):b.reject(new f(le,"Layer source does not support addAttachment capability"))})},t.prototype.updateAttachment=function(e,t,r){var i=this;return this.load().then(function(){return i._checkAttachmentSupport(e)}).then(function(){return"updateAttachment"in i.source?i.source.updateAttachment(e,t,r):b.reject(new f(le,"Layer source does not support updateAttachment capability"))})},t.prototype.applyEdits=function(e){var t,r,i=this,n={edits:e,result:b.create(function(e,i){t=e,r=i})};return this.emit("apply-edits",n),this.load().then(function(){return ie(i.source)?i._processApplyEditsParams(e):b.reject(new f(le,"Layer source does not support applyEdits capability"))}).then(function(e){if(ie(i.source))return i.source.applyEdits(e).then(function(e){var r=function(e){return e.filter(function(e){return!e.error}).map(g.clone)},n={addedFeatures:r(e.addFeatureResults),updatedFeatures:r(e.updateFeatureResults),deletedFeatures:r(e.deleteFeatureResults)};return(n.addedFeatures.length||n.updatedFeatures.length||n.deletedFeatures.length)&&i.emit("edits",n),t(n),e})}).catch(function(e){throw r(e),e})},t.prototype.on=function(e,t){return this.inherited(arguments)},t.prototype.createGraphicsSource=function(){var e=this;return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load()):b.create(function(e){return r.e(85).then(function(){var t=[r(810)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(t){return new t.default({layer:e}).load()}).then(function(t){return e.emit("graphics-source-create",{graphicsSource:t}),t})},t.prototype.createGraphicsController=function(e){var t=this,n=e.layerView,o=d.ofType(s),a=this.source,l=ne(a),u=i({},e.options,{layer:this,layerView:n,graphics:l?a:new o});return(l?b.create(function(e){return r.e(47).then(function(){var t=[r(789)];e.apply(null,t)}.bind(this)).catch(r.oe)}):"2d"===n.view.type?b.create(function(e){return r.e(84).then(function(){var t=[r(811)];e.apply(null,t)}.bind(this)).catch(r.oe)}):b.create(function(e){return r.e(18).then(function(){var t=[r(778)];e.apply(null,t)}.bind(this)).catch(r.oe)})).then(function(e){return new e(u)}).then(function(e){return t.emit("graphics-controller-create",{graphicsController:e}),e.when()})},t.prototype.createQuery=function(){var e=new te,t=this.get("capabilities.data");return e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=this.outFields,e.where=this.definitionExpression||"1=1",e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e},t.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){return"deleteAttachments"in r.source?r.source.deleteAttachments(e,t):b.reject(new f(le,"Layer source does not support deleteAttachments capability"))})},t.prototype.getFeatureType=function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var n=null;return r.some(function(e){var t=e.id;return null!=t&&(t.toString()===i.toString()&&(n=e),!!n)}),n},t.prototype.getFieldDomain=function(e,t){var r,i=this,n=!1,o=t&&t.feature,a=o&&o.attributes,s=this.typeIdField&&a&&a[this.typeIdField];return null!=s&&this.types&&(n=this.types.some(function(t){return t.id==s&&((r=t.domains&&t.domains[e])&&"inherited"===r.type&&(r=i._getLayerDomain(e)),!0)})),n||r||(r=this._getLayerDomain(e)),r},t.prototype.getField=function(e,t){var r=this.processing?this.fields.concat(this.processing.fields):this.fields;return q.getField(e,t||r)},t.prototype.graphicChanged=function(e){this.emit("graphic-update",e)},t.prototype.queryAttachments=function(e){var t=this;return this.load().then(function(){if(!t.get("capabilities.data.supportsAttachment"))return b.reject(new f(le,"this layer doesn't support attachments"));var r=e.attachmentTypes,i=e.objectIds,n=e.globalIds,o=e.num,a=e.size,s=e.start,l=e.definitionExpression;if(!t.get("capabilities.query.supportsAttachments")){var u=i&&i.length>1,c=r&&r.length,p=n&&n.length,d=a&&a.length;if(u||c||p||d||o||s||l)return b.reject(new f(le,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e))}return i&&i.length||l?"queryAttachments"in t.source?t.source.queryAttachments(e):b.reject(new f(le,"Layer source does not support queryAttachments capability",e)):b.reject(new f(le,"objectIds or definitionExpression are required to perform attachment query",e))})},t.prototype.queryFeatures=function(e,t){var r=this;return this.load().then(function(){return r.source.queryFeatures(e||r.createQuery(),t)}).then(function(e){if(e&&e.features)for(var t=0,i=e.features;t<i.length;t++){var n=i[t];n.layer=n.sourceLayer=r}return e})},t.prototype.queryFeaturesJSON=function(e,t){var r=this;return this.load().then(function(){if(!r.source.queryFeaturesJSON)return b.reject(new f(le,"Layer source does not support queryFeaturesJSON capability"))}).then(function(){return r.source.queryFeaturesJSON(e||r.createQuery(),t)})},t.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then(function(){return r.source.queryObjectIds?r.source.queryObjectIds(e||r.createQuery(),t):b.reject(new f(le,"Layer source does not support queryObjectIds capability"))})},t.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then(function(){return r.source.queryFeatureCount?r.source.queryFeatureCount(e||r.createQuery(),t):b.reject(new f(le,"Layer source does not support queryFeatureCount capability"))})},t.prototype.queryExtent=function(e,t){var r=this;return this.load().then(function(){return r.source.queryExtent?r.source.queryExtent(e||r.createQuery(),t):b.reject(new f(le,"Layer source does not support queryExtent capability"))})},t.prototype.queryRelatedFeatures=function(e){var t=this;return this.load().then(function(){return"queryRelatedFeatures"in t.source?t.source.queryRelatedFeatures(e):b.reject(new f(le,"Layer source does not support queryRelatedFeatures capability"))})},t.prototype.read=function(e,t){var r=e.featureCollection;if(r){var i=r.layers;i&&1===i.length&&(this.inherited(arguments,[i[0],t]),null!=r.showLegend&&this.inherited(arguments,[{showLegend:r.showLegend},t]))}return this.inherited(arguments,[e,t]),this},t.prototype.write=function(e,t){if(t&&"web-scene"===t.origin&&t.messages){if(!this.url)return t.messages.push(new f("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to web scenes",{layer:this})),null;if(this.isTable)return t.messages.push(new f("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return y("esri-featurelayer-webgl")&&y("esri-webgl")?b.create(function(e){return r.e(32).then(function(){var t=[r(790)];e.apply(null,t)}.bind(this)).catch(r.oe)}):b.create(function(e){return Promise.all([r.e(9),r.e(15),r.e(38)]).then(function(){var t=[r(791)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return b.create(function(e){return Promise.all([r.e(4),r.e(6),r.e(8),r.e(7),r.e(60)]).then(function(){var t=[r(812)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._checkAttachmentSupport=function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:b.reject(new f(le,"feature is missing the identifying attribute "+r)):b.reject(new f(le,"'attributes' are required on a feature to query attachments")):b.reject(new f(le,"A feature is required to add/delete/update attachments")):b.reject(new f(le,"this layer doesn't support attachments"))},t.prototype._getLayerDomain=function(e){if(!this.fields)return null;var t=null;return this.fields.some(function(r){return r.name===e&&(t=r.domain),!!t}),t},t.prototype._fetchFirstLayerId=function(){return c(this.url,{query:{f:"json"},responseType:"json"}).then(function(e){var t=e.data;if(t&&Array.isArray(t.layers)&&t.layers.length>0)return t.layers[0].id})},t.prototype._initLayerProperties=function(e){return this._set("source",e),e.layerDefinition&&this.read(e.layerDefinition,{origin:"service",url:this.parsedUrl}),this._verifySource(),this._verifyFields(),q.fixRendererFields(this._getAllRenderers(this.renderer),this.fields),Y.loadStyleRenderer(this,{origin:"service"})},t.prototype._getAllRenderers=function(e){if(!e)return[];var t=[];return[e,e.trackRenderer,e.observationRenderer,e.latestObservationRenderer].forEach(function(e){e&&(t.push(e),e.rendererInfos&&e.rendererInfos.forEach(function(e){e.renderer&&t.push(e.renderer)}))}),t},t.prototype._verifyFields=function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(e){return"geometry"===e.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")},t.prototype._fixTemplates=function(e,t){e&&e.forEach(function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]})},t.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new f("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else{if(this.isTable)throw new f("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new f("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},t.prototype._initMemorySource=function(e){var t=this;e.forEach(function(e){e.layer=t,e.sourceLayer=t}),this._handles.add([e.on("after-add",function(e){e.item.layer=t,e.item.sourceLayer=t}),e.on("after-remove",function(e){e.item.layer=null,e.item.sourceLayer=null})],"fl-source")},t.prototype._resetMemorySource=function(e){e.forEach(function(e){e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")},t.prototype._hasMemorySource=function(){return!(this.url||!this.source)},t.prototype._readDataCapabilities=function(e){return{supportsAttachment:ae(e,"hasAttachments",!1),supportsM:ae(e,"hasM",!1),supportsZ:ae(e,"hasZ",!1)}},t.prototype._readOperationsCapabilities=function(e,t){var r=e?e.toLowerCase().split(",").map(function(e){return e.trim()}):[],i=-1!==r.indexOf("editing"),n=i&&-1!==r.indexOf("create"),o=i&&-1!==r.indexOf("delete"),a=i&&-1!==r.indexOf("update");return i&&!(n||o||a)&&(n=o=a=!0),{supportsCalculate:ae(t,"supportsCalculate",!1),supportsTruncate:ae(t,"supportsTruncate",!1),supportsValidateSql:ae(t,"supportsValidateSql",!1),supportsAdd:n,supportsDelete:o,supportsEditing:i,supportsQuery:-1!==r.indexOf("query"),supportsResizeAttachments:ae(t,"supportsAttachmentsResizing",!1),supportsUpdate:a}},t.prototype._readQueryCapabilities=function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,n=(e.supportedQueryFormats||"").split(",").reduce(function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e},new Set);return{supportsAttachments:ae(t,"supportsQueryAttachments",!1),supportsStatistics:ae(t,"supportsStatistics",e.supportsStatistics),supportsCentroid:ae(t,"supportsReturningGeometryCentroid",!1),supportsDistance:ae(t,"supportsQueryWithDistance",!1),supportsDistinct:ae(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ae(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ae(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:ae(t,"supportsHavingClause",!1),supportsOrderBy:ae(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ae(t,"supportsPagination",!1),supportsQuantization:ae(e,"supportsCoordinatesQuantization",!1),supportsResultType:ae(t,"supportsQueryWithResultType",!1),supportsSqlExpression:ae(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ae(e,"useStandardizedQueries",!1),supportsQueryByOthers:ae(r,"allowOthersToQuery",!0),supportsHistoricMoment:ae(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:n.has("pbf")}},t.prototype._readQueryRelatedCapabilities=function(e){var t=e.advancedQueryCapabilities,r=ae(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ae(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}},t.prototype._readEditingCapabilities=function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ae(e,"allowGeometryUpdates",!0),supportsGlobalId:ae(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:ae(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ae(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ae(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ae(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ae(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ae(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ae(t,"allowOthersToUpdate",!0)}},t.prototype._processApplyEditsParams=function(e){var t="'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required",r="feature-layer:missing-parameters";if(!e)return b.reject(new f(r,t));if((e=i({},e)).addFeatures=e.addFeatures||[],e.updateFeatures=e.updateFeatures||[],e.deleteFeatures=e.deleteFeatures||[],e.addFeatures.length||e.updateFeatures.length||e.deleteFeatures.length){var n=function(e){var t=new s;return t.geometry=e.geometry,t.attributes=e.attributes,t};return e.addFeatures=e.addFeatures.map(n),e.updateFeatures=e.updateFeatures.map(n),this._normalizeGeometries(e)}return b.reject(new f(r,t))},t.prototype._normalizeGeometries=function(e){var t=e.addFeatures,r=e.updateFeatures,i=t.concat(r).map(function(e){return e.geometry});return D.normalizeCentralMeridian(i).then(function(i){var n=t.length,o=r.length;return i.slice(0,n).forEach(function(t,r){e.addFeatures[r].geometry=t}),i.slice(n,n+o).forEach(function(t,r){e.updateFeatures[r].geometry=t}),e})},o([w.property({types:{key:"type",base:L.default,typeMap:{selection:U.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],t.prototype,"featureReduction",void 0),o([w.property({readOnly:!0,dependsOn:["loaded","renderer","fields"]})],t.prototype,"allRenderers",null),o([w.property({readOnly:!0})],t.prototype,"capabilities",void 0),o([w.reader("service","capabilities",["advancedQueryCapabilities","archivingInfo","supportsStatistics","supportsAdvancedQueries","hasAttachments","hasM","hasZ","supportsAttachmentsResizing","supportsCalculate","supportsTruncate","supportsValidateSql","supportsCoordinatesQuantization","useStandardizedQueries","ownershipBasedAccessControlForFeatures","allowGeometryUpdates","supportsApplyEditsWithGlobalIds","supportsRollbackOnFailureParameter","allowUpdateWithoutMValues","supportsAttachmentsByUploadId","capabilities","supportedQueryFormats"])],t.prototype,"readCapabilities",null),o([w.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),o([w.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),o([w.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),o([w.property({readOnly:!0,json:{read:Z.read}})],t.prototype,"defaultSymbol",void 0),o([w.property()],t.prototype,"dynamicDataSource",void 0),o([w.property({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),o([w.property({type:K,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}})],t.prototype,"elevationInfo",void 0),o([w.property({type:[B],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}})],t.prototype,"fields",void 0),o([w.property({type:S,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],t.prototype,"fullExtent",void 0),o([w.property()],t.prototype,"gdbVersion",void 0),o([w.property({json:{origins:{service:{read:se.read}},read:{source:"layerDefinition.geometryType",reader:se.read}}})],t.prototype,"geometryType",void 0),o([w.property({readOnly:!0,dependsOn:["loaded"],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}})],t.prototype,"hasAttachments",null),o([w.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],t.prototype,"hasM",void 0),o([w.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],t.prototype,"hasZ",void 0),o([w.property({readOnly:!0,type:M})],t.prototype,"heightModelInfo",void 0),o([w.property({type:Date})],t.prototype,"historicMoment",void 0),o([w.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),o([w.property({readOnly:!0})],t.prototype,"isTable",void 0),o([w.reader("service","isTable",["type"]),w.reader("isTable",["layerDefinition.type"])],t.prototype,"readIsTable",null),o([w.property({dependsOn:["loaded","url","source"],readOnly:!0})],t.prototype,"hasService",null),o([w.property(C.labelsVisible)],t.prototype,"labelsVisible",void 0),o([w.property({type:[G],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:W.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:W.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",void 0),o([w.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],t.prototype,"layerId",void 0),o([w.property({type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),o([w.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}})],t.prototype,"maxRecordCount",void 0),o([w.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.tileMaxRecordCount"}}})],t.prototype,"tileMaxRecordCount",void 0),o([w.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],t.prototype,"minScale",void 0),o([w.reader("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),o([w.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],t.prototype,"maxScale",void 0),o([w.reader("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),o([w.property({type:String})],t.prototype,"objectIdField",void 0),o([w.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),w.reader("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),o([w.property()],t.prototype,"operationalLayerType",void 0),o([w.property({dependsOn:["requiredFields"]})],t.prototype,"outFields",null),o([w.property({readOnly:!0,dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),o([w.property(C.popupEnabled)],t.prototype,"popupEnabled",void 0),o([w.property({type:l,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),o([w.property({type:R})],t.prototype,"processing",void 0),o([w.property({type:[J],readOnly:!0})],t.prototype,"relationships",void 0),o([w.property({types:X.types,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),o([w.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),w.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],t.prototype,"readRenderer",null),o([w.writer("renderer")],t.prototype,"writeRenderer",null),o([w.property({readOnly:!0,dependsOn:["allRenderers","labelingInfo","elevationInfo.featureExpressionInfo","popupTemplate.requiredFields"]})],t.prototype,"requiredFields",null),o([w.property({type:Boolean})],t.prototype,"returnM",void 0),o([w.property({type:Boolean})],t.prototype,"returnZ",void 0),o([w.property(C.screenSizePerspectiveEnabled)],t.prototype,"screenSizePerspectiveEnabled",void 0),o([w.property()],t.prototype,"source",null),o([w.cast("source")],t.prototype,"castSource",null),o([w.reader("portal-item","source",["featureSet"]),w.reader("web-map","source",["featureSet"])],t.prototype,"readSource",null),o([w.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],t.prototype,"serviceDefinitionExpression",void 0),o([w.property({type:I,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],t.prototype,"spatialReference",void 0),o([w.property({type:[z]})],t.prototype,"templates",void 0),o([w.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],t.prototype,"readTemplates",null),o([w.property()],t.prototype,"timeInfo",void 0),o([w.property()],t.prototype,"title",void 0),o([w.reader("service","title",["name"]),w.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],t.prototype,"readTitle",null),o([w.reader("web-map","title",["layerDefinition.name","title"])],t.prototype,"readTitleFromWebMap",null),o([w.property({type:String})],t.prototype,"sublayerTitleMode",void 0),o([w.property({type:String,readOnly:!0,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),o([w.property({json:{read:!1}})],t.prototype,"type",void 0),o([w.property({type:String,readOnly:!0})],t.prototype,"typeIdField",void 0),o([w.reader("service","typeIdField"),w.reader("typeIdField",["layerDefinition.typeIdField"])],t.prototype,"readTypeIdField",null),o([w.property({type:[N]})],t.prototype,"types",void 0),o([w.reader("service","types",["types"]),w.reader("types",["layerDefinition.types"])],t.prototype,"readTypes",null),o([w.property({type:d.ofType(V.FeatureIndex),readOnly:!0})],t.prototype,"indexes",void 0),o([w.property({type:String})],t.prototype,"url",null),o([w.writer("url")],t.prototype,"writeUrl",null),o([w.property({readOnly:!0})],t.prototype,"userIsAdmin",void 0),o([w.property({json:{origins:{"portal-item":{read:!1}}}})],t.prototype,"version",void 0),o([w.reader("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"]),w.reader("version",["layerDefinition.currentVersion","layerDefinition.capabilities","layerDefinition.drawingInfo","layerDefinition.hasAttachments","layerDefinition.htmlPopupType","layerDefinition.typeIdField","layerDefinition.types"])],t.prototype,"readVersion",null),o([w.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],t.prototype,"visible",void 0),o([w.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],t.prototype,"readVisible",null),o([a(0,w.cast($))],t.prototype,"queryAttachments",null),o([a(0,w.cast(te))],t.prototype,"queryFeatures",null),o([a(0,w.cast(te))],t.prototype,"queryFeaturesJSON",null),o([a(0,w.cast(te))],t.prototype,"queryObjectIds",null),o([a(0,w.cast(te))],t.prototype,"queryFeatureCount",null),o([a(0,w.cast(te))],t.prototype,"queryExtent",null),o([a(0,w.cast(re))],t.prototype,"queryRelatedFeatures",null),o([w.subclass("esri.layers.FeatureLayer")],t)}(w.declared(T,O,F,P,E,j,_))}.apply(null,i))||(e.exports=n)},354:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e){return e?72*e/t.DPI:0}Object.defineProperty(t,"__esModule",{value:!0});var i=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,n="screenUtils.toPt: input not recognized!";t.DPI=96,t.pt2px=function(e){return e?e/72*t.DPI:0},t.px2pt=r,t.toPt=function(e){if("string"==typeof e){if(i.test(e)){var t=e.match(i),o=Number(t[1]),a=t[3]&&t[3].toLowerCase(),s="-"===e.charAt(0),l="px"===a?r(o):o;return s?-l:l}return console.warn(n),null}return e}}.apply(null,i))||(e.exports=n)},368:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353)],void 0===(n=function(e,t,r){return function(){function e(t,i,n){this._context=null,this._glName=null,this._id=-1,this._desc=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._boundToUnits=new Set,this._context=t,this._desc={pixelFormat:i.pixelFormat,internalFormat:i.internalFormat,dataType:i.dataType,target:i.target?i.target:3553,samplingMode:i.samplingMode?i.samplingMode:9729,wrapMode:i.wrapMode?i.wrapMode:10497,maxAnisotropy:i.maxAnisotropy,flipped:void 0!==i.flipped&&i.flipped,hasMipmap:void 0!==i.hasMipmap&&i.hasMipmap,unpackAlignment:i.unpackAlignment?i.unpackAlignment:4,width:i.width,height:i.height,preMultiplyAlpha:void 0!==i.preMultiplyAlpha&&i.preMultiplyAlpha},this._id=++e._nextId,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(0),this.setData(n)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(this._context){if(this._glName){var t=this._context.gl;this._boundToUnits.forEach(function(t){e._context.bindTexture(null,t)}),t.deleteTexture(this._glName),this._glName=null}r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0),this._context=null}},e.prototype.resize=function(e,t){var r=this._desc;r.width===e&&r.height===t||(r.width=e,r.height=t,this.setData(null))},e.prototype.setData=function(t){var r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===t&&(t=null),null===t&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var i=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var n=this._desc;e._validateTexture(n),r.pixelStorei(r.UNPACK_ALIGNMENT,n.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.preMultiplyAlpha);var o=n.pixelFormat,a=n.internalFormat?n.internalFormat:o;if(t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)n.width&&n.height&&console.assert(t.width===n.width&&t.height===n.height),r.texImage2D(r.TEXTURE_2D,0,a,o,n.dataType,t),n.hasMipmap&&this.generateMipmap(),void 0===this._desc.width&&(this._desc.width=t.width),void 0===this._desc.height&&(this._desc.height=t.height);else{null!=n.width&&null!=n.height||console.error("Width and height must be specified!"),r.DEPTH24_STENCIL8&&a===r.DEPTH_STENCIL&&(a=r.DEPTH24_STENCIL8);var s=n.width,l=n.height;if(function(e){return null!=e&&"type"in e&&"compressed"===e.type}(t))for(var u=0;;++u){var c=t.levels[Math.min(u,t.levels.length-1)];if(r.compressedTexImage2D(r.TEXTURE_2D,u,a,s,l,0,c),1===s&&1===l||!n.hasMipmap)break;s=Math.max(1,s>>1),l=Math.max(1,l>>1)}else if(t)r.texImage2D(r.TEXTURE_2D,0,a,s,l,0,o,n.dataType,t),n.hasMipmap&&this.generateMipmap();else for(u=0;r.texImage2D(r.TEXTURE_2D,u,a,s,l,0,o,n.dataType,null),(1!==s||1!==l)&&n.hasMipmap;++u)s=Math.max(1,s>>1),l=Math.max(1,l>>1)}e._applySamplingMode(r,this._desc),e._applyWrapMode(r,this._desc),e._applyAnisotropicFilteringParameters(this._context,this._desc),this._context.bindTexture(i,0)},e.prototype.updateData=function(e,t,r,i,n,o){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var a=this._context.gl,s=this._desc,l=this._context.getBoundTexture(0);this._context.bindTexture(this,0),(t<0||r<0||i>s.width||n>s.height||t+i>s.width||r+n>s.height)&&console.error("An attempt to update out of bounds of the texture!"),o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?(console.assert(o.width===i&&o.height===n),a.texSubImage2D(a.TEXTURE_2D,e,t,r,s.pixelFormat,s.dataType,o)):a.texSubImage2D(a.TEXTURE_2D,e,t,r,i,n,s.pixelFormat,s.dataType,o),this._context.bindTexture(l,0)},e.prototype.generateMipmap=function(){var t=this._desc;t.hasMipmap||(t.hasMipmap=!0,e._validateTexture(t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);var r=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var i=this._context.gl;i.generateMipmap(i.TEXTURE_2D),this._context.bindTexture(r,0)},e.prototype.setSamplingMode=function(t){t!==this._desc.samplingMode&&(this._desc.samplingMode=t,e._validateTexture(this._desc),this._samplingModeDirty=!0)},e.prototype.setWrapMode=function(t){t!==this._desc.wrapMode&&(this._desc.wrapMode=t,e._validateTexture(this._desc),this._wrapModeDirty=!0)},e.prototype.applyChanges=function(){var t=this._context.gl,r=this._desc;this._samplingModeDirty&&(e._applySamplingMode(t,r),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,r),this._wrapModeDirty=!1)},e.prototype.setBoundToUnit=function(e,t){t?this._boundToUnits.add(e):this._boundToUnits.delete(e)},e._isPowerOfTwo=function(e){return 0==(e&e-1)},e._validateTexture=function(t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!"),e._isPowerOfTwo(t.width)&&e._isPowerOfTwo(t.height)||(33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))},e._applySamplingMode=function(e,t){var r=t.samplingMode;9985===r||9987===r?r=9729:9984!==r&&9986!==r||(r=9728),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.samplingMode)},e._applyWrapMode=function(e,t){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)},e._applyAnisotropicFilteringParameters=function(e,t){if(null!=t.maxAnisotropy){var r=e.capabilities.textureFilterAnisotropic;if(r){var i=e.gl;i.texParameterf(i.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy)}}},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},370:function(e,t,r){var i,n;i=[r(351),r(346),r(340),r(347),r(354),r(338),r(341),r(391),r(712),r(358),r(720),r(641)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p){var d="size",f=i({sizeInfo:d,colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),h=i({widthAndDepth:"width-and-depth"}),y=i({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),m=i({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap"},{ignoreUnknown:!0}),g=Math.PI,v=l.opacityToTransparency,_=l.transparencyToOpacity;return e([t,r],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:p,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var e=Object.create(null);return this.collectRequiredFields(e),Object.keys(e).sort()}},type:{type:m.apiValues,readOnly:!0,json:{type:m.jsonValues,read:!1,write:{writer:m.write,ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(e,t){return this._readVariables(e,t)}},write:function(e,t,r,i){var n=[];e.forEach(function(e,t){e.type===d?n.push(this._writeSizeInfo(e,i,t)):"color"===e.type?n.push(this._writeColorInfo(e,i,t)):"opacity"===e.type?n.push(this._writeOpacityInfo(e,i,t)):"rotation"===e.type&&n.push(this._writeRotationInfo(e,i,t))},this),t.visualVariables=n}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(e){var t=this._cache;this.visualVariables&&this.visualVariables.forEach(function(e,r){t.hasOwnProperty(r)&&(t[r]=null)},this),e&&e.some(function(e){return!!e.target})&&e.sort(function(e,t){return e.target===t.target?0:e.target?1:-1}),e&&e.forEach(function(e,r){"color"===e.type?t[r]=this._processColorInfo(e):"opacity"===e.type?t[r]=this._processOpacityInfo(e):e.type===d?t[r]=this._processSizeInfo(e):"rotation"===e.type&&(t[r]=this._processRotationInfo(e))},this),this._set("visualVariables",e)},getSymbol:function(e,t){},getVisualVariableValues:function(e,t){var r,i=this.visualVariables;return i&&(r=i.map(function(r){var i,n=r.type,a=n+"Info";switch((t=o.mixin({},t))[a]=r,n){case d:i=this.getSize(e,t);break;case"color":i=this.getColor(e,t);break;case"opacity":i=this.getOpacity(e,t);break;case"rotation":i=this.getRotationAngle(e,t)}return{variable:r,value:i}},this).filter(function(e){return null!=e.value},this)),r},hasVisualVariables:function(e,t){return e?!!this.getVisualVariablesForType(e,t):!!(this.getVisualVariablesForType(d,t)||this.getVisualVariablesForType("color",t)||this.getVisualVariablesForType("opacity",t)||this.getVisualVariablesForType("rotation",t))},getVisualVariablesForType:function(e,t){var r,i=this.visualVariables;return i&&(r=i.filter(function(r){return r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target)}))&&0===r.length&&(r=void 0),r},getSize:function(e,t){var r=this._getVarInfo(t&&t.sizeInfo,d),i=r.variable,n=this._cache[r.cacheKey],o=null;if(i){var a=i.minSize,s=i.maxSize,l="object"==typeof a&&a?this._getSize(e,a,n&&n.minSize,t):a,u="object"==typeof s&&s?this._getSize(e,s,n&&n.maxSize,t):s;o=this._getSize(e,i,n&&n.root,t,[l,u])}return o},getSizeRangeAtScale:function(e,t){var r,i=this._getVarInfo(e,d),n=this._cache[i.cacheKey],o={scale:t};if((e=i.variable)&&t){var a=e.minSize,s=e.maxSize,l="object"==typeof a&&a?this._getSize({},a,n&&n.minSize,o):a,u="object"==typeof s&&s?this._getSize({},s,n&&n.maxSize,o):s;if(null!=l||null!=u){if(l>u){var c=u;u=l,l=c}r={minSize:l,maxSize:u}}}return r},getColor:function(e,t){var r=this._getVarInfo(t&&t.colorInfo,"color");return this._getColorComponent(e,r.variable,this._cache[r.cacheKey],t,!1)},getOpacity:function(e,t){var r=this._getVarInfo(t&&t.opacityInfo,"opacity");return this._getColorComponent(e,r.variable,this._cache[r.cacheKey],t,!0)},getRotationAngle:function(e,t){var r=this._getVarInfo(t&&t.rotationInfo,"rotation"),i=r.variable,n=this._cache[r.cacheKey],o=i.axis||"heading",a="heading"===o&&"arithmetic"===i.rotationType?90:0,l="heading"===o&&"arithmetic"===i.rotationType?-1:1,u=i.field,c=n&&n.compiledFunc,p=e.attributes,d=0;return(u||c)&&(c?d=s.executeFunction(c,s.createExecContext(e,s.getViewInfo(t))):"function"==typeof u?d=u.apply(this,arguments):p&&(d=p[u]||0),d="number"!=typeof d||isNaN(d)?null:a+l*d),d},collectRequiredFields:function(e){var t=[];this.visualVariables&&(t=t.concat(this.visualVariables)),t.forEach(function(t){t&&(t.field&&(e[t.field]=!0),t.normalizationField&&(e[t.normalizationField]=!0),t.valueExpression&&s.extractFieldNames(t.valueExpression).forEach(function(t){e[t]=!0}))})},_getVarInfo:function(e,t){var r;if(e&&e.type===t&&this.visualVariables)r=this.visualVariables.indexOf(e),e=this.visualVariables[r];else if(this.visualVariables){var i=this.getVisualVariablesForType(t);e=i&&i[0],r=this.visualVariables.indexOf(e)}return{variable:e,cacheKey:r}},_readSizeInfo:function(e){return e.axis&&(e.axis=h.fromJSON(e.axis)),e.valueUnit&&(e.valueUnit=y.fromJSON(e.valueUnit)),e},_readColorInfo:function(e){return e&&(e.colors&&e.colors.forEach(function(t,r){Array.isArray(t)?e.colors[r]=u.fromJSON(t):e.colors[r]=new u(t)}),e.stops&&e.stops.forEach(function(t,r){t.color&&Array.isArray(t.color)?e.stops[r].color=u.fromJSON(t.color):t.color&&(e.stops[r].color=new u(t.color))})),e},_readOpacityInfo:function(e){var t;return e&&((t=o.mixin({},e)).transparencyValues&&(t.opacityValues=t.transparencyValues.map(_),delete t.transparencyValues),t.stops&&(t.stops=t.stops.map(function(e){return(e=o.mixin({},e)).opacity=_(e.transparency),delete e.transparency,e}))),t},_readVariables:function(e,t){e&&(e=e.map(function(e){return(e=o.clone(e)).type=f.fromJSON(e.type),e.type===d?e=this._readSizeInfo(e):"color"===e.type?e=this._readColorInfo(e):"opacity"===e.type&&(e=this._readOpacityInfo(e)),e},this));var r=t.rotationType,i=t.rotationExpression;if(i){var n={type:"rotation",rotationType:r},a=i.match(this._rotationRE);a&&a[1]&&(n.field=a[1],e||(e=[]),e.push(n))}return e},_createCache:function(e){var t=e&&e.valueExpression,r=s.createSyntaxTree(t),i=s.createFunction(r),n=!(!e||!e.expression)||this._viewScaleRE.test(t);return{ipData:this._interpolateData(e),hasExpr:!!t,compiledFunc:i,isScaleDriven:n}},_processColorInfo:function(e){return e&&(e.colors&&e.colors.forEach(function(t,r){t instanceof u||(e.colors[r]=new u(t))}),e.stops&&e.stops.forEach(function(t,r){!t.color||t.color instanceof u||(e.stops[r].color=new u(t.color))}),this._sortStops(e.stops)),this._createCache(e)},_processOpacityInfo:function(e){return this._sortStops(e&&e.stops),this._createCache(e)},_processSizeInfo:function(e){return e.stops&&Array.isArray(e.stops)?e.stops=this._processSizeInfoStops(e.stops):(e.minSize=e.minSize&&this._processSizeInfoSize(e.minSize),e.maxSize=e.maxSize&&this._processSizeInfoSize(e.maxSize)),{root:this._createCache(e),minSize:this._createCache(e.minSize),maxSize:this._createCache(e.maxSize)}},_processSizeInfoSize:function(e){return"object"==typeof e?e.stops=this._processSizeInfoStops(e.stops):e=n.toPt(e),e},_processSizeInfoStops:function(e){return e&&Array.isArray(e)&&(e.forEach(function(e){e.size=n.toPt(e.size)}),this._sortStops(e)),e},_sortStops:function(e){e&&Array.isArray(e)&&e.sort(function(e,t){return e.value-t.value})},_processRotationInfo:function(e){return this._createCache(e)},_getSize:function(e,t,r,i,n){var o=e.attributes,a=t.field,l=t.stops,u=0,p=r&&r.hasExpr,d=r&&r.compiledFunc,f=r&&r.ipData,h=r&&r.isScaleDriven,y="number"==typeof e,m=y?e:null;if(a||h||p){var v,_=i&&i.scale,b=n?n[0]:t.minSize,x=n?n[1]:t.maxSize,w=t.minDataValue,S=t.maxDataValue,M=t.valueUnit||"unknown",I=t.valueRepresentation,D=t.scaleBy,T=t.normalizationField,A=o?parseFloat(o[T]):void 0,j=i&&i.shape;if(h?m=null==_?this._getAverageValue(t):_:"number"!=typeof m&&(p?m=s.executeFunction(d,s.createExecContext(e,s.getViewInfo(i))):"function"==typeof a?m=a.apply(this,arguments):o&&(m=o[a])),null==m||T&&!y&&(isNaN(A)||0===A))return null;if(isNaN(A)||y||(m/=A),l){var O,F=this._lookupData(m,f),E=F[0],P=F[1];E===P?u=l[E].size:u=(O=l[E].size)+(l[P].size-O)*F[2]}else if(null!=b&&null!=x&&null!=w&&null!=S)if(m<=w)u=b;else if(m>=S)u=x;else if(v=(m-w)/(S-w),"area"===D&&j){var k="circle"===j,C=k?g*Math.pow(b/2,2):b*b,V=C+v*((k?g*Math.pow(x/2,2):x*x)-C);u=k?2*Math.sqrt(V/g):Math.sqrt(V)}else u=b+v*(x-b);else if("unknown"===M)null!=b&&null!=w?(b&&w?(v=m/w,u="circle"===j?2*Math.sqrt(v*Math.pow(b/2,2)):"square"===j||"diamond"===j||"image"===j?Math.sqrt(v*Math.pow(b,2)):v*b):u=m+(b||w),u=u<b?b:u,null!=x&&u>x&&(u=x)):u=m;else{var R=(i&&i.resolution?i.resolution:1)*c.meterIn[M];"area"===I?(u=Math.sqrt(m/g)/R,u*=2):(u=m/R,"radius"!==I&&"distance"!==I||(u*=2)),null!=b&&u<b&&(u=b),null!=x&&u>x&&(u=x)}}else t&&null==(u=l&&l[0]&&l[0].size)&&(u=t.minSize);return isNaN(u)?0:u},_getAverageValue:function(e){var t,r,i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2},_getColorComponent:function(e,t,r,i,n){var o,a=e.attributes,l=t&&t.field,u="number"==typeof e,c=u?e:null,p=r&&r.hasExpr,d=r&&r.compiledFunc,f=r&&r.ipData;if(l||p){var h=t.normalizationField,y=a&&h?parseFloat(a[h]):void 0;"number"!=typeof c&&(p?c=s.executeFunction(d,s.createExecContext(e,s.getViewInfo(i))):"function"==typeof l?c=l.apply(this,arguments):a&&(c=a[l])),null==c||h&&!u&&(isNaN(y)||0===y)||(isNaN(y)||u||(c/=y),o=n?this._getOpacity(c,t,f):this._getColor(c,t,f,i&&i.color))}else if(t){var m=t.stops;n?null==(o=m&&m[0]&&m[0].opacity)&&(o=t.opacityValues&&t.opacityValues[0]):o=m&&m[0]&&m[0].color||t.colors&&t.colors[0]}return o},_interpolateData:function(e){var t;if(e)if(e.colors||e.opacityValues){var r,i=(e.colors||e.opacityValues).length,n=e.minDataValue,o=(e.maxDataValue-n)/(i-1);for(t=[],r=0;r<i;r++)t[r]=n+r*o}else e.stops&&(t=e.stops.map(function(e){return e.value||0}));return t},_getOpacity:function(e,t,r){var i,n=this._lookupData(e,r);if(t=t||this.opacityInfo,n){var o,a=n[0],s=n[1];a===s?i=this._getOpacValue(t,a):i=(o=this._getOpacValue(t,a))+(this._getOpacValue(t,s)-o)*n[2]}return i},_getOpacValue:function(e,t){return e.opacityValues?e.opacityValues[t]:e.stops[t].opacity},_getColor:function(e,t,r,i){var n=this._lookupData(e,r);if(t=t||this.colorInfo,n){var o=n[0],a=n[1];return i=i||new u,o===a?i.setColor(this._getColorObj(t,o)):u.blendColors(this._getColorObj(t,o),this._getColorObj(t,a),n[2],i),i}},_getColorObj:function(e,t){return e.colors?e.colors[t]:e.stops[t].color},_lookupData:function(e,t){var r;if(t){var i=0,n=t.length-1;t.some(function(t,r){return e<t?(n=r,!0):(i=r,!1)}),r=[i,n,(e-t[i])/(t[n]-t[i])]}return r},_processForContext:function(e,t,r){if(t&&"web-scene"===t.origin){var i=null!=e.expression,n=null!=e.valueExpressionTitle&&"rotation"===e.type;t.messages&&(i&&t.messages.push(new a("property:unsupported",e.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".expression",context:t})),n&&t.messages.push(new a("property:unsupported",e.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpressionTitle",context:t}))),i&&delete e.expression,n&&delete e.valueExpressionTitle}else e.type===d&&this._convertExpressionToArcade(e)},_writeRotationInfo:function(e,t,r){return e&&(e=o.mixin({},e),this._processForContext(e,t,"visualVariables["+r+"]"),e.type=f.toJSON(e.type),e=o.fixJson(e,!0)),e},_convertExpressionToArcade:function(e){e&&e.expression&&(e.valueExpression="$view.scale")},_writeSizeInfo:function(e,t,r){if(e){e=o.mixin({},e),this._processForContext(e,t,"string"==typeof r?r:"visualVariables["+r+"]");var i=e.minSize,n=e.maxSize;i&&(e.minSize="number"==typeof i?i:this._writeSizeInfo(i,t,"visualVariables["+r+"].minSize")),n&&(e.maxSize="number"==typeof n?n:this._writeSizeInfo(n,t,"visualVariables["+r+"].maxSize"));var a=e.legendOptions,s=e.type,l=e.axis;e.type=f.toJSON(s),l&&(e.axis=h.toJSON(l)),a&&(e.legendOptions=o.mixin({},a),(a=a.customValues)&&(e.legendOptions.customValues=a.slice(0))),e.stops&&(e.stops=e.stops.map(function(e){return null===(e=o.mixin({},e)).label&&delete e.label,e})),e=o.fixJson(e,!0)}return e},_writeColorInfo:function(e,t,r){return e&&(e=o.mixin({},e),this._processForContext(e,t,"visualVariables["+r+"]"),e.type=f.toJSON(e.type),e.colors&&(e.colors=e.colors.map(function(e){return u.toJSON(e)})),e.stops&&(e.stops=e.stops.map(function(e){return(e=o.mixin({},e)).color&&(e.color=u.toJSON(e.color)),null==e.value&&(e.value=0),null===e.label&&delete e.label,e})),e.legendOptions&&(e.legendOptions=o.mixin({},e.legendOptions)),e=o.fixJson(e,!0)),e},_writeOpacityInfo:function(e,t,r){var i;return e&&(i=o.mixin({},e),this._processForContext(i,t,"visualVariables["+r+"]"),i.type=f.toJSON(i.type),i.opacityValues&&(i.transparencyValues=i.opacityValues.map(v),delete i.opacityValues),i.stops&&(i.stops=i.stops.map(function(e){return(e=o.mixin({},e)).transparency=v(e.opacity),delete e.opacity,null===e.label&&delete e.label,e})),i.legendOptions&&(i.legendOptions=o.mixin({},i.legendOptions)),i=o.fixJson(i,!0)),i}})}.apply(null,i))||(e.exports=n)},371:function(e,t,r){var i,n;i=[r(347),r(340),r(358)],void 0===(n=function(e,t,r){var i=e({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),n=0;return t.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+n++},properties:{type:{type:String,value:null,json:{read:i.read,write:{ignoreOrigin:!0,writer:i.write}}},color:{type:r,value:new r([0,0,0,1]),json:{read:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e},write:{allowNull:!0}}}}})}.apply(null,i))||(e.exports=n)},372:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353),r(891),r(368)],void 0===(n=function(e,t,r,i,n){return function(){function e(t,o,a,s){if(this._context=null,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachment=null,this._initialized=!1,this._context=t,this._desc={colorTarget:o.colorTarget,depthStencilTarget:o.depthStencilTarget,width:o.width,height:o.height,multisampled:o.multisampled},this._id=e._nextId++,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(4),a){var l=void 0;a instanceof n?(this._colorAttachment=a,l=a.descriptor):(l=a,this._colorAttachment=new n(this._context,l)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),e._validateTextureDimensions(l,this._desc)}if(s instanceof i)2===o.depthStencilTarget?this._stencilAttachment=s:1===o.depthStencilTarget||3===o.depthStencilTarget?this._depthAttachment=s:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),e._validateBufferDimensions(s.descriptor,this._desc);else if(s){this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");var u=void 0;s instanceof n?(this._depthStencilTexture=s,u=this._depthStencilTexture.descriptor):(u=s,this._depthStencilTexture=new n(this._context,u)),e._validateTextureDimensions(u,this._desc)}}return e.create=function(t,r){return new e(t,r)},e.createWithAttachments=function(t,r,i,n){return new e(t,i,r,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof n?this._colorAttachment:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)},e.prototype.attachColorTexture=function(t){if(t){var r=t.descriptor;if(e._validateTextureDimensions(r,this._desc),this._disposeColorAttachment(),this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl;i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.glName,0)}this._colorAttachment=t}},e.prototype.detachColorTexture=function(){var e=void 0;if(this._colorAttachment instanceof n){if(e=this._colorAttachment,this._initialized){this._context.bindFramebuffer(this);var t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}this._colorAttachment=null}return e},e.prototype.attachDepthStencilTexture=function(t){if(t){var r=t.descriptor;if(34041!==r.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==r.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),e._validateTextureDimensions(r,this._desc),4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl;i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,t.glName,0)}this._depthStencilTexture=t}},e.prototype.detachDepthStencilTexture=function(){var e=this._depthStencilTexture;if(e&&this._initialized){this._context.bindFramebuffer(this);var t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,e},e.prototype.attachDepthStencilBuffer=function(t){if(t){var r=t.descriptor;if(34041!==r.internalFormat&&33189!==r.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),e._validateBufferDimensions(r,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===r.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl,n=1===this._desc.depthStencilTarget?i.DEPTH_ATTACHMENT:i.DEPTH_STENCIL_ATTACHMENT;i.framebufferRenderbuffer(i.FRAMEBUFFER,n,i.RENDERBUFFER,t.glName)}this._depthAttachment=t}},e.prototype.detachDepthStencilBuffer=function(){var e=this._context.gl,t=this._depthAttachment;if(t&&this._initialized){this._context.bindFramebuffer(this);var r=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,null)}return this._depthAttachment=null,t},e.prototype.copyToTexture=function(e,t,r,i,n,o,a){(e<0||t<0||n<0||o<0)&&console.error("Offsets cannot be negative!"),(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!");var s=this._desc,l=a.descriptor;3553!==a.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(e+r>s.width||t+i>s.height||n+r>l.width||o+i>l.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");var u=this._context;u.bindTexture(a),u.bindFramebuffer(this),u.gl.copyTexSubImage2D(3553,0,n,o,e,t,r,i)},e.prototype.readPixels=function(e,t,r,i,n,o,a){(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!"),a||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,r,i,n,o,a)},e.prototype.resize=function(t,r){var i=this._desc;if(i.width!==t||i.height!==r){if(!this._initialized){if(i.width=t,i.height=r,this._colorAttachment instanceof n)(o=this._colorAttachment).resize(t,r);return void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,r))}var o,a;if(i.width=t,i.height=r,this._colorAttachment instanceof n)(a=(o=this._colorAttachment).descriptor).width=t,a.height=r,this._colorAttachment.dispose(),this._colorAttachment=new n(this._context,a),e._validateTextureDimensions(o.descriptor,this._desc);else this._colorAttachment&&this._disposeColorAttachment();if(null!=this._depthStencilTexture)(a=this._depthStencilTexture.descriptor).width=t,a.height=r,this._depthStencilTexture.dispose(),this._depthStencilTexture=new n(this._context,a);else(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments();this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}},e.prototype.initialize=function(){if(this._initialized)return!1;var e=this._context.gl;this._glName&&e.deleteFramebuffer(this._glName);var t=e.createFramebuffer(),r=this._desc;if(e.bindFramebuffer(e.FRAMEBUFFER,t),!this._colorAttachment)if(0===r.colorTarget){var o={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:r.width,height:r.height};this._colorAttachment=new n(this._context,o)}else{var a=new i(this._context,{internalFormat:32854,width:r.width,height:r.height});e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,a.glName),this._colorAttachment=a}if(this._colorAttachment instanceof n){var s=this._colorAttachment;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s.glName,0)}switch(r.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new i(this._context,{internalFormat:1===r.depthStencilTarget?33189:34041,width:r.width,height:r.height}));var l=1===r.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new i(this._context,{internalFormat:36168,width:r.width,height:r.height})),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");var u={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:r.width,height:r.height};this._depthStencilTexture=new n(this._context,u)}e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,this._depthStencilTexture.glName,0)}return e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=t,this._initialized=!0,!0},e.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof n){var e=this._colorAttachment;if(this._initialized)this._context.bindFramebuffer(this),(r=this._context.gl).framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0);e.dispose()}else if(this._colorAttachment instanceof WebGLRenderbuffer){var t=this._colorAttachment,r=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t)}this._colorAttachment=null},e.prototype._disposeDepthStencilAttachments=function(){var e=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var t=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,t,e.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)},e._validateBufferDimensions=function(e,t){console.assert(e.width>=0&&e.height>=0),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=e.width,t.height=e.height)},e._validateTextureDimensions=function(e,t){console.assert(e.width>=0&&e.height>=0),3553!==e.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=e.width,t.height=e.height)},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},374:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(336)],void 0===(n=function(e,t,r,i,n,o,a){var s=o({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(e){function t(t){var r=e.call(this,t)||this;return r.name=null,r.type=null,r}return r(t,e),i([a.property({json:{write:!0}})],t.prototype,"name",void 0),i([a.property({json:{read:s.read,write:s.write}})],t.prototype,"type",void 0),i([a.subclass("esri.layers.support.Domain")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},376:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353),r(390)],void 0===(n=function(e,t,r,i){return function(){function e(t,i,n,o,a){this._context=null,this._glName=null,this._layout=null,this._locations=null,this._buffers=void 0,this._indexBuffer=void 0,this._initialized=!1,this._context=t,this._layout=n,this._buffers=o,this._locations=i,a&&(this._indexBuffer=a),this._id=e._nextId++,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(2)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var e=this;return Object.keys(this._buffers).reduce(function(t,r){return t+e._buffers[r].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),e.prototype.dispose=function(e){if(void 0===e&&(e=!0),this._context){var t=this._context.capabilities.vao;if(t&&this._glName&&(t.deleteVertexArray(this._glName),this._glName=null),this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(var i in this._buffers)this._buffers[i].dispose(),delete this._buffers[i];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2),this._context=null}},e.prototype.initialize=function(){if(!this._initialized){var e=this._context.capabilities.vao;if(e){var t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}},e.prototype.bind=function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())},e.prototype._bindLayout=function(){var e=this._buffers,t=!!this._context.capabilities.vao,r=this._layout,n=this._indexBuffer;e||console.error("Vertex buffer dictionary is empty!");var o=this._context.gl;for(var a in e){var s=e[a];s||console.error("Vertex buffer is uninitialized!");var l=r[a];l||console.error("Vertex element descriptor is empty!"),i.bindVertexBufferLayout(this._context,this._locations,s,l)}n&&(t?o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,n.glName):this._context.bindBuffer(n))},e.prototype.unbind=function(){this.initialize();var e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()},e.prototype._unbindLayout=function(){var e=this._buffers,t=this._layout;for(var r in e||console.error("Vertex buffer dictionary is empty!"),e){var n=e[r];n||console.error("Vertex buffer is uninitialized!");var o=t[r];i.unbindVertexBufferLayout(this._context,this._locations,n,o)}var a=this._indexBuffer;a&&this._context.unbindBuffer(a.bufferType)},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},378:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(355)],void 0===(n=function(e,t,r){function i(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}function n(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.CONFIGURE=1]="CONFIGURE",e[e.CONFIGURED=2]="CONFIGURED",e[e.OPEN=3]="OPEN",e[e.OPENED=4]="OPENED",e[e.RESPONSE=5]="RESPONSE",e[e.INVOKE=6]="INVOKE",e[e.CANCEL=7]="CANCEL",e[e.CLOSE=8]="CLOSE",e[e.OPEN_PORT=9]="OPEN_PORT"}(t.MessageType||(t.MessageType={}));var o=0;t.newJobId=function(){return o++},t.isTranferableResult=i,t.toInvokeError=function(e){return e?e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details,stack:e.stack}):null},t.postMessage=function(e,t,o,a){2===arguments.length||void 0===o&&void 0===a?e.postMessage(t):(r("esri-workers-arraybuffer-transfer")||(a?(a=a.filter(function(e){return!n(e)})).length||(a=null):i(o)&&o.transferList&&(o.transferList=o.transferList.filter(function(e){return!n(e)}),o.transferList.length||(o.transferList=null))),a?(t.data=o,e.postMessage(t,a)):i(o)?(t.data=o.result,o.transferList?e.postMessage(t,o.transferList):e.postMessage(t)):(t.data=o,e.postMessage(t)))},t.receiveMessage=function(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}}.apply(null,i))||(e.exports=n)},382:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353),r(622)],void 0===(n=function(e,t,r,i){return function(){function e(t,i,n,o,a){this._context=null,this._glName=null,this._bufferType=void 0,this._usage=35044,this._size=-1,this._indexType=void 0,this._context=t,this._bufferType=i,this._usage=n,this._id=e._nextId++,this._glName=this._context.gl.createBuffer(),r("esri-webgl-debug")&&t.instanceCounter.incrementCount(1),o&&this.setData(o,a)}return e.createIndex=function(t,r,i,n){return new e(t,34963,r,i,n)},e.createVertex=function(t,r,i){return new e(t,34962,r,i)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)},e.prototype.setData=function(e,t){if(e){if("number"==typeof e){if(e<0&&console.error("Buffer size cannot be negative!"),34963===this._bufferType&&t)switch(this._indexType=t,this._size=e,t){case 5123:e*=2;break;case 5125:e*=4}}else{var r=e.byteLength;i.isUint16Array(e)&&(r/=2,this._indexType=5123),i.isUint32Array(e)&&(r/=4,this._indexType=5125),this._size=r}var n=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this),this._context.gl.bufferData(this._bufferType,e,this._usage),this._context.bindVAO(n)}},e.prototype.setSubData=function(e,t,r,n){if(void 0===t&&(t=0),void 0===r&&(r=0),e){(t<0||t>=this._size)&&console.error("offset is out of range!");var o=t,a=r,s=n,l=e.byteLength;i.isUint16Array(e)&&(l/=2,o*=2,a*=2,s*=2),i.isUint32Array(e)&&(l/=4,o*=4,a*=4,s*=4),void 0===n&&(n=l-1),r>=n&&console.error("end must be bigger than start!"),t+r-n>this._size&&console.error("An attempt to write beyond the end of the buffer!");var u=this._context.getBoundVAO();this._context.bindVAO(null),this._context.bindBuffer(this);var c=this._context.gl,p=ArrayBuffer.isView(e)?e.buffer:e;c.bufferSubData(this._bufferType,o,p.slice(a,s)),this._context.bindVAO(u)}},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},389:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(339),r(378)],void 0===(n=function(e,t,r,i,n){function o(e,t){e.delete(t)}var a=n.MessageType.CLOSE,s=n.MessageType.CANCEL,l=n.MessageType.INVOKE,u=n.MessageType.RESPONSE,c=n.MessageType.OPEN_PORT,p=function(){function e(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e){e.type===n.MessageType.CANCEL?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))},e.prototype.clear=function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null},e.prototype._process=function(){this._timer=null;for(var e=0,t=this._invokeMessages;e<t.length;e++){var r=t[e];this._cancelledJobIds.has(r.jobId)||this._invoke(r)}this._cancelledJobIds.clear(),this._invokeMessages.length=0},e}();return function(){function e(e,t,r){this._outJobs=new Map,this._inJobs=new Map,this._queue=new p(this._onInvoke.bind(this)),this._onMessage=this._onMessage.bind(this),this._client=t,this._port=e,this._port.addEventListener("message",this._onMessage),this._port.start(),this._channel=r}return e.connect=function(t){var r,i=new MessageChannel;return(r="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t).remoteClient=new e(i.port1,r,i),i.port2},e.prototype.close=function(){this._post({type:a}),this._close()},e.prototype.isBusy=function(){return this._outJobs.size>0},e.prototype.invoke=function(e,t,a){var u=this;if(!this._port)return i.reject(new r("remote-client:port-closed","Can't invoke(), port is closed"));var c=n.newJobId(),p=function(){o(u._outJobs,c),u._post({type:s,jobId:c})};return i.create(function(r,i){var n={resolve:r,reject:i,cancel:p};u._outJobs.set(c,n),u._post({type:l,jobId:c,methodName:e},t,a)},p)},e.prototype.openPort=function(){var e=this,t=n.newJobId(),r=function(){o(e._outJobs,t),e._post({type:s,jobId:t})};return i.create(function(i,n){var o={resolve:i,reject:n,cancel:r};e._outJobs.set(t,o),e._post({type:c,jobId:t})},r)},e.prototype._close=function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(function(e){e.cancel()}),this._inJobs.clear(),this._outJobs.clear(),this._queue.clear(),this._port=this._client=null},e.prototype._onMessage=function(e){var t=n.receiveMessage(e);if(t)switch(t.type){case u:this._onResponse(t);break;case l:this._queue.push(t);break;case s:this._onCancel(t);break;case a:this._close();break;case c:this._onOpenPort(t)}},e.prototype._onCancel=function(e){var t=this._inJobs,r=e.jobId,i=t.get(r);this._queue.push(e),i&&(o(t,r),i.cancel())},e.prototype._onInvoke=function(e){var t,r=this,a=e.methodName,s=e.jobId,l=e.data,c=this._inJobs,p=this._client,d=p[a];try{if(!d&&a&&-1!==a.indexOf("."))for(var f=a.split("."),h=0;h<f.length-1;h++)d=(p=p[f[h]])[f[h+1]];if("function"!=typeof d)throw new TypeError(a+" is not a function");t=d.call(p,l,this)}catch(e){return void this._post({type:u,jobId:s,error:n.toInvokeError(e)})}i.isThenable(t)?(c.set(s,t),t.then(function(e){c.has(s)&&(o(c,s),r._post({type:u,jobId:s},e))}).catch(function(e){c.has(s)&&(o(c,s),e&&"cancel"===e.dojoType||r._post({type:u,jobId:s,error:n.toInvokeError(e||{message:"Error encountered at method "+a})}))})):this._post({type:u,jobId:s},t)},e.prototype._onOpenPort=function(t){var r=new MessageChannel;new e(r.port1,this._client),this._post({type:u,jobId:t.jobId},r.port2,[r.port2])},e.prototype._onResponse=function(e){var t=e.jobId,i=e.error,n=e.data,a=this._outJobs;if(a.has(t)){var s=a.get(t);o(a,t),i?s.reject(r.fromJSON(JSON.parse(i))):s.resolve(n)}},e.prototype._post=function(e,t,r){return n.postMessage(this._port,e,t,r)},e}()}.apply(null,i))||(e.exports=n)},390:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(341)],void 0===(n=function(e,t,r,i){function n(e){return e[0].stride}function o(e){switch(e){case 5126:case 5124:case 5125:return 4;case 5122:case 5123:return 2;case 5120:case 5121:return 1;default:throw new Error("Unknown data type")}}Object.defineProperty(t,"__esModule",{value:!0}),t.vertexCount=function(e,t){return e.vertexBuffers[t].size/n(e.layout[t])},t.getStride=n,t.getBytesPerElement=o,t.addDescriptor=function(e,t,r,i,n,a){var s=o(i);if(e.length>0){var l=e[0].stride,u=l+s*r;e.forEach(function(e){return e.stride=u}),e.push({name:t,count:r,type:i,offset:l,stride:u,normalized:n,divisor:a})}else e.push({name:t,count:r,type:i,offset:0,stride:s*r,normalized:n,divisor:a})},t.assertCompatibleVertexAttributeLocations=function(e,t){var r=e.locations===t.locations;return r||console.error("VertexAttributeLocations are incompatible"),r},t.hasAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return!0;return!1},t.findAttribute=function(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null},t.copyFramebufferToTexture=function(e,t,r,i,n){void 0===n&&(n=0);var o=e.getBoundFramebufferObject(),a=e.getBoundTexture(0);e.bindFramebuffer(t),e.bindTexture(r,0),e.gl.copyTexImage2D(e.gl.TEXTURE_2D,n,r.descriptor.pixelFormat,i[0],i[1],i[2],i[3],0),e.gl.flush(),e.bindFramebuffer(o),e.bindTexture(a,0)},t.assert=function(e,t){if(!e)throw new i(t)},t.setBaseInstanceOffset=function(e,t){var i={};for(var n in e)i[n]=e[n].map(function(e){return e.divisor?r({},e,{baseInstance:t}):e});return i},t.bindVertexBufferLayout=function(e,t,r,i,n){var o=e.gl,a=e.capabilities.instancing;e.bindBuffer(r),i.forEach(function(e){var r=t[e.name],i=(n||(0+e.baseInstance?e.baseInstance:0))*e.stride;if(void 0===r&&console.error("There is no location for vertex attribute '"+e.name+"' defined."),e.baseInstance&&!e.divisor&&console.error("Vertex attribute '"+e.name+"' uses baseInstanceOffset without divisor."),e.count<=4)o.vertexAttribPointer(r,e.count,e.type,e.normalized,e.stride,e.offset+i),o.enableVertexAttribArray(r),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r,e.divisor);else if(9===e.count)for(var s=0;s<3;s++)o.vertexAttribPointer(r+s,3,e.type,e.normalized,e.stride,e.offset+12*s+i),o.enableVertexAttribArray(r+s),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r+s,e.divisor);else if(16===e.count)for(s=0;s<4;s++)o.vertexAttribPointer(r+s,4,e.type,e.normalized,e.stride,e.offset+16*s+i),o.enableVertexAttribArray(r+s),e.divisor&&e.divisor>0&&a&&a.vertexAttribDivisor(r+s,e.divisor);else console.error("Unsupported vertex attribute element count: "+e.count)})},t.unbindVertexBufferLayout=function(e,t,r,i){var n=e.gl,o=e.capabilities.instancing;e.bindBuffer(r),i.forEach(function(e){var r=t[e.name];if(e.count<=4)n.disableVertexAttribArray(r),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r,0);else if(9===e.count)for(var i=0;i<3;i++)n.disableVertexAttribArray(r+i),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r+i,0);else if(16===e.count)for(i=0;i<4;i++)n.disableVertexAttribArray(r+i),e.divisor&&e.divisor>0&&o&&o.vertexAttribDivisor(r+i,0);else console.error("Unsupported vertex attribute element count: "+e.count)}),e.unbindBuffer(34962)}}.apply(null,i))||(e.exports=n)},392:function(e,t,r){var i,n;i=[r(347),r(340),r(338),r(383),r(395),r(362),r(613),r(422)],void 0===(n=function(e,t,r,i,n,o,a,s){var l=e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return t.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",getDefaults:function(){return r.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(e,t){for(var r=o.fromJSON(t.spatialReference),n=[],a=0;a<e.length;a++){var s=e[a],l=i.fromJSON(s),u=s.geometry&&s.geometry.spatialReference;l.geometry&&!u&&(l.geometry.spatialReference=r),n.push(l)}return t.transform&&this._hydrate(t.transform,t.geometryType,n),n}}},fields:{value:null,type:[n]},geometryType:{value:null,json:{read:l.read}},spatialReference:{type:o}},toJSON:function(e){var t={hasZ:this.hasZ,hasM:this.hasM};return this.displayFieldName&&(t.displayFieldName=this.displayFieldName),this.fields&&(t.fields=this.fields.map(function(e){return e.toJSON()})),this.spatialReference?t.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(t.spatialReference=this.features[0].geometry.spatialReference.toJSON()),this.features[0]&&(this.features[0].geometry&&(t.geometryType=s.getJsonType(this.features[0].geometry)),t.features=a._encodeGraphics(this.features,e)),t.exceededTransferLimit=this.exceededTransferLimit,t.transform=this.transform,r.fixJson(t)},quantize:function(e){var t,r,i=e.translate[0],n=e.translate[1],o=e.scale[0],a=e.scale[1],s=this.features,l=function(e,t,r){var i,n,o,a,s,l,u,c=[];for(i=0,n=e.length;i<n;i++)o=e[i],i>0?(l=t(o[0]),u=r(o[1]),l===a&&u===s||(c.push([l-a,u-s]),a=l,s=u)):(a=t(o[0]),s=r(o[1]),c.push([a,s]));return c.length>0?c:null},u=function(e,t,r){return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){var i,n,o,a,s,u;for(u=[],i=0,n=(o=e.rings||e.paths).length;i<n;i++)a=o[i],(s=l(a,t,r))&&u.push(s);return u.length>0?(e.rings?e.rings=u:e.paths=u,e):null}:"multipoint"===e?function(e){var i;return(i=l(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:void 0}(this.geometryType,function(e){return Math.round((e-i)/o)},function(e){return Math.round((n-e)/a)});for(t=0,r=s.length;t<r;t++)u(s[t].geometry)||(s.splice(t,1),t--,r--);return this.transform=e,this},_hydrate:function(e,t,r){if(e){var i,n,o=e.translate[0],a=e.translate[1],s=e.scale[0],l=e.scale[1],u=function(e,t,r){return"esriGeometryPoint"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"esriGeometryPolyline"===e||"esriGeometryPolygon"===e?function(e){var i,n,o,a,s,l,u,c,p=e.rings||e.paths;for(i=0,n=p.length;i<n;i++)for(o=0,a=(s=p[i]).length;o<a;o++)l=s[o],o>0?(u+=l[0],c+=l[1]):(u=l[0],c=l[1]),l[0]=t(u),l[1]=r(c)}:"esriGeometryEnvelope"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"esriGeometryMultipoint"===e?function(e){var i,n,o,a,s,l=e.points;for(i=0,n=l.length;i<n;i++)o=l[i],i>0?(a+=o[0],s+=o[1]):(a=o[0],s=o[1]),o[0]=t(a),o[1]=r(s)}:void 0}(t,function(e){return e*s+o},function(e){return a-e*l});for(i=0,n=r.length;i<n;i++)r[i].geometry&&u(r[i].geometry)}}})}.apply(null,i))||(e.exports=n)},395:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(340),r(336),r(399),r(600)],void 0===(n=function(e,t,r,i,n,o,a,s){return function(e){function t(t){var r=e.call(this)||this;return r.alias=null,r.defaultValue=void 0,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})},i([o.property({type:String,json:{write:!0}})],t.prototype,"alias",void 0),i([o.property({json:{write:{allowNull:!0}}})],t.prototype,"defaultValue",void 0),i([o.property({types:a.types,json:{read:{reader:a.fromJSON},write:!0}})],t.prototype,"domain",void 0),i([o.property({type:Boolean,json:{write:!0}})],t.prototype,"editable",void 0),i([o.property({type:Number,json:{write:!0}})],t.prototype,"length",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),i([o.property({type:Boolean,json:{write:!0}})],t.prototype,"nullable",void 0),i([o.property({type:String,json:{read:s.kebabDict.read,write:s.kebabDict.write}})],t.prototype,"type",void 0),n=i([o.subclass("esri.layers.support.Field")],t)}(o.declared(n))}.apply(null,i))||(e.exports=n)},399:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(597),r(374),r(598),r(599)],void 0===(n=function(e,t,r,i,n,o){function a(e,t){switch(e.type){case"range":var r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return s.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every(function(e){return null==e||e.code!==t}))return s.INVALID_CODED_VALUE}return null}var s;Object.defineProperty(t,"__esModule",{value:!0}),t.CodedValueDomain=r,t.DomainBase=i,t.InheritedDomain=n,t.RangeDomain=o,function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(s=t.DomainValidationError||(t.DomainValidationError={})),t.isValidDomainValue=function(e,t){return null===a(e,t)},t.validateDomainValue=a,t.types={key:"type",base:t.DomainBase,typeMap:{range:t.RangeDomain,"coded-value":t.CodedValueDomain}},t.getDomainRange=function(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}},t.fromJSON=function(e){return e&&e.type?"range"===e.type?t.RangeDomain.fromJSON(e):"codedValue"===e.type?t.CodedValueDomain.fromJSON(e):null:null}}.apply(null,i))||(e.exports=n)},402:function(e,t,r){var i,n;i=[r(351),r(338),r(354),r(592)],void 0===(n=function(e,t,r,i){var n={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},o={color:[0,0,0,1],style:n.STYLE_SOLID,width:.75,cap:n.CAP_ROUND,join:n.JOIN_ROUND,miterLimit:7.5},a=e(i,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:n.STYLE_SOLID,json:{read:function(e,r){return t.valueOf(this._jsonStyles,e)||void 0},write:function(e,t){t.style=this._jsonStyles[e]}}},cap:{value:n.CAP_ROUND,json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}},join:{value:n.JOIN_ROUND,json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}},miterLimit:{value:7.5,cast:r.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return t.mixin(this.inherited(arguments),o)},normalizeCtorArgs:function(e,t,i,n,o,a){if(e&&"string"!=typeof e)return e;var s={};return null!=e&&(s.style=e),null!=t&&(s.color=t),null!=i&&(s.width=r.toPt(i)),null!=n&&(s.cap=n),null!=o&&(s.join=o),null!=a&&(s.miterLimit=r.toPt(a)),s},clone:function(){return new a({color:t.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});return t.mixin(a,n),a.defaultProps=o,a}.apply(null,i))||(e.exports=n)},403:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var i in t)if("declaredClass"!==i){var n=t[i];if(null!=n&&"function"!=typeof n)if(Array.isArray(n)){r[i]=[];for(var o=0;o<n.length;o++)r[i][o]=e(n[o])}else"object"==typeof n?n.toJSON&&(r[i]=JSON.stringify(n)):r[i]=n}return r}}.apply(null,i))||(e.exports=n)},408:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(760)],void 0===(n=function(e,t,r){function i(e,t,i){i=i||{};var n="function"==typeof t.shaders?t.shaders(i):t.shaders;return new r(e,n.vertexShader,n.fragmentShader,t.attributes)}Object.defineProperty(t,"__esModule",{value:!0}),t.glslifyDefineMap=function(e){var t="";for(var r in e){var i=e[r];if("boolean"==typeof i)i&&(t+="#define "+r+"\n");else if("number"==typeof i)t+="#define "+r+" "+i.toFixed()+"\n";else if("object"==typeof i){var n=i.options,o=0;for(var a in n)t+="#define "+n[a]+" "+(o++).toFixed()+"\n";t+="#define "+r+" "+n[i.value]+"\n"}}return t};var n=function(){function e(e){this._programCacheByTemplate=new Map,this._rctx=e}return e.prototype.dispose=function(){this._programCacheByTemplate.forEach(function(e){e.programs.forEach(function(e){e.dispose()})}),this._programCacheByTemplate=null},e.prototype.getProgram=function(e,t){var r=this;return this._programCacheByTemplate.has(e)||this.addProgramTemplate(e,function(t){return i(r._rctx,e,t)}),this.getProgramTemplateInstance(e,t)},e.prototype.addProgramTemplate=function(e,t){this._programCacheByTemplate.set(e,{constructor:t,programs:new Map})},e.prototype.getProgramTemplateInstance=function(e,t){var r=this._programCacheByTemplate.get(e);if(r){var i=t?JSON.stringify(t):"default";if(!r.programs.has(i)){var n=r.constructor(t);r.programs.set(i,n)}return r.programs.get(i)}return null},e}();t.ProgramCache=n,t.createProgram=i}.apply(null,i))||(e.exports=n)},412:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(338),r(336),r(370),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.symbol=null,t.type="simple",t}var a;return r(t,e),a=t,t.prototype.writeSymbolWebScene=function(e,t,r,i){s.writeTarget(e,t,r,i)},t.prototype.writeSymbol=function(e,t,r,i){s.writeTarget(e,t,r,i)},t.prototype.readSymbol=function(e,t,r){return s.read(e,t,r)},t.prototype.getSymbol=function(e,t){return this.symbol},t.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]},t.prototype.clone=function(){return new a({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:n.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},i([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([o.property({types:l.rendererTypes})],t.prototype,"symbol",void 0),i([o.writer("web-scene","symbol",{symbol:{types:l.rendererTypes3D}})],t.prototype,"writeSymbolWebScene",null),i([o.writer("symbol")],t.prototype,"writeSymbol",null),i([o.reader("symbol")],t.prototype,"readSymbol",null),i([o.enumeration.serializable()({simple:"simple"})],t.prototype,"type",void 0),a=i([o.subclass("esri.renderers.SimpleRenderer")],t)}(o.declared(a))}.apply(null,i))||(e.exports=n)},414:function(e,t,r){var i,n;i=[r(351),r(338),r(347),r(341),r(343),r(360),r(391),r(371),r(739),r(361),r(375),r(370),r(424),r(643)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f){var h=n.getLogger("esri.renderers.ClassBreaksRenderer");d=d.LegendOptions,f=f.ClassBreakInfo;var y=r({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),m=o.ensureType(f),g=e(p,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:s,key:"type",typeMap:{"simple-fill":c.types.typeMap["simple-fill"],"picture-fill":c.types.typeMap["picture-fill"],"polygon-3d":c.types.typeMap["polygon-3d"]}},value:null,json:{origins:{"web-scene":{read:u.read,write:{target:{backgroundFillSymbol:{type:l}},writer:u.writeTarget}}},read:u.read,write:u.writeTarget}},classBreakInfos:{type:[f],json:{read:function(e,t,r){if(Array.isArray(e)){var i=t.minValue;return e.map(function(e){var t=new f;return t.read(e,r),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t})}},write:function(e,t,r,i){e=e.map(function(e){return e.write({},i)}),this._areClassBreaksConsecutive()&&e.forEach(function(e){delete e.classMinValue}),t[r]=e}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:c.rendererTypes,value:null,json:{origins:{"web-scene":{read:u.read,write:{target:{defaultSymbol:{types:c.rendererTypes3D}},writer:u.writeTarget}}},read:u.read,write:u.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return a.createFunction(this.valueExpression)}},legendOptions:{type:d,value:null,json:{write:!0}},field:{value:null,cast:function(e){return null==e?e:"function"==typeof e?e:o.ensureString(e)},json:{type:String,write:function(e,t,r,n){"string"==typeof e?t[r]=e:n&&n.messages?n.messages.push(new i("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):h.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:y.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t?"field":r&&"percent-of-total",t&&r&&console.warn("warning: both normalizationField and normalizationTotal are set!")):"field"!==e&&"percent-of-total"!==e||(e=null),e},json:{type:y.jsonValues,read:y.read,write:y.write}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{type:["class-breaks"],value:"class-breaks",json:{type:["classBreaks"]}}},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(e,r,i){var n;n="number"==typeof e?new f({minValue:e,maxValue:r,symbol:i}):m(t.clone(e)),this.classBreakInfos.push(n),1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(e,t){var r,i,n=this.classBreakInfos.length;for(i=0;i<n;i++)if((r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue])[0]==e&&r[1]==t){this.classBreakInfos.splice(i,1);break}},getBreakIndex:function(e,t){var r,i,n,o=this.field,s=this.classBreakInfos,l=e.attributes,u=s.length,c=this.isMaxInclusive;if(this.valueExpression)r=a.executeFunction(this.compiledFunc,a.createExecContext(e,a.getViewInfo(t)));else if("function"==typeof o)r=o(e);else{r=parseFloat(l[o]);var p,d,f=this.normalizationType;if(f)if(p=parseFloat(this.normalizationTotal),d=parseFloat(l[this.normalizationField]),"log"===f)r=Math.log(r)*Math.LOG10E;else if("percent-of-total"!==f||isNaN(p)){if("field"===f&&!isNaN(d)){if(isNaN(r)||isNaN(d))return-1;r/=d}}else r=r/p*100}if(null!=r&&!isNaN(r)&&"number"==typeof r)for(i=0;i<u;i++)if((n=[s[i].minValue,s[i].maxValue])[0]<=r&&(c?r<=n[1]:r<n[1]))return i;return-1},getClassBreakInfo:function(e,t){var r=this.getBreakIndex(e,t);return-1!==r?this.classBreakInfos[r]:null},getSymbol:function(e,t){var r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol},getSymbols:function(){var e=[];return this.classBreakInfos.forEach(function(t){t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e},clone:function(){return new g({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:t.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:t.clone(this.visualVariables),legendOptions:t.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(e){this.inherited(arguments),[this.field,this.normalizationField].forEach(function(t){t&&(e[t]=!0)}),this.valueExpression&&a.extractFieldNames(this.valueExpression).forEach(function(t){e[t]=!0})},_areClassBreaksConsecutive:function(){for(var e=this.classBreakInfos,t=1;t<e.length;t++)if(e[t-1].maxValue!==e[t].minValue)return!1;return!0}});return g}.apply(null,i))||(e.exports=n)},415:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(358),r(338),r(336),r(370),r(644)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(t){var r=e.call(this)||this;return r.blurRadius=10,r.colorStops=[new l.HeatmapColorStop({ratio:0,color:new n("rgba(255, 140, 0, 0)")}),new l.HeatmapColorStop({ratio:.75,color:new n("rgba(255, 140, 0, 1)")}),new l.HeatmapColorStop({ratio:.9,color:new n("rgba(255, 0,   0, 1)")})],r.field=null,r.fieldOffset=0,r.maxPixelIntensity=100,r.minPixelIntensity=0,r.type="heatmap",r}var s;return r(t,e),s=t,t.prototype.clone=function(){return new s({blurRadius:this.blurRadius,colorStops:o.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})},i([a.property({type:Number,json:{write:!0}})],t.prototype,"blurRadius",void 0),i([a.property({type:[l.HeatmapColorStop],json:{write:!0}})],t.prototype,"colorStops",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),i([a.property({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],t.prototype,"fieldOffset",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"maxPixelIntensity",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"minPixelIntensity",void 0),i([a.property({dependsOn:["field"],readOnly:!0})],t.prototype,"requiredFields",void 0),i([a.enumeration.serializable()({heatmap:"heatmap"})],t.prototype,"type",void 0),s=i([a.subclass("esri.renderers.HeatmapRenderer")],t)}(a.declared(s))}.apply(null,i))||(e.exports=n)},416:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(388),r(431),r(379),r(341),r(338),r(343),r(349),r(336),r(360),r(411),r(370),r(621),r(424),r(645),r(391),r(361),r(634),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f,h,y,m,g,v,_,b,x){var w=u.getLogger("esri.renderers.UniqueValueRenderer"),S=d.ensureType(g.default);return function(e){function t(t){var r=e.call(this)||this;return r._valueInfoMap={},r._isDefaultSymbolDerived=!1,r.type="unique-value",r.backgroundFillSymbol=null,r.field=null,r.field2=null,r.field3=null,r.valueExpression=null,r.valueExpressionTitle=null,r.legendOptions=null,r.defaultLabel=null,r.fieldDelimiter=null,r.portal=null,r.styleOrigin=null,r.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var r=!1,i={type:"collection",added:[],removed:[],changed:[],unchanged:[]},n=0;n<t.length;n++)!function(n){var o=a.find(e,function(e){return e.value===t[n].value});o?y.diff(o,t[n])?(i.changed.push({type:"complete",oldValue:o,newValue:t[n]}),r=!0):(i.unchanged.push({oldValue:o,newValue:t[n]}),r=!0):(i.added.push(t[n]),r=!0)}(n);for(n=0;n<e.length;n++)!function(n){a.find(t,function(t){return t.value===e[n].value})||(i.removed.push(e[n]),r=!0)}(n);return r?i:void 0}}},r._set("uniqueValueInfos",[]),r}var u;return r(t,e),u=t,t.prototype.writeBackgroundFillSymbolWebScene=function(e,t,r,i){_.writeTarget(e,t,r,i)},t.prototype.castField=function(e){return null==e?e:"function"==typeof e?e:d.ensureString(e)},t.prototype.writeField=function(e,t,r,i){"string"==typeof e?t[r]=e:i&&i.messages?i.messages.push(new s("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):w.error(".field: cannot write field to JSON since it's not a string value")},Object.defineProperty(t.prototype,"compiledFunc",{get:function(){return v.createFunction(this.valueExpression)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultSymbol",{set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)},enumerable:!0,configurable:!0}),t.prototype.readDefaultSymbol=function(e,t,r){return _.read(e,t,r)},t.prototype.writeDefaultSymbolWebScene=function(e,t,r,i){this._isDefaultSymbolDerived||_.writeTarget(e,t,r,i)},t.prototype.writeDefaultSymbol=function(e,t,r,i){this._isDefaultSymbolDerived||_.writeTarget(e,t,r,i)},t.prototype.readPortal=function(e,t,r){return r.portal||f.getDefault()},t.prototype.readStyleOrigin=function(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var i=c.read(t.styleUrl,r);return Object.freeze({styleUrl:i})}},t.prototype.writeStyleOrigin=function(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=c.write(e.styleUrl,i),c.isAbsolute(t.styleUrl)&&(t.styleUrl=c.normalize(t.styleUrl)))},Object.defineProperty(t.prototype,"uniqueValueInfos",{set:function(e){this.styleOrigin?w.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())},enumerable:!0,configurable:!0}),t.prototype.addUniqueValueInfo=function(e,t){var r;this.styleOrigin?w.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(r="object"==typeof e?S(e):new g.default({value:e,symbol:t}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r)},t.prototype.removeUniqueValueInfo=function(e){if(this.styleOrigin)w.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}},t.prototype.getUniqueValueInfo=function(e,t){var r,i=this.field,n=e.attributes;if(this.valueExpression)r=v.executeFunction(this.compiledFunc,v.createExecContext(e,v.getViewInfo(t)));else if("function"!=typeof i&&this.field2){var o=this.field2,a=this.field3,s=[];i&&s.push(n[i]),o&&s.push(n[o]),a&&s.push(n[a]),r=s.join(this.fieldDelimiter||"")}else"function"==typeof i?r=i(e):i&&(r=n[i]);return this._valueInfoMap[r+""]},t.prototype.getSymbol=function(e,t){var r=this.getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol},t.prototype.getSymbols=function(){for(var e=[],t=0,r=this.uniqueValueInfos;t<r.length;t++){var i=r[t];i.symbol&&e.push(i.symbol)}return this.defaultSymbol&&e.push(this.defaultSymbol),e},t.prototype.clone=function(){var e=new u({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:l.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:l.clone(this.visualVariables),legendOptions:l.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:l.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=l.clone(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(l.clone(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e},t.prototype.collectRequiredFields=function(e){this.inherited(arguments),[this.field,this.field2,this.field3].forEach(function(t){t&&"string"==typeof t&&(e[t]=!0)}),this.valueExpression&&v.extractFieldNames(this.valueExpression).forEach(function(t){e[t]=!0})},t.prototype.populateFromStyle=function(){var e=this;return b.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(t){var r=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(function(i){var n=new o.WebStyleSymbol({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:i.name});e.defaultSymbol||i.name!==t.data.defaultItem||(e.defaultSymbol=n,e._isDefaultSymbolDerived=!0);var a=new g.default({value:i.name,symbol:n});r.push(a),e._valueInfoMap[i.name]=a}),e._set("uniqueValueInfos",Object.freeze(r)),!e.defaultSymbol&&e.uniqueValueInfos.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e})},t.prototype._updateValueInfoMap=function(){var e=this;this._valueInfoMap={},this.uniqueValueInfos.forEach(function(t){return e._valueInfoMap[t.value+""]=t})},t.fromPortalStyle=function(e,t){var r=new u(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||f.getDefault());var i=r.populateFromStyle();return i.catch(function(t){w.error("#fromPortalStyle('"+e+"'[, ...])","Failed to create unique value renderer from style name",t)}),i},t.fromStyleUrl=function(e,t){var r=new u(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));var i=r.populateFromStyle();return i.catch(function(t){w.error("#fromStyleUrl('"+e+"'[, ...])","Failed to create unique value renderer from style URL",t)}),i},i([p.enumeration.serializable()({uniqueValue:"unique-value"})],t.prototype,"type",void 0),i([p.property({types:{base:o.BaseSymbol,key:"type",typeMap:{"simple-fill":x.rendererTypes.typeMap["simple-fill"],"picture-fill":x.rendererTypes.typeMap["picture-fill"],"polygon-3d":x.rendererTypes.typeMap["polygon-3d"]}},json:{read:_.read,write:_.writeTarget}})],t.prototype,"backgroundFillSymbol",void 0),i([p.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:o.PolygonSymbol3D}})],t.prototype,"writeBackgroundFillSymbolWebScene",null),i([p.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],t.prototype,"field",void 0),i([p.cast("field")],t.prototype,"castField",null),i([p.writer("field")],t.prototype,"writeField",null),i([p.property({type:String,json:{write:!0}})],t.prototype,"field2",void 0),i([p.property({type:String,json:{write:!0}})],t.prototype,"field3",void 0),i([p.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),i([p.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),i([p.property({dependsOn:["valueExpression"]})],t.prototype,"compiledFunc",null),i([p.property({type:m.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),i([p.property({type:String,json:{write:!0}})],t.prototype,"defaultLabel",void 0),i([p.property({types:x.rendererTypes})],t.prototype,"defaultSymbol",null),i([p.reader("defaultSymbol")],t.prototype,"readDefaultSymbol",null),i([p.writer("web-scene","defaultSymbol",{defaultSymbol:{types:x.rendererTypes3D}})],t.prototype,"writeDefaultSymbolWebScene",null),i([p.writer("defaultSymbol")],t.prototype,"writeDefaultSymbol",null),i([p.property({type:String,json:{write:!0}})],t.prototype,"fieldDelimiter",void 0),i([p.property({type:f,readOnly:!0})],t.prototype,"portal",void 0),i([p.reader("portal",["styleName"])],t.prototype,"readPortal",null),i([p.property({readOnly:!0})],t.prototype,"styleOrigin",void 0),i([p.reader("styleOrigin",["styleName","styleUrl"])],t.prototype,"readStyleOrigin",null),i([p.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],t.prototype,"writeStyleOrigin",null),i([p.property({type:[g.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],t.prototype,"uniqueValueInfos",null),i([p.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],t.prototype,"requiredFields",void 0),i([n(1,p.cast(x.ensureType))],t.prototype,"addUniqueValueInfo",null),u=i([p.subclass("esri.renderers.UniqueValueRenderer")],t)}(p.declared(h))}.apply(null,i))||(e.exports=n)},423:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(405),r(442),r(414),r(415),r(412),r(416)],void 0===(n=function(e,t,r,i,n,o,a,s,l){function u(e,t,r){if(!e)return null;if(e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type)return r&&r.messages&&r.messages.push(new n("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null;var i=function(e){return e&&p[e.type]||null}(e);if(i){var o=new i;return o.read(e,r),o}return r&&r.messages&&e&&r.messages.push(new n("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:r})),null}function c(e,t,i){return e?i&&"web-scene"===i.origin&&"heatmap"===e.type?(i.messages&&i.messages.push(new r("renderer:unsupported","Renderer of type '"+e.declaredClass+"' are not supported in scenes.",{renderer:e,context:i})),null):e.write(t,i):null}Object.defineProperty(t,"__esModule",{value:!0});var p={simple:s,uniqueValue:l,classBreaks:o,heatmap:a};t.read=u,t.writeTarget=function(e,t,r,n){var o=c(e,{},n);o&&i.setDeepValue(r,o,t)},t.write=c,t.fromJSON=function(e,t){return u(e,0,t)}}.apply(null,i))||(e.exports=n)},424:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({title:this.title})},i([o.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),n=i([o.subclass("esri.renderers.support.LegendOptions")],t)}(o.declared(n));t.LegendOptions=a,t.default=a}.apply(null,i))||(e.exports=n)},425:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1}}();t.default=r}.apply(null,i))||(e.exports=n)},427:function(e,t,r){var i,n;i=[r(766),r(340),r(338),r(347),r(692),r(662),r(451),r(646),r(391),r(711),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p){function d(e){var t=l.createSyntaxTree(e),r=t&&t.body&&t.body[0]&&t.body[0].body&&t.body[0].body.body;if(!r||1!==r.length)return null;var i="ExpressionStatement"===r[0].type&&r[0].expression;if(!i||"MemberExpression"!==i.type)return null;var n=i.object;if(!n||"Identifier"!==n.type||"$feature"!==n.name)return null;var o=i.property;if(!o)return null;switch(o.type){case"Literal":return o.value;case"Identifier":return o.name}return null}function f(e){return!e||"service"!==e.origin&&(!e.layer||!s.isOfType(e.layer,"map-image"))}var h=i({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0}),y=new u,m=t.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{type:String,value:null,json:{write:!0}},labelExpression:{type:String,value:null,json:{read:function(e,t,r,i){var n=t.labelExpressionInfo;if(!n||!n.value&&!n.expression)return e},write:{allowNull:!0,writer:function(e,t,r,i){if(this.labelExpressionInfo&&f(i))if(null!=this.labelExpressionInfo.value)e=this._templateStringToSql(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var n=d(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}null!=e&&(t[r]=e)}}}},labelExpressionInfo:{value:null,type:o,json:{write:{overridePolicy:function(e,t,r){return f(r)?{allowNull:!0}:{enabled:!1}},writer:function(e,t,r,i){if(null==e&&null!=this.labelExpression&&f(i))e=new o({expression:this.getLabelExpressionArcade()});else if(!e)return;var n=e.toJSON(i);n.expression&&(t[r]=n)}}}},labelPlacement:{type:h.apiValues,value:null,json:{type:h.jsonValues,read:h.read,write:h.write}},maxScale:{type:Number,value:0,json:{write:function(e,t){(e||this.minScale)&&(t.maxScale=e)}}},minScale:{type:Number,value:0,json:{write:function(e,t){(e||this.maxScale)&&(t.minScale=e)}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var e=Object.create(null);return this._collectRequiredFields(e),Object.keys(e)}},symbol:{value:null,types:p.labelTypes,json:{origins:{"web-scene":{read:c.read,write:{target:{symbol:{types:p.labelTypes3D}},writer:c.writeTarget}}},read:c.read,write:c.writeTarget}},useCodedValues:{type:Boolean,value:null,json:{write:!0}},where:{type:String,value:null,json:{write:!0}}},getLabelExpression:function(){var e={expression:"",type:"none"};return this.labelExpressionInfo?this.labelExpressionInfo.value?(e.expression=this.labelExpressionInfo.value,e.type="conventional"):this.labelExpressionInfo.expression&&(e.expression=this.labelExpressionInfo.expression,e.type="arcade"):null!=this.labelExpression&&(e.expression=this._sqlToTemplateString(this.labelExpression),e.type="conventional"),e},getLabelExpressionArcade:function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return a.convertTemplatedStringToArcade(e.expression);case"arcade":return e.expression}return null},getOptions:function(e){var t={spatialReference:e},r=this.labelExpressionInfo;if(r){var i=r.expression;i&&!r.value&&(t.hasArcadeExpression=!0,t.compiledArcadeFunc=l.createFunction(i))}return t},getLabelExpressionSingleField:function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return function(e){var t=e.match(g);return t&&t[1].trim()||null}(e.expression);case"arcade":return d(e.expression)}return null},clone:function(){return new m({labelExpression:this.labelExpression,labelExpressionInfo:r.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(e){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),e),this._collectWhereRequiredFields(this.where,e)},_sqlToTemplateString:function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")},_templateStringToSql:function(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")},_collectWhereRequiredFields:function(e,t){if(null!=e){var r=e.split(" ");3===r.length&&(t[r[0]]=!0),7===r.length&&(t[r[0]]=!0,t[r[4]]=!0)}},_collectLabelExpressionRequiredFields:function(e,t){if("arcade"===e.type)l.extractFieldNames(e.expression).forEach(function(e){t[e]=!0});else{var r=e.expression.match(/{[^}]*}/g);r&&r.forEach(function(e){t[e.slice(1,-1)]=!0})}}});m.evaluateWhere=function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){var n=r(t[i[0]],i[1],i[2]),o=i[3],a=r(t[i[4]],i[5],i[6]);switch(o){case"AND":return n&&a;case"OR":return n||a}}return!1}catch(t){console.log("Error.: can't parse = "+e)}},m.buildLabelText=function(e,t,r,i){var n="";if(i&&i.hasArcadeExpression){if(i.compiledArcadeFunc){y.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:r});var o={vars:{$feature:y},spatialReference:i.spatialReference},a=l.executeFunction(i.compiledArcadeFunc,o);null!=a&&(n=a.toString())}}else{var s=t&&t.attributes||{};n=e.replace(/{[^}]*}/g,function(e){return m.formatField(e.slice(1,-1),e,s,r,i)})}return n},m.formatField=function(t,i,o,a,s){var l,u,c=i,p=t.toLowerCase();for(l=0;l<a.length;l++)if(a[l].name.toLowerCase()===p){c=o[a[l].name];var d=a[l].domain;if(d&&"object"==typeof d){if("codedValue"==d.type)for(u=0;u<d.codedValues.length;u++)d.codedValues[u].code==c&&(c=d.codedValues[u].name);else"range"==d.type&&d.minValue<=c&&c<=d.maxValue&&(c=d.name);return null==c?"":c}var f=a[l].type;if("date"==f){var h=e.fromJSON(s&&s.dateFormat||"shortDate"),y="DateFormat"+e.getFormat(h);y&&(c=r.substitute({myKey:c},"{myKey:"+y+"}"))}else"integer"!=f&&"small-integer"!=f&&"long"!=f&&"double"!=f||s&&s.numberFormat&&s.numberFormat.digitSeparator&&s.numberFormat.places&&(c=n.format(c,{places:s.numberFormat.places}))}return null==c?"":c};var g=/^\s*\{([^}]+)\}\s*$/i;return m}.apply(null,i))||(e.exports=n)},429:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(461),r(406),r(619)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){return null==t.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled")?void i.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,r.OriginId.DEFAULTS):t.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,i){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&e?t[r]=e:n.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},i)&&(t[r]=e)}}}}}},t.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",writer:function(e,t,r){t[r]=!e}}}},t.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}}}.apply(null,i))||(e.exports=n)},437:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(607)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r)}.apply(null,i))||(e.exports=n)},438:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(336)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshInterval=0,t}return r(t,e),t.prototype.refresh=function(){this.emit("refresh")},i([o.property({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0}})],t.prototype,"refreshInterval",void 0),i([o.subclass("esri.layers.mixins.RefreshableLayer")],t)}(o.declared(n))}.apply(null,i))||(e.exports=n)},440:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(338),r(336)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.definitionExpression=null,r.globalIds=null,r.num=null,r.objectIds=null,r.size=null,r.start=null,r}var n;return r(t,e),n=t,t.prototype.writeStart=function(e,t,r){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new n(o.clone({attachmentTypes:this.attachmentTypes,definitionExpression:this.definitionExpression,globalIds:this.globalIds,num:this.num,objectIds:this.objectIds,size:this.size,start:this.start}))},i([a.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"definitionExpression",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),i([a.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),i([a.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),i([a.writer("start"),a.writer("num")],t.prototype,"writeStart",null),n=i([a.subclass("esri.tasks.support.AttachmentQuery")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},441:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(413)],void 0===(n=function(e,t,r){return function(){function e(e,t,r,i){this.set(e,t,r,i)}return e.from=function(t,r,i,n){return e.pool.acquire(t,r,i,n)},e.getId=function(e,t,r,i){return"object"==typeof e?e.level+"/"+e.row+"/"+e.col+"/"+e.world:e+"/"+t+"/"+r+"/"+i},Object.defineProperty(e.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world},e.prototype.release=function(){this.level=0,this.row=0,this.col=0,this.world=0},e.prototype.set=function(e,t,r,i){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){var n=e.split("/"),o=n[0],a=n[1],s=n[2],l=n[3];this.level=parseFloat(o),this.row=parseFloat(a),this.col=parseFloat(s),this.world=parseFloat(l)}else this.level=+e,this.row=+t,this.col=+r,this.world=+i||0;return this},e.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world},e.prototype.getChildKeys=function(){var t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[e.pool.acquire(t,r,i,n),e.pool.acquire(t,r,i+1,n),e.pool.acquire(t,r+1,i,n),e.pool.acquire(t,r+1,i+1,n)]},e.prototype._compare=function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0},e.sort=function(t){return t.map(function(t){return e.from(t)}).sort(function(e,t){return e._compare(t)}).map(function(e){return e.id})},e.pool=new r(e,!0,null,25,50),e}()}.apply(null,i))||(e.exports=n)},444:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(364),r(340),r(338),r(336)],void 0===(n=function(e,t,r,i,n,o,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.definitionExpression=null,r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.source=null,r}var o;return r(t,e),o=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new o(a.clone({definitionExpression:this.definitionExpression,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source}))},i([s.property({type:String,json:{write:!0}})],t.prototype,"definitionExpression",void 0),i([s.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),i([s.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),i([s.property({type:Date})],t.prototype,"historicMoment",void 0),i([s.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),i([s.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),i([s.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([s.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),i([s.property({type:n.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),i([s.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),i([s.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),i([s.property({json:{write:!0}})],t.prototype,"source",void 0),o=i([s.subclass("esri.tasks.support.RelationshipQuery")],t)}(s.declared(o))}.apply(null,i))||(e.exports=n)},446:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.when=function e(t,i){return Array.isArray(i)?r.create(function(e){t(i,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[i]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,i))||(e.exports=n)},447:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(587),r(405),r(399)],void 0===(n=function(e,t,r,i,n){function o(e,t,r){if(e)for(var n=0,o=e;n<o.length;n++){var s=o[n],l=i.getDeepValue(s,t),u=l&&"function"!=typeof l&&a(l,r);u&&i.setDeepValue(s,u.name,t)}}function a(e,t){if("string"!=typeof e)return null;if(null!=t){e=e.toLowerCase();for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n&&n.name.toLowerCase()===e)return n}}return null}function s(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function l(e){return null===e||s(e)}function u(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function c(e){return null===e||u(e)}function p(e){return null!=e&&"string"==typeof e}function d(e){return null===e||p(e)}function f(e){return!0}function h(e,t){var r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?c:u;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?l:s;break;case"string":case"esriFieldTypeString":r=e.nullable?d:p;break;default:r=f}return 1===arguments.length?r:r(t)}function y(e){return null!=e&&x.has(e.type)}function m(e,t){return e.nullable&&null===t?null:y(e)&&!g(e.type,t)?_.OUT_OF_RANGE:h(e,t)?e.domain?n.validateDomainValue(e.domain,t):null:b.INVALID_TYPE}function g(e,t){var r=v(e);return!!r&&t>=r.min&&t<=r.max}function v(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return{min:-32768,max:32767};case"esriFieldTypeInteger":case"integer":return{min:-2147483648,max:2147483647};case"esriFieldTypeSingle":case"single":return{min:-3.4e38,max:1.2e38};case"esriFieldTypeDouble":case"double":var t=Number.MAX_VALUE;return{min:-Number.MAX_VALUE,max:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.fixRendererFields=function(e,r){if(null!=e&&null!=r)for(var i=0,n=Array.isArray(e)?e:[e];i<n.length;i++){var a=n[i];if(o(t.rendererFields,a,r),a.visualVariables)for(var s=0,l=a.visualVariables;s<l.length;s++){var u=l[s];o(t.visualVariableFields,u,r)}}},t.getField=a,t.getFieldDefaultValue=function(e){var t=e.defaultValue;return void 0!==t&&h(e,t)?t:e.nullable?null:void 0},t.isValueMatchingFieldType=h,t.rendererFields=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],t.visualVariableFields=["field","normalizationField"],t.numericTypes=["integer","small-integer","single","double"];var _,b,x=new r.default(t.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));t.isNumericField=y,t.isStringField=function(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)},t.isDateField=function(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)},t.isValidFieldValue=function(e,t){return null===m(e,t)},(_=t.NumericRangeValidationError||(t.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",(b=t.TypeValidationError||(t.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type",t.validateFieldValue=m,t.isNumberInRange=g,t.getFieldRange=function(e){var t=n.getDomainRange(e.domain);return t||(y(e)?v(e.type):void 0)},t.validationErrorToString=function(e,t,r){switch(e){case n.DomainValidationError.INVALID_CODED_VALUE:return"Value "+r+" is not in the coded domain - field: "+t.name+", domain: "+JSON.stringify(t.domain);case n.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+r+" is out of the range of valid values - field: "+t.name+", domain: "+JSON.stringify(t.domain);case b.INVALID_TYPE:return"Value "+r+" is not a valid value for the field type - field: "+t.name+", type: "+t.type+", nullable: "+t.nullable;case _.OUT_OF_RANGE:var i=v(t.type),o=i.min,a=i.max;return"Value "+r+" is out of range for the number type - field: "+t.name+", type: "+t.type+", value range is "+o+" to "+a}}}.apply(null,i))||(e.exports=n)},451:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(663)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i="__begin__",n="__end__",o=new RegExp(i,"ig"),a=new RegExp(n,"ig"),s=new RegExp("^"+i,"i"),l=new RegExp(n+"$","i"),u='"',c=u+" + ",p=" + "+u;t.convertTemplatedStringToArcade=function(e){var t;return e?(t=r.replace(e,function(e,t){return i+'$feature["'+t+'"]'+n}),t=s.test(t)?t.replace(s,""):u+t,t=(t=l.test(t)?t.replace(l,""):t+u).replace(o,c).replace(a,p)):t='""',t}}.apply(null,i))||(e.exports=n)},455:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return r(t,e),i([o.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),i([o.subclass("esri.layers.support.FeatureReduction")],t)}(o.declared(n));t.FeatureReduction=a,t.default=a}.apply(null,i))||(e.exports=n)},457:function(e,t,r){var i,n;i=[r(371),r(402)],void 0===(n=function(e,t){return e.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:t,json:{read:{default:null},write:!0}},type:null}})}.apply(null,i))||(e.exports=n)},458:function(e,t,r){var i,n;i=[r(351),r(354),r(371)],void 0===(n=function(e,t,r){return e(r,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(e){return e&&-1*e},write:function(e,t){t.angle=e&&-1*e}}},type:{},xoffset:{value:0,cast:t.toPt,json:{write:!0}},yoffset:{value:0,cast:t.toPt,json:{write:!0}},size:{value:9,cast:function(e){return"auto"===e?e:t.toPt(e)},json:{write:!0}}}})}.apply(null,i))||(e.exports=n)},459:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(347),r(338)],void 0===(n=function(e,t,r,i){function n(e){return null!=e&&e.hasOwnProperty("mapLayerId")}function o(e){return null!=e&&e.hasOwnProperty("dataSource")}function a(e){return e?(n(e)&&(e.type=t.MAPLAYER),o(e)&&(e.type=t.DATALAYER,e.dataSource.type||function(e){e.workspaceId?e.gdbVersion?e.type="table":e.query||e.oidFields?e.type="query-table":e.type="raster":e.leftTableKey&&e.rightTableKey&&e.leftTableSource&&e.rightTableSource&&(e.type="join-table",e.leftTableSource=a(e.leftTableSource),e.rightTableSource=a(e.rightTableSource))}(e.dataSource)),e):e}function s(e){var r={};return e.type===t.MAPLAYER?(r.mapLayerId=e.mapLayerId,e.gdbVersion&&(r.gdbVersion=e.gdbVersion)):e.type===t.DATALAYER&&(e.fields&&(r.fields=e.fields),r.dataSource=function(e){var t;switch(e.type){case"table":t={dataSourceName:e.dataSourceName,workspaceId:e.workspaceId,gdbVersion:e.gdbVersion};break;case"query-table":t={geometryType:u.toJSON(e.geometryType),workspaceId:e.workspaceId,query:e.query,oidFields:e.oidFields,spatialReference:e.spatialReference};break;case"join-table":t={leftTableSource:s(e.leftTableSource),rightTableSource:s(e.rightTableSource),leftTableKey:e.leftTableKey,rightTableKey:e.rightTableKey,joinType:d.toJSON(e.joinType)};break;case"raster":t={workspaceId:e.workspaceId,dataSourceName:e.dataSourceName}}return t.type=p.toJSON(e.type),i.fixJson(t)}(e.dataSource)),r.type=c.toJSON(e.type),i.fixJson(r)}function l(e){var r={};return c.fromJSON(e.type)===t.MAPLAYER?(r.mapLayerId=e.mapLayerId,e.gdbVersion&&(r.gdbVersion=e.gdbVersion)):c.fromJSON(e.type)===t.DATALAYER&&(e.fields&&(r.fields=e.fields),r.dataSource=function(e){var t;switch(e.type){case"table":t={dataSourceName:e.dataSourceName,workspaceId:e.workspaceId,gdbVersion:e.gdbVersion};break;case"queryTable":t={geometryType:u.fromJSON(e.geometryType),workspaceId:e.workspaceId,query:e.query,oidFields:e.oidFields,spatialReference:e.spatialReference};break;case"joinTable":t={leftTableSource:l(e.leftTableSource),rightTableSource:l(e.rightTableSource),leftTableKey:e.leftTableKey,rightTableKey:e.rightTableKey,joinType:d.fromJSON(e.joinType)};break;case"raster":t={workspaceId:e.workspaceId,dataSourceName:e.dataSourceName}}return t.type=p.fromJSON(e.type),i.fixJson(t)}(e.dataSource)),r.type=c.fromJSON(e.type),i.fixJson(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.MAPLAYER="map-layer",t.DATALAYER="data-layer";var u=r({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),c=r({mapLayer:t.MAPLAYER,dataLayer:t.DATALAYER}),p=r({joinTable:"join-table",queryTable:"query-table"}),d=r({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});t.isMapLayerSource=n,t.isDataLayerSource=o,t.castSource=a,t.sourceToJSON=s,t.sourceFromJSON=l}.apply(null,i))||(e.exports=n)},586:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(349)],void 0===(n=function(e,t,r){function i(e,t,i){return t.imageData?r.makeData({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):n(t.url,i)}function n(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!r.isAbsolute(e)&&t.layer.parsedUrl?r.join(t.layer.parsedUrl.path,"images",e):r.read(e,t)}function o(e,t,i,n){if(r.isDataProtocol(e)){var o=r.dataComponents(e);t.contentType=o.mediaType,t.imageData=o.data,i&&i.imageData===t.imageData&&i.url&&(t.url=a(i.url,n))}else t.url=a(e,n)}function a(e,t){return r.write(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.readImageDataOrUrl=i,t.read=n,t.writeImageDataAndUrl=o,t.write=a,t.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:i},write:{writer:function(e,t,r,i){o(e,t,this.source,i)}}}},t.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,t,r){var i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=n(t.url,r)),i}}}}}.apply(null,i))||(e.exports=n)},587:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=r(653),o=r(450),a=r(654),s=r(614);r(660),t.Set=o.default.Set,s.default("es6-set")||(t.Set=((i=function(){function e(e){if(this._setData=[],this[Symbol.toStringTag]="Set",e)if(a.isArrayLike(e))for(var t=0;t<e.length;t++)this.add(e[t]);else try{for(var r=n.__values(e),i=r.next();!i.done;i=r.next()){var o=i.value;this.add(o)}}catch(e){s={error:e}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}}var s,l}return e.prototype.add=function(e){return this.has(e)?this:(this._setData.push(e),this)},e.prototype.clear=function(){this._setData.length=0},e.prototype.delete=function(e){var t=this._setData.indexOf(e);return-1!==t&&(this._setData.splice(t,1),!0)},e.prototype.entries=function(){return new a.ShimIterator(this._setData.map(function(e){return[e,e]}))},e.prototype.forEach=function(e,t){for(var r=this.values(),i=r.next();!i.done;)e.call(t,i.value,i.value,this),i=r.next()},e.prototype.has=function(e){return this._setData.indexOf(e)>-1},e.prototype.keys=function(){return new a.ShimIterator(this._setData)},Object.defineProperty(e.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0}),e.prototype.values=function(){return new a.ShimIterator(this._setData)},e.prototype[Symbol.iterator]=function(){return new a.ShimIterator(this._setData)},e}())[Symbol.species]=i,i)),t.default=t.Set},588:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(338),r(336)],void 0===(n=function(e,t,r,i,n,o,a,s){var l=o({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return function(e){function t(t){var r=e.call(this,t)||this;return r.name=null,r.description=null,r.drawingTool=null,r.prototype=null,r.thumbnail=null,r}return r(t,e),t.prototype.writeDrawingTool=function(e,t){t.drawingTool=l.toJSON(e)},t.prototype.writePrototype=function(e,t){t.prototype=a.fixJson(a.clone(e),!0)},t.prototype.writeThumbnail=function(e,t){t.thumbnail=a.fixJson(a.clone(e))},i([s.property({json:{write:!0}})],t.prototype,"name",void 0),i([s.property({json:{write:!0}})],t.prototype,"description",void 0),i([s.property({json:{read:l.read,write:l.write}})],t.prototype,"drawingTool",void 0),i([s.writer("drawingTool")],t.prototype,"writeDrawingTool",null),i([s.property({json:{write:!0}})],t.prototype,"prototype",void 0),i([s.writer("prototype")],t.prototype,"writePrototype",null),i([s.property({json:{write:!0}})],t.prototype,"thumbnail",void 0),i([s.writer("thumbnail")],t.prototype,"writeThumbnail",null),i([s.subclass("esri.layers.support.FeatureTemplate")],t)}(s.declared(n))}.apply(null,i))||(e.exports=n)},592:function(e,t,r){var i,n;i=[r(351),r(354),r(371)],void 0===(n=function(e,t,r){return e(r,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:t.toPt,json:{write:!0}}}})}.apply(null,i))||(e.exports=n)},593:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=i||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,i=new e(this._data,this._dataView,r,r+t);return this._skip(t),i},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var i="",n="";r=Math.min(this._end,r);for(var o=t;o<r;++o){var a=e[o];128&a?n+="%"+a.toString(16):(i+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(i+=decodeURIComponent(n)),i},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()}.apply(null,i))||(e.exports=n)},595:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t}}();t.default=r}.apply(null,i))||(e.exports=n)},597:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(338),r(336),r(374)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.codedValues=null,r.type="coded-value",r}var a;return r(t,e),a=t,t.prototype.writeCodedValues=function(e,t){var r=null;e&&(r=e.map(function(e){return n.fixJson(n.clone(e))})),t.codedValues=r},t.prototype.getName=function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some(function(e){return String(e.code)===r&&(t=e.name),!!t})}return t},t.prototype.clone=function(){return new a({codedValues:n.clone(this.codedValues),name:this.name})},i([o.property({json:{write:!0}})],t.prototype,"codedValues",void 0),i([o.writer("codedValues")],t.prototype,"writeCodedValues",null),i([o.enumeration.serializable()({codedValue:"coded-value"})],t.prototype,"type",void 0),a=i([o.subclass("esri.layers.support.CodedValueDomain")],t)}(o.declared(a))}.apply(null,i))||(e.exports=n)},598:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(374)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="inherited",r}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o},i([n.enumeration.serializable()({inherited:"inherited"})],t.prototype,"type",void 0),o=i([n.subclass("esri.layers.support.InheritedDomain")],t)}(n.declared(o))}.apply(null,i))||(e.exports=n)},599:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(374)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.maxValue=null,r.minValue=null,r.type="range",r}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({maxValue:this.maxValue,minValue:this.minValue,name:this.name})},i([n.property({json:{read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{target:"range",writer:function(e,t,r){t[r]=[this.minValue,e]}}}})],t.prototype,"maxValue",void 0),i([n.property({json:{read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue]}}}})],t.prototype,"minValue",void 0),i([n.enumeration.serializable()({range:"range"})],t.prototype,"type",void 0),o=i([n.subclass("esri.layers.support.RangeDomain")],t)}(n.declared(o))}.apply(null,i))||(e.exports=n)},600:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(347)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.kebabDict=r({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})}.apply(null,i))||(e.exports=n)},603:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t={}),this.geometry=e,this.attributes=t,r&&(this.centroid=r),null!=i&&(this.objectId=i)}}();t.default=r}.apply(null,i))||(e.exports=n)},607:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(381),r(435),r(343),r(339),r(608),r(389),r(609)],void 0===(n=function(e,t,i,n,o,a,s,l,u){function c(){if(g)return g;for(var e=d+f,t=[],r=0;r<e;r++)!function(e){var r=u.create(e).then(function(t){return m[e]=t,t});t.push(r)}(r);return g=n(t).then(function(){})}Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=s,t.RemoteClient=l;var p=i("host-browser")?navigator.hardwareConcurrency:0;p||(p=i("safari")&&i("mac")||i("trident")?8:2);var d=i("esri-workers-debug")?1:Math.max(1,Math.ceil(p/2)),f=i("esri-workers-debug")?1:Math.max(1,Math.floor(p/2)),h=o.getLogger("esri.core.workers"),y=0,m=[];t.initialize=function(){c()},t.open=function(i,n,o){if(void 0===n&&(n={}),Array.isArray(i))return new t.Connection(i.map(function(e){return new t.RemoteClient(e,n.client)}));if("string"!=typeof i){h.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var s=i;i=n,n={client:s,strategy:o?"dedicated":"distributed"}}var l=n.strategy||"distributed";return"local"===l?a.create(function(n){Promise.resolve().then(function(){var r=[e(i,null,!1)];(function(e){n(t.RemoteClient.connect(e))}).apply(null,r)}).catch(r.oe)}).then(function(e){return new t.Connection([new t.RemoteClient(e,n.client)])}):c().then(function(){if("dedicated"===l){var e=d+y++;return y%=f,m[e].open(i).then(function(e){return new t.Connection([new t.RemoteClient(e,n.client)])})}return a.all(m.map(function(e){return e.open(i)})).then(function(e){return new t.Connection(e.map(function(e){return new t.RemoteClient(e,n.client)}))})})},t.terminate=function(){g&&(g.cancel(),g=null);for(var e=0;e<m.length;e++)m[e]&&m[e].terminate();m.length=0};var g=null}.apply(null,i))||(e.exports=n)},608:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339)],void 0===(n=function(e,t,r){return function(){function e(e){this._clientIdx=0,this._clients=e}return e.prototype.broadcast=function(e,t){for(var r=[],i=0,n=this._clients;i<n.length;i++){var o=n[i];r.push(o.invoke(e,t))}return r},e.prototype.close=function(){for(var e=0,t=this._clients;e<t.length;e++)t[e].close();this._clients=[]},e.prototype.invoke=function(e,t,i,n){var o=n&&n.client;if(!this._clients||!this._clients.length)return r.reject(new Error("Connection closed"));null!=o&&-1!==this._clients.indexOf(o)||this._clients.some(function(e){return!e.isBusy()&&(o=e,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,o=this._clients[this._clientIdx]);var a=o.invoke(e,t,i);return n&&(n.client=o),a},e.prototype.openPorts=function(){return r.all(this._clients.map(function(e){return e.openPort()}))},e}()}.apply(null,i))||(e.exports=n)},609:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(620),r(341),r(343),r(339),r(378),r(610)],void 0===(n=function(e,t,r,i,n,o,a,s){function l(e,t){e.delete(t)}var u=n.getLogger("esri.core.workers"),c=a.MessageType.CANCEL,p=a.MessageType.INVOKE,d=a.MessageType.OPEN,f=a.MessageType.OPENED,h=a.MessageType.RESPONSE;return function(){function e(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",function(e){e.preventDefault(),u.error(e)})}return e.create=function(t){return s.createWorker().then(function(r){return new e(r,t)})},e.prototype.terminate=function(){this.worker.terminate()},e.prototype.open=function(e){var t=this,r=a.newJobId(),i=function(){l(t._outJobs,r),t._post({type:c,jobId:r})};return o.create(function(n,o){var a={resolve:n,reject:o,cancel:i};t._outJobs.set(r,a),t._post({type:d,jobId:r,modulePath:e})},i)},e.prototype._onMessage=function(e){var t=a.receiveMessage(e);if(t)switch(t.type){case f:case h:this._onResponse(t);break;case c:this._onCancel(t);break;case p:this._onInvoke(t)}},e.prototype._onCancel=function(e){var t=this._inJobs.get(e.jobId);t&&t.cancel()},e.prototype._onInvoke=function(e){var t,i=this,n=e.methodName,s=e.jobId,u=e.data,c=this._inJobs,p=r.workerMessages[n];try{if("function"!=typeof p)throw new TypeError(n+" is not a function");t=p.call(null,u)}catch(e){return void this._post({type:h,jobId:s,error:a.toInvokeError(e)})}o.isThenable(t)?(c.set(s,t),t.then(function(e){l(c,s),i._post({type:h,jobId:s},e)}).catch(function(e){l(c,s),e||(e={message:"Error encountered at method"+n}),e.dojoType&&"cancel"===e.dojoType||i._post({type:h,jobId:s,error:a.toInvokeError(e)})})):this._post({type:h,jobId:s},t)},e.prototype._onResponse=function(e){var t=e.jobId,r=e.error,n=e.data,o=this._outJobs.get(t);o&&(l(this._outJobs,t),r?o.reject(i.fromJSON(JSON.parse(r))):o.resolve(n))},e.prototype._post=function(e,t,r){return a.postMessage(this.worker,e,t,r)},e}()}.apply(null,i))||(e.exports=n)},610:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(356),r(124),r(350),r(353),r(343),r(339),r(349),r(611),r(378),r(612)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d){function f(e){return l.create(function(t){function r(n){var o=p.receiveMessage(n);if(o)switch(o.type){case x:h(e);break;case _:e.removeEventListener("message",r),e.removeEventListener("error",i),t(e)}}function i(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),g.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new d).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function h(e){var t,o=n.workers.loaderUrl||c.DEFAULT_LOADER_URL;if(null!=n.default){var s=r({},n);delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(n));var l=n.workers.loaderConfig,u=c.default({baseUrl:l.baseUrl,locale:i.locale,has:r({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-secure-context":a("esri-secure-context"),"esri-workers-arraybuffer-transfer":a("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1},l.has),map:r({},l.map),paths:r({},l.paths),packages:l.packages||[]});e.postMessage({type:b,configure:{esriConfig:t,loaderUrl:o,loaderConfig:u}})}Object.defineProperty(t,"__esModule",{value:!0});var y=u.normalize(e.toUrl("./worker.js")),m=!u.hasSameOrigin(y,location.href),g=s.getLogger("esri.core.workers"),v=null;a.add("esri-workers-arraybuffer-transfer",!a("safari")||a("safari")>=12);var _=p.MessageType.CONFIGURED,b=p.MessageType.CONFIGURE,x=p.MessageType.HANDSHAKE;t.createWorker=function(){if(!a("esri-workers"))return f(new d);if(!m){var e=void 0;try{e=new Worker(y)}catch(t){g.warn("Failed to create Worker. Fallback to execute module in main thread",event),e=new d}return f(e)}return v||(v=o(y,{responseType:"text"})),v.then(function(e){return new Worker(URL.createObjectURL(new Blob([e.data],{type:"text/javascript"})))}).catch(function(e){return g.warn("Failed to create Worker. Fallback to execute module in main thread",e),new d}).then(function(e){return f(e)})}}.apply(null,i))||(e.exports=n)},611:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(355),r(349)],void 0===(n=function(e,t,r,i,n){function o(t){return n.removeQueryParameters(e.toUrl(t))}function a(e,t){for(var i=0,a=e;i<a.length;i++)if(a[i].name===t.name)return;var s=r({},t),l=o(s.name+"/x.js"),u=l.slice(0,l.length-5);s.location=n.makeAbsolute(u),e.push(s)}Object.defineProperty(t,"__esModule",{value:!0});var s=i("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";t.DEFAULT_LOADER_URL=n.makeAbsolute(o(s)),t.DEFAULT_CONFIG={baseUrl:function(){var e=o("dojo/x.js");return n.makeAbsolute(e.slice(0,e.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}},t.default=function(e){var i={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:r({},e.has),map:r({},e.map),packages:e.packages&&e.packages.concat()||[],paths:r({},e.paths)};e.hasOwnProperty("async")||(i.async=!0),e.hasOwnProperty("isDebug")||(i.isDebug=!1),e.baseUrl||(i.baseUrl=t.DEFAULT_CONFIG.baseUrl),t.DEFAULT_CONFIG.packages.forEach(function(e){a(i.packages,e)});for(var n=i.map=i.map||{},o=0,s=Object.keys(t.DEFAULT_CONFIG.map);o<s.length;o++){var l=s[o];n[l]||(n[l]=t.DEFAULT_CONFIG.map[l])}return i}}.apply(null,i))||(e.exports=n)},612:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(355),r(453),r(378)],void 0===(n=function(e,t,i,n,o){var a=function(){return function(){var e=this,t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(r){e[r]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t[r].apply(t,e)}})}}(),s=n.MutationObserver||n.WebKitMutationObserver,l=function(){var e;if(n.process&&n.process.nextTick)e=function(e){n.process.nextTick(e)};else if(n.Promise)e=function(e){n.Promise.resolve().then(e)};else if(s){var t=[],r=document.createElement("div");new s(function(){for(;t.length>0;)t.shift()()}).observe(r,{attributes:!0}),e=function(e){t.push(e),r.setAttribute("queueStatus","1")}}return e}();return function(){function t(){this._dispatcher=new a,this._isInitialized=!1,this._workerPostMessage({type:o.MessageType.HANDSHAKE})}return t.prototype.terminate=function(){},Object.defineProperty(t.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)},enumerable:!0,configurable:!0}),t.prototype.postMessage=function(e,t){var r=this;l(function(){r._workerMessageHandler(new MessageEvent("message",{data:e}))})},t.prototype.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)},t.prototype.addEventListener=function(e,t,r){this._dispatcher.addEventListener(e,t,r)},t.prototype.removeEventListener=function(e,t,r){this._dispatcher.removeEventListener(e,t,r)},t.prototype._workerPostMessage=function(e,t){var r=this;l(function(){r.dispatchEvent(new MessageEvent("message",{data:e}))})},t.prototype._workerMessageHandler=function(t){var n=this,a=o.receiveMessage(t);if(a){var s=a.jobId;switch(a.type){case o.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:o.MessageType.CONFIGURED});break;case o.MessageType.OPEN:var l=a.modulePath;i("esri-webpack")?Promise.all([r.e(3),r.e(2),r.e(5),r.e(7),r.e(67)]).then(function(){var t=[r(389),r(752),r(753),r(735),r(716),r(754),r(682),e(l,null,!1)];(function(e,t,r,i,a,l,u,c){var p;switch(c){case"esri/views/vectorTiles/WorkerTileHandler":p=t;break;case"esri/views/2d/layers/features/Pipeline":p=r;break;case"esri/views/3d/layers/PointCloudWorker":p=i;break;case"esri/views/3d/layers/SceneLayerWorker":p=a;break;case"esri/layers/graphics/sources/support/CSVSourceWorker":p=l;break;case"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":p=u;break;default:p=c}var d=e.connect(p);n._workerPostMessage({type:o.MessageType.OPENED,jobId:s,data:d})}).apply(null,t)}).catch(r.oe):Promise.resolve().then(function(){var t=[r(389),e(l,null,!1)];(function(e,t){var r=e.connect(t);n._workerPostMessage({type:o.MessageType.OPENED,jobId:s,data:r})}).apply(null,t)}).catch(r.oe)}}},t}()}.apply(null,i))||(e.exports=n)},613:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(357),r(363)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.graphicsExtent=function(e){if(!e||!e.length)return null;var t=r.isCollection(e)?e.getItemAt(0).geometry:e[0].geometry,n=t.extent,o=t;null===n&&(n=new i(o.x,o.y,o.x,o.y,t.spatialReference));for(var a=1;a<e.length;a++){o=t=r.isCollection(e)?e.getItemAt(a).geometry:e[a].geometry;var s=t.extent;null===s&&(s=new i(o.x,o.y,o.x,o.y,t.spatialReference)),n=n.clone().union(s)}return n.width<0&&n.height<0?null:n},t.getGeometries=function(e){return e.map(function(e){return e.geometry})},t._encodeGraphics=function(e,t){var r=[];return e.forEach(function(e,i){var n=e.toJSON(),o={};if(n.geometry){var a=t&&t[i];o.geometry=a&&a.toJSON()||n.geometry}n.attributes&&(o.attributes=n.attributes),r[i]=o}),r}}.apply(null,i))||(e.exports=n)},615:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(414),r(415),r(370),r(412),r(416)],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.types={key:"type",base:n,typeMap:{heatmap:i,simple:o,"unique-value":a,"class-breaks":r}}}.apply(null,i))||(e.exports=n)},621:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(346),r(357),r(406)],void 0===(n=function(e,t,r,i,n){function o(e){return e instanceof r}function a(e){return e instanceof i?Object.keys(e.items):o(e)?n.getProperties(e).keys():e?Object.keys(e):[]}function s(e,t){return e instanceof i?e.items[t]:e[t]}function l(e){return e?e.declaredClass:null}function u(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var i=a(e),n=a(t);if(0!==i.length||0!==n.length){if(!i.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var p=n.filter(function(e){return-1===i.indexOf(e)}),d=i.filter(function(e){return-1===n.indexOf(e)}),f=i.filter(function(r){return n.indexOf(r)>-1&&s(e,r)!==s(t,r)}).concat(p,d).sort(),h=l(e);if(h&&c.indexOf(h)>-1&&f.length)return{type:"complete",oldValue:e,newValue:t};var y,m=o(e)&&o(t);for(var g in f){var v=f[g],_=s(e,v),b=s(t,v),x=void 0;(m||"function"!=typeof _&&"function"!=typeof b)&&_!==b&&(null==_&&null==b||(x=r&&r[v]&&"function"==typeof r[v]?r[v](_,b):"object"==typeof _&&"object"==typeof b&&l(_)===l(b)?u(_,b):{type:"complete",oldValue:_,newValue:b})&&((y=y||{type:"partial",diff:{}}).diff[v]=x))}return y}}Object.defineProperty(t,"__esModule",{value:!0});var c=["esri.Color","esri.portal.Portal"];t.diff=function(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&l(e)!==l(t)?{type:"complete",oldValue:e,newValue:t}:u(e,t)}}.apply(null,i))||(e.exports=n)},622:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r,e)},t.slice=function(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));for(var i=Math.max(0,r-t),n=new(0,e.constructor)(i),o=0;o<i;o++)n[o]=e[t+o];return n},t.isArrayBuffer=function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name},t.isInt8Array=function(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name},t.isUint8Array=function(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name},t.isInt16Array=function(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name},t.isUint16Array=function(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name},t.isInt32Array=function(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name},t.isUint32Array=function(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name},t.isFloat32Array=function(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name},t.isFloat64Array=function(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name}}.apply(null,i))||(e.exports=n)},627:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(349),r(422),r(626),r(628),r(403)],void 0===(n=function(e,t,r,i,n,o,a,s,l){function u(e,t){var r=e.geometry,i=e.toJSON(),n=i;if(r&&(n.geometry=JSON.stringify(r),n.geometryType=o.getJsonType(r),n.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),i.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(n.objectIds=i.objectIds.join(",")),i.orderByFields&&(n.orderByFields=i.orderByFields.join(",")),!i.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete n.outFields:-1!==i.outFields.indexOf("*")?n.outFields="*":n.outFields=i.outFields.join(","),i.outSR?n.outSR=i.outSR.wkid||JSON.stringify(i.outSR):r&&(i.returnGeometry||i.returnCentroid)&&(n.outSR=n.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(n.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(n.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(n.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.source&&(n.layer=JSON.stringify({source:i.source}),delete i.source),i.timeExtent){var a=i.timeExtent;n.time=[null!=a.startTime?a.startTime:"null",null!=a.endTime?a.endTime:"null"],delete i.timeExtent}return n}function c(e,t,o,s,c){void 0===s&&(s={});var p="string"==typeof e?n.urlToObject(e):e,d=t.geometry?[t.geometry]:[];return s.responseType="pbf"===o?"array-buffer":"json",a.normalizeCentralMeridian(d,null,s).then(function(e){var n=e&&e[0];n&&((t=t.clone()).geometry=n);var a=l.mapParameters(r({},p.query,{f:o},c,u(t,c)));return i(p.path+"/query",r({},s,{query:a}))})}Object.defineProperty(t,"__esModule",{value:!0});var p="Layer does not support extent calculation.";t.queryToQueryStringParameters=u,t.executeQuery=function(e,t,r){return c(e,t,"json",r)},t.executeQueryPBF=function(e,t,r){return c(e,t,"pbf",r).then(function(e){var t=s.parsePBFFeatureQuery(e.data),r=e;return r.data=t,r})},t.executeQueryForIds=function(e,t,r){return c(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return c(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return c(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(p);if(t.hasOwnProperty("count"))throw new Error(p);return e})}}.apply(null,i))||(e.exports=n)},628:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(343),r(425),r(629)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=i.getLogger("esri.tasks.operations.pbfQueryUtils");t.parsePBFFeatureQuery=function(e){try{var t=o.parseFeatureQuery(e).queryResult.featureResult;if(t&&t.features&&t.features.length&&t.objectIdFieldName)for(var i=t.objectIdFieldName,s=0,l=t.features;s<l.length;s++){var u=l[s];u.attributes&&(u.objectId=u.attributes[i])}return t}catch(e){var c=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return a.error(c),new n.default}}}.apply(null,i))||(e.exports=n)},629:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(593),r(603),r(425),r(595)],void 0===(n=function(e,t,r,i,n,o){function a(e){return e>=w.length?null:w[e]}function s(e){return e>=S.length?null:S[e]}function l(e){return e>=I.length?null:I[e]}function u(e){return e>=M.length?null:M[e]}function c(e){for(var t=new o.default,r=t.coords;e.next();)switch(e.tag()){case 3:for(var i=e.getUInt32(),n=e.pos()+i,a=0;e.pos()<n;)r[a++]=e.getSInt64();break;case 1:case 2:default:e.skip()}return t}function p(e){for(var t=new o.default,r=t.coords,i=t.lengths;e.next();)switch(e.tag()){case 2:for(var n=e.getUInt32(),a=e.pos()+n;e.pos()<a;)i.push(e.getUInt32());break;case 3:for(var s=e.getUInt32(),l=(a=e.pos()+s,0);e.pos()<a;)r[l++]=e.getSInt64();break;case 1:default:e.skip()}return t}function d(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function f(e){for(var t={type:a(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=a(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=s(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function h(e,t){for(var r=new i.default,n=0;e.next();)switch(e.tag()){case 1:var o=e.getMessage(),a=t[n++].name;r.attributes[a]=d(o);break;case 2:r.geometry=p(e.getMessage());break;case 4:r.centroid=c(e.getMessage());break;default:e.skip()}return r}function y(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function m(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function g(e){for(var t={originPosition:l(0)};e.next();)switch(e.tag()){case 1:t.originPosition=l(e.getEnum());break;case 2:t.scale=y(e.getMessage());break;case 3:t.translate=m(e.getMessage());break;default:e.skip()}return t}function v(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function _(e){for(var t={};e.next();)switch(e.tag()){case 1:t.wkid=e.getUInt32();break;case 5:t.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return t}function b(e){var t=new n.default;for(t.geometryType=u(0);e.next();)switch(e.tag()){case 1:t.objectIdFieldName=e.getString();break;case 3:t.globalIdFieldName=e.getString();break;case 4:t.geohashFieldName=e.getString();break;case 5:t.geometryProperties=v(e.getMessage());break;case 7:t.geometryType=u(e.getEnum());break;case 8:t.spatialReference=_(e.getMessage());break;case 10:t.hasZ=e.getBool();break;case 11:t.hasM=e.getBool();break;case 12:var r=e.getMessage();t.transform=g(r);break;case 9:var i=e.getBool();t.exceededTransferLimit=i;break;case 13:var o=e.getMessage();t.fields.push(f(o));break;case 15:var a=e.getMessage();t.features.push(h(a,t.fields));break;case 2:case 6:default:e.skip()}return t}function x(e){for(var t={};e.next();)switch(e.tag()){case 1:t.featureResult=b(e.getMessage());break;default:e.skip()}return t}Object.defineProperty(t,"__esModule",{value:!0});var w=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],S=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],M=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],I=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e){for(var t=new r(new Uint8Array(e),new DataView(e)),i={};t.next();)switch(t.tag()){case 2:i.queryResult=x(t.getMessage());break;default:t.skip()}return i}}.apply(null,i))||(e.exports=n)},634:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(350),r(431),r(341),r(339),r(349),r(411),r(673),r(361),r(757),r(747)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p){function d(e,t){return t.load().then(function(){var r=new l({disableExtraQuery:!0,query:"owner:"+g+" AND type:"+v+' AND typekeywords:"'+e+'"'});return t.queryItems(r)}).then(function(t){var r=t.results,i=null,o=e.toLowerCase();if(r&&Array.isArray(r))for(var a=0,s=r;a<s.length;a++){var l=s[a];if(l.typeKeywords.some(function(e){return e.toLowerCase()===o})&&l.type===v&&l.owner===g){i=l;break}}if(i)return i.load();throw new n("symbolstyleutils:style-not-found","The style '"+e+"' could not be found",{styleName:e})})}function f(e,t){return e.styleUrl?function(e,t){return y(e).then(function(t){return{data:t.data,baseUrl:a.removeFile(e),styleUrl:e}})}(e.styleUrl):e.styleName?function(e,t){var r,i=t.portal||s.getDefault(),n=i.url+" - "+(i.user&&i.user.username)+" - "+e;return m[n]||(m[n]=d(e,i).then(function(e){return r=e,e.fetchData()}).then(function(t){return{data:t,baseUrl:r.itemUrl,styleName:e}})),m[n]}(e.styleName,t):o.reject(new n("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function h(e,t,r){for(var s=e.data,l={portal:r.portal,url:a.urlToObject(e.baseUrl),origin:"portal-item"},d=0,f=s.items;d<f.length;d++){var h=function(n){if(n.name!==t)return"continue";var o=a.read(n.webRef,l),s={portal:r.portal,url:a.urlToObject(a.removeFile(o)),origin:"portal-item"};return{value:y(o).then(function(o){var d=u.fromJSON(o.data,s);if(d&&d.isInstanceOf(i.BaseSymbol3D)){if(n.thumbnail)if(n.thumbnail.href){var f=a.read(n.thumbnail.href,l);d.thumbnail=new p.default({url:f})}else n.thumbnail.imageData&&(d.thumbnail=new p.default({url:"data:image/png;base64,"+n.thumbnail.imageData}));e.styleUrl?d.styleOrigin=new c({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(d.styleOrigin=new c({portal:r.portal,styleName:e.styleName,name:t}))}return d})}}(f[d]);if("object"==typeof h)return h.value}return o.reject(new n("symbolstyleutils:symbol-name-not-found","The symbol name '"+t+"' could not be found",{symbolName:t}))}function y(e){var t={responseType:"json",query:{f:"json"}};return r(a.normalize(e),t)}Object.defineProperty(t,"__esModule",{value:!0});var m={};t.fetchStyle=f,t.resolveWebStyleSymbol=function(e,t){return e.name?f(e,t).then(function(r){return h(r,e.name,t)}):o.reject(new n("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))},t.fetchSymbolFromStyle=h,t.styleNameFromItem=function(e){for(var t=0,r=e.typeKeywords;t<r.length;t++){var i=r[t];if(/^Esri.*Style$/.test(i)&&"Esri Style"!==i)return i}};var g="esri_en",v="Style"}.apply(null,i))||(e.exports=n)},635:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339),r(442)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyleRenderer=function(e,t){var n=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);return n&&"unique-value"===n.type&&n.styleOrigin?n.populateFromStyle().catch(function(r){t&&t.messages&&t.messages.push(new i("renderer:style-reference","Failed to create unique value renderer from style reference: "+r.message,{error:r,context:t})),e.clear("renderer",t.origin)}).then(function(){return null}):r.resolve(null)}}.apply(null,i))||(e.exports=n)},637:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(414),r(415),r(370),r(412),r(416),r(423)],void 0===(n=function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassBreaksRenderer=r,t.HeatmapRenderer=i,t.BaseRenderer=n,t.SimpleRenderer=o,t.UniqueValueRenderer=a,t.isRenderer=function(e){return e instanceof t.BaseRenderer},t.fromJSON=s.fromJSON}.apply(null,i))||(e.exports=n)},639:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(349),r(403)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t,i){for(var o={},a=0,s=e;a<s.length;a++)for(var l=s[a],u=l.parentObjectId,c=0,p=l.attachmentInfos;c<p.length;c++){var d=p[c],f=d.id,h=n.addProxy(t+"/"+u+"/attachments/"+f+(i?"?token="+i:"")),y=r({},d,{parentObjectId:u,url:h});o[u]?o[u].push(y):o[u]=[y]}return o},t.executeAttachmentQuery=function(e,t,n){var a={query:o.mapParameters(r({},e.query,{f:"json"},function(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}(t)))};return n&&(a=r({},n,a)),i(e.path+"/queryAttachments",a)}}.apply(null,i))||(e.exports=n)},641:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(338),r(336),r(642)],void 0===(n=function(e,t,r,i,n,o,a,s,l){var u=o({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),c=o({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance"}),p=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];return function(e){function t(t){var r=e.call(this)||this;return r.lengthUnit=null,r.visualVariables=null,r}var n;return r(t,e),n=t,Object.defineProperty(t.prototype,"classificationMethod",{get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"standardDeviationInterval",{get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:a.clone(this.field1),field2:a.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(e){return e.clone()})})},i([s.property({type:u.apiValues,value:null,dependsOn:["type"],json:{type:u.jsonValues,read:u.read,write:u.write}})],t.prototype,"classificationMethod",null),i([s.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"fields",null),i([s.property({value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field1",null),i([s.property({value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field2",null),i([s.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"focus",null),i([s.property({type:Number,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"numClasses",null),i([s.property({type:p,json:{type:p,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],t.prototype,"lengthUnit",void 0),i([s.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],t.prototype,"standardDeviationInterval",null),i([s.property({type:String,value:null,json:{type:c.jsonValues,read:c.read,write:c.write}})],t.prototype,"type",null),i([s.property({type:[l],json:{write:!0}})],t.prototype,"visualVariables",void 0),n=i([s.subclass("esri.renderers.support.AuthoringInfo")],t)}(s.declared(n))}.apply(null,i))||(e.exports=n)},642:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(336),r(698)],void 0===(n=function(e,t,r,i,n,o,a,s){var l=o({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),u=o({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),c={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},p=["high-to-low","above-and-below","centered-on","extremes"],d=["seconds","minutes","hours","days","months","years"];return function(e){function t(t){var r=e.call(this)||this;return r.endTime=null,r.field=null,r.maxSliderValue=null,r.minSliderValue=null,r.startTime=null,r.type=null,r.units=null,r}var n;return r(t,e),n=t,t.prototype.castEndTime=function(e){return"string"==typeof e||"number"==typeof e?e:null},t.prototype.castStartTime=function(e){return"string"==typeof e||"number"==typeof e?e:null},Object.defineProperty(t.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})},i([a.property({types:c,json:{write:!0}})],t.prototype,"endTime",void 0),i([s.cast("endTime")],t.prototype,"castEndTime",null),i([a.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"maxSliderValue",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"minSliderValue",void 0),i([a.property({types:c,json:{write:!0}})],t.prototype,"startTime",void 0),i([s.cast("startTime")],t.prototype,"castStartTime",null),i([a.property({type:l.apiValues,value:null,dependsOn:["type"],json:{type:l.jsonValues,read:l.read,write:l.write}})],t.prototype,"style",null),i([a.property({type:p,value:null,dependsOn:["type"],json:{type:p,write:!0}})],t.prototype,"theme",null),i([a.property({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],t.prototype,"type",void 0),i([a.property({type:d,json:{type:d,write:!0}})],t.prototype,"units",void 0),n=i([a.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},643:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.minValue=null,t.maxValue=0,t.symbol=null,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})},i([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([o.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],t.prototype,"minValue",void 0),i([o.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],t.prototype,"maxValue",void 0),i([o.property({types:s.rendererTypes,json:{origins:{"web-scene":{read:a.read,write:{target:{symbol:{types:s.rendererTypes3D}},writer:a.writeTarget}}},read:a.read,write:a.writeTarget}})],t.prototype,"symbol",void 0),n=i([o.subclass("esri.renderers.support.ClassBreakInfo")],t)}(o.declared(n));t.ClassBreakInfo=l,t.default=l}.apply(null,i))||(e.exports=n)},644:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(358),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){var r=e.call(this)||this;return r.color=null,r.ratio=null,r}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({color:this.color,ratio:this.ratio})},i([a.property({type:n,json:{write:!0}})],t.prototype,"color",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"ratio",void 0),o=i([a.subclass("esri.renderers.support.HeatmapColorStop")],t)}(a.declared(o));t.HeatmapColorStop=s,t.default=s}.apply(null,i))||(e.exports=n)},645:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.symbol=null,t.value=null,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})},i([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([o.property({types:s.rendererTypes,json:{origins:{"web-scene":{read:a.read,write:{target:{symbol:{types:s.rendererTypes3D}},writer:a.writeTarget}}},read:a.read,write:a.writeTarget}})],t.prototype,"symbol",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"value",void 0),n=i([o.subclass("esri.renderers.support.UniqueValueInfo")],t)}(o.declared(n));t.UniqueValueInfo=l,t.default=l}.apply(null,i))||(e.exports=n)},646:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isOfType=function(e,t){var r=e.constructor._meta;if(!r||!r.bases)return!1;var i=r.bases,n=Array.isArray(t);return i.some(function(e){var r=e.__accessorMetadata__;if(!r)return!1;var i=r.properties;if(!i||!i.type||!i.type.value)return!1;var o=i.type.value;return n?-1!==t.indexOf(o):o===t})}}.apply(null,i))||(e.exports=n)},647:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(388),r(344),r(364),r(336),r(740),r(627),r(639),r(648),r(440),r(392),r(419),r(444)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f,h,y){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.source=null,r}return r(t,e),t.prototype.execute=function(e,t){return this.executeJSON(e,t).then(function(e){return f.fromJSON(e)})},t.prototype.executeJSON=function(e,t){return u.executeQuery(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data})},t.prototype.executeForCount=function(e,t){return u.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data.count})},t.prototype.executeForExtent=function(e,t){return u.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return{count:e.data.count,extent:a.Extent.fromJSON(e.data.extent)}})},t.prototype.executeForIds=function(e,t){return u.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data.objectIds})},t.prototype.executeRelationshipQuery=function(e,t){return(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),p.executeRelationshipQuery(this.parsedUrl,e,o({},this.requestOptions,t)).then(function(e){var t=e.data,r={};return Object.keys(t).forEach(function(e){return r[e]=f.fromJSON(t[e])}),r})},t.prototype.executeAttachmentQuery=function(e,t){var r=this,i=t&&t.query&&t.query.token;return c.executeAttachmentQuery(this.parsedUrl,e,o({},this.requestOptions,t)).then(function(e){return c.processAttachmentQueryResult(e.data.attachmentGroups,r.parsedUrl.path,i)})},t.prototype._normalizeQuery=function(e){return this.gdbVersion||this.source?e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):e},i([s.property()],t.prototype,"gdbVersion",void 0),i([s.property()],t.prototype,"source",void 0),i([n(0,s.cast(h))],t.prototype,"execute",null),i([n(0,s.cast(h))],t.prototype,"executeJSON",null),i([n(0,s.cast(h))],t.prototype,"executeForCount",null),i([n(0,s.cast(h))],t.prototype,"executeForExtent",null),i([n(0,s.cast(h))],t.prototype,"executeForIds",null),i([n(0,s.cast(y))],t.prototype,"executeRelationshipQuery",null),i([n(0,s.cast(d))],t.prototype,"executeAttachmentQuery",null),i([s.subclass("esri.tasks.QueryTask")],t)}(s.declared(l))}.apply(null,i))||(e.exports=n)},648:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(403)],void 0===(n=function(e,t,r,i,n){function o(e){var t=e.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.outFields&&(t.outFields=t.outFields.join(",")),t.outSpatialReference&&(t.outSR=t.outSR.wkid||JSON.stringify(t.outSR.toJSON()),delete t.outSpatialReference),t.source&&(t.layer=JSON.stringify({source:t.source}),delete t.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=o,t.executeRelationshipQuery=function(e,t,a){var s={query:n.mapParameters(r({},e.query,{f:"json"},o(t)))};return a&&(s=r({},a,s)),i(e.path+"/queryRelatedRecords",s).then(function(e){for(var t=e.data,r=t.geometryType,i=t.spatialReference,n={},o=0,a=t.relatedRecordGroups;o<a.length;o++){var s=a[o],l={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:i,features:s.relatedRecords};if(null!=s.objectId)n[s.objectId]=l;else for(var u in s)s.hasOwnProperty(u)&&"relatedRecords"!==u&&(n[s[u]]=l)}return e.data=n,e})}}.apply(null,i))||(e.exports=n)},649:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(449),r(365),r(694),r(343),r(624),r(339),r(336)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handles=new a,t.layer=null,t.parent=null,t.view=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";return l.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+i+"', id: '"+r+"')",t),c.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null!=e?e:1};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},i([p.property()],t.prototype,"layer",void 0),i([p.property()],t.prototype,"parent",void 0),i([p.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),i([p.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),i([p.property()],t.prototype,"view",void 0),i([p.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),i([p.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),i([p.subclass("esri.views.layers.LayerView")],t)}(p.declared(n,o,s,u))}.apply(null,i))||(e.exports=n)},652:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(338),r(336),r(395),r(447)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return r(t,e),n=t,t.fromWorker=function(e){if(!e)return null;var t=JSON.parse(e),r=new n;return r.fields=t.fields&&t.fields.map(function(e){return s.fromJSON(e)}),r.options=t.options,r.process=new(Function.bind.apply(Function,[void 0].concat(t.process.args,[t.process.body]))),r},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n(o.clone({fields:this.fields,options:this.options,process:this.process}))},t.prototype.getField=function(e){return l.getField(e,this.fields)},t.prototype.refresh=function(){this.notifyChange("version")},t.prototype.toWorker=function(){var e=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:e.substring(e.indexOf("{")+1,e.lastIndexOf("}")),args:e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g)}})},i([a.property({type:[s]})],t.prototype,"fields",void 0),i([a.property()],t.prototype,"options",void 0),i([a.property()],t.prototype,"process",void 0),i([a.property({readOnly:!0,dependsOn:["process","options","fields"]})],t.prototype,"version",null),n=i([a.subclass("esri.layers.support.FeatureProcessing")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},661:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(455)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="selection",t}return r(t,e),i([n.property()],t.prototype,"type",void 0),i([n.subclass("esri.layers.support.FeatureReductionSelection")],t)}(n.declared(o.default));t.FeatureReductionSelection=a,t.default=a}.apply(null,i))||(e.exports=n)},662:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336),r(451)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.expression=null,t}var n;return r(t,e),n=t,t.prototype.readExpression=function(e,t){return t.value?a.convertTemplatedStringToArcade(t.value):e},t.prototype.writeExpression=function(e,t,r){null!=this.value&&(e=a.convertTemplatedStringToArcade(this.value)),t[r]=e},t.prototype.clone=function(){return new n({value:this.value,expression:this.expression})},i([o.property({json:{read:!1,write:!1}})],t.prototype,"value",void 0),i([o.property({json:{write:{allowNull:!0}}})],t.prototype,"expression",void 0),i([o.reader("expression",["expression","value"])],t.prototype,"readExpression",null),i([o.writer("expression")],t.prototype,"writeExpression",null),n=i([o.subclass("esri.layers.support.LabelExpressionInfo")],t)}(o.declared(n))}.apply(null,i))||(e.exports=n)},663:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(405)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.replace=function(e,t,i){return void 0===i&&(i=/\{([^\}]+)\}/g),e.replace(i,"function"==typeof t?t:function(e,i){return r.getDeepValue(i,t)})}}.apply(null,i))||(e.exports=n)},664:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(427)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=/\[([^\[\]]+)\]/gi;t.reader=function(e,t,n){var o=this;return e?e.map(function(e){var a=new r;if(a.read(e,n),a.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||o.fields;a.labelExpression=a.labelExpression.replace(i,function(e,t){return"["+function(e,t){if(!t)return e;for(var r=e.toLowerCase(),i=0;i<t.length;i++){var n=t[i].name;if(n.toLowerCase()===r)return n}return e}(t,s)+"]"})}return a}):null}}.apply(null,i))||(e.exports=n)},671:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(364),r(383),r(346),r(357),r(341),r(353),r(347),r(623),r(343),r(446),r(437),r(336),r(360),r(674),r(392),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f,h,y,m,g,v,_){function b(e){var t=e.geometry,r=e.attributes;return{geometry:t&&"mesh"!==t.type?t&&t.toJSON():null,attributes:r}}Object.defineProperty(t,"__esModule",{value:!0});var x=c({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),w=d.getLogger("esri.layers.graphics.sources.MemorySource"),S=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return r(a,t),a.prototype.load=function(){var t=this;return this.addResolvingPromise(h.open(f.getAbsMid("./support/MemorySourceWorker",e,_),{client:this,strategy:u("esri-workers-for-memory-layers")?"dedicated":"local"}).then(function(e){t._connection=e;var r=t.layer,i=r.fields,n=r.spatialReference,o=r.geometryType,a=r.objectIdField,s=r.hasM,l=r.hasZ;return e.invoke("load",{features:t.items.map(b),fields:i&&i.map(function(e){return e.toJSON()}),geometryType:x.toJSON(o),hasM:s,hasZ:l,objectIdField:a,spatialReference:n&&n.toJSON()}).then(function(e){e.featureErrors.length&&w.warn("Encountered "+e.featureErrors.length+" validation errors while loading features",e.featureErrors),t.layerDefinition=e.layerDefinition})})),this.when()},a.prototype.applyEdits=function(e){var t=this;return this.load().then(function(){return t._applyEdits(e)})},a.prototype.openPorts=function(){var e=this;return this.load().then(function(){return e._connection.openPorts()})},a.prototype.queryFeatures=function(e){return this.queryFeaturesJSON(e).then(function(e){return v.fromJSON(e)})},a.prototype.queryFeaturesJSON=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryFeatures",e?e.toJSON():null)})},a.prototype.queryFeatureCount=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null)})},a.prototype.queryObjectIds=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null)})},a.prototype.queryExtent=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryExtent",e?e.toJSON():null)}).then(function(e){return{count:e.count,extent:n.Extent.fromJSON(e.extent)}})},a.prototype._applyEdits=function(e){var t=this;if(!this._connection)throw new l("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,i=[],n=[],o=[];if(e.addFeatures)for(var a=0,s=e.addFeatures;a<s.length;a++){var u=s[a];i.push(b(u))}if(e.deleteFeatures)for(var c=0,p=e.deleteFeatures;c<p.length;c++){var d=p[c];"objectId"in d&&null!=d.objectId?n.push(d.objectId):"attributes"in d&&null!=d.attributes[r]&&n.push(d.attributes[r])}if(e.updateFeatures)for(var f=0,h=e.updateFeatures;f<h.length;f++){u=h[f];o.push(b(u))}return this._connection.invoke("applyEdits",{adds:i,updates:o,deletes:n}).then(function(e){var r=e.fullExtent,i=e.featureEditResults;return t.fullExtent=r,t._createEditsResult(i)})},a.prototype._createEditsResult=function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[]}},a.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new l("feature-layer-source:edit-failure",t.description,{code:t.code}):null}},i([g.shared({Type:o,ensureType:m.ensureType(o)})],a.prototype,"itemType",void 0),i([y.property({constructOnly:!0})],a.prototype,"layer",void 0),i([y.property()],a.prototype,"layerDefinition",void 0),i([y.subclass("esri.layers.graphics.sources.MemorySource")],a)}(y.declared(a,s,p));t.MemorySource=S,t.default=S}.apply(null,i))||(e.exports=n)},674:function(e,t,r){var i,n;i=[r(351),r(675),r(340),r(338)],void 0===(n=function(e,t,r,i){return{subclass:function(n,o){return function(o){var a=t.declareDefinition(o,n);s&&(a.instanceMembers.properties=function e(t,r){if(!t)return r;if(!r)return t;for(var i in r){var n=t[i],o=r[i];Array.isArray(o)&&Array.isArray(n)?t[i]=n.concat(o):t[i]="object"==typeof o&&"object"==typeof n?e(n,o):o}return t}(s,a.instanceMembers.properties));var s=a.instanceMembers.properties;if(s)for(var l in s){var u=s[l];u&&!u.reader&&u.type&&(u.type===Date?u.reader=function(e){return null!=e?new Date(e):null}:-1!==u.type._meta.bases.indexOf(r)&&(u.reader=function(e){return function(t){return e.fromJSON(t)}}(u.type)))}return i.mixin(e(a.bases,a.instanceMembers),a.classMembers)}},shared:t.shared,property:function(e){return function(t,r){var i=Object.getPrototypeOf(t),n=i&&i.properties;t.properties&&t.properties!==n||(t.properties={}),t.properties=t.properties||{},t.properties[r]=e||{}}}}}.apply(null,i))||(e.exports=n)},675:function(e,t,r){var i,n;i=[r(351),r(338)],void 0===(n=function(e,t){var r={declareDefinition:function(e,t){var r,i=[],n=Object.getPrototypeOf(e.prototype);if(n!==Object.prototype){var o=n.constructor;r=o.prototype,i.push(o)}t&&(i=i.concat(t));for(var a={},s=Object.getOwnPropertyNames(e.prototype),l=0;l<s.length;l++){var u=s[l];if("constructor"!==u){var c=u;"dojoConstructor"===u&&(c="constructor"),r&&e.prototype[u]===r[u]||(a[c]=e.prototype[u])}}s=Object.getOwnPropertyNames(e);var p=Object.getOwnPropertyNames(n.constructor),d={};for(l=0;l<s.length;l++)u=s[l],-1===p.indexOf(u)&&(d[u]=e[u]);return{bases:i,instanceMembers:a,classMembers:d}},subclass:function(i){return function(n){var o=r.declareDefinition(n,i);return t.mixin(e(o.bases,o.instanceMembers),o.classMembers)}},shared:function(e){return function(t,r){t[r]=e}}};return r}.apply(null,i))||(e.exports=n)},676:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}var n;return r(t,e),n=t,t.prototype.clone=function(){var e=this,t=e.name,r=e.fields,i=e.isAscending,o=e.isUnique,a=e.description;return new n({name:t,fields:r,isAscending:i,isUnique:o,description:a})},i([o.property({constructOnly:!0})],t.prototype,"name",void 0),i([o.property({constructOnly:!0})],t.prototype,"fields",void 0),i([o.property({constructOnly:!0})],t.prototype,"isAscending",void 0),i([o.property({constructOnly:!0})],t.prototype,"isUnique",void 0),i([o.property({constructOnly:!0})],t.prototype,"description",void 0),n=i([o.subclass("esri.layers.support.FeatureIndex")],t)}(o.declared(n));t.FeatureIndex=a,t.default=a}.apply(null,i))||(e.exports=n)},677:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(338),r(336),r(399),r(588)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.id=null,r.name=null,r.domains=null,r.templates=null,r}return r(t,e),t.prototype.readDomains=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];switch(i.type){case"range":t[r]=s.RangeDomain.fromJSON(i);break;case"codedValue":t[r]=s.CodedValueDomain.fromJSON(i);break;case"inherited":t[r]=s.InheritedDomain.fromJSON(i)}}return t},t.prototype.writeDomains=function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]&&e[i].toJSON());o.fixJson(r),t.domains=r},t.prototype.readTemplates=function(e){return e&&e.map(function(e){return new l(e)})},t.prototype.writeTemplates=function(e,t){t.templates=e&&e.map(function(e){return e.toJSON()})},i([a.property({json:{write:!0}})],t.prototype,"id",void 0),i([a.property({json:{write:!0}})],t.prototype,"name",void 0),i([a.property({json:{write:!0}})],t.prototype,"domains",void 0),i([a.reader("domains")],t.prototype,"readDomains",null),i([a.writer("domains")],t.prototype,"writeDomains",null),i([a.property({json:{write:!0}})],t.prototype,"templates",void 0),i([a.reader("templates")],t.prototype,"readTemplates",null),i([a.writer("templates")],t.prototype,"writeTemplates",null),i([a.subclass("esri.layers.support.FeatureType")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},678:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(336)],void 0===(n=function(e,t,r,i,n,o,a){var s=o({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(e){function t(t){var r=e.call(this,t)||this;return r.cardinality=null,r.id=null,r.keyField=null,r.name=null,r.relatedTableId=null,r}return r(t,e),i([a.property({json:{read:s.read,write:s.write}})],t.prototype,"cardinality",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"id",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"keyField",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"name",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"relatedTableId",void 0),i([a.subclass("esri.layers.support.Relationship")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},686:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(364),r(341),r(362),r(367),r(443),r(452),r(359),r(387)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u){var c=u.webMercator.x2lon,p=u.webMercator.y2lat,d=function(){function e(t){var r=e._checkUnsupported(t);if(r)throw r;this.spatialReference=t.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isWGS84=this.spatialReference.isWGS84,this.origin=[t.origin.x,t.origin.y],this.pixelSize=[t.size[0],t.size[1]],this.dpi=t.dpi;var i=t.lods.reduce(function(e,t,r){return t.level<e.min&&(e.min=t.level,e.minIndex=r),e.max=Math.max(e.max,t.level),e},{min:1/0,minIndex:0,max:-1/0}),n=t.lods[i.minIndex],o=Math.pow(2,n.level),a=n.resolution*o,s=n.scale*o;this.levels=new Array(i.max+1);for(var l=0;l<this.levels.length;l++)this.levels[l]={resolution:a,scale:s,tileSize:[a*t.size[0],a*t.size[1]]},a/=2,s/=2}return e.prototype.clone=function(){return new e(this.toTileInfo())},e.prototype.toTileInfo=function(){return new s({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:this.pixelSize,spatialReference:this.spatialReference,lods:this.levels.map(function(e,t){return{level:t,scale:e.scale,resolution:e.resolution}})})},e.prototype.getExtent=function(e,t,r,i,n){void 0===i&&(i=o.create());var a=this.levels[e],s=a.tileSize[0],u=a.tileSize[1];return i[0]=this.origin[0]+r*s,i[2]=i[0]+s,i[3]=this.origin[1]-t*u,i[1]=i[3]-u,n&&(this._isWebMercator?(n[0]=c(i[0]),n[1]=p(i[1]),n[2]=c(i[2]),n[3]=p(i[3])):this._isWGS84&&(n[0]=l.deg2rad(i[0]),n[1]=l.deg2rad(i[1]),n[2]=l.deg2rad(i[2]),n[3]=l.deg2rad(i[3]))),i},e.prototype.getExtentGeometry=function(e,t,i,n){return void 0===n&&(n=new r.Extent),this.getExtent(e,t,i,f),n.spatialReference=this.spatialReference,n.xmin=f[0],n.ymin=f[1],n.xmax=f[2],n.ymax=f[3],n.zmin=void 0,n.zmax=void 0,n},e.prototype.ensureMaxLod=function(e){for(;this.levels.length<=e;){var t=this.levels[this.levels.length-1],r=t.resolution/2;this.levels.push({resolution:r,scale:t.scale/2,tileSize:[r*this.pixelSize[0],r*this.pixelSize[1]]})}},e.prototype.capMaxLod=function(e){this.levels.length>e+1&&(this.levels.length=e+1)},e.prototype.getMaxLod=function(){return this.levels.length-1},e.prototype.scaleAtLevel=function(e){return this.levels[0].scale/Math.pow(2,e)},e.prototype.levelAtScale=function(e){var t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E},e.prototype.resolutionAtLevel=function(e){return this.levels[0].resolution/Math.pow(2,e)},e.prototype.compatibleWith=function(t){if(!(t instanceof e)){if(e._checkUnsupported(t))return!1;t=new e(t)}if(!t.spatialReference.equals(this.spatialReference))return!1;if(t.pixelSize[0]!==this.pixelSize[0]||t.pixelSize[1]!==this.pixelSize[1])return!1;var r=Math.min(this.levels.length,t.levels.length)-1,i=this.levels[r].resolution,n=.5*i;if(!l.floatEqualAbsolute(t.origin[0],this.origin[0],n)||!l.floatEqualAbsolute(t.origin[1],this.origin[1],n))return!1;var o=Math.max(this.pixelSize[0],this.pixelSize[1]);return n=.5*i/Math.pow(2,r)/o*12,l.floatEqualAbsolute(i,t.levels[r].resolution,n)},e.prototype.rootTilesInExtent=function(t,r,i){var n=this.levels[0].tileSize;e.computeRowColExtent(t,n,this.origin,f);var o=f[1],a=f[3],s=f[0],l=f[2],u=l-s,c=a-o;if(u*c>i){var p=Math.floor(Math.sqrt(i));c>p&&(a=(o=o+Math.floor(.5*c)-Math.floor(.5*p))+p),u>p&&(l=(s=s+Math.floor(.5*u)-Math.floor(.5*p))+p)}for(var d=new Array((l-s)*(a-o)),h=0,y=o;y<a;y++)for(var m=s;m<l;m++)d[h++]=[0,y,m];return r&&(r[0]=this.origin[0]+s*n[0],r[1]=this.origin[1]-a*n[1],r[2]=this.origin[0]+l*n[0],r[3]=this.origin[1]-o*n[1]),d},e.computeRowColExtent=function(e,t,r,i){var n=.001*(e[2]-e[0]+(e[3]-e[1]));i[0]=Math.floor((e[0]+n-r[0])/t[0]),i[2]=Math.ceil((e[2]-n-r[0])/t[0]),i[1]=Math.floor((r[1]-e[3]+n)/t[1]),i[3]=Math.ceil((r[1]-e[1]-n)/t[1])},e.isPowerOfTwo=function(e){var t=e.lods,r=t[0].resolution*Math.pow(2,t[0].level);return!t.some(function(e){return!l.floatEqualRelative(e.resolution,r/Math.pow(2,e.level))})},e.hasGapInLevels=function(e){var t=e.lods.map(function(e){return e.level});t.sort(function(e,t){return e-t});for(var r=1;r<t.length;r++)if(t[r]!==t[0]+r)return!0;return!1},e.tileSizeSupported=function(e){var t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512},e._checkUnsupported=function(t){return t?t.lods.length<1?new i("tilingscheme:generic","Tiling scheme must have at least one level"):e.isPowerOfTwo(t)?null:new i("tilingscheme:power-of-two","Tiling scheme must be power of two"):new i("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")},e.checkUnsupported=function(t){return e._checkUnsupported(t)||(e.hasGapInLevels(t)?new i("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):e.tileSizeSupported(t)?null:new i("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"))},e.fromExtent=function(t,r){var i=t[2]-t[0],n=t[3]-t[1],o=a.getMetersPerUnitForSR(r),l=1.2*Math.max(i,n),u=new e(new s({size:[256,256],origin:{x:t[0]-.5*(l-i),y:t[3]+.5*(l-n)},lods:[{level:0,resolution:l/256,scale:1/(256/96*.0254/(l*o))}],spatialReference:r}));return u.ensureMaxLod(20),u},e.makeWebMercatorAuxiliarySphere=function(t){void 0===t&&(t=19);var r=new e(e.WebMercatorAuxiliarySphereTileInfo);return r.ensureMaxLod(t),r},e.makeWGS84WithTileSize=function(t,r){void 0===r&&(r=16);var i=256/t,o=new e(new s({size:[t,t],origin:{x:-180,y:90,spatialReference:n.WGS84},spatialReference:n.WGS84,lods:[{level:0,resolution:.703125*i,scale:295497598.570834*i}]}));return o.ensureMaxLod(r),o},e.WebMercatorAuxiliarySphereTileInfo=new s({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:n.WebMercator},spatialReference:n.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),e.WebMercatorAuxiliarySphere=e.makeWebMercatorAuxiliarySphere(19),e}(),f=o.create();return d}.apply(null,i))||(e.exports=n)},691:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(434),r(364),r(350),r(339),r(349),r(336),r(398),r(695),r(865),r(433),r(432),r(438),r(426),r(866),r(782),r(394)],void 0===(n=function(e,t,i,n,o,a,s,l,u,c,p,d,f,h,y,m,g,v,_,b,x){var w=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];return function(e){function t(t,r){var i=e.call(this)||this;return i.spatialReference=null,i.sublayers=null,i.type="tile",i.url=null,i}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(function(){return e._fetchService()})),this.when()},Object.defineProperty(t.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operationalLayerType",{get:function(){if(this.capabilities)return this.capabilities.operations.supportsExportMap?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var e=this.url||this.portalItem&&this.portalItem.url;return e&&/\/ImageServer(\/|\/?$)/i.test(e)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"},enumerable:!0,configurable:!0}),t.prototype.readSpatialReference=function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&s.SpatialReference.fromJSON(e)},Object.defineProperty(t.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!0,configurable:!0}),t.prototype.castTileServers=function(e){return Array.isArray(e)?e.map(function(e){return c.urlToObject(e).path}):null},t.prototype.fetchTile=function(e,t,r,i){var n=this.getTileUrl(e,t,r),o={responseType:"image"};return i&&i.timestamp&&(o.query={_ts:i.timestamp}),l(n,o).then(function(e){return e.data})},t.prototype.getTileUrl=function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,o=a.objectToQuery(i({},this.parsedUrl.query,{blankTile:!n&&null,token:this.token?encodeURIComponent(this.token):null})),s=this.tileServers;return(s&&s.length?s[t%s.length]:this.parsedUrl.path)+"/tile/"+e+"/"+t+"/"+r+(o?"?"+o:"")},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return u.create(function(e){return Promise.all([r.e(5),r.e(12)]).then(function(){var t=[r(983)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return u.create(function(e){return Promise.all([r.e(11),r.e(16),r.e(82)]).then(function(){var t=[r(898)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._fetchService=function(){var e=this;return u.create(function(t,r){e.resourceInfo?t({data:e.resourceInfo}):l(e.parsedUrl.path,{query:i({f:"json"},e.parsedUrl.query),responseType:"json"}).then(t,r)}).then(function(t){if(t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl}),10.1===e.version&&!x.isHostedAgolService(e.url))return b.fetchServerVersion(e.url).then(function(t){e.read({currentVersion:t})}).catch(function(){})})},t.prototype._getMapName=function(e){var t=e.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]},t.prototype._getDefaultAttribution=function(e){if(e){var t;e=e.toLowerCase();for(var r=0,i=w.length;r<i;r++)if((t=w[r]).toLowerCase().indexOf(e)>-1)return c.makeAbsolute("//static.arcgis.com/attribution/"+t)}},t.prototype._getDefaultTileServers=function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),r=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]},o([p.property({readOnly:!0,dependsOn:["parsedUrl"]})],t.prototype,"attributionDataUrl",null),o([p.property({readOnly:!0})],t.prototype,"operationalLayerType",null),o([p.property()],t.prototype,"popupTemplates",void 0),o([p.property({type:s.SpatialReference})],t.prototype,"spatialReference",void 0),o([p.reader("spatialReference",["spatialReference","tileInfo"])],t.prototype,"readSpatialReference",null),o([p.property()],t.prototype,"resourceInfo",void 0),o([p.property({readOnly:!0})],t.prototype,"sublayers",void 0),o([p.property({dependsOn:["parsedUrl"],readOnly:!0})],t.prototype,"tileServers",null),o([p.cast("tileServers")],t.prototype,"castTileServers",null),o([p.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),o([p.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:c.writeOperationalLayerUrl}}}}})],t.prototype,"url",void 0),o([p.subclass("esri.layers.TileLayer")],t)}(p.declared(d,_.default,h,f,v,y,m,g))}.apply(null,i))||(e.exports=n)},701:function(e,t,r){var i,n;i=[r(351),r(338),r(354),r(458),r(586)],void 0===(n=function(e,t,r,i,n){var o={width:12,height:12,angle:0,xoffset:0,yoffset:0},a=e(i,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:n.urlPropertyDefinition,source:n.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(e,t){return t.size||e}},write:!0},cast:r.toPt},width:{json:{read:{source:["width","size"],reader:function(e,t){return t.size||e}},write:!0},cast:r.toPt},size:{json:{write:!1}}},getDefaults:function(){return t.mixin(this.inherited(arguments),o)},normalizeCtorArgs:function(e,t,i){if(e&&"string"!=typeof e&&null==e.imageData)return e;var n={};return e&&(n.url=e),null!=t&&(n.width=r.toPt(t)),null!=i&&(n.height=r.toPt(i)),n},clone:function(){var e=new a({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",t.clone(this.source)),e}});return a.defaultProps=o,a}.apply(null,i))||(e.exports=n)},702:function(e,t,r){var i,n;i=[r(351),r(338),r(457),r(402)],void 0===(n=function(e,t,r,i){var n={style:"solid",outline:new i,color:[0,0,0,.25]},o=e(r,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(e){return t.valueOf(this._styles,e)||void 0},write:function(e,t){t.style=this._styles[e]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return t.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(e,t,r){if(e&&"string"!=typeof e)return e;var i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i},clone:function(){return new o({color:t.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});return t.mixin(o,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"}),o.defaultProps=n,o}.apply(null,i))||(e.exports=n)},703:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(434),r(356),r(350),r(341),r(339),r(349),r(336),r(625),r(398),r(695),r(433),r(432),r(804)],void 0===(n=function(e,t,i,n,o,a,s,l,u,c,p,d,f,h,y,m,g,v){return function(e){function t(t){var r=e.call(this)||this;return r.copyright=null,r.heightModelInfo=null,r.opacity=1,r.operationalLayerType="ArcGISTiledElevationServiceLayer",r.type="elevation",r.url=null,r}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},Object.defineProperty(t.prototype,"minScale",{get:function(){},set:function(e){this.constructed&&s.deprecated(this.declaredClass+".minScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScale",{get:function(){},set:function(e){this.constructed&&s.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new u("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}}).always(function(){return e._fetchImageService()})),this.when()},t.prototype.fetchTile=function(e,t,r,i){var n=this;return void 0===i&&(i=0),this.load().then(function(){return n._fetchTileAvailability(e,t,r)}).then(function(){return l(n.getTileUrl(e,t,r),{responseType:"array-buffer"})}).then(function(e){var t=v.decode(e.data,{noDataValue:i,returnFileInfo:!0});return{values:t.pixelData,width:t.width,height:t.height,maxZError:t.fileInfo.maxZError,noDataValue:t.noDataValue}})},t.prototype.getTileUrl=function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,o=a.objectToQuery(i({},this.parsedUrl.query,{blankTile:!n&&null}));return this.parsedUrl.path+"/tile/"+e+"/"+t+"/"+r+(o?"?"+o:"")},t.prototype.queryElevation=function(e,t){var i=this;return c.create(function(e){return r.e(41).then(function(){var t=[r(783)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(r){return(new r.ElevationQuery).query(i,e,t)})},t.prototype.createElevationSampler=function(e,t){var i=this;return c.create(function(e){return r.e(41).then(function(){var t=[r(783)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(r){return(new r.ElevationQuery).createSampler(i,e,t)})},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return c.reject(new u("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case"3d":return c.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(65)]).then(function(){var t=[r(1101)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._fetchTileAvailability=function(e,t,r){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r):c.resolve("unknown")},t.prototype._fetchImageService=function(){var e=this;return c.resolve().then(function(){if(e.resourceInfo)return e.resourceInfo;var t={query:i({f:"json"},e.parsedUrl.query),responseType:"json"};return l(e.parsedUrl.path,t)}).then(function(t){t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl})})},o([d.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),o([d.property({readOnly:!0,type:f})],t.prototype,"heightModelInfo",void 0),o([d.property({json:{read:!1,write:!1}})],t.prototype,"minScale",null),o([d.property({json:{read:!1,write:!1}})],t.prototype,"maxScale",null),o([d.property({json:{read:!1,write:!1}})],t.prototype,"opacity",void 0),o([d.property()],t.prototype,"operationalLayerType",void 0),o([d.property()],t.prototype,"resourceInfo",void 0),o([d.property({json:{read:!1},value:"elevation",readOnly:!0})],t.prototype,"type",void 0),o([d.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:p.writeOperationalLayerUrl}}}}})],t.prototype,"url",void 0),o([d.subclass("esri.layers.ElevationLayer")],t)}(d.declared(h,y,m,g))}.apply(null,i))||(e.exports=n)},706:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(t.TileStatus||(t.TileStatus={}))}.apply(null,i))||(e.exports=n)},715:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(767)],void 0===(n=function(e,t,r,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderRequestedCalled=!1,t._attached=!1,t._opacity=1,t.renderRequested=!1,t._visible=!0,t}return r(t,e),Object.defineProperty(t.prototype,"attached",{get:function(){return this._attached},set:function(e){this._attached!==e&&(this._attached=e,e?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=e,this.requestRender())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this.requestRender())},enumerable:!0,configurable:!0}),t.prototype.attach=function(e){return!0},t.prototype.detach=function(e){},t.prototype.processRender=function(e){this._renderRequestedCalled=!1,this.doRender(e),this._renderRequestedCalled||(this.renderRequested=!1),this.hasEventListener("post-render")&&this.emit("post-render")},t.prototype.requestRender=function(){var e=this.renderRequested;this._renderRequestedCalled=!0,this.renderRequested=!0,this.parent&&this.parent.requestChildRender(this),e!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")},t.prototype.dispose=function(){},t}(i.Evented)}.apply(null,i))||(e.exports=n)},721:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(357),r(365),r(336)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(t){var r=e.call(this)||this;return r._handles=new o,r.root=null,r.refresh=r.refresh.bind(r),r.updateCollections=r.updateCollections.bind(r),r}return r(t,e),t.prototype.initialize=function(){var e=this;this._handles.add(this.rootCollectionNames.map(function(t){return e.watch("root."+t,e.updateCollections,!0)})),this.updateCollections()},t.prototype.destroy=function(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null},t.prototype.updateCollections=function(){var e=this;this._collections=this.rootCollectionNames.map(function(t){return e.get("root."+t)}).filter(function(e){return null!=e}),this.refresh()},t.prototype.refresh=function(){var e=this._handles;e.remove("collections"),this.removeAll();for(var t=this._collections.slice(),r=0,i=this._collections;r<i.length;r++){var n=i[r];this._processCollection(t,this,n)}for(var o=0,a=t;o<a.length;o++){var s=a[o];e.add(s.on("after-changes",this.refresh),"collections")}},t.prototype._createNewInstance=function(e){return new n(e)},t.prototype._processCollection=function(e,t,r){var i=this;r&&(e.push(r),r.forEach(function(r){r&&(t.push(r),i._processCollection(e,t,i.getChildrenFunction(r)))}))},i([a.property()],t.prototype,"rootCollectionNames",void 0),i([a.property()],t.prototype,"root",void 0),i([a.property()],t.prototype,"getChildrenFunction",void 0),i([a.subclass("esri.core.CollectionFlattener")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},730:function(e,t,r){var i={"./af":463,"./af.js":463,"./ar":464,"./ar-dz":465,"./ar-dz.js":465,"./ar-kw":466,"./ar-kw.js":466,"./ar-ly":467,"./ar-ly.js":467,"./ar-ma":468,"./ar-ma.js":468,"./ar-sa":469,"./ar-sa.js":469,"./ar-tn":470,"./ar-tn.js":470,"./ar.js":464,"./az":471,"./az.js":471,"./be":472,"./be.js":472,"./bg":473,"./bg.js":473,"./bm":474,"./bm.js":474,"./bn":475,"./bn.js":475,"./bo":476,"./bo.js":476,"./br":477,"./br.js":477,"./bs":478,"./bs.js":478,"./ca":479,"./ca.js":479,"./cs":480,"./cs.js":480,"./cv":481,"./cv.js":481,"./cy":482,"./cy.js":482,"./da":483,"./da.js":483,"./de":484,"./de-at":485,"./de-at.js":485,"./de-ch":486,"./de-ch.js":486,"./de.js":484,"./dv":487,"./dv.js":487,"./el":488,"./el.js":488,"./en-au":489,"./en-au.js":489,"./en-ca":490,"./en-ca.js":490,"./en-gb":491,"./en-gb.js":491,"./en-ie":492,"./en-ie.js":492,"./en-il":493,"./en-il.js":493,"./en-nz":494,"./en-nz.js":494,"./eo":495,"./eo.js":495,"./es":496,"./es-do":497,"./es-do.js":497,"./es-us":498,"./es-us.js":498,"./es.js":496,"./et":499,"./et.js":499,"./eu":500,"./eu.js":500,"./fa":501,"./fa.js":501,"./fi":502,"./fi.js":502,"./fo":503,"./fo.js":503,"./fr":504,"./fr-ca":505,"./fr-ca.js":505,"./fr-ch":506,"./fr-ch.js":506,"./fr.js":504,"./fy":507,"./fy.js":507,"./gd":508,"./gd.js":508,"./gl":509,"./gl.js":509,"./gom-latn":510,"./gom-latn.js":510,"./gu":511,"./gu.js":511,"./he":512,"./he.js":512,"./hi":513,"./hi.js":513,"./hr":514,"./hr.js":514,"./hu":515,"./hu.js":515,"./hy-am":516,"./hy-am.js":516,"./id":517,"./id.js":517,"./is":518,"./is.js":518,"./it":519,"./it.js":519,"./ja":520,"./ja.js":520,"./jv":521,"./jv.js":521,"./ka":522,"./ka.js":522,"./kk":523,"./kk.js":523,"./km":524,"./km.js":524,"./kn":525,"./kn.js":525,"./ko":526,"./ko.js":526,"./ky":527,"./ky.js":527,"./lb":528,"./lb.js":528,"./lo":529,"./lo.js":529,"./lt":530,"./lt.js":530,"./lv":531,"./lv.js":531,"./me":532,"./me.js":532,"./mi":533,"./mi.js":533,"./mk":534,"./mk.js":534,"./ml":535,"./ml.js":535,"./mn":536,"./mn.js":536,"./mr":537,"./mr.js":537,"./ms":538,"./ms-my":539,"./ms-my.js":539,"./ms.js":538,"./mt":540,"./mt.js":540,"./my":541,"./my.js":541,"./nb":542,"./nb.js":542,"./ne":543,"./ne.js":543,"./nl":544,"./nl-be":545,"./nl-be.js":545,"./nl.js":544,"./nn":546,"./nn.js":546,"./pa-in":547,"./pa-in.js":547,"./pl":548,"./pl.js":548,"./pt":549,"./pt-br":550,"./pt-br.js":550,"./pt.js":549,"./ro":551,"./ro.js":551,"./ru":552,"./ru.js":552,"./sd":553,"./sd.js":553,"./se":554,"./se.js":554,"./si":555,"./si.js":555,"./sk":556,"./sk.js":556,"./sl":557,"./sl.js":557,"./sq":558,"./sq.js":558,"./sr":559,"./sr-cyrl":560,"./sr-cyrl.js":560,"./sr.js":559,"./ss":561,"./ss.js":561,"./sv":562,"./sv.js":562,"./sw":563,"./sw.js":563,"./ta":564,"./ta.js":564,"./te":565,"./te.js":565,"./tet":566,"./tet.js":566,"./tg":567,"./tg.js":567,"./th":568,"./th.js":568,"./tl-ph":569,"./tl-ph.js":569,"./tlh":570,"./tlh.js":570,"./tr":571,"./tr.js":571,"./tzl":572,"./tzl.js":572,"./tzm":573,"./tzm-latn":574,"./tzm-latn.js":574,"./tzm.js":573,"./ug-cn":575,"./ug-cn.js":575,"./uk":576,"./uk.js":576,"./ur":577,"./ur.js":577,"./uz":578,"./uz-latn":579,"./uz-latn.js":579,"./uz.js":578,"./vi":580,"./vi.js":580,"./x-pseudo":581,"./x-pseudo.js":581,"./yo":582,"./yo.js":582,"./zh-cn":583,"./zh-cn.js":583,"./zh-hk":584,"./zh-hk.js":584,"./zh-tw":585,"./zh-tw.js":585};function n(e){var t=o(e);return r(t)}function o(e){var t=i[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id=730},734:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(339),r(377),r(336),r(777),r(649)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return r(t,e),t.prototype.postscript=function(e){this.inherited(arguments),s.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return n.create(function(t,r){o.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var i=s.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);i?r(i):t()})})},i([a.property()],t.prototype,"view",void 0),i([a.property()],t.prototype,"slicePlaneEnabled",void 0),i([a.subclass("esri.views.3d.layers.LayerView3D")],t)}(a.declared(l))}.apply(null,i))||(e.exports=n)},745:function(e,t,r){var i,n;i=[r(748)],void 0===(n=function(e){var t={scalar:{},SIMD:{},create:function(){var t=new e.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var r=new e.ARRAY_TYPE(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},fromValues:function(t,r,i,n,o,a,s,l,u,c,p,d,f,h,y,m){var g=new e.ARRAY_TYPE(16);return g[0]=t,g[1]=r,g[2]=i,g[3]=n,g[4]=o,g[5]=a,g[6]=s,g[7]=l,g[8]=u,g[9]=c,g[10]=p,g[11]=d,g[12]=f,g[13]=h,g[14]=y,g[15]=m,g},set:function(e,t,r,i,n,o,a,s,l,u,c,p,d,f,h,y,m){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=p,e[11]=d,e[12]=f,e[13]=h,e[14]=y,e[15]=m,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}};return t.scalar.transpose=function(e,t){if(e===t){var r=t[1],i=t[2],n=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=o,e[11]=t[14],e[12]=n,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.SIMD.transpose=function(e,t){var r,i,n,o,a,s,l,u,c,p;return r=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),n=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),a=SIMD.Float32x4.shuffle(r,i,0,1,4,5),s=SIMD.Float32x4.shuffle(n,o,0,1,4,5),l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),u=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,0,l),SIMD.Float32x4.store(e,4,u),a=SIMD.Float32x4.shuffle(r,i,2,3,6,7),s=SIMD.Float32x4.shuffle(n,o,2,3,6,7),c=SIMD.Float32x4.shuffle(a,s,0,2,4,6),p=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,p),e},t.transpose=e.USE_SIMD?t.SIMD.transpose:t.scalar.transpose,t.scalar.invert=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],f=t[11],h=t[12],y=t[13],m=t[14],g=t[15],v=r*s-i*a,_=r*l-n*a,b=r*u-o*a,x=i*l-n*s,w=i*u-o*s,S=n*u-o*l,M=c*y-p*h,I=c*m-d*h,D=c*g-f*h,T=p*m-d*y,A=p*g-f*y,j=d*g-f*m,O=v*j-_*A+b*T+x*D-w*I+S*M;return O?(O=1/O,e[0]=(s*j-l*A+u*T)*O,e[1]=(n*A-i*j-o*T)*O,e[2]=(y*S-m*w+g*x)*O,e[3]=(d*w-p*S-f*x)*O,e[4]=(l*D-a*j-u*I)*O,e[5]=(r*j-n*D+o*I)*O,e[6]=(m*b-h*S-g*_)*O,e[7]=(c*S-d*b+f*_)*O,e[8]=(a*A-s*D+u*M)*O,e[9]=(i*D-r*A-o*M)*O,e[10]=(h*w-y*b+g*v)*O,e[11]=(p*b-c*w-f*v)*O,e[12]=(s*I-a*T-l*M)*O,e[13]=(r*T-i*I+n*M)*O,e[14]=(y*_-h*x-m*v)*O,e[15]=(c*x-p*_+d*v)*O,e):null},t.SIMD.invert=function(e,t){var r,i,n,o,a,s,l,u,c,p,d=SIMD.Float32x4.load(t,0),f=SIMD.Float32x4.load(t,4),h=SIMD.Float32x4.load(t,8),y=SIMD.Float32x4.load(t,12);return a=SIMD.Float32x4.shuffle(d,f,0,1,4,5),i=SIMD.Float32x4.shuffle(h,y,0,1,4,5),r=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.shuffle(d,f,2,3,6,7),o=SIMD.Float32x4.shuffle(h,y,2,3,6,7),n=SIMD.Float32x4.shuffle(a,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,a,1,3,5,7),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(i,a),l=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(i,n),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),c=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),s),u=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(r,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,a)),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.mul(r,n),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),c),p=SIMD.Float32x4.mul(r,s),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,2,3,0,1),p),p=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(p,1,0,3,2),p),a=SIMD.Float32x4.reciprocalApproximation(p),p=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(p,SIMD.Float32x4.mul(a,a))),(p=SIMD.Float32x4.swizzle(p,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(p,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(p,l)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(p,u)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(p,c)),e):null},t.invert=e.USE_SIMD?t.SIMD.invert:t.scalar.invert,t.scalar.adjoint=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],f=t[11],h=t[12],y=t[13],m=t[14],g=t[15];return e[0]=s*(d*g-f*m)-p*(l*g-u*m)+y*(l*f-u*d),e[1]=-(i*(d*g-f*m)-p*(n*g-o*m)+y*(n*f-o*d)),e[2]=i*(l*g-u*m)-s*(n*g-o*m)+y*(n*u-o*l),e[3]=-(i*(l*f-u*d)-s*(n*f-o*d)+p*(n*u-o*l)),e[4]=-(a*(d*g-f*m)-c*(l*g-u*m)+h*(l*f-u*d)),e[5]=r*(d*g-f*m)-c*(n*g-o*m)+h*(n*f-o*d),e[6]=-(r*(l*g-u*m)-a*(n*g-o*m)+h*(n*u-o*l)),e[7]=r*(l*f-u*d)-a*(n*f-o*d)+c*(n*u-o*l),e[8]=a*(p*g-f*y)-c*(s*g-u*y)+h*(s*f-u*p),e[9]=-(r*(p*g-f*y)-c*(i*g-o*y)+h*(i*f-o*p)),e[10]=r*(s*g-u*y)-a*(i*g-o*y)+h*(i*u-o*s),e[11]=-(r*(s*f-u*p)-a*(i*f-o*p)+c*(i*u-o*s)),e[12]=-(a*(p*m-d*y)-c*(s*m-l*y)+h*(s*d-l*p)),e[13]=r*(p*m-d*y)-c*(i*m-n*y)+h*(i*d-n*p),e[14]=-(r*(s*m-l*y)-a*(i*m-n*y)+h*(i*l-n*s)),e[15]=r*(s*d-l*p)-a*(i*d-n*p)+c*(i*l-n*s),e},t.SIMD.adjoint=function(e,t){var r,i,n,o,a,s,l,u,c,p=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),f=SIMD.Float32x4.load(t,8),h=SIMD.Float32x4.load(t,12);return a=SIMD.Float32x4.shuffle(p,d,0,1,4,5),i=SIMD.Float32x4.shuffle(f,h,0,1,4,5),r=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.shuffle(p,d,2,3,6,7),o=SIMD.Float32x4.shuffle(f,h,2,3,6,7),n=SIMD.Float32x4.shuffle(a,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,a,1,3,5,7),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(i,a),l=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(i,n),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),c=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),s),u=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,a)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(r,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,a)),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,a)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.mul(r,n),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),c),SIMD.Float32x4.store(e,0,s),SIMD.Float32x4.store(e,4,l),SIMD.Float32x4.store(e,8,u),SIMD.Float32x4.store(e,12,c),e},t.adjoint=e.USE_SIMD?t.SIMD.adjoint:t.scalar.adjoint,t.determinant=function(e){var t=e[0],r=e[1],i=e[2],n=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],d=e[11],f=e[12],h=e[13],y=e[14],m=e[15];return(t*a-r*o)*(p*m-d*y)-(t*s-i*o)*(c*m-d*h)+(t*l-n*o)*(c*y-p*h)+(r*s-i*a)*(u*m-d*f)-(r*l-n*a)*(u*y-p*f)+(i*l-n*s)*(u*h-c*f)},t.SIMD.multiply=function(e,t,r){var i=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(r,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(e,0,l);var u=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(e,4,c);var p=SIMD.Float32x4.load(r,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),a))));SIMD.Float32x4.store(e,8,d);var f=SIMD.Float32x4.load(r,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));return SIMD.Float32x4.store(e,12,h),e},t.scalar.multiply=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],f=t[10],h=t[11],y=t[12],m=t[13],g=t[14],v=t[15],_=r[0],b=r[1],x=r[2],w=r[3];return e[0]=_*i+b*s+x*p+w*y,e[1]=_*n+b*l+x*d+w*m,e[2]=_*o+b*u+x*f+w*g,e[3]=_*a+b*c+x*h+w*v,_=r[4],b=r[5],x=r[6],w=r[7],e[4]=_*i+b*s+x*p+w*y,e[5]=_*n+b*l+x*d+w*m,e[6]=_*o+b*u+x*f+w*g,e[7]=_*a+b*c+x*h+w*v,_=r[8],b=r[9],x=r[10],w=r[11],e[8]=_*i+b*s+x*p+w*y,e[9]=_*n+b*l+x*d+w*m,e[10]=_*o+b*u+x*f+w*g,e[11]=_*a+b*c+x*h+w*v,_=r[12],b=r[13],x=r[14],w=r[15],e[12]=_*i+b*s+x*p+w*y,e[13]=_*n+b*l+x*d+w*m,e[14]=_*o+b*u+x*f+w*g,e[15]=_*a+b*c+x*h+w*v,e},t.multiply=e.USE_SIMD?t.SIMD.multiply:t.scalar.multiply,t.mul=t.multiply,t.scalar.translate=function(e,t,r){var i,n,o,a,s,l,u,c,p,d,f,h,y=r[0],m=r[1],g=r[2];return t===e?(e[12]=t[0]*y+t[4]*m+t[8]*g+t[12],e[13]=t[1]*y+t[5]*m+t[9]*g+t[13],e[14]=t[2]*y+t[6]*m+t[10]*g+t[14],e[15]=t[3]*y+t[7]*m+t[11]*g+t[15]):(i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],f=t[10],h=t[11],e[0]=i,e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=d,e[10]=f,e[11]=h,e[12]=i*y+s*m+p*g+t[12],e[13]=n*y+l*m+d*g+t[13],e[14]=o*y+u*m+f*g+t[14],e[15]=a*y+c*m+h*g+t[15]),e},t.SIMD.translate=function(e,t,r){var i=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(r[0],r[1],r[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,0,0,0,0)),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(i,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,a)));return SIMD.Float32x4.store(e,12,l),e},t.translate=e.USE_SIMD?t.SIMD.translate:t.scalar.translate,t.scalar.scale=function(e,t,r){var i=r[0],n=r[1],o=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.SIMD.scale=function(e,t,r){var i,n,o,a=SIMD.Float32x4(r[0],r[1],r[2],0);return i=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,0,0,0,0))),n=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(a,1,1,1,1))),o=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.scale=e.USE_SIMD?t.SIMD.scale:t.scalar.scale,t.rotate=function(t,r,i,n){var o,a,s,l,u,c,p,d,f,h,y,m,g,v,_,b,x,w,S,M,I,D,T,A,j=n[0],O=n[1],F=n[2],E=Math.sqrt(j*j+O*O+F*F);return Math.abs(E)<e.EPSILON?null:(j*=E=1/E,O*=E,F*=E,o=Math.sin(i),s=1-(a=Math.cos(i)),l=r[0],u=r[1],c=r[2],p=r[3],d=r[4],f=r[5],h=r[6],y=r[7],m=r[8],g=r[9],v=r[10],_=r[11],b=j*j*s+a,x=O*j*s+F*o,w=F*j*s-O*o,S=j*O*s-F*o,M=O*O*s+a,I=F*O*s+j*o,D=j*F*s+O*o,T=O*F*s-j*o,A=F*F*s+a,t[0]=l*b+d*x+m*w,t[1]=u*b+f*x+g*w,t[2]=c*b+h*x+v*w,t[3]=p*b+y*x+_*w,t[4]=l*S+d*M+m*I,t[5]=u*S+f*M+g*I,t[6]=c*S+h*M+v*I,t[7]=p*S+y*M+_*I,t[8]=l*D+d*T+m*A,t[9]=u*D+f*T+g*A,t[10]=c*D+h*T+v*A,t[11]=p*D+y*T+_*A,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},t.scalar.rotateX=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+u*i,e[5]=a*n+c*i,e[6]=s*n+p*i,e[7]=l*n+d*i,e[8]=u*n-o*i,e[9]=c*n-a*i,e[10]=p*n-s*i,e[11]=d*n-l*i,e},t.SIMD.rotateX=function(e,t,r){var i=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(a,i))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,n),SIMD.Float32x4.mul(o,i))),e},t.rotateX=e.USE_SIMD?t.SIMD.rotateX:t.scalar.rotateX,t.scalar.rotateY=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-u*i,e[1]=a*n-c*i,e[2]=s*n-p*i,e[3]=l*n-d*i,e[8]=o*i+u*n,e[9]=a*i+c*n,e[10]=s*i+p*n,e[11]=l*i+d*n,e},t.SIMD.rotateY=function(e,t,r){var i=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(a,i))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,n))),e},t.rotateY=e.USE_SIMD?t.SIMD.rotateY:t.scalar.rotateY,t.scalar.rotateZ=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+u*i,e[1]=a*n+c*i,e[2]=s*n+p*i,e[3]=l*n+d*i,e[4]=u*n-o*i,e[5]=c*n-a*i,e[6]=p*n-s*i,e[7]=d*n-l*i,e},t.SIMD.rotateZ=function(e,t,r){var i=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(a,i))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,n),SIMD.Float32x4.mul(o,i))),e},t.rotateZ=e.USE_SIMD?t.SIMD.rotateZ:t.scalar.rotateZ,t.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function(t,r,i){var n,o,a,s=i[0],l=i[1],u=i[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<e.EPSILON?null:(s*=c=1/c,l*=c,u*=c,n=Math.sin(r),a=1-(o=Math.cos(r)),t[0]=s*s*a+o,t[1]=l*s*a+u*n,t[2]=u*s*a-l*n,t[3]=0,t[4]=s*l*a-u*n,t[5]=l*l*a+o,t[6]=u*l*a+s*n,t[7]=0,t[8]=s*u*a+l*n,t[9]=l*u*a-s*n,t[10]=u*u*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},t.fromXRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=i+i,l=n+n,u=o+o,c=i*s,p=i*l,d=i*u,f=n*l,h=n*u,y=o*u,m=a*s,g=a*l,v=a*u;return e[0]=1-(f+y),e[1]=p+v,e[2]=d-g,e[3]=0,e[4]=p-v,e[5]=1-(c+y),e[6]=h+m,e[7]=0,e[8]=d+g,e[9]=h-m,e[10]=1-(c+f),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getRotation=function(e,t){var r=t[0]+t[5]+t[10],i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e},t.fromRotationTranslationScale=function(e,t,r,i){var n=t[0],o=t[1],a=t[2],s=t[3],l=n+n,u=o+o,c=a+a,p=n*l,d=n*u,f=n*c,h=o*u,y=o*c,m=a*c,g=s*l,v=s*u,_=s*c,b=i[0],x=i[1],w=i[2];return e[0]=(1-(h+m))*b,e[1]=(d+_)*b,e[2]=(f-v)*b,e[3]=0,e[4]=(d-_)*x,e[5]=(1-(p+m))*x,e[6]=(y+g)*x,e[7]=0,e[8]=(f+v)*w,e[9]=(y-g)*w,e[10]=(1-(p+h))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function(e,t,r,i,n){var o=t[0],a=t[1],s=t[2],l=t[3],u=o+o,c=a+a,p=s+s,d=o*u,f=o*c,h=o*p,y=a*c,m=a*p,g=s*p,v=l*u,_=l*c,b=l*p,x=i[0],w=i[1],S=i[2],M=n[0],I=n[1],D=n[2];return e[0]=(1-(y+g))*x,e[1]=(f+b)*x,e[2]=(h-_)*x,e[3]=0,e[4]=(f-b)*w,e[5]=(1-(d+g))*w,e[6]=(m+v)*w,e[7]=0,e[8]=(h+_)*S,e[9]=(m-v)*S,e[10]=(1-(d+y))*S,e[11]=0,e[12]=r[0]+M-(e[0]*M+e[4]*I+e[8]*D),e[13]=r[1]+I-(e[1]*M+e[5]*I+e[9]*D),e[14]=r[2]+D-(e[2]*M+e[6]*I+e[10]*D),e[15]=1,e},t.fromQuat=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r+r,s=i+i,l=n+n,u=r*a,c=i*a,p=i*s,d=n*a,f=n*s,h=n*l,y=o*a,m=o*s,g=o*l;return e[0]=1-p-h,e[1]=c+g,e[2]=d-m,e[3]=0,e[4]=c-g,e[5]=1-u-h,e[6]=f+y,e[7]=0,e[8]=d+m,e[9]=f-y,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function(e,t,r,i,n,o,a){var s=1/(r-t),l=1/(n-i),u=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(n+i)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e},t.perspective=function(e,t,r,i,n){var o=1/Math.tan(t/2),a=1/(i-n);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(n+i)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*n*i*a,e[15]=0,e},t.perspectiveFromFieldOfView=function(e,t,r,i){var n=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),u=2/(n+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(n-o)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e},t.ortho=function(e,t,r,i,n,o,a){var s=1/(t-r),l=1/(i-n),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(a+o)*u,e[15]=1,e},t.lookAt=function(r,i,n,o){var a,s,l,u,c,p,d,f,h,y,m=i[0],g=i[1],v=i[2],_=o[0],b=o[1],x=o[2],w=n[0],S=n[1],M=n[2];return Math.abs(m-w)<e.EPSILON&&Math.abs(g-S)<e.EPSILON&&Math.abs(v-M)<e.EPSILON?t.identity(r):(d=m-w,f=g-S,h=v-M,a=b*(h*=y=1/Math.sqrt(d*d+f*f+h*h))-x*(f*=y),s=x*(d*=y)-_*h,l=_*f-b*d,(y=Math.sqrt(a*a+s*s+l*l))?(a*=y=1/y,s*=y,l*=y):(a=0,s=0,l=0),u=f*l-h*s,c=h*a-d*l,p=d*s-f*a,(y=Math.sqrt(u*u+c*c+p*p))?(u*=y=1/y,c*=y,p*=y):(u=0,c=0,p=0),r[0]=a,r[1]=u,r[2]=d,r[3]=0,r[4]=s,r[5]=c,r[6]=f,r[7]=0,r[8]=l,r[9]=p,r[10]=h,r[11]=0,r[12]=-(a*m+s*g+l*v),r[13]=-(u*m+c*g+p*v),r[14]=-(d*m+f*g+h*v),r[15]=1,r)},t.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},t.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},t.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e},t.sub=t.subtract,t.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},t.multiplyScalarAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function(t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],f=t[10],h=t[11],y=t[12],m=t[13],g=t[14],v=t[15],_=r[0],b=r[1],x=r[2],w=r[3],S=r[4],M=r[5],I=r[6],D=r[7],T=r[8],A=r[9],j=r[10],O=r[11],F=r[12],E=r[13],P=r[14],k=r[15];return Math.abs(i-_)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(n-b)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-x)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-M)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(u-I)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-D)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(p-T)<=e.EPSILON*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(d-A)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-j)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(h-O)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(y-F)<=e.EPSILON*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(m-E)<=e.EPSILON*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-P)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(v-k)<=e.EPSILON*Math.max(1,Math.abs(v),Math.abs(k))},t}.apply(null,i))||(e.exports=n)},748:function(e,t,r){var i;void 0===(i=function(){var e={EPSILON:1e-6};e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,e.ENABLE_SIMD=!1,e.SIMD_AVAILABLE=e.ARRAY_TYPE===Float32Array&&"SIMD"in this,e.USE_SIMD=e.ENABLE_SIMD&&e.SIMD_AVAILABLE,e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t};var t=Math.PI/180;return e.toRadian=function(e){return e*t},e.equals=function(t,r){return Math.abs(t-r)<=e.EPSILON*Math.max(1,Math.abs(t),Math.abs(r))},e}.apply(null,[]))||(e.exports=i)},751:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339)],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.layerLookupMap={CSVLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(22)]).then(function(){var t=[r(911)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ElevationLayer:function(){return i.create(function(e){return r.e(35).then(function(){var t=[r(703)];e.apply(null,t)}.bind(this)).catch(r.oe)})},FeatureLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(25)]).then(function(){var t=[r(331)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GroupLayer:function(){return i.create(function(e){return r.e(17).then(function(){var t=[r(714)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GeoRSSLayer:function(){return i.create(function(e){return r.e(36).then(function(){var t=[r(912)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ImageryLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(26),r.e(48)]).then(function(){var t=[r(908)];e.apply(null,t)}.bind(this)).catch(r.oe)})},KMLLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(14),r.e(31),r.e(49)]).then(function(){var t=[r(913)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapImageLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(21)]).then(function(){var t=[r(909)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapNotesLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(73)]).then(function(){var t=[r(1035)];e.apply(null,t)}.bind(this)).catch(r.oe)})},OpenStreetMapLayer:function(){return i.create(function(e){return r.e(39).then(function(){var t=[r(914)];e.apply(null,t)}.bind(this)).catch(r.oe)})},PointCloudLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(28),r.e(50)]).then(function(){var t=[r(915)];e.apply(null,t)}.bind(this)).catch(r.oe)})},SceneLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(23)]).then(function(){var t=[r(795)];e.apply(null,t)}.bind(this)).catch(r.oe)})},IntegratedMeshLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(43)]).then(function(){var t=[r(763)];e.apply(null,t)}.bind(this)).catch(r.oe)})},StreamLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(24)]).then(function(){var t=[r(910)];e.apply(null,t)}.bind(this)).catch(r.oe)})},TileLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(71)]).then(function(){var t=[r(691)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnknownLayer:function(){return i.create(function(e){return r.e(100).then(function(){var t=[r(1036)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnsupportedLayer:function(){return i.create(function(e){return r.e(101).then(function(){var t=[r(1037)];e.apply(null,t)}.bind(this)).catch(r.oe)})},VectorTileLayer:function(){return i.create(function(e){return Promise.all([r.e(16),r.e(37)]).then(function(){var t=[r(736)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WebTileLayer:function(){return i.create(function(e){return r.e(40).then(function(){var t=[r(796)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMSLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(34),r.e(51)]).then(function(){var t=[r(916)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMTSLayer:function(){return i.create(function(e){return r.e(87).then(function(){var t=[r(1038)];e.apply(null,t)}.bind(this)).catch(r.oe)})},BingMapsLayer:function(){return i.create(function(e){return r.e(10).then(function(){var t=[r(772)];e.apply(null,t)}.bind(this)).catch(r.oe)})}}}.apply(null,i))||(e.exports=n)},760:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353),r(1462)],void 0===(n=function(e,t,r,i){var n=r("dojo-debug-messages");return function(){function e(t,i,n,o,a){if(void 0===a&&(a={}),this._context=null,this._glName=null,this._locations={},this._id=void 0,this._initialized=!1,this._vShader=null,this._fShader=null,this._defines={},this._nameToUniformLocation={},this._nameToAttribLocation={},this._nameToUniform1={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error("RenderingContext isn't initialized!"),0===i.length&&console.error("Shaders source should not be empty!"),this._context=t,this._vertexShaderSource=i,this._fragmentShaderSource=n,Array.isArray(a))for(var s=0,l=a;s<l.length;s++){var u=l[s];this._defines[u]="1"}else this._defines=a;this._id=e._nextId++,this._locations=o,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(3)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0}),e.prototype.getDefine=function(e){return this._defines[e]},e.prototype.dispose=function(){if(this._context){var e=this._context.gl;if(this._vShader){var t=this._vShader;e.deleteShader(t),this._vShader=null}if(this._fShader){var i=this._fShader;e.deleteShader(i),this._fShader=null}this._glName&&(e.deleteProgram(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3),this._context=null}},e.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633),this._fShader=this._loadShader(35632),this._vShader&&this._fShader||console.error("Error loading shaders!");var e=this._context.gl,t=e.createProgram();for(var r in e.attachShader(t,this._vShader),e.attachShader(t,this._fShader),this._locations){var i=this._locations[r];e.bindAttribLocation(t,i,r)}e.linkProgram(t),e.getProgramParameter(t,e.LINK_STATUS)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+e.getProgramParameter(t,e.VALIDATE_STATUS)+", gl error ["+e.getError()+"]infoLog: "+e.getProgramInfoLog(t)),this._glName=t,this._initialized=!0}},e.prototype.getUniformLocation=function(e){return this.initialize(),void 0===this._nameToUniformLocation[e]&&(this._nameToUniformLocation[e]=this._context.gl.getUniformLocation(this._glName,e)),this._nameToUniformLocation[e]},e.prototype.hasUniform=function(e){return null!==this.getUniformLocation(e)},e.prototype.getAttribLocation=function(e){return this.initialize(),void 0===this._nameToAttribLocation[e]&&(this._nameToAttribLocation[e]=this._context.gl.getAttribLocation(this._glName,e)),this._nameToAttribLocation[e]},e.prototype.setUniform1i=function(e,t){var r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)},e.prototype.setUniform1f=function(e,t){var r=this._nameToUniform1[e];void 0!==r&&t===r||(this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(e),t),this._nameToUniform1[e]=t)},e.prototype.setUniform1fv=function(e,t){var r=this._nameToUniform1[e];void 0!==r&&t[0]===r||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(e),t),this._nameToUniform1[e]=t[0])},e.prototype.setUniform2f=function(e,t,r){var i=this._nameToUniform2[e];void 0!==i&&t===i[0]&&r===i[1]||(this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(e),t,r),void 0===i?this._nameToUniform2[e]=[t,r]:(i[0]=t,i[1]=r))},e.prototype.setUniform2fv=function(t,r){n&&r.length%2!=0&&console.error("Value array must have even number of elements!");var i=this._nameToUniform2[t];void 0!==i&&e._arraysEqual(r,i)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(t),r),void 0===i?this._nameToUniform2[t]=e._arrayCopy(r):e._arrayAssign(r,i))},e.prototype.setUniform3f=function(e,t,r,i){var n=this._nameToUniform3[e];void 0!==n&&t===n[0]&&r===n[1]&&i===n[2]||(this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(e),t,r,i),void 0===n?this._nameToUniform3[e]=[t,r,i]:(n[0]=t,n[1]=r,n[2]=i))},e.prototype.setUniform3fv=function(t,r){n&&r.length%3!=0&&console.error("Value array must contain sets of three values!");var i=this._nameToUniform3[t];void 0!==i&&e._arraysEqual(r,i)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(t),r),void 0===i?this._nameToUniform3[t]=e._arrayCopy(r):e._arrayAssign(r,i))},e.prototype.setUniform4f=function(e,t,r,i,n){var o=this._nameToUniform4[e];void 0!==o&&t===o[0]&&r===o[1]&&i===o[2]&&n===o[3]||(this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(e),t,r,i,n),void 0===o?this._nameToUniform4[e]=[t,r,i,n]:(o[0]=t,o[1]=r,o[2]=i,o[3]=n))},e.prototype.setUniform4fv=function(t,r){n&&r.length%4!=0&&console.error("Value array must contain sets of four values!");var i=this._nameToUniform4[t];void 0!==i&&e._arraysEqual(r,i)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(t),r),void 0===i?this._nameToUniform4[t]=e._arrayCopy(r):e._arrayAssign(r,i))},e.prototype.setUniformMatrix3fv=function(t,r,i){void 0===i&&(i=!1),n&&r.length%9!=0&&console.error("Matrix array must contain sets ot 9 elements!");var o=this._nameToUniformMatrix3[t];void 0!==o&&(9===o.length?e._matrix3Equal(o,r):e._arraysEqual(r,o))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(t),i,r),void 0===o?this._nameToUniformMatrix3[t]=e._arrayCopy(r):e._arrayAssign(r,o))},e.prototype.setUniformMatrix4fv=function(t,r,i){void 0===i&&(i=!1),n&&r.length%16!=0&&console.error("Matrix array must contain sets ot 16 elements!");var o=this._nameToUniformMatrix4[t];void 0!==o&&(16===o.length?e._matrix4Equal(o,r):e._arraysEqual(r,o))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(t),i,r),void 0===o?this._nameToUniformMatrix4[t]=e._arrayCopy(r):e._arrayAssign(r,o))},e._padToThree=function(e){var t=e.toString();return e<1e3&&(t=("  "+e).slice(-3)),t},e.prototype._addLineNumbers=function(t){var r=2;return t.replace(/\n/g,function(){return"\n"+e._padToThree(r++)+":"})},e.prototype._loadShader=function(e){var t=35633===e,r=t?this._vertexShaderSource:this._fragmentShaderSource,n=r,o="";for(var a in this._defines)o+="#define "+a+" "+this._defines[a]+"\n";n=o+n,"webgl2"===this._context.contextVersion&&(n=i.transpileShader(n,t?"vertex":"fragment"));var s=this._context.gl,l=s.createShader(e);return s.shaderSource(l,n),s.compileShader(l),s.getShaderParameter(l,s.COMPILE_STATUS)||(console.error(s.getShaderInfoLog(l)),console.error(this._addLineNumbers(n)),"webgl2"===this._context.contextVersion&&(console.log("Shader source before transpilation:"),console.log(r))),l},e._matrix4Equal=function(e,t){return n&&(16===e.length&&16===t.length||console.error("Matrix object must contain 16 elements!")),e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e._matrix3Equal=function(e,t){return n&&(9===e.length&&9===t.length||console.error("Matrix object must contain 16 elements!")),e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},e._arraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0},e._arrayCopy=function(e){for(var t=[],r=0;r<e.length;++r)t.push(e[r]);return t},e._arrayAssign=function(e,t){for(var r=0;r<e.length;++r)t[r]=e[r]},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},764:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatingPercentageValue={value:100,readOnly:!0},t.updatingPercentage={dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}}.apply(null,i))||(e.exports=n)},767:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(454),r(418)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.on=function(e,t){return i.after(this,"on"+e,t,!0)},e.prototype.once=function(e,t){return n.once(this,e,t)},e.prototype.emit=function(e){n.emit(this,e,this)},e.prototype.hasEventListener=function(e){var t="on"+e;return!(!this[t]||!this[t].after)},e}();t.Evented=o,t.EventedMixin=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.on=function(e,t){return i.after(this,"on"+e,t,!0)},t.prototype.once=function(e,t){return n.once(this,e,t)},t.prototype.emit=function(e,t){n.emit(this,e,t)},t.prototype.hasEventListener=function(e){var t="on"+e;return!(!this[t]||!this[t].after)},t}(e)}}.apply(null,i))||(e.exports=n)},777:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(625),r(394)],void 0===(n=function(e,t,r,i,n){function o(e,t,r){if(!a(e)||!a(t))return 4;if(null==e||null==t)return 0;if(!r&&e.heightUnit!==t.heightUnit)return 1;if(e.heightModel!==t.heightModel)return 2;switch(e.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return e.vertCRS===t.vertCRS?0:3;default:return 4}}function a(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function s(e){return null!=e.heightModelInfo||null!=e.spatialReference||!u(e)}function l(e){var t=e.url&&n.parse(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&t&&"ImageServer"===t.serverType||!e.heightModelInfo?u(e)?i.deriveUnitFromSR(d,e.spatialReference):null:e.heightModelInfo}function u(e){return c(e,"capabilities")?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):p(e)}function c(e,t){return e.hasOwnProperty(t)}function p(e){switch(e.type){case"elevation":case"integrated-mesh":case"point-cloud":case"scene":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"feature":case"geo-rss":case"graphics":case"group":case"imagery":case"kml":case"map-image":case"map-notes":case"open-street-map":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"web-tile":case"wms":case"wmts":return!1;default:e.type}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.validateWebSceneError=function(e,t){if(!e)return null;if(!a(e))return new r("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:e});var n=e.heightUnit,o=i.deriveUnitFromSR(e,t).heightUnit;return n!==o?new r("webscene:incompatible-height-unit","The vertical units of the scene ("+n+") must match the horizontal units of the scene ("+o+")",{verticalUnit:n,horizontalUnit:o}):null},t.rejectLayerError=function(e,t,n){var a=l(e),u=t,c=o(a,u,n),p=null;if(a){var d=i.deriveUnitFromSR(a,e.spatialReference).heightUnit;n||d===a.heightUnit||(p=new r("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+d+")",{horizontalUnit:d}))}if(!s(e)||4===c||p)return new r("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:a,error:p});switch(p=null,c){case 1:var f=a.heightUnit||"unknown",h=u.heightUnit||"unknown";p=new r("layerview:incompatible-height-unit","The vertical units of the layer ("+f+") must match the vertical units of the scene ("+h+")",{layerUnit:f,sceneUnit:h});break;case 2:var y=a.heightModel||"unknown",m=u.heightModel||"unknown";p=new r("layerview:incompatible-height-model","The height model of the layer ("+y+") must match the height model of the scene ("+m+")",{layerHeightModel:y,sceneHeightModel:m});break;case 3:var g=a.vertCRS||"unknown",v=u.vertCRS||"unknown";p=new r("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+g+") must match the vertical datum of the scene ("+v+")",{layerDatum:g,sceneDatum:v})}return p?new r("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:a,sceneHeightModelInfo:u,error:p}):null},t.deriveHeightModelInfoFromLayer=l,t.mayHaveHeightModelInfo=function(e){return null!=e.layers||p(e)||c(e,"capabilities")||c(e,"heightModelInfo")};var d=new i({heightModel:"gravity-related-height"})}.apply(null,i))||(e.exports=n)},782:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(693),r(350),r(341),r(339),r(394),r(394),r(751)],void 0===(n=function(e,t,i,n,o,a,s,l,u,c){function p(e){return(0,c.layerLookupMap[e])()}function d(e){return o(e,{responseType:"json",query:{f:"json"}}).then(function(e){return e.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.fromUrl=function(e){return function(e){var t=u.parse(e);if(!t)return s.reject(new a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e}));var r,i=t.serverType,o=t.sublayer;switch(i){case"MapServer":r=null!=o?"FeatureLayer":function(e){return d(e).then(function(e){return e.tileInfo})}(e).then(function(e){return e?"TileLayer":"MapImageLayer"});break;case"ImageServer":r=d(e).then(function(e){var t=e.tileInfo&&e.tileInfo.format;return e.tileInfo?t&&"LERC"===t.toUpperCase()&&e.cacheType&&"elevation"===e.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case"SceneServer":r=d(t.url.path).then(function(e){var t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){var r=e.layers[0].layerType;if(null!=t[r])return t[r]}return"SceneLayer"});break;default:r={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"}[i]}var l,c={FeatureLayer:!0,SceneLayer:!0},f={parsedUrl:t,Constructor:null,sublayerIds:null};return n(r).then(function(t){if(l=t,c[t]&&null==o)return function(e){return d(e).then(function(e){return e&&Array.isArray(e.layers)?e.layers.map(function(e){return e.id}).reverse():[]})}(e).then(function(e){1!==e.length&&(f.sublayerIds=e)})}).then(function(){return p(l)}).then(function(e){return f.Constructor=e,f})}(e.url).then(function(t){var n=function(e,t){var r=e.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===r||"esri.layers.StreamLayer"===r?i({outFields:["*"]},t):t}(t,i({},e.properties,{url:e.url}));return t.sublayerIds?s.create(function(e){return r.e(17).then(function(){var t=[r(714)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(e){var r=new e({title:t.parsedUrl.title});return function(e,t){return e.sublayerIds.map(function(r){return new e.Constructor(i({},t,{layerId:r,sublayerTitleMode:"service-name"}))})}(t,n).forEach(function(e){return r.add(e)}),s.resolve(r)}):s.resolve(new t.Constructor(n))})},t.fetchServerVersion=function(e){if(!l.test(e))return s.reject();var t=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return o(t,{query:{f:"json"},responseType:"json"}).then(function(e){return e.data&&e.data.currentVersion?e.data.currentVersion:s.reject()})}}.apply(null,i))||(e.exports=n)},794:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(459)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.isExportDynamic=function(e,t,i){return!!e.some(function(e){var t=e.source;return!(!t||t.type===r.MAPLAYER&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===i.gdbVersion))||null!=e.renderer||null!=e.labelingInfo||e.hasOwnProperty("opacity")&&null!=e.opacity||e.hasOwnProperty("labelsVisible")&&null!=e.labelsVisible})||!function(e,t){if(!e||!e.length)return!0;var r=[];if(t.forEach(function e(t){var i=t.id,n=t.sublayers;r.unshift(i),n&&n.forEach(e)}),e.length>r.length)return!1;for(var i=0,n=r.length,o=0,a=e;o<a.length;o++){for(var s=a[o].id;i<n&&r[i]!==s;)i++;if(i>=n)return!1}return!0}(e,t)},t.sameStructureAsService=function(e,t){return t.flatten(function(e){var t=e.sublayers;return t&&t.toArray().reverse()}).toArray().reverse().every(function(t,r){var i=e[r];return i&&t.id===i.id&&(null==t.sublayers&&null==i.sublayers||null!=t.sublayers&&null!=i.sublayers&&t.sublayers.map(function(e){return e.id}).join(",")===i.sublayers.map(function(e){return e.id}).join(","))})}}.apply(null,i))||(e.exports=n)},798:function(e,t,r){var i,n;i=[r(748)],void 0===(n=function(e){var t={create:function(){var t=new e.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var r=new e.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},fromValues:function(t,r,i,n){var o=new e.ARRAY_TYPE(4);return o[0]=t,o[1]=r,o[2]=i,o[3]=n,o},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}};return t.sub=t.subtract,t.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},t.mul=t.multiply,t.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},t.div=t.divide,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},t.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},t.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},t.scaleAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e},t.distance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+o*o)},t.dist=t.distance,t.squaredDistance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],o=t[3]-e[3];return r*r+i*i+n*n+o*o},t.sqrDist=t.squaredDistance,t.length=function(e){var t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)},t.len=t.length,t.squaredLength=function(e){var t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n},t.sqrLen=t.squaredLength,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},t.normalize=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=r*r+i*i+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=i*a,e[2]=n*a,e[3]=o*a),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.lerp=function(e,t,r,i){var n=t[0],o=t[1],a=t[2],s=t[3];return e[0]=n+i*(r[0]-n),e[1]=o+i*(r[1]-o),e[2]=a+i*(r[2]-a),e[3]=s+i*(r[3]-s),e},t.random=function(r,i){return i=i||1,r[0]=e.RANDOM(),r[1]=e.RANDOM(),r[2]=e.RANDOM(),r[3]=e.RANDOM(),t.normalize(r,r),t.scale(r,r,i),r},t.transformMat4=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,e[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,e[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,e[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,e},t.transformQuat=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*i+s*o-l*n,p=u*n+l*i-a*o,d=u*o+a*n-s*i,f=-a*i-s*n-l*o;return e[0]=c*u+f*-a+p*-l-d*-s,e[1]=p*u+f*-s+d*-a-c*-l,e[2]=d*u+f*-l+c*-s-p*-a,e[3]=t[3],e},t.forEach=function(){var e=t.create();return function(t,r,i,n,o,a){var s,l;for(r||(r=4),i||(i=0),l=n?Math.min(n*r+i,t.length):t.length,s=i;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),t.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.equals=function(t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return Math.abs(i-s)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-l)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-u)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},t}.apply(null,i))||(e.exports=n)},804:function(e,t,r){var i;void 0===(i=function(){var e={defaultNoDataValue:-3.4027999387901484e38,decode:function(o,a){var s=(a=a||{}).encodedMaskData||null===a.encodedMaskData,l=n(o,a.inputOffset||0,s),u=null!=a.noDataValue?a.noDataValue:e.defaultNoDataValue,c=t(l,a.pixelType||Float32Array,a.encodedMaskData,u,a.returnMask),p={width:l.width,height:l.height,pixelData:c.resultPixels,minValue:l.pixels.minValue,maxValue:l.pixels.maxValue,noDataValue:u};return c.resultMask&&(p.maskData=c.resultMask),a.returnEncodedMask&&l.mask&&(p.encodedMaskData=l.mask.bitset?l.mask.bitset:null),a.returnFileInfo&&(p.fileInfo=r(l),a.computeUsedBitDepths&&(p.fileInfo.bitDepths=i(l))),p}},t=function(e,t,r,i,n){var a,s,l=0,u=e.pixels.numBlocksX,c=e.pixels.numBlocksY,p=Math.floor(e.width/u),d=Math.floor(e.height/c),f=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),a=new t(e.width*e.height),n&&r&&(s=new Uint8Array(e.width*e.height));for(var h,y,m=new Float32Array(p*d),g=0;g<=c;g++){var v=g!==c?d:e.height%c;if(0!==v)for(var _=0;_<=u;_++){var b=_!==u?p:e.width%u;if(0!==b){var x,w,S,M,I=g*e.width*d+_*p,D=e.width-b,T=e.pixels.blocks[l];if(T.encoding<2?(0===T.encoding?x=T.rawData:(o(T.stuffedData,T.bitsPerPixel,T.numValidPixels,T.offset,f,m,e.pixels.maxValue),x=m),w=0):S=2===T.encoding?0:T.offset,r)for(y=0;y<v;y++){for(7&I&&(M=r[I>>3],M<<=7&I),h=0;h<b;h++)7&I||(M=r[I>>3]),128&M?(s&&(s[I]=1),a[I++]=T.encoding<2?x[w++]:S):(s&&(s[I]=0),a[I++]=i),M<<=1;I+=D}else if(T.encoding<2)for(y=0;y<v;y++){for(h=0;h<b;h++)a[I++]=x[w++];I+=D}else for(y=0;y<v;y++)if(a.fill)a.fill(S,I,I+b),I+=b+D;else{for(h=0;h<b;h++)a[I++]=S;I+=D}if(1===T.encoding&&w!==T.numValidPixels)throw"Block and Mask do not match";l++}}}return{resultPixels:a,resultMask:s}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:this.noDataValue}}},i=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},i=0;i<t;i++){var n=e.pixels.blocks[i];0===n.encoding?r.float32=!0:1===n.encoding?r[n.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},n=function(e,t,r){var i={},n=new Uint8Array(e,t,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,n),"CntZImage"!=i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;t+=10;var o=new DataView(e,t,24);if(i.fileVersion=o.getInt32(0,!0),i.imageType=o.getInt32(4,!0),i.height=o.getUint32(8,!0),i.width=o.getUint32(12,!0),i.maxZError=o.getFloat64(16,!0),t+=24,!r)if(o=new DataView(e,t,16),i.mask={},i.mask.numBlocksY=o.getUint32(0,!0),i.mask.numBlocksX=o.getUint32(4,!0),i.mask.numBytes=o.getUint32(8,!0),i.mask.maxValue=o.getFloat32(12,!0),t+=16,i.mask.numBytes>0){var a=new Uint8Array(Math.ceil(i.width*i.height/8)),s=(o=new DataView(e,t,i.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(s>0)for(;s--;)a[u++]=o.getUint8(l++);else{var c=o.getUint8(l++);for(s=-s;s--;)a[u++]=c}s=o.getInt16(l,!0),l+=2}while(l<i.mask.numBytes);if(-32768!==s||u<a.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=a,t+=i.mask.numBytes}else if(0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)){a=new Uint8Array(Math.ceil(i.width*i.height/8));i.mask.bitset=a}o=new DataView(e,t,16),i.pixels={},i.pixels.numBlocksY=o.getUint32(0,!0),i.pixels.numBlocksX=o.getUint32(4,!0),i.pixels.numBytes=o.getUint32(8,!0),i.pixels.maxValue=o.getFloat32(12,!0),t+=16;var p=i.pixels.numBlocksX,d=i.pixels.numBlocksY,f=p+(i.width%p>0?1:0),h=d+(i.height%d>0?1:0);i.pixels.blocks=new Array(f*h);for(var y=1e9,m=0,g=0;g<h;g++)for(var v=0;v<f;v++){var _=0,b=e.byteLength-t;o=new DataView(e,t,Math.min(10,b));var x={};i.pixels.blocks[m++]=x;var w=o.getUint8(0);if(_++,x.encoding=63&w,x.encoding>3)throw"Invalid block encoding ("+x.encoding+")";if(2!==x.encoding){if(0!==w&&2!==w){if(w>>=6,x.offsetType=w,2===w)x.offset=o.getInt8(1),_++;else if(1===w)x.offset=o.getInt16(1,!0),_+=2;else{if(0!==w)throw"Invalid block offset type";x.offset=o.getFloat32(1,!0),_+=4}if(y=Math.min(x.offset,y),1===x.encoding)if(w=o.getUint8(_),_++,x.bitsPerPixel=63&w,w>>=6,x.numValidPixelsType=w,2===w)x.numValidPixels=o.getUint8(_),_++;else if(1===w)x.numValidPixels=o.getUint16(_,!0),_+=2;else{if(0!==w)throw"Invalid valid pixel count type";x.numValidPixels=o.getUint32(_,!0),_+=4}}var S;if(t+=_,3!=x.encoding)if(0===x.encoding){var M=(i.pixels.numBytes-1)/4;if(M!==Math.floor(M))throw"uncompressed block has invalid length";S=new ArrayBuffer(4*M),new Uint8Array(S).set(new Uint8Array(e,t,4*M));for(var I=new Float32Array(S),D=0;D<I.length;D++)y=Math.min(y,I[D]);x.rawData=I,t+=4*M}else if(1===x.encoding){var T=Math.ceil(x.numValidPixels*x.bitsPerPixel/8),A=Math.ceil(T/4);S=new ArrayBuffer(4*A),new Uint8Array(S).set(new Uint8Array(e,t,T)),x.stuffedData=new Uint32Array(S),t+=T}}else t++,y=Math.min(y,0)}return i.pixels.minValue=y,i.eofOffset=t,i},o=function(e,t,r,i,n,o,a){var s,l,u,c=(1<<t)-1,p=0,d=0,f=Math.ceil((a-i)/n),h=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*h,s=0;s<r;s++){if(0===d&&(u=e[p++],d=32),d>=t)l=u>>>d-t&c,d-=t;else{var y=t-d;l=(u&c)<<y&c,l+=(u=e[p++])>>>(d=32-y)}o[s]=l<f?i+l*n:a}return o};return e}.apply(null,[]))||(e.exports=i)},865:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(363),r(362),r(436),r(429)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.capabilities=void 0,t.copyright=null,t.fullExtent=null,t.legendEnabled=!0,t.spatialReference=null,t.version=null,t}return r(t,e),t.prototype.readCapabilities=function(e,t){var r=t.capabilities&&t.capabilities.split(",").map(function(e){return e.toLowerCase().trim()});if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var i=this.type,n=-1!==r.indexOf("query"),o=-1!==r.indexOf("map"),a=!!t.exportTilesAllowed,s=-1!==r.indexOf("tilemap"),l="tile"!==i&&!!t.supportsDynamicLayers,u="tile"!==i&&(!t.tileInfo||l),c="tile"!==i&&(!t.tileInfo||l);return{operations:{supportsQuery:n,supportsExportMap:o,supportsExportTiles:a,supportsTileMap:s},exportMap:o?{supportsSublayersChanges:"tile"!==i,supportsDynamicLayers:l,supportsSublayerVisibility:u,supportsSublayerDefinitionExpression:c}:null,exportTiles:a?{maxExportTilesCount:+t.maxExportTilesCount}:null}},t.prototype.readVersion=function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r},i([n.property({readOnly:!0})],t.prototype,"capabilities",void 0),i([n.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),i([n.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),i([n.property({type:o})],t.prototype,"fullExtent",void 0),i([n.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),i([n.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),i([n.property(l.popupEnabled)],t.prototype,"popupEnabled",void 0),i([n.property({type:a})],t.prototype,"spatialReference",void 0),i([n.property()],t.prototype,"version",void 0),i([n.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),i([n.subclass("esri.layers.mixins.ArcGISMapService")],t)}(n.declared(s))}.apply(null,i))||(e.exports=n)},866:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(346),r(357),r(721),r(341),r(338),r(343),r(336),r(360),r(461),r(867),r(794)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f,h,y){function m(e,t,r){var i=[],n={};return e.forEach(function(e){var o=new h;if(o.read(e,t),r&&(-1===r.indexOf(o.id)?o.visible=!1:o.visible=!0),n[o.id]=o,null!=e.parentLayerId&&-1!==e.parentLayerId){var a=n[e.parentLayerId];a.sublayers||(a.sublayers=[]),a.sublayers.unshift(o)}else i.unshift(o)}),i}function g(e){return e.__accessor__.store._values}function v(e){return e.__accessor__.overridden}Object.defineProperty(t,"__esModule",{value:!0});var _=c.getLogger("esri.layers.TileLayer"),b=function(e){function t(){var t=e.call(this)||this;return t.allSublayers=new s({root:t,rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),t.watch("sublayers",function(e,r){return t._handleSublayersChange(e,r)},!0),t}return i(t,e),t.prototype.readServiceSublayers=function(e,t,r){return m(t.layers,r)},t.prototype.readSublayersFromItemOrWebMap=function(e,t,r){return!t.layers&&t.visibleLayers?t.visibleLayers.map(function(e){return{id:e}}):m(t.layers,r,t.visibleLayers)},t.prototype.readSublayers=function(e,t,r){var i=m(t.layers,r);return this._updateSublayersForOrigin(f.OriginId.PORTAL_ITEM,i),this._updateSublayersForOrigin(f.OriginId.WEB_MAP,i),this._updateSublayersForOrigin(f.OriginId.WEB_SCENE,i),i},t.prototype.writeSublayers=function(e,t,i,n){var o=e.flatten(function(e){var t=e.sublayers;return t&&t.toArray().reverse()}).toArray().reverse(),a=this.serviceSublayers.flatten(function(e){var t=e.sublayers;return t&&t.toArray().reverse()}).toArray().reduce(function(e,t){return e.set(t.id,t),e},new Map),s=!1,l=!0;this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers?(s=y.isExportDynamic(o,this.serviceSublayers,this),l=!s&&y.sameStructureAsService(o,this.serviceSublayers)):l=y.sameStructureAsService(o,this.serviceSublayers),t.layers=[],o.forEach(function(e){var i=a.get(e.id),o=r({writeAsDynamic:s,writeOverridesOnly:l,serviceSublayer:i},n),u=e.write({},o);(!l||l&&Object.keys(u).length>1)&&t.layers.push(u)}),t.visibleLayers=o.filter(function(e){return e.visible}).map(function(e){return e.id})},t.prototype.findSublayerById=function(e){return this.allSublayers.find(function(t){return t.id===e})},t.prototype.createServiceSublayers=function(){return this.serviceSublayers.map(function(e){return e.clone()})},t.prototype._updateSublayersForOrigin=function(e,t){var r=this.__accessor__.store;if(r.has("sublayers",e)){var i=r.get("sublayers",e).flatten(function(e){return e.sublayers});if(i.every(function(e){return!g(e).hasOwnProperty("minScale")})){var n=i.reduce(function(e,t){return e.set(t.id,t),e},new Map),o=t.map(function(e){return function e(t,r){var i=r.get(t.id);return i?(u.mixin(g(t),g(i)),v(i)&&(t.__accessor__.overridden=u.mixin(v(t)||{},v(i))),i.sublayers&&(t.sublayers=i.sublayers.map(function(t){return e(t,r)}))):t.sublayers&&t.sublayers.forEach(function(t){return e(t,r)}),t}(e.clone(),n)});r.set("sublayers",new(a.ofType(h))(o),e)}}},t.prototype._handleSublayersChange=function(e,t){var r=this;t&&(t.forEach(function(e){e.parent=null,e.layer=null}),this._sublayersHandles.forEach(function(e){return e.remove()}),this._sublayersHandles=null),e&&(e.forEach(function(e){e.parent=r,e.layer=r}),this._sublayersHandles=[e.on("after-add",function(e){var t=e.item;t.parent=r,t.layer=r}),e.on("after-remove",function(e){var t=e.item;t.parent=null,t.layer=null})],"tile"===this.type&&this._sublayersHandles.push(e.on("before-changes",function(e){_.error(new l("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault()})))},n([p.property({readOnly:!0})],t.prototype,"allSublayers",void 0),n([p.property({readOnly:!0,type:a.ofType(h)})],t.prototype,"serviceSublayers",void 0),n([p.reader("service","serviceSublayers",["layers"])],t.prototype,"readServiceSublayers",null),n([p.property({value:null,type:a.ofType(h),json:{type:[Number],write:{target:"subLayerIds",allowNull:!0}}})],t.prototype,"sublayers",void 0),n([p.reader(["web-map","web-scene","portal-item"],"sublayers",["layers","visibleLayers"])],t.prototype,"readSublayersFromItemOrWebMap",null),n([p.reader("service","sublayers",["layers"])],t.prototype,"readSublayers",null),n([p.writer(["web-map","web-scene","portal-item"],"sublayers",{layers:{type:[h]},visibleLayers:{type:[d.Integer]}})],t.prototype,"writeSublayers",null),n([p.subclass("esri.layers.mixins.SublayersOwner")],t)}(p.declared(o));t.default=b}.apply(null,i))||(e.exports=n)},867:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(388),r(434),r(669),r(357),r(341),r(340),r(338),r(343),r(336),r(360),r(619),r(331),r(429),r(427),r(459),r(423),r(615),r(756),r(647),r(419)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,c,p,d,f,h,y,m,g,v,_,b,x,w,S){var M=p.getLogger("esri.layers.support.Sublayer"),I=0;return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sublayersHandles=null,t}var u;return r(t,e),u=t,Object.defineProperty(t.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(e){this._setAndNotifyLayer("definitionExpression",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var e=this._get("id");return null==e?I++:e},set:function(e){if(this._get("id")!==e)return!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?void this._logLockedError("id"):void this._set("id",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(e){this._setAndNotifyLayer("labelingInfo",e)},enumerable:!0,configurable:!0}),t.prototype.writeLabelingInfo=function(e,t,r,i){i&&!i.writeAsDynamic||e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(function(e){return e.write({},i)})}})},Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(e){this._setAndNotifyLayer("labelsVisible",e)},enumerable:!0,configurable:!0}),t.prototype.writeLabelsVisible=function(e,t,r,i){i&&!i.writeAsDynamic||(t.showLabels=e)},Object.defineProperty(t.prototype,"layer",{set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(function(t){return t.layer=e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(e){this._set("legendEnabled",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(e){this._setAndNotifyLayer("minScale",e)},enumerable:!0,configurable:!0}),t.prototype.readMinScale=function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0},t.prototype.writeMinScale=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.minScale===e&&n.maxScale===this.maxScale)return}t.minScale=e},Object.defineProperty(t.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(e){this._setAndNotifyLayer("maxScale",e)},enumerable:!0,configurable:!0}),t.prototype.readMaxScale=function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0},t.prototype.writeMaxScale=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.maxScale===e&&n.minScale===this.minScale)return}t.maxScale=e},Object.defineProperty(t.prototype,"opacity",{get:function(){return this._get("opacity")},set:function(e){this._setAndNotifyLayer("opacity",e)},enumerable:!0,configurable:!0}),t.prototype.readOpacity=function(e,t){var r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)},t.prototype.writeOpacity=function(e,t,r,i){i&&!i.writeAsDynamic||(t.layerDefinition={drawingInfo:{transparency:100-100*e}})},t.prototype.writeParent=function(e,t,r,i){i&&i.writeOverridesOnly||(this.parent&&this.parent!==this.layer?t.parentLayerId=this.parent.id:t.parentLayerId=-1)},Object.defineProperty(t.prototype,"popupEnabled",{get:function(){return this._get("popupEnabled")},set:function(e){this._set("popupEnabled",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(e){this._set("popupTemplate",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._get("renderer")},set:function(e){if(e)for(var t=0,r=e.getSymbols();t<r.length;t++){if(r[t].isInstanceOf(x)){M.warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){return(e=t.layerDefinition.drawingInfo.renderer||void 0)&&((e=_.read(e,t,r)||void 0)||M.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r})),e},t.prototype.writeRenderer=function(e,t,r,i){i&&!i.writeAsDynamic||(t.layerDefinition={drawingInfo:{renderer:e.toJSON()}})},Object.defineProperty(t.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,type:v.MAPLAYER}},set:function(e){this._setAndNotifyLayer("source",e)},enumerable:!0,configurable:!0}),t.prototype.writeSource=function(e,t,r,i){i&&!i.writeAsDynamic&&i.writeOverridesOnly||(t.layerDefinition={source:v.sourceToJSON(e)})},Object.defineProperty(t.prototype,"sublayers",{set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)},enumerable:!0,configurable:!0}),t.prototype.castSublayers=function(e){return f.default(s.ofType(u),e)},t.prototype.writeSublayers=function(e,t,r,i){i&&i.writeOverridesOnly||(t[r]=this.get("sublayers.length")?this.sublayers.map(function(e){return e.id}).toArray().reverse():null)},Object.defineProperty(t.prototype,"title",{get:function(){return this._get("title")},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),t.prototype.writeTitle=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.title===e)return}t[r]=e},Object.defineProperty(t.prototype,"url",{get:function(){var e=this.layer,t=this.source;if(!e)return null;if(v.isMapLayerSource(t))return e.parsedUrl.path+"/"+t.mapLayerId;var r={layer:JSON.stringify({source:v.sourceToJSON(this.source)})};return e.parsedUrl.path+"/dynamicLayer?"+o.objectToQuery(r)},set:function(e){e?this._override("url",e):this._clearOverride("url")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._get("visible")},set:function(e){this._setAndNotifyLayer("visible",e)},enumerable:!0,configurable:!0}),t.prototype.writeVisible=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.visible===e)return}t[r]=e},t.prototype.clone=function(){var e=new u;return this.hasOwnProperty("definitionExpression")&&(e.definitionExpression=this.definitionExpression),this.hasOwnProperty("id")&&(e.id=this.id),this.hasOwnProperty("labelingInfo")&&(e.labelingInfo=c.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(e.labelsVisible=this.labelsVisible),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("minScale")&&(e.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(e.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(e.opacity=this.opacity),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("popupEnabled")&&(e.popupEnabled=this.popupEnabled),this.hasOwnProperty("popupTemplate")&&(e.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate),this.hasOwnProperty("renderer")&&(e.renderer=this.renderer?this.renderer.clone():this.renderer),this.hasOwnProperty("source")&&(e.source=c.clone(this.source)),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers?this.sublayers.clone():this.sublayers),this.hasOwnProperty("title")&&(e.title=this.title),e},t.prototype.createQuery=function(){return new S({returnGeometry:!0,where:this.definitionExpression||"1=1"})},t.prototype.createFeatureLayer=function(){if(this.hasOwnProperty("sublayers"))return null;var e=this.layer&&this.layer.parsedUrl,t=this.source,r=null;e&&(r=v.isMapLayerSource(t)?e.path+"/"+t.mapLayerId:e.path+"/dynamicLayer");var i=new y({url:r});return this.hasOwnProperty("definitionExpression")&&(i.definitionExpression=this.definitionExpression),this.hasOwnProperty("labelingInfo")&&(i.labelingInfo=c.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(i.labelsVisible=this.labelsVisible),this.hasOwnProperty("legendEnabled")&&(i.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(i.visible=this.visible),this.hasOwnProperty("minScale")&&(i.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(i.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(i.opacity=this.opacity),this.hasOwnProperty("popupTemplate")&&(i.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate),this.hasOwnProperty("renderer")&&(i.renderer=this.renderer?this.renderer.clone():this.renderer),this.hasOwnProperty("source")&&v.isDataLayerSource(this.source)&&(i.dynamicDataSource=c.clone(this.source)),this.hasOwnProperty("title")&&(i.title=this.title),i},t.prototype.queryFeatures=function(e){var t=this;return void 0===e&&(e=this.createQuery()),new w({url:this.url}).execute(e).then(function(e){return e&&e.features&&e.features.forEach(function(e){e.sourceLayer=t}),e})},t.prototype.toExportImageJSON=function(){var e={id:this.id,source:v.sourceToJSON(this.source)};if(this.definitionExpression&&(e.definitionExpression=this.definitionExpression),this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var t=e.drawingInfo={};this.renderer&&(t.renderer=this.renderer.toJSON()),null!=this.labelsVisible&&(t.showLabels=this.labelsVisible),!1!==this.labelsVisible&&this.labelingInfo&&(t.labelingInfo=this.labelingInfo.map(function(e){return e.write({},{origin:"service"})}),t.showLabels=!0),null!=this.opacity&&(t.transparency=100-100*this.opacity)}return e},t.prototype._setAndNotifyLayer=function(e,t){var r,i=this.layer,n=this._get(e);switch(e){case"definitionExpression":r="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":r="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":r="supportsDynamicLayers"}r&&!1===this.get("layer.capabilities.exportMap."+r)?this._logLockedError(e):(this._set(e,t),n!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e}))},t.prototype._handleSublayersChange=function(e,t){var r=this;t&&(t.forEach(function(e){e.parent=null,e.layer=null}),this._sublayersHandles.forEach(function(e){return e.remove()}),this._sublayersHandles=null),e&&(e.forEach(function(e){e.parent=r,e.layer=r.layer}),this._sublayersHandles=[e.on("after-add",function(e){var t=e.item;t.parent=r,t.layer=r.layer}),e.on("after-remove",function(e){var t=e.item;t.parent=null,t.layer=null}),e.on("before-changes",function(e){var t=r.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(M.error(new l("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault())})])},t.prototype._logLockedError=function(e){M.error(new l("sublayer:locked","Property '"+e+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{sublayer:this,layer:this.layer}))},i([d.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",null),i([d.property({type:Number,json:{write:{ignoreOrigin:!0}}})],t.prototype,"id",null),i([d.property({value:null,type:[g],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",null),i([d.writer("labelingInfo")],t.prototype,"writeLabelingInfo",null),i([d.property({type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}})],t.prototype,"labelsVisible",null),i([d.writer("labelsVisible")],t.prototype,"writeLabelsVisible",null),i([d.property({value:null})],t.prototype,"layer",null),i([d.property({type:Boolean,value:!0,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",null),i([d.property({type:Number,value:0,json:{write:{overridePolicy:function(e,t,r){if(h.willPropertyWrite(this,"maxScale",{},r))return{ignoreOrigin:!0}}}}})],t.prototype,"minScale",null),i([d.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],t.prototype,"readMinScale",null),i([d.writer("minScale")],t.prototype,"writeMinScale",null),i([d.property({type:Number,value:0,json:{write:{overridePolicy:function(e,t,r){if(h.willPropertyWrite(this,"minScale",{},r))return{ignoreOrigin:!0}}}}})],t.prototype,"maxScale",null),i([d.reader("portal-item","maxScale",["maxScale","layerDefinition.maxScale"])],t.prototype,"readMaxScale",null),i([d.writer("maxScale")],t.prototype,"writeMaxScale",null),i([d.property({type:Number,json:{write:{target:"layerDefinition.drawingInfo.transparency"}}})],t.prototype,"opacity",null),i([d.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],t.prototype,"readOpacity",null),i([d.writer("opacity")],t.prototype,"writeOpacity",null),i([d.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],t.prototype,"parent",void 0),i([d.writer("parent")],t.prototype,"writeParent",null),i([d.property(m.popupEnabled)],t.prototype,"popupEnabled",null),i([d.property({value:null,type:a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",null),i([d.property({types:b.types,value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),i([d.reader("renderer",["layerDefinition.drawingInfo.renderer"])],t.prototype,"readRenderer",null),i([d.writer("renderer")],t.prototype,"writeRenderer",null),i([d.property({cast:v.castSource,json:{read:{source:"layerDefinition.source",reader:v.sourceFromJSON},write:{target:"layerDefinition.source"}}})],t.prototype,"source",null),i([d.writer("source")],t.prototype,"writeSource",null),i([d.property({value:null,json:{type:[f.Integer],write:{target:"subLayerIds",allowNull:!0}}})],t.prototype,"sublayers",null),i([d.cast("sublayers")],t.prototype,"castSublayers",null),i([d.writer("sublayers")],t.prototype,"writeSublayers",null),i([d.property({type:String,value:null,json:{read:{source:"name"},write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"title",null),i([d.writer("title")],t.prototype,"writeTitle",null),i([d.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],t.prototype,"url",null),i([d.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility"}}})],t.prototype,"visible",null),i([d.writer("visible")],t.prototype,"writeVisible",null),i([n(0,d.cast(S))],t.prototype,"queryFeatures",null),u=i([d.subclass("esri.layers.support.Sublayer")],t)}(d.declared(u))}.apply(null,i))||(e.exports=n)},875:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(927)],void 0===(n=function(e,t,r){return{streets:{id:"streets",title:r.streets,thumbnailUrl:e.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:r.satellite,thumbnailUrl:e.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:r.hybrid,thumbnailUrl:e.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",title:r.terrain,thumbnailUrl:e.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:r.topo,thumbnailUrl:e.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:r.gray,thumbnailUrl:e.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:r["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:r.oceans,thumbnailUrl:e.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",title:r["national-geographic"],thumbnailUrl:e.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:r.osm,thumbnailUrl:e.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:r["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:r.gray,thumbnailUrl:e.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:r.streets,thumbnailUrl:e.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:r.topo,thumbnailUrl:e.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:r["streets-night-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:r["streets-relief-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:r["streets-navigation-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}}.apply(null,i))||(e.exports=n)},878:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(703),r(691),r(736),r(875),r(978),r(979)],void 0===(n=function(e,t,r,i,n,o,a,s){function l(e){return e&&"esri.views.3d.layers.TileLayerView3D"===e.declaredClass}function u(e){return e&&"esri.views.3d.layers.VectorTileLayerView3D"===e.declaredClass}function c(e){return e&&"esri.views.3d.layers.WMTSLayerView3D"===e.declaredClass}function p(e){return e&&"esri.views.3d.layers.ElevationLayerView3D"===e.declaredClass}function d(){for(var e in y={},o)o[e].baseMapLayers.forEach(function(e){y[e.url]=19});y["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}function f(e,t,r,i){return h["local"===i||"planar"===i?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(e,t,r)}Object.defineProperty(t,"__esModule",{value:!0});var h={planar:a,spherical:s};t.weakAssert=function(e,t){e||console.warn("Terrain: "+t)},t.autoUpdateSkirtsVisibility=function(e,t,r){var i,n=h[e.manifold],o=n.isInsideExtent(e,t);if(o)i=e.getElevation(t);else{var a=e.getElevationBounds();i=.5*(a[0]+a[1])}var s=t[2]-i,l=.9*Math.abs(s)<r?0:s<0?-1:1;if(!o)if(n.isInsideExtent(e,t,e.hideSkirtsDistanceFromExtentMargin)){var u=n.tiltToExtentEdge(e,t);u>e.hideSkirtsMinimumCameraTilt&&u<e.hideSkirtsMaximumCameraTilt&&(l=0)}else l=0;e.skirtScale=l},t.isTiledLayer=function(e){return e&&"base-tile"===e.type||"tile"===e.type||"elevation"===e.type||"base-elevation"===e.type||"open-street-map"===e.type||"web-tile"===e.type||"wmts"===e.type||"vector-tile"===e.type},t.isVectorTileLayer=function(e){return e&&e.isInstanceOf(n)},t.isTileLayerView=l,t.isVectorTileLayerView=u,t.isWMTSLayerView=c,t.isElevationLayerView=p,t.isTiledLayerView=function(e){return e&&(l(e)||p(e)||u(e)||c(e))},t.useFetchTileForLayer=function(e){return e.fetchTile&&!(e.fetchTile===i.prototype.fetchTile||e.fetchTile===r.prototype.fetchTile)};var y=null;t.getKnownTiledServiceLevelCap=function(e){y||d();var t=e&&e.replace(/https?:/,"");return t in y?y[t]:1/0},t.prepareKnownTiledServiceLevelCaps=d,t.checkIfTileInfoSupportedForView=f,t.getTiledLayerInfo=function(e,t,r){var i,n;if("wmts"===e.type){var o=e.activeLayer;if(o){var a=o.tileMatrixSet;if(a)i=a.tileInfo,n=a.fullExtent;else{var s=o.tileMatrixSets;if(s){var l=s.find(function(e){return null==f(e.tileInfo,e.fullExtent,t,r)});if(l)return{tileInfo:l.tileInfo,fullExtent:l.fullExtent}}}}}else i="vector-tile"===e.type?e.compatibleTileInfo256:e.tileInfo,n=e.fullExtent;return i&&n&&null==f(i,n,t,r)?{tileInfo:i,fullExtent:n}:{tileInfo:null,fullExtent:null}}}.apply(null,i))||(e.exports=n)},881:function(e,t,r){var i,n;i=[r(748)],void 0===(n=function(e){var t={create:function(){var t=new e.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var r=new e.ARRAY_TYPE(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},fromValues:function(t,r,i){var n=new e.ARRAY_TYPE(3);return n[0]=t,n[1]=r,n[2]=i,n},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}};return t.sub=t.subtract,t.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},t.mul=t.multiply,t.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},t.div=t.divide,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},t.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},t.scaleAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e},t.distance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)},t.dist=t.distance,t.squaredDistance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n},t.sqrDist=t.squaredDistance,t.length=function(e){var t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)},t.len=t.length,t.squaredLength=function(e){var t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i},t.sqrLen=t.squaredLength,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=function(e,t){var r=t[0],i=t[1],n=t[2],o=r*r+i*i+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.cross=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=n*l-o*s,e[1]=o*a-i*l,e[2]=i*s-n*a,e},t.lerp=function(e,t,r,i){var n=t[0],o=t[1],a=t[2];return e[0]=n+i*(r[0]-n),e[1]=o+i*(r[1]-o),e[2]=a+i*(r[2]-a),e},t.hermite=function(e,t,r,i,n,o){var a=o*o,s=a*(2*o-3)+1,l=a*(o-2)+o,u=a*(o-1),c=a*(3-2*o);return e[0]=t[0]*s+r[0]*l+i[0]*u+n[0]*c,e[1]=t[1]*s+r[1]*l+i[1]*u+n[1]*c,e[2]=t[2]*s+r[2]*l+i[2]*u+n[2]*c,e},t.bezier=function(e,t,r,i,n,o){var a=1-o,s=a*a,l=o*o,u=s*a,c=3*o*s,p=3*l*a,d=l*o;return e[0]=t[0]*u+r[0]*c+i[0]*p+n[0]*d,e[1]=t[1]*u+r[1]*c+i[1]*p+n[1]*d,e[2]=t[2]*u+r[2]*c+i[2]*p+n[2]*d,e},t.random=function(t,r){r=r||1;var i=2*e.RANDOM()*Math.PI,n=2*e.RANDOM()-1,o=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(i)*o,t[1]=Math.sin(i)*o,t[2]=n*r,t},t.transformMat4=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[3]*i+r[7]*n+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*i+r[4]*n+r[8]*o+r[12])/a,e[1]=(r[1]*i+r[5]*n+r[9]*o+r[13])/a,e[2]=(r[2]*i+r[6]*n+r[10]*o+r[14])/a,e},t.transformMat3=function(e,t,r){var i=t[0],n=t[1],o=t[2];return e[0]=i*r[0]+n*r[3]+o*r[6],e[1]=i*r[1]+n*r[4]+o*r[7],e[2]=i*r[2]+n*r[5]+o*r[8],e},t.transformQuat=function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*i+s*o-l*n,p=u*n+l*i-a*o,d=u*o+a*n-s*i,f=-a*i-s*n-l*o;return e[0]=c*u+f*-a+p*-l-d*-s,e[1]=p*u+f*-s+d*-a-c*-l,e[2]=d*u+f*-l+c*-s-p*-a,e},t.rotateX=function(e,t,r,i){var n=[],o=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],o[0]=n[0],o[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),o[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},t.rotateY=function(e,t,r,i){var n=[],o=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],o[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),o[1]=n[1],o[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},t.rotateZ=function(e,t,r,i){var n=[],o=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],o[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),o[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),o[2]=n[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},t.forEach=function(){var e=t.create();return function(t,r,i,n,o,a){var s,l;for(r||(r=3),i||(i=0),l=n?Math.min(n*r+i,t.length):t.length,s=i;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),t.angle=function(e,r){var i=t.fromValues(e[0],e[1],e[2]),n=t.fromValues(r[0],r[1],r[2]);t.normalize(i,i),t.normalize(n,n);var o=t.dot(i,n);return o>1?0:Math.acos(o)},t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return Math.abs(i-a)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-s)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},t}.apply(null,i))||(e.exports=n)},886:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(367),r(686)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MAP=0]="MAP",e[e.ELEVATION=1]="ELEVATION",e[e.COUNT=2]="COUNT"}(t.LayerClass||(t.LayerClass={})),function(e){e[e.NONE=0]="NONE",e[e.SPLIT=1]="SPLIT",e[e.VSPLITMERGE=2]="VSPLITMERGE",e[e.MERGE=4]="MERGE",e[e.DECODE_ELEVATION=8]="DECODE_ELEVATION",e[e.UPDATE_GEOMETRY=16]="UPDATE_GEOMETRY",e[e.UPDATE_TEXTURE=32]="UPDATE_TEXTURE"}(t.TileUpdateTypes||(t.TileUpdateTypes={})),t.TILE_LOADING_DEBUGLOG=!1,t.MAX_ROOT_TILES=64,t.MAX_TILE_TESSELATION=512,t.ELEVATION_NODATA_VALUE=3.40282347e37,t.noDataValueOpt={noDataValue:t.ELEVATION_NODATA_VALUE},t.ELEVATION_DESIRED_RESOLUTION_LEVEL=4,t.TILEMAP_SIZE_EXP=5,t.TILEMAP_SIZE=1<<t.TILEMAP_SIZE_EXP,t.WEBMERCATOR_WORLD_EXTENT=r.create(),i.WebMercatorAuxiliarySphere.getExtent(0,0,0,t.WEBMERCATOR_WORLD_EXTENT),t.GEOGRAPHIC_WORLD_EXTENT=r.create([-180,-90,180,90]),t.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR="Cannot extend surface to encompass all layers because it would result in too many root tiles.",t.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR="Surface extent is too large for tile resolution at level 0.",t.DEFAULT_TILE_BACKGROUND="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA2JJREFUeNrs3d1O20AQgFFvRJInQLQBhHj/h0JVW34El1yQ2F73DVq3jTys55zrqUBbPrErZUSZ+vcOsto4AjK76Lqu1vr8+G3mPzjc3D/+eJj/Bcz/cd75R80fbu79BsAVCAQAAgABgABAACAAEAAIAAQAAgABQPOKfQAy83Ho+HnnHzXv49B4A4AAQAAgABAACAAEAAIAAYAAQAAgABAANM4+AKnZB4ifd/5R8/YB8AYAAYAAQAAgABAACAAEAAIAAYAAQAAgAGicfQBSsw8QP+/8o+btA+ANAAIAAYAAQAAgABAACAAEAAIAAYAAQADQOPsApGYfIH7e+UfN2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAXA201QdggAggH0AUrMPED8/jsPL03fns/y8fQC8AUAAIAAQAAgABAACAAGAAEAAIAAQAAgAGmcfgNTsA8TP2weImrcPgDcACAAEAAIAAYAAQAAgABAACAAEAAIAAUDj7AOQmn2A+Hn7AFHz9gHwBgABgABAACAAEAAIAAQAAgABgABgNS4cAf9pu9u3O1+m/n2aplKK/0j+TX86/tVP5+eZ3+729gFIfwWyDxA7bx8gat4+ANkJAAGAAEAAIAAQAAgABAACAAGAAEAAIABonn0AUrMPED9vHyBq3j4A3gAgABAACAAEAAIAAYAAQAAgABAA51VrdQgCAAHAsuwDkJp9gPj5vj+9vvx0PsvP2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAYAAoHH2AUjNPkD8vH2AqHn7AHgDgABAACAAEAAIAAQAAgABgABAACAAEAA0zj4AqdkHiJ+3DxA1bx8AbwAQACQ0DL0AyKuOowBwBYKUSikCIHUBAsAVCAQAAgABgABAALBy9gFIzT5A/Lx9gKj5y6trVyC8AUAAIAAQAAgAVq90Pg5N5gA2AsAVCAQAAgABgABAALB29gFIzT5A/Lx9gKj5q6+3rkB4A4AAQAAgABAACADWzB/IIHsCAsAVCARAlKlWhyAAEAAIABZjH4DU7APEz5+OH2+vT85n+fkvhztXILwBQAAgABAACAAEAGtWigBIHcBGALgCgQBAACAAyPMO9nHosxuHodZx5vB2t691HIdh/nx/Os7/Zsz/fvgXAAAA//8DAF1P1hM2ICMfAAAAAElFTkSuQmCC"}.apply(null,i))||(e.exports=n)},888:function(e,t,r){var i,n;i=[r(748)],void 0===(n=function(e){var t={create:function(){var t=new e.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},clone:function(t){var r=new e.ARRAY_TYPE(2);return r[0]=t[0],r[1]=t[1],r},fromValues:function(t,r){var i=new e.ARRAY_TYPE(2);return i[0]=t,i[1]=r,i},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,r){return e[0]=t,e[1]=r,e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},subtract:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}};return t.sub=t.subtract,t.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},t.mul=t.multiply,t.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},t.div=t.divide,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},t.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},t.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},t.scaleAndAdd=function(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e},t.distance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)},t.dist=t.distance,t.squaredDistance=function(e,t){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i},t.sqrDist=t.squaredDistance,t.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},t.len=t.length,t.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},t.sqrLen=t.squaredLength,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},t.normalize=function(e,t){var r=t[0],i=t[1],n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,r){var i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e},t.lerp=function(e,t,r,i){var n=t[0],o=t[1];return e[0]=n+i*(r[0]-n),e[1]=o+i*(r[1]-o),e},t.random=function(t,r){r=r||1;var i=2*e.RANDOM()*Math.PI;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t},t.transformMat2=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e},t.transformMat2d=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e},t.transformMat3=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e},t.transformMat4=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e},t.forEach=function(){var e=t.create();return function(t,r,i,n,o,a){var s,l;for(r||(r=2),i||(i=0),l=n?Math.min(n*r+i,t.length):t.length,s=i;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},t.equals=function(t,r){var i=t[0],n=t[1],o=r[0],a=r[1];return Math.abs(i-o)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))},t}.apply(null,i))||(e.exports=n)},891:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353)],void 0===(n=function(e,t,r){return function(){function e(t,i){this._context=t,this._desc=i,this._glName=null,this._id=-1;var n=this._context.gl;r("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5),this._id=++e._nextId,this._glName=n.createRenderbuffer(),this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,i.internalFormat,i.width,i.height)}return Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),e.prototype.resize=function(e,t){var r=this._context.gl,i=this._desc;i.width===e&&i.height===t||(i.width=e,i.height=t,this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,i.internalFormat,i.width,i.height))},e.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5),this._context=null},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},899:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=new Uint32Array(1),i=new Uint8Array(r.buffer);t.int32To4Bytes=function(e){return r[0]=0|e,[i[0],i[1],i[2],i[3]]}}.apply(null,i))||(e.exports=n)},927:function(e,t,r){r(928),r(929),r(930),r(931),r(932),r(933),r(934),r(935),r(936),r(937),r(938),r(939),r(940),r(941),r(942),r(943),r(944),r(945),r(946),r(947),r(948),r(949),r(950),r(951),r(952),r(953),r(954),r(955),r(956),r(957),r(958),r(959),r(960),r(961),r(962),r(963),r(964),r(965);var i=r.dj.c();e.exports=r(672)("C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/basemaps",i)},928:function(e,t,r){e.exports={streets:"شوارع",satellite:"صور",hybrid:"صور ذات تسميات",terrain:"تضاريس مع تسميات",topo:"طبوجرافيا",gray:"لوحات بلون رمادي فاتح","dark-gray":"لوحات بلون رمادي داكن",oceans:"محيطات","national-geographic":"الجغرافيا الوطنية",osm:"OpenStreetMap","streets-night-vector":"خريطة شوارع العالم (الليلية)","streets-relief-vector":"خريطة شوارع العالم (مع التصريف)","streets-navigation-vector":"خريطة التنقل العالمية"}},929:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snimke",hybrid:"Snimke s oznakama",terrain:"Teren s oznakama",topo:"Topografski",gray:"Svijetlo siva podloga","dark-gray":"Tamno siva podloga",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Svjetska karta ulica (noć)","streets-relief-vector":"Svjetska karta ulica (s reljefom)","streets-navigation-vector":"Navigacijska karta svijeta"}},930:function(e,t,r){e.exports={streets:"Carrers",satellite:"Imatges",hybrid:"Imatges amb etiquetes",terrain:"Terreny amb etiquetes",topo:"Topogràfic",gray:"Lona gris clar","dark-gray":"Lona gris fosc",oceans:"Oceans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa de carrers mundial (nit)","streets-relief-vector":"Mapa de carrers mundial (amb relleu)","streets-navigation-vector":"Mapa de navegació mundial"}},931:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snímky",hybrid:"Snímky s popisky",terrain:"Terén s popisky",topo:"Topografická",gray:"Světle šedý podklad","dark-gray":"Tmavě šedý podklad",oceans:"Oceány","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa světa s uliční sítí (noc)","streets-relief-vector":"Mapa světa s uliční sítí (s reliéfem)","streets-navigation-vector":"Navigační mapa světa"}},932:function(e,t,r){e.exports={streets:"Streets",satellite:"Imagery",hybrid:"Billeder med tekster",terrain:"Terræn med tekster",topo:"Topografisk",gray:"Lysegråt lærred","dark-gray":"Mørkegråt lærred",oceans:"Oceaner","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Verdensgadekort (nat)","streets-relief-vector":"Verdensgadekort (med relief)","streets-navigation-vector":"Verdensnavigationskort"}},933:function(e,t,r){e.exports={streets:"Straßen",satellite:"Bilddaten",hybrid:"Bilddaten mit Beschriftungen",terrain:"Terrain mit Beschriftungen",topo:"Topografisch",gray:"Hellgrauer Hintergrund","dark-gray":"Dunkelgrauer Hintergrund",oceans:"Meere","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Weltweite Straßenkarte (Nacht)","streets-relief-vector":"Weltweite Straßenkarte (mit Relief)","streets-navigation-vector":"Weltweite Navigationskarte"}},934:function(e,t,r){e.exports={streets:"Δρόμοι",satellite:"Δορυφορικές εικόνες",hybrid:"Δορυφορικές με ετικέτες",terrain:"Έδαφος με ετικέτες",topo:"Τοπογραφικός",gray:"Ανοικτός γκρίζος καμβάς","dark-gray":"Σκούρος γκρι καμβάς",oceans:"Ωκεανοί","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"}},935:function(e,t,r){e.exports={streets:"Calles",satellite:"Imágenes",hybrid:"Imágenes con etiquetas",terrain:"Terreno con etiquetas",topo:"Topográfico",gray:"Lona gris claro","dark-gray":"Lona gris oscuro",oceans:"Océanos","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa de calles mundial (Noche)","streets-relief-vector":"Mapa de calles mundial (con relieve)","streets-navigation-vector":"Mapa de navegación mundial"}},936:function(e,t,r){e.exports={streets:"Tänavad",satellite:"Satelliitpildid",hybrid:"Kaardikirjadega satelliitpildid",terrain:"Kaardikirjadega kõrgusmudel",topo:"Topograafiline kaart",gray:"Helehall taust","dark-gray":"Tumehall taust",oceans:"Ookeanid","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Maailma tänavakaart (öö)","streets-relief-vector":"Maailma tänavakaart (reljeefiga)","streets-navigation-vector":"Maailma navigeerimiskaart"}},937:function(e,t,r){e.exports={streets:"Streets",satellite:"Imagery",hybrid:"Kuvasto, jossa selitteet",terrain:"Maasto, jossa selitteet",topo:"Topografia",gray:"Vaaleanharmaa kangas","dark-gray":"Tummanharmaa kangas",oceans:"Oceans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Maailman katukartta (yö)","streets-relief-vector":"Maailman katukartta (korkeuseroilla)","streets-navigation-vector":"Maailman navigointikartta"}},938:function(e,t,r){e.exports={streets:"Rues",satellite:"Imagerie",hybrid:"Imagerie avec étiquettes",terrain:"MNT avec étiquettes",topo:"Topographie",gray:"Nuances de gris","dark-gray":"Nuances de gris foncé",oceans:"Océans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"}},939:function(e,t,r){e.exports={streets:"רחובות",satellite:"הדמיה",hybrid:"הדמיה עם תוויות",terrain:"פני שטח עם תוויות",topo:"טופוגרפי",gray:"קנבס אפור בהיר","dark-gray":"קנבס אפור כהה",oceans:"אוקינוסים","national-geographic":"נשיונל גיאוגרפיק",osm:"OpenStreetMap","streets-night-vector":"מפת רחובות עולמית (לילה)","streets-relief-vector":"מפת רחובות עולמית (עם תבליט)","streets-navigation-vector":"מפת ניווט עולמית"}},940:function(e,t,r){e.exports={streets:"सड़कें",satellite:"कल्पना",hybrid:"लेबल सहित चित्रकारी",terrain:"लेबल सहित भू-भाग",topo:"स्थलाकृतिक",gray:"हल्का धूसर कैनवस","dark-gray":"गहरा धूसर कैनवस",oceans:"समुद्र","national-geographic":"National Geographic (नेशनल ज्योग्राफिक)",osm:"OpenStreetMap","streets-night-vector":"विश्व सड़क मानचित्र (रात्रि)","streets-relief-vector":"विश्व सड़क मानचित्र (उभार सहित)","streets-navigation-vector":"विश्व नेविगेशन मानचित्र"}},941:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snimke",hybrid:"Snimke s oznakama",terrain:"Teren s oznakama",topo:"Topografski",gray:"Svijetlo siva podloga","dark-gray":"Tamno siva podloga",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Svjetska karta ulica (noć)","streets-relief-vector":"Svjetska karta ulica (s reljefom)","streets-navigation-vector":"Navigacijska karta svijeta"}},942:function(e,t,r){e.exports={streets:"Utcák",satellite:"Távérzékelt felvétel",hybrid:"Távérzékelt felvétel felirattal",terrain:"Domborzati térkép felirattal",topo:"Topográfiai térkép",gray:"Világosszürke váztérkép","dark-gray":"Sötétszürke váztérkép",oceans:"Óceánok","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Világ Úthálózat Térkép (éjszaka)","streets-relief-vector":"Világ Úthálózat Térkép (domborzattal)","streets-navigation-vector":"Világ Navigációs Térkép"}},943:function(e,t,r){e.exports={streets:"Jalan",satellite:"Citra",hybrid:"Citra dengan Label",terrain:"Medan dengan Label",topo:"Topografi",gray:"Kanvas Abu-Abu Muda","dark-gray":"Kanvas Abu-Abu Gelap",oceans:"Samudra","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Peta Jalan Dunia (Malam)","streets-relief-vector":"Peta Jalan Dunia (dengan Relief)","streets-navigation-vector":"Peta Navigasi Dunia"}},944:function(e,t,r){e.exports={streets:"Vie",satellite:"Immagini",hybrid:"Immagini con etichette",terrain:"Suolo con etichette",topo:"Topografico",gray:"Tela grigio chiaro","dark-gray":"Tela grigio scuro",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mappa stradale mondiale (notte)","streets-relief-vector":"Mappa stradale mondiale (con rilievo)","streets-navigation-vector":"Mappa mondiale navigazione"}},945:function(e,t,r){e.exports={streets:"道路 (複数)",satellite:"衛星画像",hybrid:"ラベル付き衛星画像",terrain:"ラベル付き起伏図",topo:"地形図",gray:"キャンバス (ライト グレー)","dark-gray":"キャンバス (ダーク グレー)",oceans:"海洋","national-geographic":"ナショナル ジオグラフィック",osm:"OpenStreetMap","streets-night-vector":"道路地図 (World Street Map) (夜)","streets-relief-vector":"道路地図 (World Street Map) (起伏付き)","streets-navigation-vector":"ナビゲーション マップ (World Navigation Map)"}},946:function(e,t,r){e.exports={streets:"도로",satellite:"이미지",hybrid:"이미지(레이블 포함)",terrain:"터레인(레이블 포함)",topo:"지형",gray:"연한 회색 캔버스","dark-gray":"진한 회색 캔버스",oceans:"해양","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"도로 맵(야간)","streets-relief-vector":"도로 맵(릴리프 포함)","streets-navigation-vector":"내비게이션 맵"}},947:function(e,t,r){e.exports={streets:"Ielas",satellite:"Attēli",hybrid:"Attēli ar nosaukumiem",terrain:"Reljefs ar nosaukumiem",topo:"Topogrāfiskā",gray:"Gaiši pelēka pamatne","dark-gray":"Tumši pelēka pamatne",oceans:"Okeāni","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Pasaules ielu karte (nakts)","streets-relief-vector":"Pasaules ielu karte (ar reljefu)","streets-navigation-vector":"Pasaules navigācijas karte"}},948:function(e,t,r){e.exports={streets:"Gatvės",satellite:"Aeronuotrauka",hybrid:"Aeronuotrauka su žymėmis",terrain:"Teritorija su žymėmis",topo:"Topografinis",gray:"Šviesiai pilkas fonas","dark-gray":"Tamsiai pilkas fonas",oceans:"Vandenynai","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Pasaulio kelių ir gatvių žemėlapis (naktinis)","streets-relief-vector":"Pasaulio kelių ir gatvių žemėlapis (su reljefu)","streets-navigation-vector":"Pasaulio navigacijos žemėlapis"}},949:function(e,t,r){e.exports={streets:"Straten",satellite:"Imagery",hybrid:"Satellietbeelden met labels",terrain:"Terrein met labels",topo:"Topografisch",gray:"Lichtgrijs canvas","dark-gray":"Donkergrijs canvas",oceans:"Oceanen","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Wereldstratenkaart (nacht)","streets-relief-vector":"Wereldstratenkaart (met reliëf)","streets-navigation-vector":"Navigatiekaart wereld"}},950:function(e,t,r){e.exports={streets:"Gater",satellite:"Bilder",hybrid:"Bilder med påskrifter",terrain:"Terreng med påskrift",topo:"Topografisk",gray:"Lysegrått lerret","dark-gray":"Mørkegrått lerret",oceans:"Kyst og sjø","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"}},951:function(e,t,r){e.exports={streets:"Ulice",satellite:"Zobrazowania",hybrid:"Zobrazowania z etykietami",terrain:"Teren z etykietami",topo:"Topograficzna",gray:"W odcieniach szarości","dark-gray":"Ciemne, szare płótno",oceans:"Oceany","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa ulic świata (noc)","streets-relief-vector":"Mapa ulic świata (z rzeźbą terenu)","streets-navigation-vector":"Światowa mapa nawigacji"}},952:function(e,t,r){e.exports={streets:"Ruas",satellite:"Imagem",hybrid:"Imagem com Rótulos",terrain:"Terreno com Rótulos",topo:"Topográfico",gray:"Tela Cinza Claro","dark-gray":"Tela Cinza Escuro",oceans:"Oceanos","national-geographic":"Geográfico Nacional",osm:"OpenStreetMap","streets-night-vector":"Mapa de Ruas Mundial (Noite)","streets-relief-vector":"Mapa de Ruas Mundial (com Relevo)","streets-navigation-vector":"Mapa de Navegação Mundial"}},953:function(e,t,r){e.exports={streets:"Ruas",satellite:"Imagem",hybrid:"Imagens com Rótulos",terrain:"Terrenos com Rótulos",topo:"Topográfico",gray:"Fundo Cinza Claro","dark-gray":"Fundo Cinza Escuro",oceans:"Oceanos","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa de Ruas Mundial (Noite)","streets-relief-vector":"Mapa de Ruas Mundial (com Relevo)","streets-navigation-vector":"Mapa de Navegação Mundial"}},954:function(e,t,r){e.exports={streets:"Străzi",satellite:"Imagini satelitare",hybrid:"Imagini cu etichete",terrain:"Teren cu etichete",topo:"Topografic",gray:"Fond gri deschis","dark-gray":"Fond gri închis",oceans:"Oceane","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Hartă stradală globală (Noapte)","streets-relief-vector":"Hartă stradală globală (cu relief)","streets-navigation-vector":"Hartă de navigare globală"}},955:function(e,t,r){e.exports={streets:"Улицы",satellite:"Изображени",hybrid:"Снимки с надписями",terrain:"Рельеф с надписями",topo:"Топографическая",gray:"Светло-серое полотно","dark-gray":"Тёмно-серое полотно",oceans:"Океаны","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Ночь)","streets-relief-vector":"World Street Map (с высотами)","streets-navigation-vector":"World Navigation Map"}},956:function(e,t,r){e.exports={streets:"Ulice",satellite:"Slikovje",hybrid:"Slikovje z napisi",terrain:"Relief z napisi",topo:"Topografska karta",gray:"Svetlo sivo platno","dark-gray":"Temno sivo platno",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Karta ulic (nočni pogled)","streets-relief-vector":"Karta ulic (z reliefom)","streets-navigation-vector":"Navigacijska karta"}},957:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snimci",hybrid:"Snimci sa natpisima",terrain:"Teren sa oznakama",topo:"Topografski",gray:"Svetlosivo platno","dark-gray":"Tamnosivo platno",oceans:"Okeani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (noć)","streets-relief-vector":"World Street Map (sa reljefom)","streets-navigation-vector":"Svetska mapa za navigaciju"}},958:function(e,t,r){e.exports={streets:"Gator",satellite:"Imagery",hybrid:"Bilder med etiketter",terrain:"Terräng med etiketter",topo:"Topografisk",gray:"Ljusgrå bakgrundskarta","dark-gray":"Mörkgrå bakgrundskarta",oceans:"Hav","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Världstäckande vägkarta (natt)","streets-relief-vector":"Världstäckande vägkarta (med relief)","streets-navigation-vector":"Världstäckande navigeringskarta"}},959:function(e,t,r){e.exports={streets:"ถนน",satellite:"ภาพถ่าย",hybrid:"ภาพพร้อมคำบรรยาย",terrain:"สัญลักษณ์ของภูมิประเทศ",topo:"ภูมิประเทศ",gray:"ภาพพื้นสีเทาอ่อน","dark-gray":"ภาพพื้นสีเทาเข้ม",oceans:"มหาสมุทร","national-geographic":"เนชั่นแนล จีโอกราฟิก",osm:"OpenStreetMap","streets-night-vector":"แผนที่ถนนทั่วโลก (กลางคืน)","streets-relief-vector":"แผนที่ถนนทั่วโลก (with Relief)","streets-navigation-vector":"แผนที่นำทาง"}},960:function(e,t,r){e.exports={streets:"Sokaklar",satellite:"Görüntüler",hybrid:"Etiketli Görüntüler",terrain:"Etiketli Araziler",topo:"Topografik",gray:"Açık Gri Kanvas","dark-gray":"Koyu Gri Kanvas",oceans:"Okyanuslar","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Dünya Sokak Haritası (Gece)","streets-relief-vector":"Dünya Sokak Haritası (Kabartmalı)","streets-navigation-vector":"Dünya Navigasyon Haritası"}},961:function(e,t,r){e.exports={streets:"Đường phố",satellite:"Dữ liệu hình ảnh",hybrid:"Hình ảnh có Dán nhãn",terrain:"Địa hình có Dán nhãn",topo:"Địa hình",gray:"Bức vẽ xám nhạt","dark-gray":"Bức vẽ xám đậm",oceans:"Đại dương","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Bản đồ Đường phố Thế giới (Ban đêm)","streets-relief-vector":"Bản đồ Đường phố Thế giới (có Địa hình)","streets-navigation-vector":"Bản đồ Điều hướng Thế giới"}},962:function(e,t,r){e.exports={streets:"街道图",satellite:"影像图",hybrid:"带标注的影像",terrain:"带标注的 Terrain",topo:"地形图",gray:"浅灰色画布图","dark-gray":"深灰色画布图",oceans:"海洋图","national-geographic":"国家地理",osm:"OpenStreetMap","streets-night-vector":"世界街道图(夜间)","streets-relief-vector":"世界街道图(含地貌)","streets-navigation-vector":"世界导航图"}},963:function(e,t,r){e.exports={streets:"街道圖",satellite:"影像圖",hybrid:"帶標籤的影像圖",terrain:"帶標籤的地域圖",topo:"地形圖",gray:"淺灰色畫布地圖","dark-gray":"深灰色畫布地圖",oceans:"海洋圖","national-geographic":"國家地理",osm:"OpenStreetMap","streets-night-vector":"世界街道圖 (夜晚)","streets-relief-vector":"世界街道圖 (包含救濟中心)","streets-navigation-vector":"世界導航圖"}},964:function(e,t,r){e.exports={streets:"街道圖",satellite:"影像圖",hybrid:"帶標籤的影像圖",terrain:"帶標籤的地域圖",topo:"地形圖",gray:"淺灰色畫布地圖","dark-gray":"深灰色畫布地圖",oceans:"海洋圖","national-geographic":"國家地理",osm:"OpenStreetMap","streets-night-vector":"世界街道圖 (夜晚)","streets-relief-vector":"世界街道圖 (包含救濟中心)","streets-navigation-vector":"世界導航圖"}},965:function(e,t,r){e.exports={root:{streets:"Streets",satellite:"Imagery",hybrid:"Imagery with Labels",terrain:"Terrain with Labels",topo:"Topographic",gray:"Light Gray Canvas","dark-gray":"Dark Gray Canvas",oceans:"Oceans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"},ar:1,bs:1,ca:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sl:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}},977:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(341),r(336),r(734),r(764),r(878)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDataLevel=0,t.maxDataLevel=1/0,t._isUpdating=!1,t}return r(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpaque",{get:function(){return this.fullOpacity>=1&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0}),t.prototype.getTileUrl=function(e,t,r){return this.layer.getTileUrl(e,t,r)},t.prototype.updatingChanged=function(e){this._isUpdating=e,this.notifyChange("updating")},t.prototype.isUpdating=function(){return this._isUpdating},t.prototype._getTileInfoSupportError=function(e,t){var r=l.checkIfTileInfoSupportedForView(e,t,this.view.spatialReference,this.view.basemapTerrain.manifold);if(r){var i={layer:this.layer,error:r},o=void 0;switch(r.name){case"tilingscheme:local-gcs-not-supported":o=new n("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",i);break;case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":o=new n("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",i);break;default:o=new n("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",i)}return o}return null},t.prototype._getTileInfoCompatibilityError=function(e,t){return t.compatibleWith(e)?null:new n("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")},t.prototype._updateMinMaxDataLevel=function(){var e,t=1/0,r=0;this.tileInfo.lods.forEach(function(e){t=Math.min(e.level,t),r=Math.max(e.level,r)}),e=[t,r],this.minDataLevel=e[0],this.maxDataLevel=e[1]},i([o.property({readOnly:!0})],t.prototype,"imageFormatIsOpaque",null),i([o.property(s.updatingPercentage)],t.prototype,"updatingPercentage",void 0),i([o.property(s.updatingPercentageValue)],t.prototype,"updatingPercentageValue",void 0),i([o.property()],t.prototype,"fullExtent",void 0),i([o.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],t.prototype,"isOpaque",null),i([o.property()],t.prototype,"layer",void 0),i([o.property()],t.prototype,"minDataLevel",void 0),i([o.property()],t.prototype,"maxDataLevel",void 0),i([o.property()],t.prototype,"tileInfo",void 0),i([o.subclass("esri.views.3d.layers.TiledLayerView3D")],t)}(o.declared(a))}.apply(null,i))||(e.exports=n)},978:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(367),r(342),r(886),r(686)],void 0===(n=function(e,t,r,i,n,o,a){function s(e,t,r,i){n.vec3d.set(r,u),u[i]=t[i];var o,a=n.vec3d.subtract(u,t),s=n.vec3d.subtract(e,t,c),l=n.vec3d.dot(s,a),p=n.vec3d.dot(a,a);o=l<=0?t:p<=l?r:n.vec3d.add(t,n.vec3d.scale(a,l/p),u);var d=n.vec3d.subtract(e,o,u);return Math.PI/2-Math.atan(d[2]/Math.sqrt(d[0]*d[0]+d[1]*d[1]))}function l(e,t){var n=e.lods,s=n[0].resolution*Math.pow(2,n[0].level),l=[s*e.size[0],s*e.size[1]],u=[e.origin.x,e.origin.y],c=i.fromExtent(t),p=i.create();a.computeRowColExtent(c,l,u,p);var d=(p[2]-p[0])*(p[3]-p[1]);if(d>o.MAX_ROOT_TILES){var f=n[0].scale*Math.pow(2,n[0].level),h=Math.max((c[3]-c[1])/e.size[1],(c[2]-c[0])/e.size[0])*f/s,y=Math.floor(Math.log(h)/Math.log(10));return h=Math.ceil(h/Math.pow(10,y))*Math.pow(10,y),new r("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(f).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+h.toLocaleString()+".",{level0Scale:f,suggestedLevel0Scale:h,requiredNumRootTiles:d,allowedNumRootTiles:o.MAX_ROOT_TILES})}return null}Object.defineProperty(t,"__esModule",{value:!0});var u=n.vec3d.create(),c=n.vec3d.create(),p=n.vec3d.create(),d=n.vec3d.create();t.isInsideExtent=function(e,t,r){void 0===r&&(r=0);var n=e.extent;if(0===r)return i.containsPoint(n,t);var o=Math.min(n[2]-n[0],n[3]-n[1]);return i.containsPointWithMargin(n,t,r*o)},t.tiltOnEdge=s,t.tiltToExtentEdge=function(e,t){var r=e.getElevationBounds(),i=e.extent,n=.5*(r[0]+r[1]);p[0]=i[0],p[1]=i[1],p[2]=n,d[0]=i[2],d[1]=i[3],d[2]=n;var o=1/0,a=1/0;return t[0]<p[0]?o=s(t,p,d,0):t[0]>d[0]&&(o=s(t,d,p,0)),t[1]<p[1]?a=s(t,p,d,1):t[1]>d[1]&&(a=s(t,d,p,1)),Math.min(o,a)},t.checkIfTileInfoSupportedForViewSR=function(e,t,i){if(e.spatialReference.isGeographic)return new r("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var n=a.checkUnsupported(e);return n||l(e,t)||(i&&!e.spatialReference.equals(i)?new r("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null)}}.apply(null,i))||(e.exports=n)},979:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(686)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isInsideExtent=function(e,t,r){return void 0===r&&(r=0),!0},t.tiltToExtentEdge=function(e,t){return 0},t.checkIfTileInfoSupportedForViewSR=function(e,t,n){var o=e.lods.length-1;if(e.spatialReference.isWebMercator){if(!i.makeWebMercatorAuxiliarySphere(o).compatibleWith(e))return new r("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!e.spatialReference.isWGS84)return new r("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!i.makeWGS84WithTileSize(e.size[1],o).compatibleWith(e))return new r("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme")}if(n&&!e.spatialReference.equals(n))return new r("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}}.apply(null,i))||(e.exports=n)}}]);