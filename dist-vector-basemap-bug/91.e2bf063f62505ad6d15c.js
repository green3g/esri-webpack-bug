(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/LayerView":649,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/RefreshableLayerView":667,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/LayerView2D":768,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/Canvas2DContainer":981,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/BitmapSource":982,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/Bitmap":1034,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/support/GraphicsView2D":1450,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/KMLLayerView2D":2401})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{1034:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(345),i(715)],void 0===(n=function(e,t,i,r){var n=[0,0];return function(e){function t(t){var i=e.call(this)||this;return i.height=0,i.resolution=0,i.rotation=0,i._source=null,i._sourceHandle=null,i.width=0,i.x=0,i.y=0,i.source=t,i.requestRender=i.requestRender.bind(i),i}return i(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(e){this._sourceHandle&&(this._sourceHandle.remove(),this._sourceHandle=null),this._source=e,this._source&&(this._sourceHandle=this._source.on("update",this.requestRender)),this.requestRender()},enumerable:!0,configurable:!0}),t.prototype.doRender=function(e){this.source&&this.source.ready&&this.renderCanvas2D(e)},t.prototype.renderCanvas2D=function(e){var t=this.source,i=e.context,r=e.state,o=r.resolution,a=r.rotation,s=this.resolution/o*r.pixelRatio;if(!(s<.05)){i.save();var l=r.toScreen(n,this.x,this.y),h=l[0],p=l[1];if(s>.99&&s<1.01?i.translate(Math.round(h),Math.round(p)):(i.translate(h,p),i.scale(s,s)),a){var d=a*Math.PI/180;i.rotate(d)}t.rotation&&(i.translate(.5*this.width,.5*this.height),i.rotate(-t.rotation*Math.PI/180),i.translate(.5*-this.width,.5*-this.height));var u=t.resolution||this.resolution,c=(this.x-t.x)/u,y=-(this.y-t.y)/u,f=(t.width||this.width)*(this.resolution/u),v=(t.height||this.height)*(this.resolution/u);i.clearRect(0,0,this.width,this.height),t.draw(i,Math.round(c),Math.round(y),Math.round(f),Math.round(v),0,0,this.width,this.height),i.restore()}},t}(r)}.apply(null,r))||(e.exports=n)},1450:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(337),i(335),i(383),i(357),i(365),i(339),i(336),i(1300),i(1301),i(1302),i(1306)],void 0===(n=function(e,t,i,r,n,o,a,s,l,h,p,d,u){return function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=e.apply(this,t)||this;return r._frontGroup=new h,r._handles=new a,r._objects=new Map,r.container=new d,r.container.addChild(r._frontGroup),r.watch("graphics",function(){return r._reset()},!0),r}return i(t,e),t.prototype.hitTest=function(e,t){if(!this.view||!this.view.position)return null;e+=this.view.position[0]-window.pageXOffset,t+=this.view.position[1]-window.pageYOffset;var i=this.container.hitTest(e,t);return i?s.resolve(i.graphic):null},t.prototype.graphicUpdateHandler=function(e){var t=e.graphic,i=e.property,r=e.newValue;if(this._objects.has(t)){var n=this._objects.get(t);switch(i){case"attributes":break;case"geometry":n.graphic=t;break;case"symbol":n.renderingInfo={symbol:r};break;case"visible":n.visible=r}}},t.prototype._reset=function(){var e=this;this._handles.remove("graphics"),this._objects.forEach(function(t,i){e._frontGroup.removeChild(t)}),this._objects.clear(),this.graphics&&(this.graphics.forEach(this._add,this),this._handles.add(this.graphics.on("change",function(t){return e._graphicsChangeHandler(t)}),"graphics"))},t.prototype._add=function(e){if(e&&!this._objects.has(e)){var t=new p;t.graphic=e,t.renderingInfo={symbol:e.symbol},this._objects.set(e,t),this._frontGroup.addChild(t)}},t.prototype._remove=function(e){var t=this._objects.get(e);t&&(this._objects.delete(e),this._frontGroup.removeChild(t))},t.prototype._graphicsChangeHandler=function(e){var t=e.added,i=e.moved,r=e.removed;i.length&&this._reset();for(var n=0,o=t;n<o.length;n++){var a=o[n];this._add(a)}for(var s=0,l=r;s<l.length;s++){a=l[s];this._remove(a)}},r([l.property(),l.cast(o.ofType(n))],t.prototype,"graphics",void 0),r([l.property()],t.prototype,"view",void 0),r([l.subclass("esri.views.2d.layers.support.GraphicsView2D")],t)}(l.declared(u))}.apply(null,r))||(e.exports=n)},2401:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(337),i(335),i(383),i(350),i(357),i(365),i(339),i(462),i(377),i(336),i(363),i(386),i(1508),i(1034),i(982),i(981),i(1058),i(768),i(1450),i(667)],void 0===(n=function(e,t,i,r,n,o,a,s,l,h,p,d,u,c,y,f,v,g,w,m,_,b){var R=a.ofType(n);return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handles=new s,t._bitmapIndex=new Map,t._mapImageContainer=new g,t._featuresMap=new Map,t.allVisiblePoints=new R,t.allVisiblePolylines=new R,t.allVisiblePolygons=new R,t.allVisibleMapImages=new a,t.container=new w,t}return i(t,e),t.prototype.hitTest=function(e,t){var i=this;if(this.suspended||!this._pointsView&&!this._polylinesView&&!this._polygonsView)return l.resolve();var r=[this._pointsView.hitTest(e,t),this._polylinesView.hitTest(e,t),this._polygonsView.hitTest(e,t)];return l.all(r).then(function(e){return e.filter(function(e){return e&&(e.layer=i.layer,e.sourceLayer=i.layer),!!e})[0]||null})},t.prototype.update=function(e){},t.prototype.attach=function(){var e=this;this._handles.add(this.allVisibleMapImages.on("change",function(t){t.added.forEach(function(t){return e._addMapImage(t)}),t.removed.forEach(function(t){return e._removeMapImage(t)})})),this.container.addChild(this._mapImageContainer),this._polygonsView=new _({view:this.view,graphics:this.allVisiblePolygons}),this.container.addChild(this._polygonsView.container),this._polylinesView=new _({view:this.view,graphics:this.allVisiblePolylines}),this.container.addChild(this._polylinesView.container),this._pointsView=new _({view:this.view,graphics:this.allVisiblePoints}),this.container.addChild(this._pointsView.container),this.watch("layer.visibleSublayers",function(){return e._refreshCollections()}),this._fetchService()},t.prototype.detach=function(){this._handles.removeAll(),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView.graphics=null,this._pointsView.graphics=null,this._polylinesView.graphics=null,this._pointsView=null,this._polylinesView=null,this._polygonsView=null},t.prototype.moveStart=function(){},t.prototype.viewChange=function(){},t.prototype.moveEnd=function(){},t.prototype._addMapImage=function(e){var t=this;this.view.spatialReference.isWGS84&&o(e.href,{responseType:"image"}).then(function(i){var r=u.fromJSON(e.extent);c.canProject(r,t.view.spatialReference)&&(r=c.project(r,t.view.spatialReference));var n=new v.default(i.data);n.x=r.xmin,n.y=r.ymax,n.resolution=r.width/n.width,n.rotation=e.rotation;var o=new f(n);o.x=n.x,o.y=n.y,o.resolution=n.resolution,o.width=n.width,o.height=n.height,t._mapImageContainer.addChild(o),t._bitmapIndex.set(e,o)})},t.prototype._fetchService=function(){var e=this;return this._getParsedKML().then(function(t){e._fetchSublayerService(e.layer,t)})},t.prototype._fetchSublayerService=function(e,t){var i=this,r=e.sublayers;r&&r.forEach(function(e){p.whenTrueOnce(e,"visible").then(function(){return e.load()}).then(function(){return e.networkLink?i._getParsedKML():(i._featuresMap.set(e,i._getGraphicsForSublayer(e,t)),i._handles.remove("refresh-collections"),i._handles.add(h.schedule(function(){return i._refreshCollections()}),"refresh-collections"),t)}).then(function(t){i._fetchSublayerService(e,t)})})},t.prototype._getParsedKML=function(){return y.fetchService(this.layer.url,this.view.spatialReference,this.layer.refreshInterval).then(function(e){return y.parseKML(e.data)})},t.prototype._getGraphicsForSublayer=function(e,t){var i=null;return t.sublayers.some(function(t){return i=t,t.id===e.id})?{points:i.points&&y.getGraphics(i.points),polylines:i.polylines&&y.getGraphics(i.polylines),polygons:i.polygons&&y.getGraphics(i.polygons),mapImages:i.mapImages}:null},t.prototype._refreshCollections=function(){var e=this,t=this.get("layer.visibleSublayers");this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),t&&t.length&&t.forEach(function(t){var i=e._featuresMap.get(t);i&&(e.allVisiblePoints.addMany(i.points),e.allVisiblePolylines.addMany(i.polylines),e.allVisiblePolygons.addMany(i.polygons),e.allVisibleMapImages.addMany(i.mapImages))})},t.prototype._removeMapImage=function(e){var t=this._bitmapIndex.get(e);t&&(this._mapImageContainer.removeChild(t),this._bitmapIndex.delete(e))},r([d.subclass("esri.views.2d.layers.KMLLayerView2D")],t)}(d.declared(m,b))}.apply(null,r))||(e.exports=n)},649:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(337),i(335),i(346),i(449),i(365),i(694),i(343),i(624),i(339),i(336)],void 0===(n=function(e,t,i,r,n,o,a,s,l,h,p,d){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handles=new a,t.layer=null,t.parent=null,t.view=null,t}return i(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var i=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";return l.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+i+"')",t),p.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null!=e?e:1};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},r([d.property()],t.prototype,"layer",void 0),r([d.property()],t.prototype,"parent",void 0),r([d.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),r([d.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),r([d.property()],t.prototype,"view",void 0),r([d.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r([d.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r([d.subclass("esri.views.layers.LayerView")],t)}(d.declared(n,o,s,h))}.apply(null,r))||(e.exports=n)},667:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(337),i(335),i(346),i(336)],void 0===(n=function(e,t,i,r,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t}return i(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},r([o.property()],t.prototype,"layer",void 0),r([o.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),r([o.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),r([o.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(o.declared(n))}.apply(null,r))||(e.exports=n)},768:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(345),i(335),i(377),i(336),i(649)],void 0===(n=function(e,t,i,r,n,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attached=!1,t.lastUpdateId=-1,t.moving=!1,t.updateRequested=!1,t}return i(t,e),t.prototype.initialize=function(){var e=this;this.when(function(){e.requestUpdate()}),n.init(this,"suspended",function(t){e.container.visible=!t,!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)},!0),n.init(this,"fullOpacity",function(t){e.container.opacity=t},!0);var t=function(){this.notifyChange("rendering")}.bind(this);this.container.on("post-render",t),this.container.on("will-render",t)},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.updateRequested=!1,this.layer=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.isRendering()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return this.attached&&(this.moving||this.container.renderRequested)},t.prototype.canResume=function(){var e=this.inherited(arguments),t=this.layer;if(e&&null!=t.minScale&&null!=t.minScale){var i=this.view.scale,r=t.minScale,n=t.maxScale,o=!r,a=!n;!o&&i<=r&&(o=!0),!a&&i>=n&&(a=!0),e=o&&a}return e},r([o.property()],t.prototype,"attached",void 0),r([o.property()],t.prototype,"container",void 0),r([o.property()],t.prototype,"moving",void 0),r([o.property({dependsOn:["moving"]})],t.prototype,"rendering",null),r([o.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r([o.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r([o.property()],t.prototype,"updateRequested",void 0),r([o.property({dependsOn:["updateRequested","attached"]})],t.prototype,"updating",null),r([o.property()],t.prototype,"view",void 0),r([o.subclass("esri.views.2d.layers.LayerView2D")],t)}(o.declared(a))}.apply(null,r))||(e.exports=n)},981:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(345),i(339),i(903),i(696),i(710)],void 0===(n=function(e,t,i,r,n,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._childrenRenderParameters={context:null,pixelRatio:1,state:new n,stationary:!0},t.hidpi=!1,t}return i(t,e),t.prototype.createElement=function(){var e=document.createElement("canvas");return e.setAttribute("class","esri-display-object"),e},t.prototype.setElement=function(e){this.element=e},t.prototype.takeScreenshot=function(e){var t=this._childrenRenderParameters.state,i={context:null,pixelRatio:e.pixelRatio,state:new n,stationary:!0};i.opacity=this._childrenRenderParameters.opacity,i.state.copy(t);var o,s=e.framebufferWidth,l=e.framebufferHeight,h=e.region,p=document.createElement("canvas");if(p.width=s,p.height=l,i.context=p.getContext("2d"),this.beforeRenderChildren(i,i),void 0!==e.rotation&&null!==e.rotation){var d=i.state,u=d.clone();u.viewpoint.rotation=e.rotation,i.state=u,this.renderChildren(i),i.state=d}else this.renderChildren(i);this.afterRenderChildren(i,i);try{o=i.context.getImageData(h.x,h.y,h.width,h.height)}catch(e){return r.reject(e)}return r.resolve(a.encodeResult(o,e,p,{flipY:!1,premultipliedAlpha:!1}))},t.prototype.doRender=function(t){var i=this.element,r=i.style;if(this.visible){var n=t.state,o=t.pixelRatio,a=n.width,s=n.height;i.width=a*(this.hidpi?o:1),i.height=s*(this.hidpi?o:1),r.display="block",r.opacity=""+Math.min(this.opacity,this.parent.opacity),r.width=a+"px",r.height=s+"px",e.prototype.doRender.call(this,t)}else r.display="none"},t.prototype.prepareChildrenRenderParameters=function(e){var t=this._childrenRenderParameters;return t.context=this.element.getContext("2d"),t.pixelRatio=e.pixelRatio,t.state.copy(e.state),t.state.pixelRatio=this.hidpi?e.pixelRatio:1,t.stationary=e.stationary,t},t.prototype.beforeRenderChildren=function(e,t){var i=t.context,r=t.state;if(i.save(),r.spatialReference.isWrappable){var n=r.width,o=r.height,a=r.rotation,s=r.pixelRatio,l=this.hidpi?s:1,h=a*Math.PI/180,p=Math.abs(Math.cos(h)),d=Math.abs(Math.sin(h)),u=Math.round(n*l*p+o*l*d),c=r.worldScreenWidth*l;if(c<u){var y=n*l*.5,f=o*l*.5;h&&(i.translate(y,f),i.rotate(h),i.translate(-y,-f)),i.beginPath(),i.rect(y-.5*c,f-.5*u,c,u),i.closePath(),h&&(i.translate(y,f),i.rotate(-h),i.translate(-y,-f)),i.clip("evenodd")}}},t.prototype.afterRenderChildren=function(e,t){t.context.restore()},t.prototype.renderChild=function(e,t){t.context.save(),e.processRender(t),t.context.restore()},t}(o)}.apply(null,r))||(e.exports=n)},982:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(345),i(413),i(1069)],void 0===(n=function(e,t,i,r,n){function o(e){return e&&"render"in e}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var i=e.call(this)||this;return i._height=0,i.pixelRatio=1,i.resolution=0,i.rotation=0,i._width=0,i.x=0,i.y=0,i.data=t,i}return i(t,e),t.prototype.release=function(){this.data=null},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this._width=this._height=0,e&&(o(e)||(e instanceof HTMLImageElement?(this._width=e.naturalWidth,this._height=e.naturalHeight):e.width>0&&e.height>0&&(this._width=e.width,this._height=e.height)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return o(this._data)?this._data.height:this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){return o(this._data)?this._data.width>0&&this._data.height>0:this._width>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return o(this.data)?this._data.width:this._width},enumerable:!0,configurable:!0}),t.prototype.draw=function(e,t,i,r,n,a,s,l,h){this.ready&&(o(this._data)?this._data.render(e,t,i,r,n,a,s,l,h):function(e){return e&&!("render"in e)}(this._data)&&r&&n&&l&&h&&e.drawImage(this._data,t,i,r,n,a,s,l,h))},t.pool=new r(t,!0),t}(n.default);t.default=a}.apply(null,r))||(e.exports=n)}}]);