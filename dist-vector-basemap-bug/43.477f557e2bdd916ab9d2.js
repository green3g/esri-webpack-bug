(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISService":436,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/IntegratedMeshLayer":763,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/SceneService":1070})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[43,48,49,50,51],{1070:function(e,t,r){var s,n;s=[r.dj.c(e.i),t,r(337),r(335),r(350),r(341),r(343),r(428),r(339),r(349),r(336),r(363),r(625),r(362),r(398),r(436),r(433),r(432),r(394)],void 0===(n=function(e,t,r,s,n,o,i,a,l,p,u,d,y,c,j,h,f,v,m){var g=i.getLogger("esri.layers.mixins.SceneService");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blendMode=null,t.spatialReference=null,t.fullExtent=null,t.heightModelInfo=null,t.version={major:Number.NaN,minor:Number.NaN,versionString:""},t.copyright=null,t.sublayerTitleMode="item-title",t.title=null,t.layerId=null,t}return r(t,e),t.prototype.readSpatialReference=function(e,t){return this._readSpatialReference(t)},t.prototype._readSpatialReference=function(e){if(null!=e.spatialReference)return c.fromJSON(e.spatialReference);var t=e.store,r=t.indexCRS||t.geographicCRS,s=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=s?new c(s):null},t.prototype.readFullExtent=function(e,t){var r=t.store,s=this._readSpatialReference(t);return null==s||null==r||null==r.extent?null:new d({xmin:r.extent[0],ymin:r.extent[1],xmax:r.extent[2],ymax:r.extent[3],spatialReference:s})},t.prototype.readVersion=function(e,t){var r=t.store,s=null!=r.version?r.version.toString():"",n={major:Number.NaN,minor:Number.NaN,versionString:s},o=s.split(".");return o.length>=2&&(n.major=parseInt(o[0],10),n.minor=parseInt(o[1],10)),n},t.prototype.readTitlePortalItem=function(e,t){return"item-title"!==this.sublayerTitleMode?void 0:e},t.prototype.readTitleService=function(e,t){var r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return m.titleFromUrlAndName(this.url,t.name);var s=t.name||m.parse(this.url).title;return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(s=r+" - "+s),m.cleanTitle(s)},t.prototype.readLayerId=function(e,t){return t.id},Object.defineProperty(t.prototype,"url",{set:function(e){var t=m.sanitizeUrlWithLayerId(this,e,g);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)},enumerable:!0,configurable:!0}),t.prototype.writeUrl=function(e,t){m.writeUrlWithLayerId(this,e,"layers",t)},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){var e=this._get("url");if(!e)return null;var t=p.urlToObject(e);return null!=this.layerId&&m.match.test(t.path)&&(t.path=t.path+"/layers/"+this.layerId),t},enumerable:!0,configurable:!0}),t.prototype.readRootNode=function(e,t){return t.store.rootNode},t.prototype._verifyRootNodeAndUpdateExtent=function(){var e=this;return this._fetchRootNode().then(function(t){return e._updateExtentFromRootNode(t)})},t.prototype._updateExtentFromRootNode=function(e){if(null!=this.fullExtent&&!this.fullExtent.hasZ&&null!=e&&Array.isArray(e.mbs)&&4===e.mbs.length){var t=e.mbs[2],r=e.mbs[3];this.fullExtent.zmin=t-r,this.fullExtent.zmax=t+r}},t.prototype._fetchRootNode=function(){if(!this.rootNode)return l.resolve();var e=p.join(this.parsedUrl.path,this.rootNode);return n(e,{query:{f:"json"},responseType:"json"}).then(function(e){return e.data}).catch(function(t){throw new o("sceneservice:root-node-missing","Root node missing.",{error:t,url:e})})},t.prototype._fetchService=function(){var e=this;return(null==this.layerId&&/SceneServer\/*$/i.test(this.url)?this._fetchFirstLayerId().then(function(t){null!=t&&(e.layerId=t)}):l.resolve()).then(function(){return e._fetchServiceLayer()})},t.prototype._fetchFirstLayerId=function(){return n(this.url,{query:{f:"json"},responseType:"json"}).then(function(e){if(e.data&&Array.isArray(e.data.layers)&&e.data.layers.length>0)return e.data.layers[0].id})},t.prototype._fetchServiceLayer=function(){var e=this;return n(this.parsedUrl.path,{query:{f:"json"},responseType:"json"}).then(function(t){t.ssl&&(e.url=e.url.replace(/^http:/i,"https:"));var r=t.data;e.read(r,{origin:"service",url:e.parsedUrl}),e._validateLayer(r)})},t.prototype._validateLayer=function(e){},s([u.shared({id:{json:{origins:{service:{read:!1},"portal-item":{read:!1}}}}})],t.prototype,"properties",void 0),s([u.property({type:c})],t.prototype,"spatialReference",void 0),s([u.reader("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),s([u.property({type:d})],t.prototype,"fullExtent",void 0),s([u.reader("fullExtent",["store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),s([u.property({readOnly:!0,type:y})],t.prototype,"heightModelInfo",void 0),s([u.property({readOnly:!0})],t.prototype,"version",void 0),s([u.reader("version",["store.version"])],t.prototype,"readVersion",null),s([u.property({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),s([u.property({type:String})],t.prototype,"sublayerTitleMode",void 0),s([u.property({type:String})],t.prototype,"title",void 0),s([u.reader("portal-item","title")],t.prototype,"readTitlePortalItem",null),s([u.reader("service","title",["name"])],t.prototype,"readTitleService",null),s([u.property({type:Number})],t.prototype,"layerId",void 0),s([u.reader("service","layerId",["id"])],t.prototype,"readLayerId",null),s([u.property()],t.prototype,"url",null),s([u.writer("url")],t.prototype,"writeUrl",null),s([u.property({dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),s([u.property()],t.prototype,"store",void 0),s([u.property({type:String})],t.prototype,"rootNode",void 0),s([u.reader("rootNode",["store.rootNode"])],t.prototype,"readRootNode",null),s([u.subclass("esri.layers.mixins.SceneService")],t)}(u.declared(j,h,a,f,v))}.apply(null,s))||(e.exports=n)},436:function(e,t,r){var s,n;s=[r.dj.c(e.i),t,r(337),r(335),r(343),r(428),r(336),r(394)],void 0===(n=function(e,t,r,s,n,o,i,a){var l=n.getLogger("esri.layers.mixins.ArcGISService");return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=a.parse(this.url);if(e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(e){this._set("url",a.sanitizeUrl(e,l))},enumerable:!0,configurable:!0}),s([i.property({dependsOn:["url"]})],t.prototype,"title",null),s([i.property({type:String})],t.prototype,"url",null),s([i.subclass("esri.layers.mixins.ArcGISService")],t)}(i.declared(o))}.apply(null,s))||(e.exports=n)},730:function(e,t,r){var s={"./af":463,"./af.js":463,"./ar":464,"./ar-dz":465,"./ar-dz.js":465,"./ar-kw":466,"./ar-kw.js":466,"./ar-ly":467,"./ar-ly.js":467,"./ar-ma":468,"./ar-ma.js":468,"./ar-sa":469,"./ar-sa.js":469,"./ar-tn":470,"./ar-tn.js":470,"./ar.js":464,"./az":471,"./az.js":471,"./be":472,"./be.js":472,"./bg":473,"./bg.js":473,"./bm":474,"./bm.js":474,"./bn":475,"./bn.js":475,"./bo":476,"./bo.js":476,"./br":477,"./br.js":477,"./bs":478,"./bs.js":478,"./ca":479,"./ca.js":479,"./cs":480,"./cs.js":480,"./cv":481,"./cv.js":481,"./cy":482,"./cy.js":482,"./da":483,"./da.js":483,"./de":484,"./de-at":485,"./de-at.js":485,"./de-ch":486,"./de-ch.js":486,"./de.js":484,"./dv":487,"./dv.js":487,"./el":488,"./el.js":488,"./en-au":489,"./en-au.js":489,"./en-ca":490,"./en-ca.js":490,"./en-gb":491,"./en-gb.js":491,"./en-ie":492,"./en-ie.js":492,"./en-il":493,"./en-il.js":493,"./en-nz":494,"./en-nz.js":494,"./eo":495,"./eo.js":495,"./es":496,"./es-do":497,"./es-do.js":497,"./es-us":498,"./es-us.js":498,"./es.js":496,"./et":499,"./et.js":499,"./eu":500,"./eu.js":500,"./fa":501,"./fa.js":501,"./fi":502,"./fi.js":502,"./fo":503,"./fo.js":503,"./fr":504,"./fr-ca":505,"./fr-ca.js":505,"./fr-ch":506,"./fr-ch.js":506,"./fr.js":504,"./fy":507,"./fy.js":507,"./gd":508,"./gd.js":508,"./gl":509,"./gl.js":509,"./gom-latn":510,"./gom-latn.js":510,"./gu":511,"./gu.js":511,"./he":512,"./he.js":512,"./hi":513,"./hi.js":513,"./hr":514,"./hr.js":514,"./hu":515,"./hu.js":515,"./hy-am":516,"./hy-am.js":516,"./id":517,"./id.js":517,"./is":518,"./is.js":518,"./it":519,"./it.js":519,"./ja":520,"./ja.js":520,"./jv":521,"./jv.js":521,"./ka":522,"./ka.js":522,"./kk":523,"./kk.js":523,"./km":524,"./km.js":524,"./kn":525,"./kn.js":525,"./ko":526,"./ko.js":526,"./ky":527,"./ky.js":527,"./lb":528,"./lb.js":528,"./lo":529,"./lo.js":529,"./lt":530,"./lt.js":530,"./lv":531,"./lv.js":531,"./me":532,"./me.js":532,"./mi":533,"./mi.js":533,"./mk":534,"./mk.js":534,"./ml":535,"./ml.js":535,"./mn":536,"./mn.js":536,"./mr":537,"./mr.js":537,"./ms":538,"./ms-my":539,"./ms-my.js":539,"./ms.js":538,"./mt":540,"./mt.js":540,"./my":541,"./my.js":541,"./nb":542,"./nb.js":542,"./ne":543,"./ne.js":543,"./nl":544,"./nl-be":545,"./nl-be.js":545,"./nl.js":544,"./nn":546,"./nn.js":546,"./pa-in":547,"./pa-in.js":547,"./pl":548,"./pl.js":548,"./pt":549,"./pt-br":550,"./pt-br.js":550,"./pt.js":549,"./ro":551,"./ro.js":551,"./ru":552,"./ru.js":552,"./sd":553,"./sd.js":553,"./se":554,"./se.js":554,"./si":555,"./si.js":555,"./sk":556,"./sk.js":556,"./sl":557,"./sl.js":557,"./sq":558,"./sq.js":558,"./sr":559,"./sr-cyrl":560,"./sr-cyrl.js":560,"./sr.js":559,"./ss":561,"./ss.js":561,"./sv":562,"./sv.js":562,"./sw":563,"./sw.js":563,"./ta":564,"./ta.js":564,"./te":565,"./te.js":565,"./tet":566,"./tet.js":566,"./tg":567,"./tg.js":567,"./th":568,"./th.js":568,"./tl-ph":569,"./tl-ph.js":569,"./tlh":570,"./tlh.js":570,"./tr":571,"./tr.js":571,"./tzl":572,"./tzl.js":572,"./tzm":573,"./tzm-latn":574,"./tzm-latn.js":574,"./tzm.js":573,"./ug-cn":575,"./ug-cn.js":575,"./uk":576,"./uk.js":576,"./ur":577,"./ur.js":577,"./uz":578,"./uz-latn":579,"./uz-latn.js":579,"./uz.js":578,"./vi":580,"./vi.js":580,"./x-pseudo":581,"./x-pseudo.js":581,"./yo":582,"./yo.js":582,"./zh-cn":583,"./zh-cn.js":583,"./zh-hk":584,"./zh-hk.js":584,"./zh-tw":585,"./zh-tw.js":585};function n(e){var t=o(e);return r(t)}function o(e){var t=s[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id=730},763:function(e,t,r){var s,n;s=[r.dj.c(e.i),t,r(344),r(337),r(335),r(341),r(339),r(336),r(398),r(1070),r(731)],void 0===(n=function(e,t,s,n,o,i,a,l,p,u,d){return function(e){function t(t,r){var s=e.call(this)||this;return s.geometryType="mesh",s.operationalLayerType="IntegratedMeshLayer",s.type="integrated-mesh",s.profile="mesh-pyramids",s.elevationInfo=null,s}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?s({url:e},t):e},t.prototype.load=function(){var e=this,t=this.loadFromPortal({supportedTypes:["Scene Service"]}).always(function(){return e._fetchService()}).then(function(){return e._verifyRootNodeAndUpdateExtent()});return this.addResolvingPromise(t),this.when()},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return a.reject(new i("integrated-mesh-layer:view-not-supported","IntegratedMeshLayer is only supported in 3D"));case"3d":return a.create(function(e){return Promise.all([r.e(1),r.e(3),r.e(2),r.e(4),r.e(56)]).then(function(){var t=[r(1120)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._validateLayer=function(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new i("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new i("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new i("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})},o([l.shared("esri.layers.IntegratedMeshLayer")],t.prototype,"declaredClass",void 0),o([l.property({type:String,readOnly:!0})],t.prototype,"geometryType",void 0),o([l.property()],t.prototype,"operationalLayerType",void 0),o([l.property({json:{read:!1},readOnly:!0})],t.prototype,"type",void 0),o([l.property({type:d,json:{origins:{service:{read:{source:"elevationInfo"}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}})],t.prototype,"elevationInfo",void 0),o([l.subclass()],t)}(l.declared(p,u))}.apply(null,s))||(e.exports=n)}}]);