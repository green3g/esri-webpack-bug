(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/watchUtils":377,"esri/views/2d/tiling/TileKey":441,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileKey":441,"esri/layers/support/TileInfo":452,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/TileInfo":452,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/LOD":638,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/LayerView":649,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/RefreshableLayerView":667,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/Container":696,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/DisplayObject":715,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileSpan":722,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileInfoView":749,"esri/views/2d/engine/webgl/definitions":759,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/webgl/definitions":759,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/Evented":767,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/LayerView2D":768,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/FeatureLayerView2D":790,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/LODInfo":806,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileCoverage":807,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/tiling/TileStrategy":876,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/engine/DOMContainer":1058,"esri/views/2d/layers/features/controllers":1417,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/features/controllers":1417,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/features/tileRenderers":2048,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/support/FeatureLayerProxy":2049,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/support/util":2050})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1058:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(696)],void 0===(i=function(e,t,r,n){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.createElement=function(){var e=document.createElement("div");return e.setAttribute("class","esri-display-object"),e},t.prototype.setElement=function(e){this.element=e},t.prototype.doRender=function(t){var r=this.element.style;this.visible?(r.display="block",e.prototype.doRender.call(this,t)):r.display="none"},t.prototype.prepareChildrenRenderParameters=function(e){return e},t.prototype.attachChild=function(e,t){var r=e.element;return r||(r=e.createElement(),e.setElement(r)),e.attach(t)},t.prototype.detachChild=function(e,t){e.detach(t),this.element.contains(e.element)&&this.element.removeChild(e.element),e.setElement(null)},t.prototype.renderChildren=function(t){for(var r=this.children,n=this.element.childNodes,i=0,o=r.length,l=0;l<o;l++)if(r[l].attached){var s=r[l].element;n[i]!==s&&(null!=n[i+1]?this.element.insertBefore(s,n[i]):this.element.appendChild(s)),i+=1}e.prototype.renderChildren.call(this,t)},t}(n)}.apply(null,n))||(e.exports=i)},1417:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344),r(341),r(339)],void 0===(i=function(e,t,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getControllerConfiguration=function(e){var t=e.source;return"stream"===e.type?o.resolve().then(function(){return{type:"stream",filter:function(e){if(!e)return null;var t={};return e.geometry&&(t.geometry=e.geometry.toJSON()),e.where&&(t.where=e.where),t}(e.filter),purgeOptions:e.purgeOptions}}):e.capabilities.operations.supportsQuery?function(e){return e&&"openPorts"in e}(t)?o.resolve().then(function(){return{type:"memory",processing:e.processing&&e.processing.toWorker()||null}}):o.resolve({type:"on-demand",gdbVersion:e.gdbVersion,historicMoment:e.historicMoment&&e.historicMoment.getTime(),processing:e.processing&&e.processing.toWorker()||null}):o.reject(new i("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:e}))},t.createController=function(e,t){return("memory"===e?o.create(function(e){return Promise.all([r.e(33),r.e(107)]).then(function(){var t=[r(1644)];e.apply(null,t)}.bind(this)).catch(r.oe)}):"stream"===e?o.create(function(e){return Promise.all([r.e(27),r.e(88)]).then(function(){var t=[r(1646)];e.apply(null,t)}.bind(this)).catch(r.oe)}):o.create(function(e){return Promise.all([r.e(27),r.e(33),r.e(89)]).then(function(){var t=[r(1647)];e.apply(null,t)}.bind(this)).catch(r.oe)})).then(function(e){return e.default}).then(function(e){var r=t.serviceAndViewInfo,i=t.remoteClient,o=t.tileStore;return new e(n({},r,{tileStore:o,remoteClient:i}))})}}.apply(null,n))||(e.exports=i)},2048:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1077),r(339)],void 0===(i=function(e,t,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createOrReuseTileRenderer=function(e,t,o){if(e&&e.supportsRenderer(t))return i.create(function(t){return n(function(){return t(e)})});if(!t)return i.resolve(null);switch(t.type){case"class-breaks":case"simple":case"unique-value":return i.create(function(e){n(function(){return Promise.all([r.e(4),r.e(6),r.e(29),r.e(74)]).then(function(){var t=[r(2340)];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(o)});case"heatmap":return i.create(function(e){n(function(){return Promise.all([r.e(5),r.e(80)]).then(function(){var t=[r(2363)];e.apply(null,t)}.bind(this)).catch(r.oe)})}).then(function(e){return e.default}).then(function(e){return new e(o)})}return i.resolve(null)}}.apply(null,n))||(e.exports=i)},2049:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(337),r(335),r(344),r(346),r(624),r(339),r(446),r(437),r(336),r(2050),r.dj.m(e)],void 0===(i=function(e,t,r,n,i,o,l,s,a,u,p,c,h){Object.defineProperty(t,"__esModule",{value:!0});var d=function(t){function i(e){var r=t.call(this,e)||this;return r.tileRenderer=null,r}return r(i,t),i.prototype.initialize=function(){var t=this;this.addResolvingPromise(u.open(a.getAbsMid("../features/Pipeline",e,h),{client:this.client,strategy:"dedicated"}).then(function(e){return t._connection=e,t._getStartupOptions(t.layer,t.tileInfo)}).then(function(e){return function(e){return Array.isArray(e)}(e.service.source)?t._connection.invoke("startup",e,e.service.source):t._connection.invoke("startup",e)}))},i.prototype.destroy=function(){var e=this;this._connection&&this._connection.invoke("destroy").then(function(){return e._connection.close()})},i.prototype.configure=function(e){return this._connection.invoke("configure",e)},i.prototype.refresh=function(){return this._connection.invoke("controller.refresh")},i.prototype.redraw=function(){return this._connection.invoke("controller.redraw")},i.prototype.setViewState=function(e){return this._connection.invoke("setViewState",e.toJSON())},i.prototype.queryFeatures=function(e){return this._connection.invoke("controller.queryFeatures",e.toJSON())},i.prototype.queryObjectIds=function(e){return this._connection.invoke("controller.queryObjectIds",e.toJSON())},i.prototype.queryFeatureCount=function(e){return this._connection.invoke("controller.queryFeatureCount",e.toJSON())},i.prototype.queryExtent=function(e){return this._connection.invoke("controller.queryExtent",e.toJSON())},i.prototype.queryLatestObservations=function(e){return this._connection.invoke("controller.queryLatestObservations",e.toJSON())},i.prototype.onEdits=function(e){var t=e.addedFeatures,r=e.deletedFeatures,n=e.updatedFeatures;return this._connection.invoke("controller.onEdits",{addedFeatures:t,deletedFeatures:r,updatedFeatures:n})},i.prototype.enableEvent=function(e,t){return this._connection.invoke("controller.enableEvent",{name:e,value:t})},i.prototype._getStartupOptions=function(e,t){var r=e.capabilities,n=e.objectIdField,i=e.source,o=e.fields.map(function(e){return e.toJSON()}),l=e.fullExtent&&e.fullExtent.toJSON(),a=c.toJSONGeometryType(e.geometryType);if(function(e){return e&&"openPorts"in e}(i))return i.openPorts().then(function(e){return{service:{capabilities:r,fields:o,fullExtent:l,geometryType:a,objectIdField:n,source:e},tileInfo:t.toJSON()}});if("stream"===e.type){var u=e.source,p=u.relatedLayerDefinition,h=u.archivedLayerDefinition,d=p&&{capabilities:p.capabilities,fields:p.fields,fullExtent:p.extent,geometryType:p.geometryType,objectIdField:p.objectIdField,source:u.layerDefinition.relatedFeatures.featuresUrl,joinField:u.layerDefinition.relatedFeatures.joinField}||null,f=h&&{capabilities:h.capabilities,fields:h.fields,fullExtent:h.extent,geometryType:h.geometryType,objectIdField:h.objectIdField,source:u.layerDefinition.keepLatestArchive.featuresUrl,maximumFeatureAge:u.layerDefinition.keepLatestArchive.maximumFeatureAge,updateInterval:u.layerDefinition.keepLatestArchive.updateInterval}||null;return s.resolve({service:{capabilities:e.capabilities,fields:e.fields.map(function(e){return e.toJSON()}),fullExtent:e.fullExtent&&e.fullExtent.toJSON()||null,geometryType:c.toJSONGeometryType(e.geometryType),objectIdField:e.objectIdField||"__OBJECTID",source:e.parsedUrl.path,buddyLayers:{relatedFeatures:d,keepLatestArchive:f},streamUrls:u.layerDefinition.streamUrls,timeInfo:u.layerDefinition.timeInfo,content:e.parsedUrl.query},tileInfo:t.toJSON()})}var y=e.dynamicDataSource?e.parsedUrl:e.url+"/"+e.layerId;return s.resolve({service:{capabilities:r,fields:o,fullExtent:l,geometryType:a,objectIdField:n,source:y},tileInfo:t.toJSON()})},n([p.property({constructOnly:!0})],i.prototype,"client",void 0),n([p.property({constructOnly:!0})],i.prototype,"layer",void 0),n([p.property({constructOnly:!0})],i.prototype,"tileInfo",void 0),n([p.property()],i.prototype,"tileRenderer",void 0),n([p.subclass()],i)}(p.declared(o,l));t.default=d}.apply(null,n))||(e.exports=i)},2050:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(347)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});t.toJSONGeometryType=function(e){return n.toJSON(e)}}.apply(null,n))||(e.exports=i)},377:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(380),r(631)],void 0===(i=function(e,t,r,n){function i(e,t,r,n,i){var o=e.watch(t,function(t,i,o,l){n&&!n(t)||r.call(e,t,i,o,l)},i);if(Array.isArray(t))for(var l=0,s=t;l<s.length;l++){var a=s[l],u=e.get(a);n&&n(u)&&r.call(e,u,u,t,e)}else{u=e.get(t);n&&n(u)&&r.call(e,u,u,t,e)}return o}function o(e,t,o,l,s){function a(){u&&(u.remove(),u=null)}var u,p=!1,c=new r(a),h=new n;return h.cancel=c.cancel,h.isCanceled=c.isCanceled,h.isFulfilled=c.isFulfilled,h.isRejected=c.isRejected,h.isResolved=c.isResolved,h.then=c.then,h.remove=a,Object.freeze(h),u=i(e,t,function(t,r,n,i){p=!0,a(),o&&o.call(e,t,r,n,i),c.resolve({value:t,oldValue:r,propertyName:n,target:i})},l,s),p&&a(),h}function l(e){return!!e}function s(e){return!e}function a(e){return!0===e}function u(e){return!1===e}function p(e){return void 0!==e}function c(e){return void 0===e}function h(e,t,r,n){for(var i=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=d(e,t,r,n),l=0,s=i;l<s.length;l++){var a=s[l].trim(),u=e.get(a);r.call(e,u,u,a,e)}return o}function d(e,t,r,n){return e.watch(t,r,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=h,t.watch=d,t.once=function(e,t,r,n){return o(e,t,r,null,n)},t.when=function(e,t,r,n){return i(e,t,r,l,n)},t.whenOnce=function(e,t,r,n){return o(e,t,r,l,n)},t.whenNot=function(e,t,r,n){return i(e,t,r,s,n)},t.whenNotOnce=function(e,t,r,n){return o(e,t,r,s,n)},t.whenTrue=function(e,t,r,n){return i(e,t,r,a,n)},t.whenTrueOnce=function(e,t,r,n){return o(e,t,r,a,n)},t.whenFalse=function(e,t,r,n){return i(e,t,r,u,n)},t.whenFalseOnce=function(e,t,r,n){return o(e,t,r,u,n)},t.whenDefined=function(e,t,r,n){return i(e,t,r,p,n)},t.whenDefinedOnce=function(e,t,r,n){return o(e,t,r,p,n)},t.whenUndefined=function(e,t,r,n){return i(e,t,r,c,n)},t.whenUndefinedOnce=function(e,t,r,n){return o(e,t,r,c,n)},t.pausable=function(e,t,r,n){var i=!1,o=e.watch(t,function(t,n,o,l){i||r.call(e,t,n,o,l)},n);return{remove:function(){o.remove()},pause:function(){i=!0},resume:function(){i=!1}}},t.on=function(e,t,r,n,i,o,l){function s(t){var n=a[t];n&&(o&&o(n.target,t,e,r),n.handle.remove(),delete a[t])}var a={},u=h(e,t,function(t,o,l){s(l),t&&"function"==typeof t.on&&(a[l]={handle:t.on(r,n),target:t},i&&i(t,l,e,r))},l);return{remove:function(){for(var e in u.remove(),a)s(e)}}}}.apply(null,n))||(e.exports=i)},441:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(413)],void 0===(i=function(e,t,r){return function(){function e(e,t,r,n){this.set(e,t,r,n)}return e.from=function(t,r,n,i){return e.pool.acquire(t,r,n,i)},e.getId=function(e,t,r,n){return"object"==typeof e?e.level+"/"+e.row+"/"+e.col+"/"+e.world:e+"/"+t+"/"+r+"/"+n},Object.defineProperty(e.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0}),e.prototype.equals=function(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world},e.prototype.release=function(){this.level=0,this.row=0,this.col=0,this.world=0},e.prototype.set=function(e,t,r,n){if(null==e)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof e)this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if("string"==typeof e){var i=e.split("/"),o=i[0],l=i[1],s=i[2],a=i[3];this.level=parseFloat(o),this.row=parseFloat(l),this.col=parseFloat(s),this.world=parseFloat(a)}else this.level=+e,this.row=+t,this.col=+r,this.world=+n||0;return this},e.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world},e.prototype.getChildKeys=function(){var t=this.level+1,r=this.row<<1,n=this.col<<1,i=this.world;return[e.pool.acquire(t,r,n,i),e.pool.acquire(t,r,n+1,i),e.pool.acquire(t,r+1,n,i),e.pool.acquire(t,r+1,n+1,i)]},e.prototype._compare=function(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0},e.sort=function(t){return t.map(function(t){return e.from(t)}).sort(function(e,t){return e._compare(t)}).map(function(e){return e.id})},e.pool=new r(e,!0,null,25,50),e}()}.apply(null,n))||(e.exports=i)},452:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(344),r(337),r(335),r(364),r(340),r(347),r(336),r(360),r(367),r(443),r(409),r(386),r(638)],void 0===(i=function(e,t,r,n,i,o,l,s,a,u,p,c,h,d,f){var y=s({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(e){function t(t){var r=e.call(this)||this;return r.dpi=96,r.format=null,r.origin=null,r.minScale=0,r.maxScale=0,r.size=null,r.spatialReference=null,r}var l;return n(t,e),l=t,t.create=function(e){void 0===e&&(e={size:256,spatialReference:o.SpatialReference.WebMercator});var t=e.resolutionFactor||1,r=e.scales,n=e.size||256,i=e.spatialReference||o.SpatialReference.WebMercator,s=h.getInfo(i),a=s?new o.Point(s.origin[0],s.origin[1],i):new o.Point(0,0,i),u=1/(39.37*c.getMetersPerUnitForSR(i)*96),p=[];if(r)for(var d=0;d<r.length;d++){var f=(g=r[d])*u;p.push({level:d,scale:g,resolution:f})}else{var y=h.isGeographic(i)?512/n*147748799.285417:256/n*591657527.591555,v=Math.ceil(24/t);p.push({level:0,scale:y,resolution:y*u});for(d=1;d<v;d++){var g;f=(g=y/Math.pow(2,t))*u;p.push({level:d,scale:g,resolution:f}),y=g}}return new l({dpi:96,lods:p,origin:a,size:n,spatialReference:i})},Object.defineProperty(t.prototype,"isWrappable",{get:function(){var e=this.spatialReference,t=this.origin;if(e&&t){var r=h.getInfo(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1},enumerable:!0,configurable:!0}),t.prototype.readOrigin=function(e,t){return o.Point.fromJSON(r({spatialReference:t.spatialReference},e))},Object.defineProperty(t.prototype,"lods",{set:function(e){var t=this,r=0,n=0,i=[];this._levelToLOD={},e&&(r=-1/0,n=1/0,e.forEach(function(e){i.push(e.scale),r=e.scale>r?e.scale:r,n=e.scale<n?e.scale:n,t._levelToLOD[e.level]=e})),this._set("scales",i),this._set("minScale",r),this._set("maxScale",n),this._set("lods",e),this._initializeUpsampleLevels()},enumerable:!0,configurable:!0}),t.prototype.readSize=function(e,t){return[t.cols,t.rows]},t.prototype.writeSize=function(e,t){t.cols=e[0],t.rows=e[0]},t.prototype.zoomToScale=function(e){var t=this.scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];var r=Math.round(e-.5),n=Math.round(e);return t[n]+(n-e)*(t[r]-t[n])},t.prototype.scaleToZoom=function(e){for(var t=this.scales,r=t.length-1,n=0;n<r;n++){var i=t[n],o=t[n+1];if(i<=e)return n;if(o===e)return n+1;if(i>e&&o<e)return n+1-(e-o)/(i-o)}return n},t.prototype.snapScale=function(e,t){void 0===t&&(t=.95);var r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))},t.prototype.tileAt=function(e,t,r,n){var i,o,l=this.lodAt(e);if(!l)return null;if("number"==typeof t)i=t,o=r;else if(h.equals(t.spatialReference,this.spatialReference))i=t.x,o=t.y,n=r;else{var s=d.project(t,this.spatialReference);if(!s)return null;i=s.x,o=s.y,n=r}var a=l.resolution*this.size[0],u=l.resolution*this.size[1];return n||(n={id:null,level:0,row:0,col:0,extent:p.create()}),n.level=e,n.row=Math.floor((this.origin.y-o)/u+.001),n.col=Math.floor((i-this.origin.x)/a+.001),this.updateTileInfo(n),n},t.prototype.updateTileInfo=function(e){var t=this.lodAt(e.level);if(t){var r=t.resolution*this.size[0],n=t.resolution*this.size[1];e.id=e.level+"/"+e.row+"/"+e.col,e.extent||(e.extent=p.create()),e.extent[0]=this.origin.x+e.col*r,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+r,e.extent[3]=e.extent[1]+n}},t.prototype.upsampleTile=function(e){var t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))},t.prototype.getTileBounds=function(e,t){var r=this.lodAt(t.level).resolution,n=r*this.size[0],i=r*this.size[1];return e[0]=this.origin.x+t.col*n,e[1]=this.origin.y-(t.row+1)*i,e[2]=e[0]+n,e[3]=e[1]+i,e},t.prototype.lodAt=function(e){return this._levelToLOD&&this._levelToLOD[e]||null},t.prototype.clone=function(){return l.fromJSON(this.write({}))},t.prototype._initializeUpsampleLevels=function(){var e=this.lods;this._upsampleLevels=[];for(var t=null,r=0;r<e.length;r++){var n=e[r];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}},i([a.property({type:Number,json:{write:!0}})],t.prototype,"compressionQuality",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"dpi",void 0),i([a.property({type:String,json:{read:y.read,write:y.write}})],t.prototype,"format",void 0),i([a.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],t.prototype,"isWrappable",null),i([a.property({type:o.Point,json:{write:!0}})],t.prototype,"origin",void 0),i([a.reader("origin")],t.prototype,"readOrigin",null),i([a.property({type:[f],value:null,json:{write:!0}})],t.prototype,"lods",null),i([a.property({readOnly:!0})],t.prototype,"minScale",void 0),i([a.property({readOnly:!0})],t.prototype,"maxScale",void 0),i([a.property({readOnly:!0})],t.prototype,"scales",void 0),i([a.property({cast:function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]}})],t.prototype,"size",void 0),i([a.reader("size",["rows","cols"])],t.prototype,"readSize",null),i([a.writer("size",{cols:{type:u.Integer},rows:{type:u.Integer}})],t.prototype,"writeSize",null),i([a.property({type:o.SpatialReference,json:{write:!0}})],t.prototype,"spatialReference",void 0),l=i([a.subclass("esri.layers.support.TileInfo")],t)}(a.declared(l))}.apply(null,n))||(e.exports=i)},638:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336),r(360)],void 0===(i=function(e,t,r,n,i,o,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.level=0,r.levelValue=null,r.resolution=0,r.scale=0,r}var i;return r(t,e),i=t,t.prototype.clone=function(){return new i({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})},n([o.property({type:l.Integer,json:{write:!0}})],t.prototype,"level",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"levelValue",void 0),n([o.property({type:Number,json:{write:!0}})],t.prototype,"resolution",void 0),n([o.property({type:Number,json:{write:!0}})],t.prototype,"scale",void 0),i=n([o.subclass("esri.layers.support.LOD")],t)}(o.declared(i))}.apply(null,n))||(e.exports=i)},649:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(337),r(335),r(346),r(449),r(365),r(694),r(343),r(624),r(339),r(336)],void 0===(i=function(e,t,r,n,i,o,l,s,a,u,p,c){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handles=new l,t.layer=null,t.parent=null,t.view=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";return a.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+n+"', id: '"+r+"')",t),p.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null!=e?e:1};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},n([c.property()],t.prototype,"layer",void 0),n([c.property()],t.prototype,"parent",void 0),n([c.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),n([c.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),n([c.property()],t.prototype,"view",void 0),n([c.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),n([c.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),n([c.subclass("esri.views.layers.LayerView")],t)}(c.declared(i,o,s,u))}.apply(null,n))||(e.exports=i)},667:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(337),r(335),r(346),r(336)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t}return r(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},n([o.property()],t.prototype,"layer",void 0),n([o.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),n([o.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),n([o.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(o.declared(i))}.apply(null,n))||(e.exports=i)},696:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(715)],void 0===(i=function(e,t,r,n){var i;return function(e){e[e.BEFORE=0]="BEFORE",e[e.ATTACHING=1]="ATTACHING",e[e.DETACHING=2]="DETACHING",e[e.RENDERING=3]="RENDERING",e[e.AFTER=4]="AFTER",e[e.DONE=5]="DONE"}(i||(i={})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._childrenSet=new Set,t._childrenToAttach=[],t._childrenToDetach=[],t._renderPhase=i.DONE,t.children=[],t}return r(t,e),Object.defineProperty(t.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),t.prototype.detach=function(e){for(var t=this.children.concat(this._childrenToDetach),r=this.prepareChildrenRenderParameters(e),n=0,i=t;n<i.length;n++){var o=i[n];o.attached&&(this.detachChild(o,r),o.attached=!1,o.parent=null)}},t.prototype.doRender=function(e){var t=this.prepareChildrenRenderParameters(e);this._renderPhase=i.BEFORE,this.beforeRenderChildren(e,t),this._renderPhase=i.ATTACHING,this.attachChildren(t),this._renderPhase=i.DETACHING;for(var r=this._childrenToDetach;r.length>0;){var n=r.shift();this.detachChild(n,t),n.attached=!1,n.parent=null}this._renderPhase=i.RENDERING,this.renderChildren(t),this._renderPhase=i.AFTER,this.afterRenderChildren(e,t),this._renderPhase=i.DONE},t.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},t.prototype.addChildAt=function(e,t){if(void 0===t&&(t=this.numChildren),!e)return e;if(this.contains(e))return e;var r=e.parent;r&&r!==this&&r.removeChild(e),t>=this.numChildren?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e);var n=this._childrenToDetach.indexOf(e);return n>-1&&this._childrenToDetach.splice(n,1),this._childrenToAttach.push(e),this._renderPhase>=i.RENDERING&&this.requestRender(),e},t.prototype.contains=function(e){return this._childrenSet.has(e)},t.prototype.getChildIndex=function(e){return this.children.indexOf(e)},t.prototype.getChildAt=function(e){return e<0||e>this.children.length?null:this.children[e]},t.prototype.removeAllChildren=function(){for(var e=this.numChildren;e--;)this.removeChildAt(0)},t.prototype.removeChild=function(e){return this.contains(e)?this.removeChildAt(this.getChildIndex(e)):e},t.prototype.removeChildAt=function(e){var t;if(e<0||e>=this.children.length)return null;if(t=this.children.splice(e,1)[0],function(e,t){e.delete(t)}(this._childrenSet,t),t.attached)this._childrenToDetach.push(t),this._renderPhase>=i.RENDERING&&this.requestRender();else{var r=this._childrenToAttach.indexOf(t);r>-1&&this._childrenToAttach.splice(r,1)}return t},t.prototype.requestChildRender=function(e){e&&e.parent===this&&this._renderPhase>=i.RENDERING&&this.requestRender()},t.prototype.setChildIndex=function(e,t){var r=this.getChildIndex(e);r>-1&&(this.children.splice(r,1),this.children.splice(t,0,e),this._renderPhase>=i.RENDERING&&this.requestRender())},t.prototype.sortChildren=function(e){return this._renderPhase>i.RENDERING&&this.requestRender(),this.children.sort(e)},t.prototype.attachChildren=function(e){var t=this._childrenToAttach;if(0!==t.length)for(var r=0,n=!1;!n;){var i=t[r];this.attachChild(i,e)?(i.attached=!0,i.parent=this,t.splice(r,1)):++r,n=t.length===r}},t.prototype.renderChildren=function(e){for(var t=this.children,r=t.length,n=0;n<r;n++){var i=t[n];i.attached&&this.renderChild(i,e)}},t.prototype.beforeRenderChildren=function(e,t){},t.prototype.attachChild=function(e,t){return e.attach(t)},t.prototype.detachChild=function(e,t){e.detach(t)},t.prototype.renderChild=function(e,t){e.processRender(t)},t.prototype.afterRenderChildren=function(e,t){},t}(n)}.apply(null,n))||(e.exports=i)},715:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(767)],void 0===(i=function(e,t,r,n){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderRequestedCalled=!1,t._attached=!1,t._opacity=1,t.renderRequested=!1,t._visible=!0,t}return r(t,e),Object.defineProperty(t.prototype,"attached",{get:function(){return this._attached},set:function(e){this._attached!==e&&(this._attached=e,e?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"opacity",{get:function(){return this._opacity},set:function(e){this._opacity!==e&&(this._opacity=e,this.requestRender())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible!==e&&(this._visible=e,this.requestRender())},enumerable:!0,configurable:!0}),t.prototype.attach=function(e){return!0},t.prototype.detach=function(e){},t.prototype.processRender=function(e){this._renderRequestedCalled=!1,this.doRender(e),this._renderRequestedCalled||(this.renderRequested=!1),this.hasEventListener("post-render")&&this.emit("post-render")},t.prototype.requestRender=function(){var e=this.renderRequested;this._renderRequestedCalled=!0,this.renderRequested=!0,this.parent&&this.parent.requestChildRender(this),e!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")},t.prototype.dispose=function(){},t}(n.Evented)}.apply(null,n))||(e.exports=i)},722:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(413)],void 0===(i=function(e,t,r){return function(){function e(e,t,r){this.row=e,this.colFrom=t,this.colTo=r}return e.pool=new r(e,!0),e}()}.apply(null,n))||(e.exports=i)},749:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(409),r(806),r(807),r(441),r(722)],void 0===(i=function(e,t,r,n,i,o,l){var s=new o("0/0/0/0"),a=function(){function e(e,t,r,n,i,o,l,s){this.x=e,this.ymin=t,this.ymax=r,this.invM=n,this.leftAdjust=i,this.rightAdjust=o,this.leftBound=l,this.rightBound=s}return e.create=function(t,r){var n;t[1]>r[1]&&(t=(n=[r,t])[0],r=n[1]);var i=t[0],o=t[1],l=r[0],s=r[1],a=l-i,u=s-o,p=0!==u?a/u:0,c=(Math.ceil(o)-o)*p,h=(Math.floor(o)-o)*p;return new e(i,Math.floor(o),Math.ceil(s),p,a<0?c:h,a<0?h:c,a<0?l:i,a<0?i:l)},e.prototype.incrRow=function(){this.x+=this.invM},e.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)},e.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)},e}(),u=[[0,0],[0,0],[0,0],[0,0]];return function(){function e(e,t){var r=this;this.tileInfo=e,this.fullExtent=t,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};var i=e.lods.slice();i.sort(function(e,t){return t.scale-e.scale});var o=this._lodInfos=i.map(function(r){return n.create(e,r,t)});i.forEach(function(e,t){r._infoByLevel[e.level]=o[t],r._infoByScale[e.scale]=o[t],r.scales[t]=e.scale},this),this._wrap=e.isWrappable}return e.prototype.getLODInfoAt=function(e){return this._infoByLevel[e.level]},e.prototype.getTileBounds=function(e,t,r){void 0===r&&(r=!1),s.set(t);var n=this._infoByLevel[s.level];return n?n.getTileBounds(e,s,r):e},e.prototype.getTileCoords=function(e,t,r){void 0===r&&(r=!1),s.set(t);var n=this._infoByLevel[s.level];return n?n.getTileCoords(e,s,r):e},e.prototype.getTileCoverage=function(e,t){void 0===t&&(t=192);var r,n,o,s=this.getClosestInfoForScale(e.scale),p=i.pool.acquire(s),c=this._wrap,h=1/0,d=-1/0,f=p.spans;u[0][0]=u[0][1]=u[1][1]=u[3][0]=-t,u[1][0]=u[2][0]=e.size[0]+t,u[2][1]=u[3][1]=e.size[1]+t;for(var y=0,v=u;y<v.length;y++){var g=v[y];e.toMap(g,g),g[0]=s.getColumnForX(g[0]),g[1]=s.getRowForY(g[1])}for(var m=[],w=3,_=0;_<4;_++)if(u[_][1]!==u[w][1]){var b=a.create(u[_],u[w]);h=Math.min(b.ymin,h),d=Math.max(b.ymax,d),void 0===m[b.ymin]&&(m[b.ymin]=[]),m[b.ymin].push(b),w=_}else w=_;if(null==h||null==d||d-h>100)return null;var R=[];for(r=h;r<d;){null!=m[r]&&(R=R.concat(m[r])),n=1/0,o=-1/0;for(_=R.length-1;_>=0;_--){b=R[_];n=Math.min(n,b.getLeftCol()),o=Math.max(o,b.getRightCol())}if(n=Math.floor(n),o=Math.floor(o),r>=s.first[1]&&r<=s.last[1])if(c)if(s.size[0]<s.worldSize[0]){var C=Math.floor(o/s.worldSize[0]);for(_=Math.floor(n/s.worldSize[0]);_<=C;_++)f.push(new l(r,Math.max(s.getFirstColumnForWorld(_),n),Math.min(s.getLastColumnForWorld(_),o)))}else f.push(new l(r,n,o));else n>s.last[0]||o<s.first[0]||(n=Math.max(n,s.first[0]),o=Math.min(o,s.last[0]),f.push(new l(r,n,o)));r+=1;for(_=R.length-1;_>=0;_--){(b=R[_]).ymax>=r?b.incrRow():R.splice(_,1)}}return p},e.prototype.getTileIdAtParent=function(e,t){var r=o.pool.acquire(t),n=this._infoByLevel[r.level];if(e.resolution<n.resolution)throw new Error("Cannot calculate parent tile. destination LOD's resolution "+e.resolution+" is not a parent resolution of "+n.resolution);if(e.resolution===n.resolution)return r.id;var i=Math.floor(r.col*n.resolution/e.resolution+.01),l=Math.floor(r.row*n.resolution/e.resolution+.01);return o.getId(e.level,l,i,r.world)},e.prototype.getTileParentId=function(e){var t=o.pool.acquire(e),r=this._infoByLevel[t.level],n=this._lodInfos.indexOf(r)-1;if(n<0)return o.pool.release(t),null;var i=this._lodInfos[n],l=this.getTileIdAtParent(i,t);return o.pool.release(t),l},e.prototype.getTileResolution=function(e){var t=this._infoByLevel["object"==typeof e?e.level:e];return t?t.resolution:-1},e.prototype.getTileScale=function(e){var t=this._infoByLevel[e.level];return t?t.scale:-1},e.prototype.intersects=function(e,t){var r=o.pool.acquire(t),n=this._infoByLevel[r.level],i=e.lodInfo;if(i.resolution>n.resolution){var l=o.pool.acquire(this.getTileIdAtParent(i,r)),s=i.denormalizeCol(l.col,l.world),a=e.spans.some(function(e){return e.row===l.row&&e.colFrom<=s&&e.colTo>=s});return o.pool.release(r),o.pool.release(l),a}if(i.resolution<n.resolution){var u=e.spans.reduce(function(e,t){return e[0]=Math.min(e[0],t.row),e[1]=Math.max(e[1],t.row),e[2]=Math.min(e[2],t.colFrom),e[3]=Math.max(e[3],t.colTo),e},[1/0,-1/0,1/0,-1/0]),p=u[0],c=u[1],h=u[2],d=u[3],f=n.denormalizeCol(r.col,r.world),y=i.getColumnForX(n.getXForColumn(f)),v=i.getRowForY(n.getYForRow(r.row)),g=i.getColumnForX(n.getXForColumn(f+1))-1,m=i.getRowForY(n.getYForRow(r.row+1))-1;return o.pool.release(r),!(y>d||g<h||v>c||m<p)}var w=i.denormalizeCol(r.col,r.world),_=e.spans.some(function(e){return e.row===r.row&&e.colFrom<=w&&e.colTo>=w});return o.pool.release(r),_},e.prototype.normalizeBounds=function(e,t,n){if(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this._wrap){var i=r.getInfo(this.tileInfo.spatialReference),o=-n*(i.valid[1]-i.valid[0]);e[0]+=o,e[2]+=o}return e},e.prototype.getClosestInfoForScale=function(e){var t=this.scales;return this._infoByScale[e]?this._infoByScale[e]:(e=t.reduce(function(t,r,n,i){return Math.abs(r-e)<Math.abs(t-e)?r:t},t[0]),this._infoByScale[e])},e.prototype.scaleToLevel=function(e){var t=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(var r=t.length-1;r>=0;r--)if(e<t[r]){return r===t.length-1?this._infoByScale[t[t.length-1]].level:this._infoByScale[t[r]].level+(t[r]-e)/(t[r]-t[r+1])}return this._infoByScale[t[0]].level},e}()}.apply(null,n))||(e.exports=i)},759:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EXTRUDE_SCALE=64,t.PICTURE_FILL_COLOR=4294967295,t.TILE_SIZE=512,t.ANGLE_FACTOR_256=256/360,t.COLLISION_BUCKET_SIZE=128,t.COLLISION_MAX_ZOOM_DELTA=4,t.COLLISION_EARLY_REJECT_BUCKET_SIZE=32}.apply(null,n))||(e.exports=i)},767:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(454),r(418)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.on=function(e,t){return n.after(this,"on"+e,t,!0)},e.prototype.once=function(e,t){return i.once(this,e,t)},e.prototype.emit=function(e){i.emit(this,e,this)},e.prototype.hasEventListener=function(e){var t="on"+e;return!(!this[t]||!this[t].after)},e}();t.Evented=o,t.EventedMixin=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.on=function(e,t){return n.after(this,"on"+e,t,!0)},t.prototype.once=function(e,t){return i.once(this,e,t)},t.prototype.emit=function(e,t){i.emit(this,e,t)},t.prototype.hasEventListener=function(e){var t="on"+e;return!(!this[t]||!this[t].after)},t}(e)}}.apply(null,n))||(e.exports=i)},768:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(335),r(377),r(336),r(649)],void 0===(i=function(e,t,r,n,i,o,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attached=!1,t.lastUpdateId=-1,t.moving=!1,t.updateRequested=!1,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.when(function(){e.requestUpdate()}),i.init(this,"suspended",function(t){e.container.visible=!t,!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)},!0),i.init(this,"fullOpacity",function(t){e.container.opacity=t},!0);var t=function(){this.notifyChange("rendering")}.bind(this);this.container.on("post-render",t),this.container.on("will-render",t)},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.updateRequested=!1,this.layer=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.isRendering()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return this.attached&&(this.moving||this.container.renderRequested)},t.prototype.canResume=function(){var e=this.inherited(arguments),t=this.layer;if(e&&null!=t.minScale&&null!=t.minScale){var r=this.view.scale,n=t.minScale,i=t.maxScale,o=!n,l=!i;!o&&r<=n&&(o=!0),!l&&r>=i&&(l=!0),e=o&&l}return e},n([o.property()],t.prototype,"attached",void 0),n([o.property()],t.prototype,"container",void 0),n([o.property()],t.prototype,"moving",void 0),n([o.property({dependsOn:["moving"]})],t.prototype,"rendering",null),n([o.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),n([o.property({readOnly:!0})],t.prototype,"updateParameters",void 0),n([o.property()],t.prototype,"updateRequested",void 0),n([o.property({dependsOn:["updateRequested","attached"]})],t.prototype,"updating",null),n([o.property()],t.prototype,"view",void 0),n([o.subclass("esri.views.2d.layers.LayerView2D")],t)}(o.declared(l))}.apply(null,n))||(e.exports=i)},790:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(337),r(335),r(388),r(344),r(364),r(383),r(357),r(341),r(339),r(377),r(336),r(360),r(452),r(392),r(419),r(1058),r(759),r(768),r(1417),r(2048),r(2049),r(749),r(876),r(667),r(710)],void 0===(i=function(e,t,r,n,i,o,l,s,a,u,p,c,h,d,f,y,v,g,m,w,_,b,R,C,O,I,x){var T=d.ensureType(v);return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pipelineIsUpdating=!1,t.container=new g,t}return r(t,e),t.prototype.destroy=function(){this._proxy.destroy()},t.prototype.initialize=function(){var e=this,t=this._tileInfo=f.create({spatialReference:this.view.spatialReference,size:m.TILE_SIZE});this._tileInfoView=new C(t),this._tileStrategy=new O({cachePolicy:"purge",acquireTile:function(t){return e._acquireTile(t)},releaseTile:function(t){return e._releaseTile(t)},tileInfoView:this._tileInfoView,buffer:0}),this._proxy=this._createProxy(t),this.addResolvingPromise(p.all([_.getControllerConfiguration(this.layer),this._proxy.when()]).then(function(e){var t=e[0];return e[1].configure({controller:t})}))},Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numFeatures",{get:function(){var e=0;return this.attached&&this._tileStrategy.tiles.forEach(function(t){e+=t.iconDisplayRecords?t.iconDisplayRecords.length:0}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var e=this.layer,t=e.definitionExpression,r=e.historicMoment,n=e.outFields,i=e.renderer,o=e.labelingInfo;return JSON.stringify({definitionExpression:t,historicMoment:r,outFields:n.slice().sort(),renderer:i,labelingInfo:o})},enumerable:!0,configurable:!0}),t.prototype.highlight=function(e,t){var r,n=this;return e instanceof s?r=[e.getAttribute(this.layer.objectIdField||"__OBJECTID")]:"number"==typeof e?r=[e]:a.isCollection(e)?r=e.map(function(e){return e&&e.getAttribute(n.layer.objectIdField)}).toArray():Array.isArray(e)&&e.length>0&&(r="number"==typeof e[0]?e:e.map(function(e){return e&&e.getAttribute(n.layer.objectIdField)})),(r=r.filter(function(e){return null!=e}))&&r.length&&function(e){return e&&e.highlight}(this.tileRenderer)?this.tileRenderer.highlight(r):{remove:function(){}}},t.prototype.hitTest=function(e,t){var r=this;return this.suspended||!this.tileRenderer?p.resolve(null):this.tileRenderer.hitTest(e,t).then(function(e){return 0===e.length?null:r._proxy.queryFeatures(new v({objectIds:e,outSpatialReference:r.view.spatialReference,returnGeometry:!0})).then(function(e){if(!e.features[0])return null;var t=s.fromJSON(e.features[0]);return t.layer=r.layer,t.sourceLayer=r.layer,t.geometry&&(t.geometry.spatialReference=r.view.spatialReference),t})})},t.prototype.queryFeatures=function(e){var t=this;return this.queryFeaturesJSON(e).then(function(e){var r=y.fromJSON(e);return r.features.forEach(function(e){e.layer=t.layer,e.sourceLayer=t.layer}),r})},t.prototype.queryFeaturesJSON=function(e){return this._proxy.queryFeatures(this._cleanUpQuery(e))},t.prototype.queryObjectIds=function(e){return this._proxy.queryObjectIds(this._cleanUpQuery(e))},t.prototype.queryFeatureCount=function(e){return this._proxy.queryFeatureCount(this._cleanUpQuery(e))},t.prototype.queryExtent=function(e){return this._proxy.queryExtent(this._cleanUpQuery(e)).then(function(e){return{count:e.count,extent:l.Extent.fromJSON(e.extent)}})},t.prototype.takeScreenshot=function(e){var t=x.toRenderSettings(e,this.view);return this.tileRenderer.featuresView._stage.takeScreenshot(t)},t.prototype.update=function(e){this.attached&&this._tileStrategy&&this.tileRenderer&&(this._tileStrategy.update(e)||this.requestUpdate(),this._proxy.setViewState(e.state),this.notifyChange("numFeatures"),this.notifyChange("updating"))},t.prototype.attach=function(){var e=this;this.handles.add([c.init(this,"layer.processing.version",function(t){e._proxy.redraw()}),this.layer.on("edits",function(t){e._proxy.onEdits(t)}),c.init(this,"renderingConfigHash",function(){var t=e._tileRendererPromise=b.createOrReuseTileRenderer(e.tileRenderer,e.layer.renderer,{layerView:e,tileInfoView:e._tileInfoView,layer:e.layer,highlightOptions:e.view.highlightOptions}).then(function(r){if(e._tileRendererPromise===t&&(e._tileRendererPromise=null,e.tileRenderer!==r&&(e._tileStrategy.clear(),e.tileRenderer&&(e.tileRenderer.uninstall(e.container),e.tileRenderer.destroy()),e.tileRenderer=e._proxy.client.tileRenderer=r,r&&r.install(e.container),e.requestUpdate()),r)){var n=r.getProcessorConfiguration();e.tileRenderer.wouldClear(n)?(e.tileRenderer.clear(),e.tileRenderer.applyConfiguration(n),e._proxy.configure({processor:n}),e.requestUpdate()):e.tileRenderer.needsProcessorReconfiguration(n)?(e._proxy.configure({processor:n}),e.requestUpdate()):(e.tileRenderer.applyConfiguration(n),e.requestUpdate())}},function(){return e._tileRendererPromise=null})}),this.view.watch("highlightOptions.color,highlightOptions.fillOpacity,highlightOptions.haloOpacity",function(){e.container.requestRender()})])},t.prototype.detach=function(){this.container.removeAllChildren(),this.handles.remove(this),this._tileRendererPromise=null,this._pipelineIsUpdating=!1,this.tileRenderer&&(this.tileRenderer.uninstall(this.container),this.tileRenderer=null),this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.doRefresh=function(){this._proxy.refresh()},t.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null==this.tileRenderer||this._pipelineIsUpdating||this.tileRenderer.updating)},t.prototype._createClientOptions=function(){var e=this;return{executeProcessing:function(t){var r=e.layer.processing;return r?r.process(t.featureSet,r.options)||p.reject(new u("FeatureLayer","invalid processing.process() method, returns nothing")):t.featureSet},setUpdating:function(t){e._pipelineIsUpdating=t,e.notifyChange("updating")}}},t.prototype._cleanUpQuery=function(e){var t=e?T(e):new v;return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t},t.prototype._createProxy=function(e){return new R.default({layer:this.layer,tileInfo:e,client:this._createClientOptions()})},t.prototype._acquireTile=function(e){var t=this,r=this.tileRenderer.acquireTile(e);return r.once("attach",function(){t.requestUpdate()}),r},t.prototype._releaseTile=function(e){this.tileRenderer.releaseTile(e)},n([h.property()],t.prototype,"_pipelineIsUpdating",void 0),n([h.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],t.prototype,"labelsVisible",null),n([h.property()],t.prototype,"numFeatures",null),n([h.property({dependsOn:["layer.renderer","layer.outFields","layer.definitionExpression","layer.historicMoment","layer.labelingInfo"]})],t.prototype,"renderingConfigHash",null),n([h.property()],t.prototype,"tileRenderer",void 0),n([h.property({dependsOn:["layer.renderer","tileRenderer.updating"]})],t.prototype,"updating",void 0),n([h.subclass("esri.views.2d.layers.FeatureLayerView2D")],t)}(h.declared(w,I))}.apply(null,n))||(e.exports=i)},806:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(409),r(441)],void 0===(i=function(e,t,r,n){function i(e,t){return[e,t]}function o(e,t,r){return e[0]=t,e[1]=r,e}var l=new n("0/0/0/0");return function(){function e(e,t,r,n,i,o,l,s,a,u,p,c){this.level=e,this.resolution=t,this.scale=r,this.origin=n,this.first=i,this.last=o,this.size=l,this.norm=s,this.worldStart=a,this.worldEnd=u,this.worldSize=p,this.wrap=c}return e.create=function(t,n,l){var s,a,u,p,c=r.getInfo(t.spatialReference),h=i(t.origin.x,t.origin.y),d=i(t.size[0]*n.resolution,t.size[1]*n.resolution),f=i(-1/0,-1/0),y=i(1/0,1/0),v=i(1/0,1/0);return l&&(o(f,Math.max(0,Math.floor((l.xmin-h[0])/d[0])),Math.max(0,Math.floor((h[1]-l.ymax)/d[1]))),o(y,Math.max(0,Math.floor((l.xmax-h[0])/d[0])),Math.max(0,Math.floor((h[1]-l.ymin)/d[1]))),o(v,y[0]-f[0]+1,y[1]-f[1]+1)),t.isWrappable?(s=i(Math.ceil(Math.round(2*c.origin[1]/n.resolution)/t.size[0]),v[1]),a=i(Math.floor((c.origin[0]-h[0])/d[0]),f[1]),u=i(s[0]+a[0]-1,y[1]),p=!0):(a=f,u=y,s=v,p=!1),new e(n.level,n.resolution,n.scale,h,f,y,v,d,a,u,s,p)},e.prototype.normalizeCol=function(e){if(!this.wrap)return e;var t=this.worldSize[0];return e<0?t-1-Math.abs((e+1)%t):e%t},e.prototype.denormalizeCol=function(e,t){return this.wrap?this.worldSize[0]*t+e:e},e.prototype.getWorldForColumn=function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0},e.prototype.getFirstColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]},e.prototype.getLastColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1},e.prototype.getColumnForX=function(e){return(e-this.origin[0])/this.norm[0]},e.prototype.getXForColumn=function(e){return this.origin[0]+e*this.norm[0]},e.prototype.getRowForY=function(e){return(this.origin[1]-e)/this.norm[1]},e.prototype.getYForRow=function(e){return this.origin[1]-e*this.norm[1]},e.prototype.getTileBounds=function(e,t,r){void 0===r&&(r=!1),l.set(t);var n=r?l.col:this.denormalizeCol(l.col,l.world),i=l.row;return function(e,t,r,n,i){e[0]=t,e[1]=r,e[2]=n,e[3]=i}(e,this.getXForColumn(n),this.getYForRow(i+1),this.getXForColumn(n+1),this.getYForRow(i)),e},e.prototype.getTileCoords=function(e,t,r){void 0===r&&(r=!1),l.set(t);var n=r?l.col:this.denormalizeCol(l.col,l.world);return Array.isArray(e)?o(e,this.getXForColumn(n),this.getYForRow(l.row)):(e.x=this.getXForColumn(n),e.y=this.getYForRow(l.row)),e},e}()}.apply(null,n))||(e.exports=i)},807:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(737),r(413),r(722)],void 0===(i=function(e,t,r,n,i){return function(){function e(e){this.lodInfo=e,this.spans=r.acquire()}return e.prototype.release=function(){for(var e=0,t=this.spans;e<t.length;e++){var n=t[e];i.pool.release(n)}r.release(this.spans)},e.prototype.forEach=function(e,t){var r=this.spans,n=this.lodInfo,i=n.level;if(0!==r.length)for(var o=0,l=r;o<l.length;o++)for(var s=l[o],a=s.row,u=s.colFrom,p=s.colTo,c=u;c<=p;c++)e.call(t,i,a,n.normalizeCol(c),n.getWorldForColumn(c))},e.pool=new n(e,!0),e}()}.apply(null,n))||(e.exports=i)},876:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(441)],void 0===(i=function(e,t,r,n){function i(e,t){e.delete(t)}var o=new n(0,0,0,0),l=new Map,s=[],a=[];return function(){function e(e){this._previousResolution=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),null!=e.buffer&&(this.buffer=e.buffer)}return e.prototype.destroy=function(){this.tileIndex.clear()},e.prototype.update=function(e){var t=this,r=this.tileIndex,n=this.tileInfoView.getTileCoverage(e.state,this.buffer);if(n){var u=n.spans,p=n.lodInfo,c=p.level,h=e.state.resolution,d=!e.stationary&&h>this._previousResolution;this._previousResolution=h,r.forEach(function(e){return e.visible=!0}),this.tiles.length=0,l.clear();var f=0,y=0;if(u.length>0)for(var v=0,g=u;v<g.length;v++)for(var m=g[v],w=m.row,_=m.colFrom,b=m.colTo,R=_;R<=b;R++){f++;var C=o.set(c,w,p.normalizeCol(R),p.getWorldForColumn(R)).id;if(r.has(C)){if((O=r.get(C)).attached){l.set(C,O),y++;continue}O.attached||d||this._addParentTile(C,l)}else{var O=this.acquireTile(o);this.tileIndex.set(C,O),d||this._addParentTile(C,l)}}var I=y===f;a.length=0,s.length=0,r.forEach(function(e,r){if(o.set(r),!l.has(r)){var i=t.tileInfoView.intersects(n,o);if(!i||!d&&I)if("purge"===t.cachePolicy){!(o.level!==c)&&i||s.push(r)}else(o.level>c||!i)&&s.push(r);else e.attached?a.push(r):o.level>c&&s.push(r)}});for(var x=0,T=a;x<T.length;x++){C=T[x];(O=r.get(C))&&O.attached&&l.set(C,O)}for(var S=0,j=s;S<j.length;S++){C=j[S],O=r.get(C);this.releaseTile(O),i(r,C)}return l.forEach(function(e){return t.tiles.push(e)}),r.forEach(function(e){l.has(e.key.id)||(e.visible=!1)}),a.length=0,s.length=0,l.clear(),I}},e.prototype.clear=function(){var e=this,t=this.tileIndex;t.forEach(function(t){e.releaseTile(t)}),t.clear()},e.prototype._addParentTile=function(e,t){for(var r=e,n=null;r=this.tileInfoView.getTileParentId(r);)if(this.tileIndex.has(r)&&(n=this.tileIndex.get(r))&&n.attached){t.has(n.key.id)||t.set(n.key.id,n);break}},e}()}.apply(null,n))||(e.exports=i)}}]);