(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/FeatureLayer":331,"esri/core/screenUtils":354,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/screenUtils":354,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/Renderer":370,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/Symbol":371,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Domain":374,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/watchUtils":377,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/utils":378,"esri/core/workers/RemoteClient":389,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/RemoteClient":389,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/FeatureSet":392,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Field":395,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/domains":399,"esri/symbols/SimpleLineSymbol":402,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/SimpleLineSymbol":402,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/urlUtils":403,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/PooledArray":407,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/SimpleRenderer":412,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/ClassBreaksRenderer":414,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/HeatmapRenderer":415,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/UniqueValueRenderer":416,"esri/renderers/support/jsonUtils":423,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/jsonUtils":423,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/LegendOptions":424,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeatureSet":425,"esri/layers/support/LabelClass":427,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/LabelClass":427,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/commonProperties":429,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISService":436,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers":437,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/AttachmentQuery":440,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/RelationshipQuery":444,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/requireUtils":446,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/fieldUtils":447,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/labelUtils":451,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureReduction":455,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/FillSymbol":457,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/MarkerSymbol":458,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/layerSourceUtils":459,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/support/urlUtils":586,"@dojo/framework/shim/Set":587,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureTemplate":588,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/LineSymbol":592,"esri/core/pbf":593,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/pbf":593,"esri/layers/graphics/OptimizedGeometry":595,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedGeometry":595,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/CodedValueDomain":597,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/InheritedDomain":598,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/RangeDomain":599,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/fieldType":600,"esri/layers/graphics/OptimizedFeature":603,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeature":603,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/workers":607,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/Connection":608,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/WorkerOwner":609,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/workerFactory":610,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/loaderConfig":611,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/workers/WorkerFallback":612,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/graphicsUtils":613,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/typeUtils":615,"esri/views/vectorTiles/GeometryUtils":616,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/GeometryUtils":616,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/diffUtils":621,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/query":627,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfQueryUtils":628,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfFeatureServiceParser":629,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/support/styleUtils":634,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/styleUtils":635,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers":637,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/queryAttachments":639,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/AuthoringInfo":641,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/AuthoringInfoVisualVariable":642,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/ClassBreakInfo":643,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/HeatmapColorStop":644,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/renderers/support/UniqueValueInfo":645,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/types":646,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/QueryTask":647,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/queryRelatedRecords":648,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/LayerView":649,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureProcessing":652,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureReductionSelection":661,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/LabelExpressionInfo":662,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/string":663,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/labelingInfo":664,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/HeapSort":666,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/RefreshableLayerView":667,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/sources/MemorySource":671,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/accessorSupport/typescript":674,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/typescript":675,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureIndex":676,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/FeatureType":677,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Relationship":678,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/TilingScheme":686,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/TileLayer":691,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISCachedService":695,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/PictureMarkerSymbol":701,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/SimpleFillSymbol":702,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/ElevationLayer":703,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/LRUMap":704,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/CollectionFlattener":721,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/TilemapCache":732,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/LayerView3D":734,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/VectorTileLayer":736,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/lazyLayerLoader":751,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/support/layerViewUpdatingProperties":764,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/heightModelInfoUtils":777,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/arcgisLayers":782,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/sublayerUtils":794,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Tilemap":803,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/LercCodec":804,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISMapService":865,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/SublayersOwner":866,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Sublayer":867,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/support/basemapDefinitions":875,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtils":878,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/TerrainConst":886,"esri/views/vectorTiles/style/StyleLayer":895,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleLayer":895,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/TileLayerView3D":898,"dojo/i18n!C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/basemaps":927,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ar/basemaps":928,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/bs/basemaps":929,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ca/basemaps":930,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/cs/basemaps":931,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/da/basemaps":932,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/de/basemaps":933,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/el/basemaps":934,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/es/basemaps":935,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/et/basemaps":936,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/fi/basemaps":937,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/fr/basemaps":938,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/he/basemaps":939,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/hi/basemaps":940,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/hr/basemaps":941,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/hu/basemaps":942,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/id/basemaps":943,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/it/basemaps":944,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ja/basemaps":945,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ko/basemaps":946,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/lv/basemaps":947,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/lt/basemaps":948,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/nl/basemaps":949,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/nb/basemaps":950,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/pl/basemaps":951,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/pt-br/basemaps":952,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/pt-pt/basemaps":953,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ro/basemaps":954,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/ru/basemaps":955,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/sl/basemaps":956,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/sr/basemaps":957,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/sv/basemaps":958,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/th/basemaps":959,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/tr/basemaps":960,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/vi/basemaps":961,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/zh-cn/basemaps":962,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/zh-hk/basemaps":963,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/zh-tw/basemaps":964,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/basemaps":965,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/Filter":971,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleDefinition":972,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleProperty":973,"esri/views/vectorTiles/style/StyleRepository":974,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/style/StyleRepository":974,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/portal/support/jsonContext":976,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/TiledLayerView3D":977,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtilsPlanar":978,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtilsSpherical":979,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/vectorTiles/SchemaHelper":998,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/vectorTileLayerLoader":1030,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/support/tiledLayerUtils":1102})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[62,11,14,16,48,49,50,51,63,82,96,102],{1030:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(124),r(350),r(339),r(349)],void 0===(n=function(e,t,r,i,n,o,a){function s(e){if(e){var t=a.getOrigin(e);y&&-1===y.indexOf(t)&&y.push(t)}}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=void 0,i=0;i<e.length;++i)if(a.isProtocolRelative(e[i])){if(r){var n=r.split("://")[0];r=n+":"+e[i].trim()}}else r=a.isAbsolute(e[i])?e[i]:a.join(r,e[i]);return r}function u(e,t,r){var i,l,u;if("string"==typeof t){var y=a.normalize(t);s(y);var f=a.urlToObject(y);i=n(f.path,{query:{f:"json"},responseType:"json"}),l=y,u=y}else i=o.resolve({data:t}),l=t.jsonUrl||null,u=r;return i.then(function(t){var r=t.data;return t.ssl&&(l&&(l=l.replace(/^http:/i,"https:")),u&&(u=u.replace(/^http:/i,"https:"))),p(r)?(e.styleUrl=l||null,c(e,r,u)):function(e){return!p(e)}(r)?(e.sourceUrl=l||null,d(e,r,u)):o.reject("You must specify the URL or the JSON for a service or for a style.")})}function p(e){return!!e.sources}function c(e,t,r){var i=r?a.removeFile(r):a.appBaseUrl;if(e.styleBase=i,e.style=t,e.styleUrl&&s(e.styleUrl),!e.source){var n=function(e){if(e.esri)return e.esri;for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];if("vector"===e[i].type)return e[i]}return null}(t.sources);return n.url?u(e,l(i,n.url)):u(e,n,i)}return o.resolve()}function d(e,t,r){var i=r?a.removeTrailingSlash(r)+"/":a.appBaseUrl;return e.sourceBase=i,e.source=t,e.validatedSource=function(e,t){if(e.hasOwnProperty("tileInfo"))return e;for(var r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}},i=(r.xmax-r.xmin)/512,n=[],o=e.hasOwnProperty("minzoom")?parseFloat(e.minzoom):0,a=e.hasOwnProperty("maxzoom")?parseFloat(e.maxzoom):16,u=o;u<a;u++){var p=i/Math.pow(2,u),c=Math.floor(96*p*39.37007874015748);n.push({level:u,scale:c,resolution:p})}for(var d=0,y=e.tiles;d<y.length;d++)s(l(t,y[d]));return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:n[0].scale,maxScale:n[n.length-1].scale,tiles:e.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:n,spatialReference:{wkid:102100}}}}(t,i),e.sourceUrl&&s(e.sourceUrl),e.style?o.resolve():null==t.defaultStyles?o.reject():"string"==typeof t.defaultStyles?u(e,l(i,t.defaultStyles,"root.json")):u(e,t.defaultStyles,l(i,"root.json"))}Object.defineProperty(t,"__esModule",{value:!0});var y=i.defaults&&i.defaults.io.corsEnabledServers;t.loadMetadata=function(e){var t={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null},r="string"==typeof e?[e,null]:[null,e.jsonUrl],i=r[0],n=r[1],o=i?a.urlToObject(i):null;return u(t,e,n).then(function(){var e={layerDefinition:t.validatedSource,url:i,parsedUrl:o,serviceUrl:t.sourceUrl,style:t.style,styleUrl:t.styleUrl,spriteUrl:t.style.sprite&&l(t.styleBase,t.style.sprite),glyphsUrl:t.style.glyphs&&l(t.styleBase,t.style.glyphs)};return s(e.spriteUrl),s(e.glyphsUrl),e})}}.apply(null,i))||(e.exports=n)},1102:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(882),r(341),r(339),r(394)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.checkArcGISServiceVersionCompatibility=function(e){if(!o.isHostedAgolService(e.url)){if(e.version<10.22){var t=new i("layerview:service-version-too-old","Tiled Map Layers on servers prior to 10.2.2 are not supported. Detected version: "+e.version,{minVersion:10.22,detectedVersion:e.version});return n.reject(t)}if(10.22!==e.version||o.isHostedSecuredProxyService(e.url,e.get("portalItem.id")))return n.resolve();var a=function(e){var t=null,r=e.search(/\/rest\/services\//i);return r>0&&(t=e.substring(0,r+6)),t}(e.url),s=new i("tiledlayerview3d:service-missing-cors-patch","Tiled Map Layers from 10.2.2 servers are only supported if all server updates have been applied.");return r(a+"self?f=json",{headers:{"X-Requested-With":null},timeout:1e4,handleAs:"json"}).then(function(e){if(!e||e.error)throw s}).catch(function(){throw s})}},t.throwIfError=function(e){if(e)throw e}}.apply(null,i))||(e.exports=n)},331:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(388),r(383),r(669),r(637),r(350),r(431),r(357),r(341),r(365),r(353),r(347),r(338),r(343),r(428),r(339),r(349),r(336),r(363),r(625),r(362),r(626),r(398),r(671),r(436),r(433),r(432),r(438),r(426),r(394),r(429),r(676),r(652),r(455),r(661),r(588),r(677),r(395),r(447),r(427),r(664),r(459),r(678),r(423),r(635),r(615),r(731),r(361),r(440),r(392),r(419),r(444)],void 0===(n=function(e,t,i,n,o,a,s,l,u,p,c,d,y,f,h,m,v,g,b,w,S,_,j,x,O,T,I,A,k,D,E,L,M,C,F,P,U,V,R,N,z,q,B,G,J,W,Q,H,Y,K,Z,X,$,ee,te,re){function ie(e){return e&&null!=e.applyEdits}function ne(e){return e&&oe(e)}function oe(e){return e&&e.isInstanceOf&&e.isInstanceOf(d)}function ae(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}var se=m({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),le="FeatureLayer",ue=g.getLogger("esri.layers.FeatureLayer");return function(e){function t(t){var r=e.call(this)||this;return r._handles=new f,r.featureReduction=null,r.capabilities=null,r.copyright=null,r.displayField=null,r.definitionExpression=null,r.dynamicDataSource=null,r.editFieldsInfo=null,r.elevationInfo=null,r.fields=null,r.fullExtent=null,r.gdbVersion=null,r.geometryType=null,r.hasM=void 0,r.hasZ=void 0,r.heightModelInfo=null,r.historicMoment=null,r.isTable=!1,r.labelsVisible=!0,r.labelingInfo=null,r.layerId=void 0,r.legendEnabled=!0,r.maxRecordCount=void 0,r.tileMaxRecordCount=void 0,r.minScale=0,r.maxScale=0,r.objectIdField=null,r.operationalLayerType="ArcGISFeatureLayer",r.popupEnabled=!0,r.popupTemplate=null,r.relationships=null,r.returnM=void 0,r.returnZ=void 0,r.screenSizePerspectiveEnabled=!0,r.serviceDefinitionExpression=null,r.spatialReference=O.WGS84,r.templates=null,r.timeInfo=null,r.title=null,r.sublayerTitleMode="item-title",r.trackIdField=null,r.type="feature",r.typeIdField=null,r.types=null,r.indexes=new(d.ofType(P.FeatureIndex)),r.userIsAdmin=!1,r.version=void 0,r.visible=!0,r}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(){var e=this;if(!(this.portalItem&&this.portalItem.loaded&&this.source)){var t=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){if(e.url&&null==e.layerId&&/FeatureServer|MapServer\/*$/i.test(e.url))return e._fetchFirstLayerId().then(function(t){null!=t&&(e.layerId=t)})}).then(function(){if(!e.url&&!e._hasMemorySource())throw new y("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return e.createGraphicsSource().then(function(t){return e._initLayerProperties(t)})});return this.addResolvingPromise(t),this.when()}this.addResolvingPromise(this.createGraphicsSource().then(function(t){return e._initLayerProperties(t)}))},Object.defineProperty(t.prototype,"allRenderers",{get:function(){return this._getAllRenderers(this.renderer)},enumerable:!0,configurable:!0}),t.prototype.readCapabilities=function(e,t){return t=t.layerDefinition||t,{data:this._readDataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}},Object.defineProperty(t.prototype,"hasAttachments",{get:function(){return ue.warn("FeatureLayer.hasAttachments is deprecated. Use FeatureLayer.capabilities.data.supportsAttachment instead."),this.hasService&&this._get("hasAttachments")||!1},enumerable:!0,configurable:!0}),t.prototype.readIsTable=function(e,t){return"Table"===(t=t&&t.layerDefinition||t).type},Object.defineProperty(t.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0}),t.prototype.readMinScale=function(e,t){return t.effectiveMinScale||e||0},t.prototype.readMaxScale=function(e,t){return t.effectiveMaxScale||e||0},t.prototype.readObjectIdFieldFromService=function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(var r=0,i=t.fields;r<i.length;r++){var n=i[r];if("esriFieldTypeOID"===n.type)return n.name}},Object.defineProperty(t.prototype,"outFields",{get:function(){var e=this,t=this._userOutFields,r=this.requiredFields;return t=t&&t.slice(0),r=r&&r.slice(0),t?-1===t.indexOf("*")&&r.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}):t=r,-1!==t.indexOf("*")?t=["*"]:this.loaded&&(t=(t=(t=t.filter(function(t){var r=!!e.getField(t);return t&&!r&&ue.error("[outFields] Invalid field: ",t),r},this)).map(function(t){return e.getField(t).name},this)).filter(function(e,t,r){return r.indexOf(e)===t})),t},set:function(e){var t=this,r=this.requiredFields&&this.requiredFields.slice(0);e?-1===e.indexOf("*")&&r.forEach(function(t){-1===e.indexOf(t)&&e.push(t)}):e=r,this.loaded&&(e=(e=e.filter(function(e){var r="*"===e||!!t.getField(e,t.fields);return e&&!r&&ue.error("[outFields] Invalid field: ",e),r},this)).map(function(e){return"*"===e?e:t.getField(e,t.fields).name},this)),this._userOutFields=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parsedUrl",{get:function(){var e=this.url?S.urlToObject(this.url):null;if(null!=e)if(null!=this.layerId)e.path=S.join(e.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var t={source:W.sourceToJSON(this.dynamicDataSource)};e.query={layer:JSON.stringify(t)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{set:function(e){var t=this._getAllRenderers(e);B.fixRendererFields(t,this.fields),this._set("renderer",e)},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){var i,n,o=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(o)(i=H.read(o,t,r)||void 0)||ue.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r});else if(t.defaultSymbol)X.read(t.defaultSymbol,t,r),t.types&&t.types.length?(i=new u.UniqueValueRenderer({defaultSymbol:n,field:t.typeIdField}),t.types.forEach(function(e){o.addUniqueValueInfo(e.id,X.read(e.symbol,e,r))})):i=new u.SimpleRenderer({symbol:n});else if("Table"!==t.type){switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":n=new c.SimpleMarkerSymbol;break;case"esriGeometryPolyline":n=new c.SimpleLineSymbol;break;case"esriGeometryPolygon":n=new c.SimpleFillSymbol}i=n&&new u.SimpleRenderer({symbol:n})}return i},t.prototype.writeRenderer=function(e,t,r,i){H.writeTarget(e,t,r,i)},Object.defineProperty(t.prototype,"requiredFields",{get:function(){var e=this.timeInfo,t=[],r=[],i=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,this.editFieldsInfo&&this.editFieldsInfo.creationDateField,this.editFieldsInfo&&this.editFieldsInfo.editorField,this.editFieldsInfo&&this.editFieldsInfo.editDateField,e&&e.startTimeField,e&&e.endTimeField,this.trackIdField];this.allRenderers.forEach(function(e){t=t.concat(e.requiredFields)}),this.labelingInfo&&this.labelingInfo.length&&this.labelingInfo.forEach(function(e){r=r.concat(e.requiredFields)}),r=r.map(function(e){return e.replace(/['"]+/g,"")}),i=(i=i.concat(t)).concat(r);var n=this.elevationInfo&&this.elevationInfo.featureExpressionInfo;return n&&(i=i.concat(n.requiredFields)),this.popupTemplate&&(i=i.concat(this.popupTemplate.requiredFields)),i.filter(function(e,t,r){return!!e&&r.indexOf(e)===t&&"function"!=typeof e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{set:function(e){var t=this._get("source");t!==e&&(ne(t)&&this._resetMemorySource(t),ne(e)&&this._initMemorySource(e),this._set("source",e))},enumerable:!0,configurable:!0}),t.prototype.castSource=function(e){return e?Array.isArray(e)||oe(e)?new A.default({layer:this,items:e}):e:null},t.prototype.readSource=function(e,t){var r=ee.fromJSON(t.featureSet);return new A.default({layer:this,items:r&&r.features||[]})},t.prototype.readTemplates=function(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map(function(e){return N.fromJSON(e)}),this._fixTemplates(e,i),this._fixTemplates(e,n),e},t.prototype.readTitle=function(e,t){var r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){var n=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?C.titleFromUrlAndName(this.url,r):r;var o=r||this.url&&C.parse(this.url).title;if(!o)return;return"item-title-and-service-name"===this.sublayerTitleMode&&n&&(o=n+" - "+o),C.cleanTitle(o)}if("item-title"===this.sublayerTitleMode&&i)return i},t.prototype.readTitleFromWebMap=function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name},t.prototype.readTypeIdField=function(e,t){if(e=(t=t.layerDefinition||t).typeIdField){var r=this.getField(e,t.fields);r&&(e=r.name)}return e},t.prototype.readTypes=function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var i=t.editFieldsInfo,n=i&&i.creatorField,o=i&&i.editorField;return e&&e.map(function(e){return e=z.fromJSON(e),r._fixTemplates(e.templates,n),r._fixTemplates(e.templates,o),e})},Object.defineProperty(t.prototype,"url",{set:function(e){var t=C.sanitizeUrlWithLayerId(this,e,ue);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)},enumerable:!0,configurable:!0}),t.prototype.writeUrl=function(e,t,r,i){C.writeUrlWithLayerId(this,e,t)},t.prototype.readVersion=function(e,t){return(t=t.layerDefinition||t).currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3},t.prototype.readVisible=function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0},t.prototype.addAttachment=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){return"addAttachment"in r.source?r.source.addAttachment(e,t):w.reject(new y(le,"Layer source does not support addAttachment capability"))})},t.prototype.updateAttachment=function(e,t,r){var i=this;return this.load().then(function(){return i._checkAttachmentSupport(e)}).then(function(){return"updateAttachment"in i.source?i.source.updateAttachment(e,t,r):w.reject(new y(le,"Layer source does not support updateAttachment capability"))})},t.prototype.applyEdits=function(e){var t,r,i=this,n={edits:e,result:w.create(function(e,i){t=e,r=i})};return this.emit("apply-edits",n),this.load().then(function(){return ie(i.source)?i._processApplyEditsParams(e):w.reject(new y(le,"Layer source does not support applyEdits capability"))}).then(function(e){if(ie(i.source))return i.source.applyEdits(e).then(function(e){var r=function(e){return e.filter(function(e){return!e.error}).map(v.clone)},n={addedFeatures:r(e.addFeatureResults),updatedFeatures:r(e.updateFeatureResults),deletedFeatures:r(e.deleteFeatureResults)};return(n.addedFeatures.length||n.updatedFeatures.length||n.deletedFeatures.length)&&i.emit("edits",n),t(n),e})}).catch(function(e){throw r(e),e})},t.prototype.on=function(e,t){return this.inherited(arguments)},t.prototype.createGraphicsSource=function(){var e=this;return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),this.source.load()):w.create(function(e){return r.e(85).then(function(){var t=[r(810)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(t){return new t.default({layer:e}).load()}).then(function(t){return e.emit("graphics-source-create",{graphicsSource:t}),t})},t.prototype.createGraphicsController=function(e){var t=this,n=e.layerView,o=d.ofType(s),a=this.source,l=ne(a),u=i({},e.options,{layer:this,layerView:n,graphics:l?a:new o});return(l?w.create(function(e){return r.e(47).then(function(){var t=[r(789)];e.apply(null,t)}.bind(this)).catch(r.oe)}):"2d"===n.view.type?w.create(function(e){return r.e(84).then(function(){var t=[r(811)];e.apply(null,t)}.bind(this)).catch(r.oe)}):w.create(function(e){return r.e(18).then(function(){var t=[r(778)];e.apply(null,t)}.bind(this)).catch(r.oe)})).then(function(e){return new e(u)}).then(function(e){return t.emit("graphics-controller-create",{graphicsController:e}),e.when()})},t.prototype.createQuery=function(){var e=new te,t=this.get("capabilities.data");return e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=this.outFields,e.where=this.definitionExpression||"1=1",e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e},t.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){return"deleteAttachments"in r.source?r.source.deleteAttachments(e,t):w.reject(new y(le,"Layer source does not support deleteAttachments capability"))})},t.prototype.getFeatureType=function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var n=null;return r.some(function(e){var t=e.id;return null!=t&&(t.toString()===i.toString()&&(n=e),!!n)}),n},t.prototype.getFieldDomain=function(e,t){var r,i=this,n=!1,o=t&&t.feature,a=o&&o.attributes,s=this.typeIdField&&a&&a[this.typeIdField];return null!=s&&this.types&&(n=this.types.some(function(t){return t.id==s&&((r=t.domains&&t.domains[e])&&"inherited"===r.type&&(r=i._getLayerDomain(e)),!0)})),n||r||(r=this._getLayerDomain(e)),r},t.prototype.getField=function(e,t){var r=this.processing?this.fields.concat(this.processing.fields):this.fields;return B.getField(e,t||r)},t.prototype.graphicChanged=function(e){this.emit("graphic-update",e)},t.prototype.queryAttachments=function(e){var t=this;return this.load().then(function(){if(!t.get("capabilities.data.supportsAttachment"))return w.reject(new y(le,"this layer doesn't support attachments"));var r=e.attachmentTypes,i=e.objectIds,n=e.globalIds,o=e.num,a=e.size,s=e.start,l=e.definitionExpression;if(!t.get("capabilities.query.supportsAttachments")){var u=i&&i.length>1,p=r&&r.length,c=n&&n.length,d=a&&a.length;if(u||p||c||d||o||s||l)return w.reject(new y(le,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e))}return i&&i.length||l?"queryAttachments"in t.source?t.source.queryAttachments(e):w.reject(new y(le,"Layer source does not support queryAttachments capability",e)):w.reject(new y(le,"objectIds or definitionExpression are required to perform attachment query",e))})},t.prototype.queryFeatures=function(e,t){var r=this;return this.load().then(function(){return r.source.queryFeatures(e||r.createQuery(),t)}).then(function(e){if(e&&e.features)for(var t=0,i=e.features;t<i.length;t++){var n=i[t];n.layer=n.sourceLayer=r}return e})},t.prototype.queryFeaturesJSON=function(e,t){var r=this;return this.load().then(function(){if(!r.source.queryFeaturesJSON)return w.reject(new y(le,"Layer source does not support queryFeaturesJSON capability"))}).then(function(){return r.source.queryFeaturesJSON(e||r.createQuery(),t)})},t.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then(function(){return r.source.queryObjectIds?r.source.queryObjectIds(e||r.createQuery(),t):w.reject(new y(le,"Layer source does not support queryObjectIds capability"))})},t.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then(function(){return r.source.queryFeatureCount?r.source.queryFeatureCount(e||r.createQuery(),t):w.reject(new y(le,"Layer source does not support queryFeatureCount capability"))})},t.prototype.queryExtent=function(e,t){var r=this;return this.load().then(function(){return r.source.queryExtent?r.source.queryExtent(e||r.createQuery(),t):w.reject(new y(le,"Layer source does not support queryExtent capability"))})},t.prototype.queryRelatedFeatures=function(e){var t=this;return this.load().then(function(){return"queryRelatedFeatures"in t.source?t.source.queryRelatedFeatures(e):w.reject(new y(le,"Layer source does not support queryRelatedFeatures capability"))})},t.prototype.read=function(e,t){var r=e.featureCollection;if(r){var i=r.layers;i&&1===i.length&&(this.inherited(arguments,[i[0],t]),null!=r.showLegend&&this.inherited(arguments,[{showLegend:r.showLegend},t]))}return this.inherited(arguments,[e,t]),this},t.prototype.write=function(e,t){if(t&&"web-scene"===t.origin&&t.messages){if(!this.url)return t.messages.push(new y("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to web scenes",{layer:this})),null;if(this.isTable)return t.messages.push(new y("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return h("esri-featurelayer-webgl")&&h("esri-webgl")?w.create(function(e){return r.e(32).then(function(){var t=[r(790)];e.apply(null,t)}.bind(this)).catch(r.oe)}):w.create(function(e){return Promise.all([r.e(9),r.e(15),r.e(38)]).then(function(){var t=[r(791)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return w.create(function(e){return Promise.all([r.e(4),r.e(6),r.e(8),r.e(7),r.e(60)]).then(function(){var t=[r(812)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._checkAttachmentSupport=function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:w.reject(new y(le,"feature is missing the identifying attribute "+r)):w.reject(new y(le,"'attributes' are required on a feature to query attachments")):w.reject(new y(le,"A feature is required to add/delete/update attachments")):w.reject(new y(le,"this layer doesn't support attachments"))},t.prototype._getLayerDomain=function(e){if(!this.fields)return null;var t=null;return this.fields.some(function(r){return r.name===e&&(t=r.domain),!!t}),t},t.prototype._fetchFirstLayerId=function(){return p(this.url,{query:{f:"json"},responseType:"json"}).then(function(e){var t=e.data;if(t&&Array.isArray(t.layers)&&t.layers.length>0)return t.layers[0].id})},t.prototype._initLayerProperties=function(e){return this._set("source",e),e.layerDefinition&&this.read(e.layerDefinition,{origin:"service",url:this.parsedUrl}),this._verifySource(),this._verifyFields(),B.fixRendererFields(this._getAllRenderers(this.renderer),this.fields),Y.loadStyleRenderer(this,{origin:"service"})},t.prototype._getAllRenderers=function(e){if(!e)return[];var t=[];return[e,e.trackRenderer,e.observationRenderer,e.latestObservationRenderer].forEach(function(e){e&&(t.push(e),e.rendererInfos&&e.rendererInfos.forEach(function(e){e.renderer&&t.push(e.renderer)}))}),t},t.prototype._verifyFields=function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(e){return"geometry"===e.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")},t.prototype._fixTemplates=function(e,t){e&&e.forEach(function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]})},t.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new y("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else{if(this.isTable)throw new y("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new y("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},t.prototype._initMemorySource=function(e){var t=this;e.forEach(function(e){e.layer=t,e.sourceLayer=t}),this._handles.add([e.on("after-add",function(e){e.item.layer=t,e.item.sourceLayer=t}),e.on("after-remove",function(e){e.item.layer=null,e.item.sourceLayer=null})],"fl-source")},t.prototype._resetMemorySource=function(e){e.forEach(function(e){e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")},t.prototype._hasMemorySource=function(){return!(this.url||!this.source)},t.prototype._readDataCapabilities=function(e){return{supportsAttachment:ae(e,"hasAttachments",!1),supportsM:ae(e,"hasM",!1),supportsZ:ae(e,"hasZ",!1)}},t.prototype._readOperationsCapabilities=function(e,t){var r=e?e.toLowerCase().split(",").map(function(e){return e.trim()}):[],i=-1!==r.indexOf("editing"),n=i&&-1!==r.indexOf("create"),o=i&&-1!==r.indexOf("delete"),a=i&&-1!==r.indexOf("update");return i&&!(n||o||a)&&(n=o=a=!0),{supportsCalculate:ae(t,"supportsCalculate",!1),supportsTruncate:ae(t,"supportsTruncate",!1),supportsValidateSql:ae(t,"supportsValidateSql",!1),supportsAdd:n,supportsDelete:o,supportsEditing:i,supportsQuery:-1!==r.indexOf("query"),supportsResizeAttachments:ae(t,"supportsAttachmentsResizing",!1),supportsUpdate:a}},t.prototype._readQueryCapabilities=function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,n=(e.supportedQueryFormats||"").split(",").reduce(function(e,t){var r=t.toLowerCase().trim();return r&&e.add(r),e},new Set);return{supportsAttachments:ae(t,"supportsQueryAttachments",!1),supportsStatistics:ae(t,"supportsStatistics",e.supportsStatistics),supportsCentroid:ae(t,"supportsReturningGeometryCentroid",!1),supportsDistance:ae(t,"supportsQueryWithDistance",!1),supportsDistinct:ae(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ae(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ae(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:ae(t,"supportsHavingClause",!1),supportsOrderBy:ae(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ae(t,"supportsPagination",!1),supportsQuantization:ae(e,"supportsCoordinatesQuantization",!1),supportsResultType:ae(t,"supportsQueryWithResultType",!1),supportsSqlExpression:ae(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ae(e,"useStandardizedQueries",!1),supportsQueryByOthers:ae(r,"allowOthersToQuery",!0),supportsHistoricMoment:ae(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:n.has("pbf")}},t.prototype._readQueryRelatedCapabilities=function(e){var t=e.advancedQueryCapabilities,r=ae(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ae(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}},t.prototype._readEditingCapabilities=function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ae(e,"allowGeometryUpdates",!0),supportsGlobalId:ae(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:ae(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ae(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ae(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ae(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ae(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ae(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ae(t,"allowOthersToUpdate",!0)}},t.prototype._processApplyEditsParams=function(e){var t="'addFeatures', 'updateFeatures' or 'deleteFeatures' parameter is required",r="feature-layer:missing-parameters";if(!e)return w.reject(new y(r,t));if((e=i({},e)).addFeatures=e.addFeatures||[],e.updateFeatures=e.updateFeatures||[],e.deleteFeatures=e.deleteFeatures||[],e.addFeatures.length||e.updateFeatures.length||e.deleteFeatures.length){var n=function(e){var t=new s;return t.geometry=e.geometry,t.attributes=e.attributes,t};return e.addFeatures=e.addFeatures.map(n),e.updateFeatures=e.updateFeatures.map(n),this._normalizeGeometries(e)}return w.reject(new y(r,t))},t.prototype._normalizeGeometries=function(e){var t=e.addFeatures,r=e.updateFeatures,i=t.concat(r).map(function(e){return e.geometry});return T.normalizeCentralMeridian(i).then(function(i){var n=t.length,o=r.length;return i.slice(0,n).forEach(function(t,r){e.addFeatures[r].geometry=t}),i.slice(n,n+o).forEach(function(t,r){e.updateFeatures[r].geometry=t}),e})},o([_.property({types:{key:"type",base:V.default,typeMap:{selection:R.default}},json:{origins:{"web-scene":{read:{source:"layerDefinition.featureReduction"},write:{target:"layerDefinition.featureReduction"}}}}})],t.prototype,"featureReduction",void 0),o([_.property({readOnly:!0,dependsOn:["loaded","renderer","fields"]})],t.prototype,"allRenderers",null),o([_.property({readOnly:!0})],t.prototype,"capabilities",void 0),o([_.reader("service","capabilities",["advancedQueryCapabilities","archivingInfo","supportsStatistics","supportsAdvancedQueries","hasAttachments","hasM","hasZ","supportsAttachmentsResizing","supportsCalculate","supportsTruncate","supportsValidateSql","supportsCoordinatesQuantization","useStandardizedQueries","ownershipBasedAccessControlForFeatures","allowGeometryUpdates","supportsApplyEditsWithGlobalIds","supportsRollbackOnFailureParameter","allowUpdateWithoutMValues","supportsAttachmentsByUploadId","capabilities","supportedQueryFormats"])],t.prototype,"readCapabilities",null),o([_.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),o([_.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),o([_.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",void 0),o([_.property({readOnly:!0,json:{read:X.read}})],t.prototype,"defaultSymbol",void 0),o([_.property()],t.prototype,"dynamicDataSource",void 0),o([_.property({readOnly:!0})],t.prototype,"editFieldsInfo",void 0),o([_.property({type:Z,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}})],t.prototype,"elevationInfo",void 0),o([_.property({type:[q],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}})],t.prototype,"fields",void 0),o([_.property({type:j,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],t.prototype,"fullExtent",void 0),o([_.property()],t.prototype,"gdbVersion",void 0),o([_.property({json:{origins:{service:{read:se.read}},read:{source:"layerDefinition.geometryType",reader:se.read}}})],t.prototype,"geometryType",void 0),o([_.property({readOnly:!0,dependsOn:["loaded"],json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasAttachments"}}})],t.prototype,"hasAttachments",null),o([_.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],t.prototype,"hasM",void 0),o([_.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],t.prototype,"hasZ",void 0),o([_.property({readOnly:!0,type:x})],t.prototype,"heightModelInfo",void 0),o([_.property({type:Date})],t.prototype,"historicMoment",void 0),o([_.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),o([_.property({readOnly:!0})],t.prototype,"isTable",void 0),o([_.reader("service","isTable",["type"]),_.reader("isTable",["layerDefinition.type"])],t.prototype,"readIsTable",null),o([_.property({dependsOn:["loaded","url","source"],readOnly:!0})],t.prototype,"hasService",null),o([_.property(F.labelsVisible)],t.prototype,"labelsVisible",void 0),o([_.property({type:[G],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:J.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:J.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",void 0),o([_.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],t.prototype,"layerId",void 0),o([_.property({type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),o([_.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.maxRecordCount"}}})],t.prototype,"maxRecordCount",void 0),o([_.property({type:Number,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.tileMaxRecordCount"}}})],t.prototype,"tileMaxRecordCount",void 0),o([_.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],t.prototype,"minScale",void 0),o([_.reader("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),o([_.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],t.prototype,"maxScale",void 0),o([_.reader("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),o([_.property({type:String})],t.prototype,"objectIdField",void 0),o([_.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),_.reader("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),o([_.property()],t.prototype,"operationalLayerType",void 0),o([_.property({dependsOn:["requiredFields"]})],t.prototype,"outFields",null),o([_.property({readOnly:!0,dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),o([_.property(F.popupEnabled)],t.prototype,"popupEnabled",void 0),o([_.property({type:l,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),o([_.property({type:U})],t.prototype,"processing",void 0),o([_.property({type:[Q],readOnly:!0})],t.prototype,"relationships",void 0),o([_.property({types:K.types,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),o([_.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),_.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],t.prototype,"readRenderer",null),o([_.writer("renderer")],t.prototype,"writeRenderer",null),o([_.property({readOnly:!0,dependsOn:["allRenderers","labelingInfo","elevationInfo.featureExpressionInfo","popupTemplate.requiredFields"]})],t.prototype,"requiredFields",null),o([_.property({type:Boolean})],t.prototype,"returnM",void 0),o([_.property({type:Boolean})],t.prototype,"returnZ",void 0),o([_.property(F.screenSizePerspectiveEnabled)],t.prototype,"screenSizePerspectiveEnabled",void 0),o([_.property()],t.prototype,"source",null),o([_.cast("source")],t.prototype,"castSource",null),o([_.reader("portal-item","source",["featureSet"]),_.reader("web-map","source",["featureSet"])],t.prototype,"readSource",null),o([_.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],t.prototype,"serviceDefinitionExpression",void 0),o([_.property({type:O,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],t.prototype,"spatialReference",void 0),o([_.property({type:[N]})],t.prototype,"templates",void 0),o([_.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],t.prototype,"readTemplates",null),o([_.property()],t.prototype,"timeInfo",void 0),o([_.property()],t.prototype,"title",void 0),o([_.reader("service","title",["name"]),_.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],t.prototype,"readTitle",null),o([_.reader("web-map","title",["layerDefinition.name","title"])],t.prototype,"readTitleFromWebMap",null),o([_.property({type:String})],t.prototype,"sublayerTitleMode",void 0),o([_.property({type:String,readOnly:!0,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),o([_.property({json:{read:!1}})],t.prototype,"type",void 0),o([_.property({type:String,readOnly:!0})],t.prototype,"typeIdField",void 0),o([_.reader("service","typeIdField"),_.reader("typeIdField",["layerDefinition.typeIdField"])],t.prototype,"readTypeIdField",null),o([_.property({type:[z]})],t.prototype,"types",void 0),o([_.reader("service","types",["types"]),_.reader("types",["layerDefinition.types"])],t.prototype,"readTypes",null),o([_.property({type:d.ofType(P.FeatureIndex),readOnly:!0})],t.prototype,"indexes",void 0),o([_.property({type:String})],t.prototype,"url",null),o([_.writer("url")],t.prototype,"writeUrl",null),o([_.property({readOnly:!0})],t.prototype,"userIsAdmin",void 0),o([_.property({json:{origins:{"portal-item":{read:!1}}}})],t.prototype,"version",void 0),o([_.reader("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"]),_.reader("version",["layerDefinition.currentVersion","layerDefinition.capabilities","layerDefinition.drawingInfo","layerDefinition.hasAttachments","layerDefinition.htmlPopupType","layerDefinition.typeIdField","layerDefinition.types"])],t.prototype,"readVersion",null),o([_.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],t.prototype,"visible",void 0),o([_.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],t.prototype,"readVisible",null),o([a(0,_.cast($))],t.prototype,"queryAttachments",null),o([a(0,_.cast(te))],t.prototype,"queryFeatures",null),o([a(0,_.cast(te))],t.prototype,"queryFeaturesJSON",null),o([a(0,_.cast(te))],t.prototype,"queryObjectIds",null),o([a(0,_.cast(te))],t.prototype,"queryFeatureCount",null),o([a(0,_.cast(te))],t.prototype,"queryExtent",null),o([a(0,_.cast(re))],t.prototype,"queryRelatedFeatures",null),o([_.subclass("esri.layers.FeatureLayer")],t)}(_.declared(I,D,E,M,L,k,b))}.apply(null,i))||(e.exports=n)},354:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e){return e?72*e/t.DPI:0}Object.defineProperty(t,"__esModule",{value:!0});var i=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,n="screenUtils.toPt: input not recognized!";t.DPI=96,t.pt2px=function(e){return e?e/72*t.DPI:0},t.px2pt=r,t.toPt=function(e){if("string"==typeof e){if(i.test(e)){var t=e.match(i),o=Number(t[1]),a=t[3]&&t[3].toLowerCase(),s="-"===e.charAt(0),l="px"===a?r(o):o;return s?-l:l}return console.warn(n),null}return e}}.apply(null,i))||(e.exports=n)},370:function(e,t,r){var i,n;i=[r(351),r(346),r(340),r(347),r(354),r(338),r(341),r(391),r(712),r(358),r(720),r(641)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c){var d="size",y=i({sizeInfo:d,colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),f=i({widthAndDepth:"width-and-depth"}),h=i({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),m=i({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap"},{ignoreUnknown:!0}),v=Math.PI,g=l.opacityToTransparency,b=l.transparencyToOpacity;return e([t,r],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:c,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var e=Object.create(null);return this.collectRequiredFields(e),Object.keys(e).sort()}},type:{type:m.apiValues,readOnly:!0,json:{type:m.jsonValues,read:!1,write:{writer:m.write,ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(e,t){return this._readVariables(e,t)}},write:function(e,t,r,i){var n=[];e.forEach(function(e,t){e.type===d?n.push(this._writeSizeInfo(e,i,t)):"color"===e.type?n.push(this._writeColorInfo(e,i,t)):"opacity"===e.type?n.push(this._writeOpacityInfo(e,i,t)):"rotation"===e.type&&n.push(this._writeRotationInfo(e,i,t))},this),t.visualVariables=n}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(e){var t=this._cache;this.visualVariables&&this.visualVariables.forEach(function(e,r){t.hasOwnProperty(r)&&(t[r]=null)},this),e&&e.some(function(e){return!!e.target})&&e.sort(function(e,t){return e.target===t.target?0:e.target?1:-1}),e&&e.forEach(function(e,r){"color"===e.type?t[r]=this._processColorInfo(e):"opacity"===e.type?t[r]=this._processOpacityInfo(e):e.type===d?t[r]=this._processSizeInfo(e):"rotation"===e.type&&(t[r]=this._processRotationInfo(e))},this),this._set("visualVariables",e)},getSymbol:function(e,t){},getVisualVariableValues:function(e,t){var r,i=this.visualVariables;return i&&(r=i.map(function(r){var i,n=r.type,a=n+"Info";switch((t=o.mixin({},t))[a]=r,n){case d:i=this.getSize(e,t);break;case"color":i=this.getColor(e,t);break;case"opacity":i=this.getOpacity(e,t);break;case"rotation":i=this.getRotationAngle(e,t)}return{variable:r,value:i}},this).filter(function(e){return null!=e.value},this)),r},hasVisualVariables:function(e,t){return e?!!this.getVisualVariablesForType(e,t):!!(this.getVisualVariablesForType(d,t)||this.getVisualVariablesForType("color",t)||this.getVisualVariablesForType("opacity",t)||this.getVisualVariablesForType("rotation",t))},getVisualVariablesForType:function(e,t){var r,i=this.visualVariables;return i&&(r=i.filter(function(r){return r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target)}))&&0===r.length&&(r=void 0),r},getSize:function(e,t){var r=this._getVarInfo(t&&t.sizeInfo,d),i=r.variable,n=this._cache[r.cacheKey],o=null;if(i){var a=i.minSize,s=i.maxSize,l="object"==typeof a&&a?this._getSize(e,a,n&&n.minSize,t):a,u="object"==typeof s&&s?this._getSize(e,s,n&&n.maxSize,t):s;o=this._getSize(e,i,n&&n.root,t,[l,u])}return o},getSizeRangeAtScale:function(e,t){var r,i=this._getVarInfo(e,d),n=this._cache[i.cacheKey],o={scale:t};if((e=i.variable)&&t){var a=e.minSize,s=e.maxSize,l="object"==typeof a&&a?this._getSize({},a,n&&n.minSize,o):a,u="object"==typeof s&&s?this._getSize({},s,n&&n.maxSize,o):s;if(null!=l||null!=u){if(l>u){var p=u;u=l,l=p}r={minSize:l,maxSize:u}}}return r},getColor:function(e,t){var r=this._getVarInfo(t&&t.colorInfo,"color");return this._getColorComponent(e,r.variable,this._cache[r.cacheKey],t,!1)},getOpacity:function(e,t){var r=this._getVarInfo(t&&t.opacityInfo,"opacity");return this._getColorComponent(e,r.variable,this._cache[r.cacheKey],t,!0)},getRotationAngle:function(e,t){var r=this._getVarInfo(t&&t.rotationInfo,"rotation"),i=r.variable,n=this._cache[r.cacheKey],o=i.axis||"heading",a="heading"===o&&"arithmetic"===i.rotationType?90:0,l="heading"===o&&"arithmetic"===i.rotationType?-1:1,u=i.field,p=n&&n.compiledFunc,c=e.attributes,d=0;return(u||p)&&(p?d=s.executeFunction(p,s.createExecContext(e,s.getViewInfo(t))):"function"==typeof u?d=u.apply(this,arguments):c&&(d=c[u]||0),d="number"!=typeof d||isNaN(d)?null:a+l*d),d},collectRequiredFields:function(e){var t=[];this.visualVariables&&(t=t.concat(this.visualVariables)),t.forEach(function(t){t&&(t.field&&(e[t.field]=!0),t.normalizationField&&(e[t.normalizationField]=!0),t.valueExpression&&s.extractFieldNames(t.valueExpression).forEach(function(t){e[t]=!0}))})},_getVarInfo:function(e,t){var r;if(e&&e.type===t&&this.visualVariables)r=this.visualVariables.indexOf(e),e=this.visualVariables[r];else if(this.visualVariables){var i=this.getVisualVariablesForType(t);e=i&&i[0],r=this.visualVariables.indexOf(e)}return{variable:e,cacheKey:r}},_readSizeInfo:function(e){return e.axis&&(e.axis=f.fromJSON(e.axis)),e.valueUnit&&(e.valueUnit=h.fromJSON(e.valueUnit)),e},_readColorInfo:function(e){return e&&(e.colors&&e.colors.forEach(function(t,r){Array.isArray(t)?e.colors[r]=u.fromJSON(t):e.colors[r]=new u(t)}),e.stops&&e.stops.forEach(function(t,r){t.color&&Array.isArray(t.color)?e.stops[r].color=u.fromJSON(t.color):t.color&&(e.stops[r].color=new u(t.color))})),e},_readOpacityInfo:function(e){var t;return e&&((t=o.mixin({},e)).transparencyValues&&(t.opacityValues=t.transparencyValues.map(b),delete t.transparencyValues),t.stops&&(t.stops=t.stops.map(function(e){return(e=o.mixin({},e)).opacity=b(e.transparency),delete e.transparency,e}))),t},_readVariables:function(e,t){e&&(e=e.map(function(e){return(e=o.clone(e)).type=y.fromJSON(e.type),e.type===d?e=this._readSizeInfo(e):"color"===e.type?e=this._readColorInfo(e):"opacity"===e.type&&(e=this._readOpacityInfo(e)),e},this));var r=t.rotationType,i=t.rotationExpression;if(i){var n={type:"rotation",rotationType:r},a=i.match(this._rotationRE);a&&a[1]&&(n.field=a[1],e||(e=[]),e.push(n))}return e},_createCache:function(e){var t=e&&e.valueExpression,r=s.createSyntaxTree(t),i=s.createFunction(r),n=!(!e||!e.expression)||this._viewScaleRE.test(t);return{ipData:this._interpolateData(e),hasExpr:!!t,compiledFunc:i,isScaleDriven:n}},_processColorInfo:function(e){return e&&(e.colors&&e.colors.forEach(function(t,r){t instanceof u||(e.colors[r]=new u(t))}),e.stops&&e.stops.forEach(function(t,r){!t.color||t.color instanceof u||(e.stops[r].color=new u(t.color))}),this._sortStops(e.stops)),this._createCache(e)},_processOpacityInfo:function(e){return this._sortStops(e&&e.stops),this._createCache(e)},_processSizeInfo:function(e){return e.stops&&Array.isArray(e.stops)?e.stops=this._processSizeInfoStops(e.stops):(e.minSize=e.minSize&&this._processSizeInfoSize(e.minSize),e.maxSize=e.maxSize&&this._processSizeInfoSize(e.maxSize)),{root:this._createCache(e),minSize:this._createCache(e.minSize),maxSize:this._createCache(e.maxSize)}},_processSizeInfoSize:function(e){return"object"==typeof e?e.stops=this._processSizeInfoStops(e.stops):e=n.toPt(e),e},_processSizeInfoStops:function(e){return e&&Array.isArray(e)&&(e.forEach(function(e){e.size=n.toPt(e.size)}),this._sortStops(e)),e},_sortStops:function(e){e&&Array.isArray(e)&&e.sort(function(e,t){return e.value-t.value})},_processRotationInfo:function(e){return this._createCache(e)},_getSize:function(e,t,r,i,n){var o=e.attributes,a=t.field,l=t.stops,u=0,c=r&&r.hasExpr,d=r&&r.compiledFunc,y=r&&r.ipData,f=r&&r.isScaleDriven,h="number"==typeof e,m=h?e:null;if(a||f||c){var g,b=i&&i.scale,w=n?n[0]:t.minSize,S=n?n[1]:t.maxSize,_=t.minDataValue,j=t.maxDataValue,x=t.valueUnit||"unknown",O=t.valueRepresentation,T=t.scaleBy,I=t.normalizationField,A=o?parseFloat(o[I]):void 0,k=i&&i.shape;if(f?m=null==b?this._getAverageValue(t):b:"number"!=typeof m&&(c?m=s.executeFunction(d,s.createExecContext(e,s.getViewInfo(i))):"function"==typeof a?m=a.apply(this,arguments):o&&(m=o[a])),null==m||I&&!h&&(isNaN(A)||0===A))return null;if(isNaN(A)||h||(m/=A),l){var D,E=this._lookupData(m,y),L=E[0],M=E[1];L===M?u=l[L].size:u=(D=l[L].size)+(l[M].size-D)*E[2]}else if(null!=w&&null!=S&&null!=_&&null!=j)if(m<=_)u=w;else if(m>=j)u=S;else if(g=(m-_)/(j-_),"area"===T&&k){var C="circle"===k,F=C?v*Math.pow(w/2,2):w*w,P=F+g*((C?v*Math.pow(S/2,2):S*S)-F);u=C?2*Math.sqrt(P/v):Math.sqrt(P)}else u=w+g*(S-w);else if("unknown"===x)null!=w&&null!=_?(w&&_?(g=m/_,u="circle"===k?2*Math.sqrt(g*Math.pow(w/2,2)):"square"===k||"diamond"===k||"image"===k?Math.sqrt(g*Math.pow(w,2)):g*w):u=m+(w||_),u=u<w?w:u,null!=S&&u>S&&(u=S)):u=m;else{var U=(i&&i.resolution?i.resolution:1)*p.meterIn[x];"area"===O?(u=Math.sqrt(m/v)/U,u*=2):(u=m/U,"radius"!==O&&"distance"!==O||(u*=2)),null!=w&&u<w&&(u=w),null!=S&&u>S&&(u=S)}}else t&&null==(u=l&&l[0]&&l[0].size)&&(u=t.minSize);return isNaN(u)?0:u},_getAverageValue:function(e){var t,r,i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2},_getColorComponent:function(e,t,r,i,n){var o,a=e.attributes,l=t&&t.field,u="number"==typeof e,p=u?e:null,c=r&&r.hasExpr,d=r&&r.compiledFunc,y=r&&r.ipData;if(l||c){var f=t.normalizationField,h=a&&f?parseFloat(a[f]):void 0;"number"!=typeof p&&(c?p=s.executeFunction(d,s.createExecContext(e,s.getViewInfo(i))):"function"==typeof l?p=l.apply(this,arguments):a&&(p=a[l])),null==p||f&&!u&&(isNaN(h)||0===h)||(isNaN(h)||u||(p/=h),o=n?this._getOpacity(p,t,y):this._getColor(p,t,y,i&&i.color))}else if(t){var m=t.stops;n?null==(o=m&&m[0]&&m[0].opacity)&&(o=t.opacityValues&&t.opacityValues[0]):o=m&&m[0]&&m[0].color||t.colors&&t.colors[0]}return o},_interpolateData:function(e){var t;if(e)if(e.colors||e.opacityValues){var r,i=(e.colors||e.opacityValues).length,n=e.minDataValue,o=(e.maxDataValue-n)/(i-1);for(t=[],r=0;r<i;r++)t[r]=n+r*o}else e.stops&&(t=e.stops.map(function(e){return e.value||0}));return t},_getOpacity:function(e,t,r){var i,n=this._lookupData(e,r);if(t=t||this.opacityInfo,n){var o,a=n[0],s=n[1];a===s?i=this._getOpacValue(t,a):i=(o=this._getOpacValue(t,a))+(this._getOpacValue(t,s)-o)*n[2]}return i},_getOpacValue:function(e,t){return e.opacityValues?e.opacityValues[t]:e.stops[t].opacity},_getColor:function(e,t,r,i){var n=this._lookupData(e,r);if(t=t||this.colorInfo,n){var o=n[0],a=n[1];return i=i||new u,o===a?i.setColor(this._getColorObj(t,o)):u.blendColors(this._getColorObj(t,o),this._getColorObj(t,a),n[2],i),i}},_getColorObj:function(e,t){return e.colors?e.colors[t]:e.stops[t].color},_lookupData:function(e,t){var r;if(t){var i=0,n=t.length-1;t.some(function(t,r){return e<t?(n=r,!0):(i=r,!1)}),r=[i,n,(e-t[i])/(t[n]-t[i])]}return r},_processForContext:function(e,t,r){if(t&&"web-scene"===t.origin){var i=null!=e.expression,n=null!=e.valueExpressionTitle&&"rotation"===e.type;t.messages&&(i&&t.messages.push(new a("property:unsupported",e.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".expression",context:t})),n&&t.messages.push(new a("property:unsupported",e.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpressionTitle",context:t}))),i&&delete e.expression,n&&delete e.valueExpressionTitle}else e.type===d&&this._convertExpressionToArcade(e)},_writeRotationInfo:function(e,t,r){return e&&(e=o.mixin({},e),this._processForContext(e,t,"visualVariables["+r+"]"),e.type=y.toJSON(e.type),e=o.fixJson(e,!0)),e},_convertExpressionToArcade:function(e){e&&e.expression&&(e.valueExpression="$view.scale")},_writeSizeInfo:function(e,t,r){if(e){e=o.mixin({},e),this._processForContext(e,t,"string"==typeof r?r:"visualVariables["+r+"]");var i=e.minSize,n=e.maxSize;i&&(e.minSize="number"==typeof i?i:this._writeSizeInfo(i,t,"visualVariables["+r+"].minSize")),n&&(e.maxSize="number"==typeof n?n:this._writeSizeInfo(n,t,"visualVariables["+r+"].maxSize"));var a=e.legendOptions,s=e.type,l=e.axis;e.type=y.toJSON(s),l&&(e.axis=f.toJSON(l)),a&&(e.legendOptions=o.mixin({},a),(a=a.customValues)&&(e.legendOptions.customValues=a.slice(0))),e.stops&&(e.stops=e.stops.map(function(e){return null===(e=o.mixin({},e)).label&&delete e.label,e})),e=o.fixJson(e,!0)}return e},_writeColorInfo:function(e,t,r){return e&&(e=o.mixin({},e),this._processForContext(e,t,"visualVariables["+r+"]"),e.type=y.toJSON(e.type),e.colors&&(e.colors=e.colors.map(function(e){return u.toJSON(e)})),e.stops&&(e.stops=e.stops.map(function(e){return(e=o.mixin({},e)).color&&(e.color=u.toJSON(e.color)),null==e.value&&(e.value=0),null===e.label&&delete e.label,e})),e.legendOptions&&(e.legendOptions=o.mixin({},e.legendOptions)),e=o.fixJson(e,!0)),e},_writeOpacityInfo:function(e,t,r){var i;return e&&(i=o.mixin({},e),this._processForContext(i,t,"visualVariables["+r+"]"),i.type=y.toJSON(i.type),i.opacityValues&&(i.transparencyValues=i.opacityValues.map(g),delete i.opacityValues),i.stops&&(i.stops=i.stops.map(function(e){return(e=o.mixin({},e)).transparency=g(e.opacity),delete e.opacity,null===e.label&&delete e.label,e})),i.legendOptions&&(i.legendOptions=o.mixin({},i.legendOptions)),i=o.fixJson(i,!0)),i}})}.apply(null,i))||(e.exports=n)},371:function(e,t,r){var i,n;i=[r(347),r(340),r(358)],void 0===(n=function(e,t,r){var i=e({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),n=0;return t.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+n++},properties:{type:{type:String,value:null,json:{read:i.read,write:{ignoreOrigin:!0,writer:i.write}}},color:{type:r,value:new r([0,0,0,1]),json:{read:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e},write:{allowNull:!0}}}}})}.apply(null,i))||(e.exports=n)},374:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(336)],void 0===(n=function(e,t,r,i,n,o,a){var s=o({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(e){function t(t){var r=e.call(this,t)||this;return r.name=null,r.type=null,r}return r(t,e),i([a.property({json:{write:!0}})],t.prototype,"name",void 0),i([a.property({json:{read:s.read,write:s.write}})],t.prototype,"type",void 0),i([a.subclass("esri.layers.support.Domain")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},377:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(380),r(631)],void 0===(n=function(e,t,r,i){function n(e,t,r,i,n){var o=e.watch(t,function(t,n,o,a){i&&!i(t)||r.call(e,t,n,o,a)},n);if(Array.isArray(t))for(var a=0,s=t;a<s.length;a++){var l=s[a],u=e.get(l);i&&i(u)&&r.call(e,u,u,t,e)}else{u=e.get(t);i&&i(u)&&r.call(e,u,u,t,e)}return o}function o(e,t,o,a,s){function l(){u&&(u.remove(),u=null)}var u,p=!1,c=new r(l),d=new i;return d.cancel=c.cancel,d.isCanceled=c.isCanceled,d.isFulfilled=c.isFulfilled,d.isRejected=c.isRejected,d.isResolved=c.isResolved,d.then=c.then,d.remove=l,Object.freeze(d),u=n(e,t,function(t,r,i,n){p=!0,l(),o&&o.call(e,t,r,i,n),c.resolve({value:t,oldValue:r,propertyName:i,target:n})},a,s),p&&l(),d}function a(e){return!!e}function s(e){return!e}function l(e){return!0===e}function u(e){return!1===e}function p(e){return void 0!==e}function c(e){return void 0===e}function d(e,t,r,i){for(var n=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],o=y(e,t,r,i),a=0,s=n;a<s.length;a++){var l=s[a].trim(),u=e.get(l);r.call(e,u,u,l,e)}return o}function y(e,t,r,i){return e.watch(t,r,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=d,t.watch=y,t.once=function(e,t,r,i){return o(e,t,r,null,i)},t.when=function(e,t,r,i){return n(e,t,r,a,i)},t.whenOnce=function(e,t,r,i){return o(e,t,r,a,i)},t.whenNot=function(e,t,r,i){return n(e,t,r,s,i)},t.whenNotOnce=function(e,t,r,i){return o(e,t,r,s,i)},t.whenTrue=function(e,t,r,i){return n(e,t,r,l,i)},t.whenTrueOnce=function(e,t,r,i){return o(e,t,r,l,i)},t.whenFalse=function(e,t,r,i){return n(e,t,r,u,i)},t.whenFalseOnce=function(e,t,r,i){return o(e,t,r,u,i)},t.whenDefined=function(e,t,r,i){return n(e,t,r,p,i)},t.whenDefinedOnce=function(e,t,r,i){return o(e,t,r,p,i)},t.whenUndefined=function(e,t,r,i){return n(e,t,r,c,i)},t.whenUndefinedOnce=function(e,t,r,i){return o(e,t,r,c,i)},t.pausable=function(e,t,r,i){var n=!1,o=e.watch(t,function(t,i,o,a){n||r.call(e,t,i,o,a)},i);return{remove:function(){o.remove()},pause:function(){n=!0},resume:function(){n=!1}}},t.on=function(e,t,r,i,n,o,a){function s(t){var i=l[t];i&&(o&&o(i.target,t,e,r),i.handle.remove(),delete l[t])}var l={},u=d(e,t,function(t,o,a){s(a),t&&"function"==typeof t.on&&(l[a]={handle:t.on(r,i),target:t},n&&n(t,a,e,r))},a);return{remove:function(){for(var e in u.remove(),l)s(e)}}}}.apply(null,i))||(e.exports=n)},378:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(355)],void 0===(n=function(e,t,r){function i(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}function n(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.CONFIGURE=1]="CONFIGURE",e[e.CONFIGURED=2]="CONFIGURED",e[e.OPEN=3]="OPEN",e[e.OPENED=4]="OPENED",e[e.RESPONSE=5]="RESPONSE",e[e.INVOKE=6]="INVOKE",e[e.CANCEL=7]="CANCEL",e[e.CLOSE=8]="CLOSE",e[e.OPEN_PORT=9]="OPEN_PORT"}(t.MessageType||(t.MessageType={}));var o=0;t.newJobId=function(){return o++},t.isTranferableResult=i,t.toInvokeError=function(e){return e?e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details,stack:e.stack}):null},t.postMessage=function(e,t,o,a){2===arguments.length||void 0===o&&void 0===a?e.postMessage(t):(r("esri-workers-arraybuffer-transfer")||(a?(a=a.filter(function(e){return!n(e)})).length||(a=null):i(o)&&o.transferList&&(o.transferList=o.transferList.filter(function(e){return!n(e)}),o.transferList.length||(o.transferList=null))),a?(t.data=o,e.postMessage(t,a)):i(o)?(t.data=o.result,o.transferList?e.postMessage(t,o.transferList):e.postMessage(t)):(t.data=o,e.postMessage(t)))},t.receiveMessage=function(e){if(!e)return null;var t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}}.apply(null,i))||(e.exports=n)},389:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(339),r(378)],void 0===(n=function(e,t,r,i,n){function o(e,t){e.delete(t)}var a=n.MessageType.CLOSE,s=n.MessageType.CANCEL,l=n.MessageType.INVOKE,u=n.MessageType.RESPONSE,p=n.MessageType.OPEN_PORT,c=function(){function e(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e){e.type===n.MessageType.CANCEL?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))},e.prototype.clear=function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null},e.prototype._process=function(){this._timer=null;for(var e=0,t=this._invokeMessages;e<t.length;e++){var r=t[e];this._cancelledJobIds.has(r.jobId)||this._invoke(r)}this._cancelledJobIds.clear(),this._invokeMessages.length=0},e}();return function(){function e(e,t,r){this._outJobs=new Map,this._inJobs=new Map,this._queue=new c(this._onInvoke.bind(this)),this._onMessage=this._onMessage.bind(this),this._client=t,this._port=e,this._port.addEventListener("message",this._onMessage),this._port.start(),this._channel=r}return e.connect=function(t){var r,i=new MessageChannel;return(r="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t).remoteClient=new e(i.port1,r,i),i.port2},e.prototype.close=function(){this._post({type:a}),this._close()},e.prototype.isBusy=function(){return this._outJobs.size>0},e.prototype.invoke=function(e,t,a){var u=this;if(!this._port)return i.reject(new r("remote-client:port-closed","Can't invoke(), port is closed"));var p=n.newJobId(),c=function(){o(u._outJobs,p),u._post({type:s,jobId:p})};return i.create(function(r,i){var n={resolve:r,reject:i,cancel:c};u._outJobs.set(p,n),u._post({type:l,jobId:p,methodName:e},t,a)},c)},e.prototype.openPort=function(){var e=this,t=n.newJobId(),r=function(){o(e._outJobs,t),e._post({type:s,jobId:t})};return i.create(function(i,n){var o={resolve:i,reject:n,cancel:r};e._outJobs.set(t,o),e._post({type:p,jobId:t})},r)},e.prototype._close=function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(function(e){e.cancel()}),this._inJobs.clear(),this._outJobs.clear(),this._queue.clear(),this._port=this._client=null},e.prototype._onMessage=function(e){var t=n.receiveMessage(e);if(t)switch(t.type){case u:this._onResponse(t);break;case l:this._queue.push(t);break;case s:this._onCancel(t);break;case a:this._close();break;case p:this._onOpenPort(t)}},e.prototype._onCancel=function(e){var t=this._inJobs,r=e.jobId,i=t.get(r);this._queue.push(e),i&&(o(t,r),i.cancel())},e.prototype._onInvoke=function(e){var t,r=this,a=e.methodName,s=e.jobId,l=e.data,p=this._inJobs,c=this._client,d=c[a];try{if(!d&&a&&-1!==a.indexOf("."))for(var y=a.split("."),f=0;f<y.length-1;f++)d=(c=c[y[f]])[y[f+1]];if("function"!=typeof d)throw new TypeError(a+" is not a function");t=d.call(c,l,this)}catch(e){return void this._post({type:u,jobId:s,error:n.toInvokeError(e)})}i.isThenable(t)?(p.set(s,t),t.then(function(e){p.has(s)&&(o(p,s),r._post({type:u,jobId:s},e))}).catch(function(e){p.has(s)&&(o(p,s),e&&"cancel"===e.dojoType||r._post({type:u,jobId:s,error:n.toInvokeError(e||{message:"Error encountered at method "+a})}))})):this._post({type:u,jobId:s},t)},e.prototype._onOpenPort=function(t){var r=new MessageChannel;new e(r.port1,this._client),this._post({type:u,jobId:t.jobId},r.port2,[r.port2])},e.prototype._onResponse=function(e){var t=e.jobId,i=e.error,n=e.data,a=this._outJobs;if(a.has(t)){var s=a.get(t);o(a,t),i?s.reject(r.fromJSON(JSON.parse(i))):s.resolve(n)}},e.prototype._post=function(e,t,r){return n.postMessage(this._port,e,t,r)},e}()}.apply(null,i))||(e.exports=n)},392:function(e,t,r){var i,n;i=[r(347),r(340),r(338),r(383),r(395),r(362),r(613),r(422)],void 0===(n=function(e,t,r,i,n,o,a,s){var l=e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return t.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",getDefaults:function(){return r.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(e,t){for(var r=o.fromJSON(t.spatialReference),n=[],a=0;a<e.length;a++){var s=e[a],l=i.fromJSON(s),u=s.geometry&&s.geometry.spatialReference;l.geometry&&!u&&(l.geometry.spatialReference=r),n.push(l)}return t.transform&&this._hydrate(t.transform,t.geometryType,n),n}}},fields:{value:null,type:[n]},geometryType:{value:null,json:{read:l.read}},spatialReference:{type:o}},toJSON:function(e){var t={hasZ:this.hasZ,hasM:this.hasM};return this.displayFieldName&&(t.displayFieldName=this.displayFieldName),this.fields&&(t.fields=this.fields.map(function(e){return e.toJSON()})),this.spatialReference?t.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(t.spatialReference=this.features[0].geometry.spatialReference.toJSON()),this.features[0]&&(this.features[0].geometry&&(t.geometryType=s.getJsonType(this.features[0].geometry)),t.features=a._encodeGraphics(this.features,e)),t.exceededTransferLimit=this.exceededTransferLimit,t.transform=this.transform,r.fixJson(t)},quantize:function(e){var t,r,i=e.translate[0],n=e.translate[1],o=e.scale[0],a=e.scale[1],s=this.features,l=function(e,t,r){var i,n,o,a,s,l,u,p=[];for(i=0,n=e.length;i<n;i++)o=e[i],i>0?(l=t(o[0]),u=r(o[1]),l===a&&u===s||(p.push([l-a,u-s]),a=l,s=u)):(a=t(o[0]),s=r(o[1]),p.push([a,s]));return p.length>0?p:null},u=function(e,t,r){return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){var i,n,o,a,s,u;for(u=[],i=0,n=(o=e.rings||e.paths).length;i<n;i++)a=o[i],(s=l(a,t,r))&&u.push(s);return u.length>0?(e.rings?e.rings=u:e.paths=u,e):null}:"multipoint"===e?function(e){var i;return(i=l(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:void 0}(this.geometryType,function(e){return Math.round((e-i)/o)},function(e){return Math.round((n-e)/a)});for(t=0,r=s.length;t<r;t++)u(s[t].geometry)||(s.splice(t,1),t--,r--);return this.transform=e,this},_hydrate:function(e,t,r){if(e){var i,n,o=e.translate[0],a=e.translate[1],s=e.scale[0],l=e.scale[1],u=function(e,t,r){return"esriGeometryPoint"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"esriGeometryPolyline"===e||"esriGeometryPolygon"===e?function(e){var i,n,o,a,s,l,u,p,c=e.rings||e.paths;for(i=0,n=c.length;i<n;i++)for(o=0,a=(s=c[i]).length;o<a;o++)l=s[o],o>0?(u+=l[0],p+=l[1]):(u=l[0],p=l[1]),l[0]=t(u),l[1]=r(p)}:"esriGeometryEnvelope"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"esriGeometryMultipoint"===e?function(e){var i,n,o,a,s,l=e.points;for(i=0,n=l.length;i<n;i++)o=l[i],i>0?(a+=o[0],s+=o[1]):(a=o[0],s=o[1]),o[0]=t(a),o[1]=r(s)}:void 0}(t,function(e){return e*s+o},function(e){return a-e*l});for(i=0,n=r.length;i<n;i++)r[i].geometry&&u(r[i].geometry)}}})}.apply(null,i))||(e.exports=n)},395:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(340),r(336),r(399),r(600)],void 0===(n=function(e,t,r,i,n,o,a,s){return function(e){function t(t){var r=e.call(this)||this;return r.alias=null,r.defaultValue=void 0,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})},i([o.property({type:String,json:{write:!0}})],t.prototype,"alias",void 0),i([o.property({json:{write:{allowNull:!0}}})],t.prototype,"defaultValue",void 0),i([o.property({types:a.types,json:{read:{reader:a.fromJSON},write:!0}})],t.prototype,"domain",void 0),i([o.property({type:Boolean,json:{write:!0}})],t.prototype,"editable",void 0),i([o.property({type:Number,json:{write:!0}})],t.prototype,"length",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),i([o.property({type:Boolean,json:{write:!0}})],t.prototype,"nullable",void 0),i([o.property({type:String,json:{read:s.kebabDict.read,write:s.kebabDict.write}})],t.prototype,"type",void 0),n=i([o.subclass("esri.layers.support.Field")],t)}(o.declared(n))}.apply(null,i))||(e.exports=n)},399:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(597),r(374),r(598),r(599)],void 0===(n=function(e,t,r,i,n,o){function a(e,t){switch(e.type){case"range":var r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return s.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every(function(e){return null==e||e.code!==t}))return s.INVALID_CODED_VALUE}return null}var s;Object.defineProperty(t,"__esModule",{value:!0}),t.CodedValueDomain=r,t.DomainBase=i,t.InheritedDomain=n,t.RangeDomain=o,function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(s=t.DomainValidationError||(t.DomainValidationError={})),t.isValidDomainValue=function(e,t){return null===a(e,t)},t.validateDomainValue=a,t.types={key:"type",base:t.DomainBase,typeMap:{range:t.RangeDomain,"coded-value":t.CodedValueDomain}},t.getDomainRange=function(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}},t.fromJSON=function(e){return e&&e.type?"range"===e.type?t.RangeDomain.fromJSON(e):"codedValue"===e.type?t.CodedValueDomain.fromJSON(e):null:null}}.apply(null,i))||(e.exports=n)},402:function(e,t,r){var i,n;i=[r(351),r(338),r(354),r(592)],void 0===(n=function(e,t,r,i){var n={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},o={color:[0,0,0,1],style:n.STYLE_SOLID,width:.75,cap:n.CAP_ROUND,join:n.JOIN_ROUND,miterLimit:7.5},a=e(i,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:n.STYLE_SOLID,json:{read:function(e,r){return t.valueOf(this._jsonStyles,e)||void 0},write:function(e,t){t.style=this._jsonStyles[e]}}},cap:{value:n.CAP_ROUND,json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}},join:{value:n.JOIN_ROUND,json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}},miterLimit:{value:7.5,cast:r.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return t.mixin(this.inherited(arguments),o)},normalizeCtorArgs:function(e,t,i,n,o,a){if(e&&"string"!=typeof e)return e;var s={};return null!=e&&(s.style=e),null!=t&&(s.color=t),null!=i&&(s.width=r.toPt(i)),null!=n&&(s.cap=n),null!=o&&(s.join=o),null!=a&&(s.miterLimit=r.toPt(a)),s},clone:function(){return new a({color:t.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});return t.mixin(a,n),a.defaultProps=o,a}.apply(null,i))||(e.exports=n)},403:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var i in t)if("declaredClass"!==i){var n=t[i];if(null!=n&&"function"!=typeof n)if(Array.isArray(n)){r[i]=[];for(var o=0;o<n.length;o++)r[i][o]=e(n[o])}else"object"==typeof n?n.toJSON&&(r[i]=JSON.stringify(n)):r[i]=n}return r}}.apply(null,i))||(e.exports=n)},407:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(379),r(666)],void 0===(n=function(e,t,r,i){var n=2;return function(){function e(e){var t=this;if(this.data=[],this._length=0,this._allocator=null,this._deallocator=function(e,r){return t.data[r]=void 0},this._shrink=function(){},this._hint=new r.RemoveHint,e){if(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator,this._deallocator=e.deallocator,e.initialSize))for(var i=0;i<e.initialSize;++i)this.data[i]=this._allocator(i);e.shrink&&(this._shrink=function(){t.data.length>n*t.length&&(t.data.length=t.length)})}}return e.prototype.toArray=function(){return this.data.slice(0,this.length)},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){if(this._allocator)for(;this.data.length<e;)this.data.push(this._allocator(this.data.length));if(this._deallocator)for(var t=e;t<this._length;++t)this._deallocator(this.data[t],t);this._length=e,this._shrink()},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.length=0},e.prototype.equal=function(e){return r.equals(this.data,e.data)},e.prototype.push=function(e){return this.data.length===this.length&&this._grow((this.length+1)*n),this.data[this.length++]=e,e},e.prototype.pushArray=function(e){var t=this.length+e.length;t>=this.data.length&&this._grow(Math.max(this.length*n,t));for(var r=0;r<e.length;r++)this.data[this._length++]=e[r];return this.back()},e.prototype.pushNew=function(){return this.data.length===this.length&&this._grow((this.length+1)*n),++this._length,this.back()},e.prototype.pop=function(){if(0!==this.length){var e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}},e.prototype.removeMany=function(e){var t=this,r=[];return this.data=this.data.filter(function(i,n){return!(n>=t.length)&&(e.indexOf(i)<0||(r.push(i),!1))}),this._length=this.data.length,r},e.prototype.removeUnordered=function(e){var t=r.removeUnordered(this.data,e,this.length,this._hint);return void 0!==t&&(this.length=this.length-1),t},e.prototype.removeUnorderedMany=function(e){var t=r.removeUnorderedMany(this.data,e,this.length,this._hint);return this.length=this.length-t.length,t},e.prototype.front=function(){if(0!==this.length)return this.data[0]},e.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]},e.prototype.swapElements=function(e,t){var r;e>=this.length||t>=this.length||(r=[this.data[t],this.data[e]],this.data[e]=r[0],this.data[t]=r[1])},e.prototype.sort=function(e){i.sort(this.data,0,this.length,e)},e.prototype.some=function(e,t){for(var r=0;r<this.length;++r)if(e.call(t,this.data[r],r,this.data))return!0;return!1},e.prototype.find=function(e,t){for(var r=0;r<this.length;++r){var i=this.data[r];if(e.call(t,i,r,this.data))return i}},e.prototype.filter=function(t,r,i){i=i||new e;for(var n=0;n<this.length;++n)t.call(r,this.data[n],n,this.data)&&i.push(this.data[n]);return i},e.prototype.forEach=function(e,t){for(var r=0;r<this.length;++r)e.call(t,this.data[r],r,this.data)},e.prototype.map=function(e,t){for(var r=new Array(this.length),i=0;i<this.length;++i)r[i]=e.call(t,this.data[i],i,this.data);return r},e.prototype._grow=function(e){if(this._allocator)for(;this.data.length<e;)this.data.push(this._allocator(this.data.length))},e}()}.apply(null,i))||(e.exports=n)},412:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(338),r(336),r(370),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.symbol=null,t.type="simple",t}var a;return r(t,e),a=t,t.prototype.writeSymbolWebScene=function(e,t,r,i){s.writeTarget(e,t,r,i)},t.prototype.writeSymbol=function(e,t,r,i){s.writeTarget(e,t,r,i)},t.prototype.readSymbol=function(e,t,r){return s.read(e,t,r)},t.prototype.getSymbol=function(e,t){return this.symbol},t.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]},t.prototype.clone=function(){return new a({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:n.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},i([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([o.property({types:l.rendererTypes})],t.prototype,"symbol",void 0),i([o.writer("web-scene","symbol",{symbol:{types:l.rendererTypes3D}})],t.prototype,"writeSymbolWebScene",null),i([o.writer("symbol")],t.prototype,"writeSymbol",null),i([o.reader("symbol")],t.prototype,"readSymbol",null),i([o.enumeration.serializable()({simple:"simple"})],t.prototype,"type",void 0),a=i([o.subclass("esri.renderers.SimpleRenderer")],t)}(o.declared(a))}.apply(null,i))||(e.exports=n)},414:function(e,t,r){var i,n;i=[r(351),r(338),r(347),r(341),r(343),r(360),r(391),r(371),r(739),r(361),r(375),r(370),r(424),r(643)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d,y){var f=n.getLogger("esri.renderers.ClassBreaksRenderer");d=d.LegendOptions,y=y.ClassBreakInfo;var h=r({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),m=o.ensureType(y),v=e(c,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:s,key:"type",typeMap:{"simple-fill":p.types.typeMap["simple-fill"],"picture-fill":p.types.typeMap["picture-fill"],"polygon-3d":p.types.typeMap["polygon-3d"]}},value:null,json:{origins:{"web-scene":{read:u.read,write:{target:{backgroundFillSymbol:{type:l}},writer:u.writeTarget}}},read:u.read,write:u.writeTarget}},classBreakInfos:{type:[y],json:{read:function(e,t,r){if(Array.isArray(e)){var i=t.minValue;return e.map(function(e){var t=new y;return t.read(e,r),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t})}},write:function(e,t,r,i){e=e.map(function(e){return e.write({},i)}),this._areClassBreaksConsecutive()&&e.forEach(function(e){delete e.classMinValue}),t[r]=e}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:p.rendererTypes,value:null,json:{origins:{"web-scene":{read:u.read,write:{target:{defaultSymbol:{types:p.rendererTypes3D}},writer:u.writeTarget}}},read:u.read,write:u.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return a.createFunction(this.valueExpression)}},legendOptions:{type:d,value:null,json:{write:!0}},field:{value:null,cast:function(e){return null==e?e:"function"==typeof e?e:o.ensureString(e)},json:{type:String,write:function(e,t,r,n){"string"==typeof e?t[r]=e:n&&n.messages?n.messages.push(new i("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):f.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:h.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t?"field":r&&"percent-of-total",t&&r&&console.warn("warning: both normalizationField and normalizationTotal are set!")):"field"!==e&&"percent-of-total"!==e||(e=null),e},json:{type:h.jsonValues,read:h.read,write:h.write}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{type:["class-breaks"],value:"class-breaks",json:{type:["classBreaks"]}}},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(e,r,i){var n;n="number"==typeof e?new y({minValue:e,maxValue:r,symbol:i}):m(t.clone(e)),this.classBreakInfos.push(n),1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(e,t){var r,i,n=this.classBreakInfos.length;for(i=0;i<n;i++)if((r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue])[0]==e&&r[1]==t){this.classBreakInfos.splice(i,1);break}},getBreakIndex:function(e,t){var r,i,n,o=this.field,s=this.classBreakInfos,l=e.attributes,u=s.length,p=this.isMaxInclusive;if(this.valueExpression)r=a.executeFunction(this.compiledFunc,a.createExecContext(e,a.getViewInfo(t)));else if("function"==typeof o)r=o(e);else{r=parseFloat(l[o]);var c,d,y=this.normalizationType;if(y)if(c=parseFloat(this.normalizationTotal),d=parseFloat(l[this.normalizationField]),"log"===y)r=Math.log(r)*Math.LOG10E;else if("percent-of-total"!==y||isNaN(c)){if("field"===y&&!isNaN(d)){if(isNaN(r)||isNaN(d))return-1;r/=d}}else r=r/c*100}if(null!=r&&!isNaN(r)&&"number"==typeof r)for(i=0;i<u;i++)if((n=[s[i].minValue,s[i].maxValue])[0]<=r&&(p?r<=n[1]:r<n[1]))return i;return-1},getClassBreakInfo:function(e,t){var r=this.getBreakIndex(e,t);return-1!==r?this.classBreakInfos[r]:null},getSymbol:function(e,t){var r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol},getSymbols:function(){var e=[];return this.classBreakInfos.forEach(function(t){t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e},clone:function(){return new v({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:t.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:t.clone(this.visualVariables),legendOptions:t.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(e){this.inherited(arguments),[this.field,this.normalizationField].forEach(function(t){t&&(e[t]=!0)}),this.valueExpression&&a.extractFieldNames(this.valueExpression).forEach(function(t){e[t]=!0})},_areClassBreaksConsecutive:function(){for(var e=this.classBreakInfos,t=1;t<e.length;t++)if(e[t-1].maxValue!==e[t].minValue)return!1;return!0}});return v}.apply(null,i))||(e.exports=n)},415:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(358),r(338),r(336),r(370),r(644)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(t){var r=e.call(this)||this;return r.blurRadius=10,r.colorStops=[new l.HeatmapColorStop({ratio:0,color:new n("rgba(255, 140, 0, 0)")}),new l.HeatmapColorStop({ratio:.75,color:new n("rgba(255, 140, 0, 1)")}),new l.HeatmapColorStop({ratio:.9,color:new n("rgba(255, 0,   0, 1)")})],r.field=null,r.fieldOffset=0,r.maxPixelIntensity=100,r.minPixelIntensity=0,r.type="heatmap",r}var s;return r(t,e),s=t,t.prototype.clone=function(){return new s({blurRadius:this.blurRadius,colorStops:o.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})},i([a.property({type:Number,json:{write:!0}})],t.prototype,"blurRadius",void 0),i([a.property({type:[l.HeatmapColorStop],json:{write:!0}})],t.prototype,"colorStops",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),i([a.property({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],t.prototype,"fieldOffset",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"maxPixelIntensity",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"minPixelIntensity",void 0),i([a.property({dependsOn:["field"],readOnly:!0})],t.prototype,"requiredFields",void 0),i([a.enumeration.serializable()({heatmap:"heatmap"})],t.prototype,"type",void 0),s=i([a.subclass("esri.renderers.HeatmapRenderer")],t)}(a.declared(s))}.apply(null,i))||(e.exports=n)},416:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(388),r(431),r(379),r(341),r(338),r(343),r(349),r(336),r(360),r(411),r(370),r(621),r(424),r(645),r(391),r(361),r(634),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d,y,f,h,m,v,g,b,w,S){var _=u.getLogger("esri.renderers.UniqueValueRenderer"),j=d.ensureType(v.default);return function(e){function t(t){var r=e.call(this)||this;return r._valueInfoMap={},r._isDefaultSymbolDerived=!1,r.type="unique-value",r.backgroundFillSymbol=null,r.field=null,r.field2=null,r.field3=null,r.valueExpression=null,r.valueExpressionTitle=null,r.legendOptions=null,r.defaultLabel=null,r.fieldDelimiter=null,r.portal=null,r.styleOrigin=null,r.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var r=!1,i={type:"collection",added:[],removed:[],changed:[],unchanged:[]},n=0;n<t.length;n++)!function(n){var o=a.find(e,function(e){return e.value===t[n].value});o?h.diff(o,t[n])?(i.changed.push({type:"complete",oldValue:o,newValue:t[n]}),r=!0):(i.unchanged.push({oldValue:o,newValue:t[n]}),r=!0):(i.added.push(t[n]),r=!0)}(n);for(n=0;n<e.length;n++)!function(n){a.find(t,function(t){return t.value===e[n].value})||(i.removed.push(e[n]),r=!0)}(n);return r?i:void 0}}},r._set("uniqueValueInfos",[]),r}var u;return r(t,e),u=t,t.prototype.writeBackgroundFillSymbolWebScene=function(e,t,r,i){b.writeTarget(e,t,r,i)},t.prototype.castField=function(e){return null==e?e:"function"==typeof e?e:d.ensureString(e)},t.prototype.writeField=function(e,t,r,i){"string"==typeof e?t[r]=e:i&&i.messages?i.messages.push(new s("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):_.error(".field: cannot write field to JSON since it's not a string value")},Object.defineProperty(t.prototype,"compiledFunc",{get:function(){return g.createFunction(this.valueExpression)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultSymbol",{set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)},enumerable:!0,configurable:!0}),t.prototype.readDefaultSymbol=function(e,t,r){return b.read(e,t,r)},t.prototype.writeDefaultSymbolWebScene=function(e,t,r,i){this._isDefaultSymbolDerived||b.writeTarget(e,t,r,i)},t.prototype.writeDefaultSymbol=function(e,t,r,i){this._isDefaultSymbolDerived||b.writeTarget(e,t,r,i)},t.prototype.readPortal=function(e,t,r){return r.portal||y.getDefault()},t.prototype.readStyleOrigin=function(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var i=p.read(t.styleUrl,r);return Object.freeze({styleUrl:i})}},t.prototype.writeStyleOrigin=function(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=p.write(e.styleUrl,i),p.isAbsolute(t.styleUrl)&&(t.styleUrl=p.normalize(t.styleUrl)))},Object.defineProperty(t.prototype,"uniqueValueInfos",{set:function(e){this.styleOrigin?_.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())},enumerable:!0,configurable:!0}),t.prototype.addUniqueValueInfo=function(e,t){var r;this.styleOrigin?_.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(r="object"==typeof e?j(e):new v.default({value:e,symbol:t}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r)},t.prototype.removeUniqueValueInfo=function(e){if(this.styleOrigin)_.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}},t.prototype.getUniqueValueInfo=function(e,t){var r,i=this.field,n=e.attributes;if(this.valueExpression)r=g.executeFunction(this.compiledFunc,g.createExecContext(e,g.getViewInfo(t)));else if("function"!=typeof i&&this.field2){var o=this.field2,a=this.field3,s=[];i&&s.push(n[i]),o&&s.push(n[o]),a&&s.push(n[a]),r=s.join(this.fieldDelimiter||"")}else"function"==typeof i?r=i(e):i&&(r=n[i]);return this._valueInfoMap[r+""]},t.prototype.getSymbol=function(e,t){var r=this.getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol},t.prototype.getSymbols=function(){for(var e=[],t=0,r=this.uniqueValueInfos;t<r.length;t++){var i=r[t];i.symbol&&e.push(i.symbol)}return this.defaultSymbol&&e.push(this.defaultSymbol),e},t.prototype.clone=function(){var e=new u({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:l.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:l.clone(this.visualVariables),legendOptions:l.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:l.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=l.clone(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(l.clone(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e},t.prototype.collectRequiredFields=function(e){this.inherited(arguments),[this.field,this.field2,this.field3].forEach(function(t){t&&"string"==typeof t&&(e[t]=!0)}),this.valueExpression&&g.extractFieldNames(this.valueExpression).forEach(function(t){e[t]=!0})},t.prototype.populateFromStyle=function(){var e=this;return w.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(t){var r=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(function(i){var n=new o.WebStyleSymbol({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:i.name});e.defaultSymbol||i.name!==t.data.defaultItem||(e.defaultSymbol=n,e._isDefaultSymbolDerived=!0);var a=new v.default({value:i.name,symbol:n});r.push(a),e._valueInfoMap[i.name]=a}),e._set("uniqueValueInfos",Object.freeze(r)),!e.defaultSymbol&&e.uniqueValueInfos.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e})},t.prototype._updateValueInfoMap=function(){var e=this;this._valueInfoMap={},this.uniqueValueInfos.forEach(function(t){return e._valueInfoMap[t.value+""]=t})},t.fromPortalStyle=function(e,t){var r=new u(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||y.getDefault());var i=r.populateFromStyle();return i.catch(function(t){_.error("#fromPortalStyle('"+e+"'[, ...])","Failed to create unique value renderer from style name",t)}),i},t.fromStyleUrl=function(e,t){var r=new u(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));var i=r.populateFromStyle();return i.catch(function(t){_.error("#fromStyleUrl('"+e+"'[, ...])","Failed to create unique value renderer from style URL",t)}),i},i([c.enumeration.serializable()({uniqueValue:"unique-value"})],t.prototype,"type",void 0),i([c.property({types:{base:o.BaseSymbol,key:"type",typeMap:{"simple-fill":S.rendererTypes.typeMap["simple-fill"],"picture-fill":S.rendererTypes.typeMap["picture-fill"],"polygon-3d":S.rendererTypes.typeMap["polygon-3d"]}},json:{read:b.read,write:b.writeTarget}})],t.prototype,"backgroundFillSymbol",void 0),i([c.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:o.PolygonSymbol3D}})],t.prototype,"writeBackgroundFillSymbolWebScene",null),i([c.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],t.prototype,"field",void 0),i([c.cast("field")],t.prototype,"castField",null),i([c.writer("field")],t.prototype,"writeField",null),i([c.property({type:String,json:{write:!0}})],t.prototype,"field2",void 0),i([c.property({type:String,json:{write:!0}})],t.prototype,"field3",void 0),i([c.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),i([c.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),i([c.property({dependsOn:["valueExpression"]})],t.prototype,"compiledFunc",null),i([c.property({type:m.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),i([c.property({type:String,json:{write:!0}})],t.prototype,"defaultLabel",void 0),i([c.property({types:S.rendererTypes})],t.prototype,"defaultSymbol",null),i([c.reader("defaultSymbol")],t.prototype,"readDefaultSymbol",null),i([c.writer("web-scene","defaultSymbol",{defaultSymbol:{types:S.rendererTypes3D}})],t.prototype,"writeDefaultSymbolWebScene",null),i([c.writer("defaultSymbol")],t.prototype,"writeDefaultSymbol",null),i([c.property({type:String,json:{write:!0}})],t.prototype,"fieldDelimiter",void 0),i([c.property({type:y,readOnly:!0})],t.prototype,"portal",void 0),i([c.reader("portal",["styleName"])],t.prototype,"readPortal",null),i([c.property({readOnly:!0})],t.prototype,"styleOrigin",void 0),i([c.reader("styleOrigin",["styleName","styleUrl"])],t.prototype,"readStyleOrigin",null),i([c.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],t.prototype,"writeStyleOrigin",null),i([c.property({type:[v.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],t.prototype,"uniqueValueInfos",null),i([c.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],t.prototype,"requiredFields",void 0),i([n(1,c.cast(S.ensureType))],t.prototype,"addUniqueValueInfo",null),u=i([c.subclass("esri.renderers.UniqueValueRenderer")],t)}(c.declared(f))}.apply(null,i))||(e.exports=n)},423:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(405),r(442),r(414),r(415),r(412),r(416)],void 0===(n=function(e,t,r,i,n,o,a,s,l){function u(e,t,r){if(!e)return null;if(e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type)return r&&r.messages&&r.messages.push(new n("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null;var i=function(e){return e&&c[e.type]||null}(e);if(i){var o=new i;return o.read(e,r),o}return r&&r.messages&&e&&r.messages.push(new n("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:r})),null}function p(e,t,i){return e?i&&"web-scene"===i.origin&&"heatmap"===e.type?(i.messages&&i.messages.push(new r("renderer:unsupported","Renderer of type '"+e.declaredClass+"' are not supported in scenes.",{renderer:e,context:i})),null):e.write(t,i):null}Object.defineProperty(t,"__esModule",{value:!0});var c={simple:s,uniqueValue:l,classBreaks:o,heatmap:a};t.read=u,t.writeTarget=function(e,t,r,n){var o=p(e,{},n);o&&i.setDeepValue(r,o,t)},t.write=p,t.fromJSON=function(e,t){return u(e,0,t)}}.apply(null,i))||(e.exports=n)},424:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({title:this.title})},i([o.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),n=i([o.subclass("esri.renderers.support.LegendOptions")],t)}(o.declared(n));t.LegendOptions=a,t.default=a}.apply(null,i))||(e.exports=n)},425:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1}}();t.default=r}.apply(null,i))||(e.exports=n)},427:function(e,t,r){var i,n;i=[r(766),r(340),r(338),r(347),r(692),r(662),r(451),r(646),r(391),r(711),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c){function d(e){var t=l.createSyntaxTree(e),r=t&&t.body&&t.body[0]&&t.body[0].body&&t.body[0].body.body;if(!r||1!==r.length)return null;var i="ExpressionStatement"===r[0].type&&r[0].expression;if(!i||"MemberExpression"!==i.type)return null;var n=i.object;if(!n||"Identifier"!==n.type||"$feature"!==n.name)return null;var o=i.property;if(!o)return null;switch(o.type){case"Literal":return o.value;case"Identifier":return o.name}return null}function y(e){return!e||"service"!==e.origin&&(!e.layer||!s.isOfType(e.layer,"map-image"))}var f=i({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0}),h=new u,m=t.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{type:String,value:null,json:{write:!0}},labelExpression:{type:String,value:null,json:{read:function(e,t,r,i){var n=t.labelExpressionInfo;if(!n||!n.value&&!n.expression)return e},write:{allowNull:!0,writer:function(e,t,r,i){if(this.labelExpressionInfo&&y(i))if(null!=this.labelExpressionInfo.value)e=this._templateStringToSql(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){var n=d(this.labelExpressionInfo.expression);n&&(e="["+n+"]")}null!=e&&(t[r]=e)}}}},labelExpressionInfo:{value:null,type:o,json:{write:{overridePolicy:function(e,t,r){return y(r)?{allowNull:!0}:{enabled:!1}},writer:function(e,t,r,i){if(null==e&&null!=this.labelExpression&&y(i))e=new o({expression:this.getLabelExpressionArcade()});else if(!e)return;var n=e.toJSON(i);n.expression&&(t[r]=n)}}}},labelPlacement:{type:f.apiValues,value:null,json:{type:f.jsonValues,read:f.read,write:f.write}},maxScale:{type:Number,value:0,json:{write:function(e,t){(e||this.minScale)&&(t.maxScale=e)}}},minScale:{type:Number,value:0,json:{write:function(e,t){(e||this.maxScale)&&(t.minScale=e)}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var e=Object.create(null);return this._collectRequiredFields(e),Object.keys(e)}},symbol:{value:null,types:c.labelTypes,json:{origins:{"web-scene":{read:p.read,write:{target:{symbol:{types:c.labelTypes3D}},writer:p.writeTarget}}},read:p.read,write:p.writeTarget}},useCodedValues:{type:Boolean,value:null,json:{write:!0}},where:{type:String,value:null,json:{write:!0}}},getLabelExpression:function(){var e={expression:"",type:"none"};return this.labelExpressionInfo?this.labelExpressionInfo.value?(e.expression=this.labelExpressionInfo.value,e.type="conventional"):this.labelExpressionInfo.expression&&(e.expression=this.labelExpressionInfo.expression,e.type="arcade"):null!=this.labelExpression&&(e.expression=this._sqlToTemplateString(this.labelExpression),e.type="conventional"),e},getLabelExpressionArcade:function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return a.convertTemplatedStringToArcade(e.expression);case"arcade":return e.expression}return null},getOptions:function(e){var t={spatialReference:e},r=this.labelExpressionInfo;if(r){var i=r.expression;i&&!r.value&&(t.hasArcadeExpression=!0,t.compiledArcadeFunc=l.createFunction(i))}return t},getLabelExpressionSingleField:function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return function(e){var t=e.match(v);return t&&t[1].trim()||null}(e.expression);case"arcade":return d(e.expression)}return null},clone:function(){return new m({labelExpression:this.labelExpression,labelExpressionInfo:r.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(e){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),e),this._collectWhereRequiredFields(this.where,e)},_sqlToTemplateString:function(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")},_templateStringToSql:function(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")},_collectWhereRequiredFields:function(e,t){if(null!=e){var r=e.split(" ");3===r.length&&(t[r[0]]=!0),7===r.length&&(t[r[0]]=!0,t[r[4]]=!0)}},_collectLabelExpressionRequiredFields:function(e,t){if("arcade"===e.type)l.extractFieldNames(e.expression).forEach(function(e){t[e]=!0});else{var r=e.expression.match(/{[^}]*}/g);r&&r.forEach(function(e){t[e.slice(1,-1)]=!0})}}});m.evaluateWhere=function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var i=e.split(" ");if(3===i.length)return r(t[i[0]],i[1],i[2]);if(7===i.length){var n=r(t[i[0]],i[1],i[2]),o=i[3],a=r(t[i[4]],i[5],i[6]);switch(o){case"AND":return n&&a;case"OR":return n||a}}return!1}catch(t){console.log("Error.: can't parse = "+e)}},m.buildLabelText=function(e,t,r,i){var n="";if(i&&i.hasArcadeExpression){if(i.compiledArcadeFunc){h.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:r});var o={vars:{$feature:h},spatialReference:i.spatialReference},a=l.executeFunction(i.compiledArcadeFunc,o);null!=a&&(n=a.toString())}}else{var s=t&&t.attributes||{};n=e.replace(/{[^}]*}/g,function(e){return m.formatField(e.slice(1,-1),e,s,r,i)})}return n},m.formatField=function(t,i,o,a,s){var l,u,p=i,c=t.toLowerCase();for(l=0;l<a.length;l++)if(a[l].name.toLowerCase()===c){p=o[a[l].name];var d=a[l].domain;if(d&&"object"==typeof d){if("codedValue"==d.type)for(u=0;u<d.codedValues.length;u++)d.codedValues[u].code==p&&(p=d.codedValues[u].name);else"range"==d.type&&d.minValue<=p&&p<=d.maxValue&&(p=d.name);return null==p?"":p}var y=a[l].type;if("date"==y){var f=e.fromJSON(s&&s.dateFormat||"shortDate"),h="DateFormat"+e.getFormat(f);h&&(p=r.substitute({myKey:p},"{myKey:"+h+"}"))}else"integer"!=y&&"small-integer"!=y&&"long"!=y&&"double"!=y||s&&s.numberFormat&&s.numberFormat.digitSeparator&&s.numberFormat.places&&(p=n.format(p,{places:s.numberFormat.places}))}return null==p?"":p};var v=/^\s*\{([^}]+)\}\s*$/i;return m}.apply(null,i))||(e.exports=n)},429:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(461),r(406),r(619)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){return null==t.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled")?void i.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,r.OriginId.DEFAULTS):t.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,i){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&e?t[r]=e:n.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},i)&&(t[r]=e)}}}}}},t.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",writer:function(e,t,r){t[r]=!e}}}},t.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}}}.apply(null,i))||(e.exports=n)},436:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(343),r(428),r(336),r(394)],void 0===(n=function(e,t,r,i,n,o,a,s){var l=n.getLogger("esri.layers.mixins.ArcGISService");return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=s.parse(this.url);if(e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(e){this._set("url",s.sanitizeUrl(e,l))},enumerable:!0,configurable:!0}),i([a.property({dependsOn:["url"]})],t.prototype,"title",null),i([a.property({type:String})],t.prototype,"url",null),i([a.subclass("esri.layers.mixins.ArcGISService")],t)}(a.declared(o))}.apply(null,i))||(e.exports=n)},437:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(607)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r)}.apply(null,i))||(e.exports=n)},440:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(338),r(336)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.definitionExpression=null,r.globalIds=null,r.num=null,r.objectIds=null,r.size=null,r.start=null,r}var n;return r(t,e),n=t,t.prototype.writeStart=function(e,t,r){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new n(o.clone({attachmentTypes:this.attachmentTypes,definitionExpression:this.definitionExpression,globalIds:this.globalIds,num:this.num,objectIds:this.objectIds,size:this.size,start:this.start}))},i([a.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"definitionExpression",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),i([a.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([a.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),i([a.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),i([a.writer("start"),a.writer("num")],t.prototype,"writeStart",null),n=i([a.subclass("esri.tasks.support.AttachmentQuery")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},444:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(364),r(340),r(338),r(336)],void 0===(n=function(e,t,r,i,n,o,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.definitionExpression=null,r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.source=null,r}var o;return r(t,e),o=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new o(a.clone({definitionExpression:this.definitionExpression,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source}))},i([s.property({type:String,json:{write:!0}})],t.prototype,"definitionExpression",void 0),i([s.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),i([s.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),i([s.property({type:Date})],t.prototype,"historicMoment",void 0),i([s.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),i([s.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),i([s.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([s.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),i([s.property({type:n.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),i([s.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),i([s.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),i([s.property({json:{write:!0}})],t.prototype,"source",void 0),o=i([s.subclass("esri.tasks.support.RelationshipQuery")],t)}(s.declared(o))}.apply(null,i))||(e.exports=n)},446:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.when=function e(t,i){return Array.isArray(i)?r.create(function(e){t(i,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e(t)})}):e(t,[i]).then(function(e){return e[0]})},t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}}.apply(null,i))||(e.exports=n)},447:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(587),r(405),r(399)],void 0===(n=function(e,t,r,i,n){function o(e,t,r){if(e)for(var n=0,o=e;n<o.length;n++){var s=o[n],l=i.getDeepValue(s,t),u=l&&"function"!=typeof l&&a(l,r);u&&i.setDeepValue(s,u.name,t)}}function a(e,t){if("string"!=typeof e)return null;if(null!=t){e=e.toLowerCase();for(var r=0,i=t;r<i.length;r++){var n=i[r];if(n&&n.name.toLowerCase()===e)return n}}return null}function s(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function l(e){return null===e||s(e)}function u(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function p(e){return null===e||u(e)}function c(e){return null!=e&&"string"==typeof e}function d(e){return null===e||c(e)}function y(e){return!0}function f(e,t){var r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?p:u;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?l:s;break;case"string":case"esriFieldTypeString":r=e.nullable?d:c;break;default:r=y}return 1===arguments.length?r:r(t)}function h(e){return null!=e&&S.has(e.type)}function m(e,t){return e.nullable&&null===t?null:h(e)&&!v(e.type,t)?b.OUT_OF_RANGE:f(e,t)?e.domain?n.validateDomainValue(e.domain,t):null:w.INVALID_TYPE}function v(e,t){var r=g(e);return!!r&&t>=r.min&&t<=r.max}function g(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return{min:-32768,max:32767};case"esriFieldTypeInteger":case"integer":return{min:-2147483648,max:2147483647};case"esriFieldTypeSingle":case"single":return{min:-3.4e38,max:1.2e38};case"esriFieldTypeDouble":case"double":var t=Number.MAX_VALUE;return{min:-Number.MAX_VALUE,max:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.fixRendererFields=function(e,r){if(null!=e&&null!=r)for(var i=0,n=Array.isArray(e)?e:[e];i<n.length;i++){var a=n[i];if(o(t.rendererFields,a,r),a.visualVariables)for(var s=0,l=a.visualVariables;s<l.length;s++){var u=l[s];o(t.visualVariableFields,u,r)}}},t.getField=a,t.getFieldDefaultValue=function(e){var t=e.defaultValue;return void 0!==t&&f(e,t)?t:e.nullable?null:void 0},t.isValueMatchingFieldType=f,t.rendererFields=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],t.visualVariableFields=["field","normalizationField"],t.numericTypes=["integer","small-integer","single","double"];var b,w,S=new r.default(t.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));t.isNumericField=h,t.isStringField=function(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)},t.isDateField=function(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)},t.isValidFieldValue=function(e,t){return null===m(e,t)},(b=t.NumericRangeValidationError||(t.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range",(w=t.TypeValidationError||(t.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type",t.validateFieldValue=m,t.isNumberInRange=v,t.getFieldRange=function(e){var t=n.getDomainRange(e.domain);return t||(h(e)?g(e.type):void 0)},t.validationErrorToString=function(e,t,r){switch(e){case n.DomainValidationError.INVALID_CODED_VALUE:return"Value "+r+" is not in the coded domain - field: "+t.name+", domain: "+JSON.stringify(t.domain);case n.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+r+" is out of the range of valid values - field: "+t.name+", domain: "+JSON.stringify(t.domain);case w.INVALID_TYPE:return"Value "+r+" is not a valid value for the field type - field: "+t.name+", type: "+t.type+", nullable: "+t.nullable;case b.OUT_OF_RANGE:var i=g(t.type),o=i.min,a=i.max;return"Value "+r+" is out of range for the number type - field: "+t.name+", type: "+t.type+", value range is "+o+" to "+a}}}.apply(null,i))||(e.exports=n)},451:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(663)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i="__begin__",n="__end__",o=new RegExp(i,"ig"),a=new RegExp(n,"ig"),s=new RegExp("^"+i,"i"),l=new RegExp(n+"$","i"),u='"',p=u+" + ",c=" + "+u;t.convertTemplatedStringToArcade=function(e){var t;return e?(t=r.replace(e,function(e,t){return i+'$feature["'+t+'"]'+n}),t=s.test(t)?t.replace(s,""):u+t,t=(t=l.test(t)?t.replace(l,""):t+u).replace(o,p).replace(a,c)):t='""',t}}.apply(null,i))||(e.exports=n)},455:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return r(t,e),i([o.property({type:String,readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),i([o.subclass("esri.layers.support.FeatureReduction")],t)}(o.declared(n));t.FeatureReduction=a,t.default=a}.apply(null,i))||(e.exports=n)},457:function(e,t,r){var i,n;i=[r(371),r(402)],void 0===(n=function(e,t){return e.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:t,json:{read:{default:null},write:!0}},type:null}})}.apply(null,i))||(e.exports=n)},458:function(e,t,r){var i,n;i=[r(351),r(354),r(371)],void 0===(n=function(e,t,r){return e(r,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(e){return e&&-1*e},write:function(e,t){t.angle=e&&-1*e}}},type:{},xoffset:{value:0,cast:t.toPt,json:{write:!0}},yoffset:{value:0,cast:t.toPt,json:{write:!0}},size:{value:9,cast:function(e){return"auto"===e?e:t.toPt(e)},json:{write:!0}}}})}.apply(null,i))||(e.exports=n)},459:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(347),r(338)],void 0===(n=function(e,t,r,i){function n(e){return null!=e&&e.hasOwnProperty("mapLayerId")}function o(e){return null!=e&&e.hasOwnProperty("dataSource")}function a(e){return e?(n(e)&&(e.type=t.MAPLAYER),o(e)&&(e.type=t.DATALAYER,e.dataSource.type||function(e){e.workspaceId?e.gdbVersion?e.type="table":e.query||e.oidFields?e.type="query-table":e.type="raster":e.leftTableKey&&e.rightTableKey&&e.leftTableSource&&e.rightTableSource&&(e.type="join-table",e.leftTableSource=a(e.leftTableSource),e.rightTableSource=a(e.rightTableSource))}(e.dataSource)),e):e}function s(e){var r={};return e.type===t.MAPLAYER?(r.mapLayerId=e.mapLayerId,e.gdbVersion&&(r.gdbVersion=e.gdbVersion)):e.type===t.DATALAYER&&(e.fields&&(r.fields=e.fields),r.dataSource=function(e){var t;switch(e.type){case"table":t={dataSourceName:e.dataSourceName,workspaceId:e.workspaceId,gdbVersion:e.gdbVersion};break;case"query-table":t={geometryType:u.toJSON(e.geometryType),workspaceId:e.workspaceId,query:e.query,oidFields:e.oidFields,spatialReference:e.spatialReference};break;case"join-table":t={leftTableSource:s(e.leftTableSource),rightTableSource:s(e.rightTableSource),leftTableKey:e.leftTableKey,rightTableKey:e.rightTableKey,joinType:d.toJSON(e.joinType)};break;case"raster":t={workspaceId:e.workspaceId,dataSourceName:e.dataSourceName}}return t.type=c.toJSON(e.type),i.fixJson(t)}(e.dataSource)),r.type=p.toJSON(e.type),i.fixJson(r)}function l(e){var r={};return p.fromJSON(e.type)===t.MAPLAYER?(r.mapLayerId=e.mapLayerId,e.gdbVersion&&(r.gdbVersion=e.gdbVersion)):p.fromJSON(e.type)===t.DATALAYER&&(e.fields&&(r.fields=e.fields),r.dataSource=function(e){var t;switch(e.type){case"table":t={dataSourceName:e.dataSourceName,workspaceId:e.workspaceId,gdbVersion:e.gdbVersion};break;case"queryTable":t={geometryType:u.fromJSON(e.geometryType),workspaceId:e.workspaceId,query:e.query,oidFields:e.oidFields,spatialReference:e.spatialReference};break;case"joinTable":t={leftTableSource:l(e.leftTableSource),rightTableSource:l(e.rightTableSource),leftTableKey:e.leftTableKey,rightTableKey:e.rightTableKey,joinType:d.fromJSON(e.joinType)};break;case"raster":t={workspaceId:e.workspaceId,dataSourceName:e.dataSourceName}}return t.type=c.fromJSON(e.type),i.fixJson(t)}(e.dataSource)),r.type=p.fromJSON(e.type),i.fixJson(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.MAPLAYER="map-layer",t.DATALAYER="data-layer";var u=r({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),p=r({mapLayer:t.MAPLAYER,dataLayer:t.DATALAYER}),c=r({joinTable:"join-table",queryTable:"query-table"}),d=r({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});t.isMapLayerSource=n,t.isDataLayerSource=o,t.castSource=a,t.sourceToJSON=s,t.sourceFromJSON=l}.apply(null,i))||(e.exports=n)},586:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(349)],void 0===(n=function(e,t,r){function i(e,t,i){return t.imageData?r.makeData({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):n(t.url,i)}function n(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!r.isAbsolute(e)&&t.layer.parsedUrl?r.join(t.layer.parsedUrl.path,"images",e):r.read(e,t)}function o(e,t,i,n){if(r.isDataProtocol(e)){var o=r.dataComponents(e);t.contentType=o.mediaType,t.imageData=o.data,i&&i.imageData===t.imageData&&i.url&&(t.url=a(i.url,n))}else t.url=a(e,n)}function a(e,t){return r.write(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.readImageDataOrUrl=i,t.read=n,t.writeImageDataAndUrl=o,t.write=a,t.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:i},write:{writer:function(e,t,r,i){o(e,t,this.source,i)}}}},t.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,t,r){var i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=n(t.url,r)),i}}}}}.apply(null,i))||(e.exports=n)},587:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=r(653),o=r(450),a=r(654),s=r(614);r(660),t.Set=o.default.Set,s.default("es6-set")||(t.Set=((i=function(){function e(e){if(this._setData=[],this[Symbol.toStringTag]="Set",e)if(a.isArrayLike(e))for(var t=0;t<e.length;t++)this.add(e[t]);else try{for(var r=n.__values(e),i=r.next();!i.done;i=r.next()){var o=i.value;this.add(o)}}catch(e){s={error:e}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}}var s,l}return e.prototype.add=function(e){return this.has(e)?this:(this._setData.push(e),this)},e.prototype.clear=function(){this._setData.length=0},e.prototype.delete=function(e){var t=this._setData.indexOf(e);return-1!==t&&(this._setData.splice(t,1),!0)},e.prototype.entries=function(){return new a.ShimIterator(this._setData.map(function(e){return[e,e]}))},e.prototype.forEach=function(e,t){for(var r=this.values(),i=r.next();!i.done;)e.call(t,i.value,i.value,this),i=r.next()},e.prototype.has=function(e){return this._setData.indexOf(e)>-1},e.prototype.keys=function(){return new a.ShimIterator(this._setData)},Object.defineProperty(e.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0}),e.prototype.values=function(){return new a.ShimIterator(this._setData)},e.prototype[Symbol.iterator]=function(){return new a.ShimIterator(this._setData)},e}())[Symbol.species]=i,i)),t.default=t.Set},588:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(338),r(336)],void 0===(n=function(e,t,r,i,n,o,a,s){var l=o({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return function(e){function t(t){var r=e.call(this,t)||this;return r.name=null,r.description=null,r.drawingTool=null,r.prototype=null,r.thumbnail=null,r}return r(t,e),t.prototype.writeDrawingTool=function(e,t){t.drawingTool=l.toJSON(e)},t.prototype.writePrototype=function(e,t){t.prototype=a.fixJson(a.clone(e),!0)},t.prototype.writeThumbnail=function(e,t){t.thumbnail=a.fixJson(a.clone(e))},i([s.property({json:{write:!0}})],t.prototype,"name",void 0),i([s.property({json:{write:!0}})],t.prototype,"description",void 0),i([s.property({json:{read:l.read,write:l.write}})],t.prototype,"drawingTool",void 0),i([s.writer("drawingTool")],t.prototype,"writeDrawingTool",null),i([s.property({json:{write:!0}})],t.prototype,"prototype",void 0),i([s.writer("prototype")],t.prototype,"writePrototype",null),i([s.property({json:{write:!0}})],t.prototype,"thumbnail",void 0),i([s.writer("thumbnail")],t.prototype,"writeThumbnail",null),i([s.subclass("esri.layers.support.FeatureTemplate")],t)}(s.declared(n))}.apply(null,i))||(e.exports=n)},592:function(e,t,r){var i,n;i=[r(351),r(354),r(371)],void 0===(n=function(e,t,r){return e(r,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:t.toPt,json:{write:!0}}}})}.apply(null,i))||(e.exports=n)},593:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=i||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,i=new e(this._data,this._dataView,r,r+t);return this._skip(t),i},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var i="",n="";r=Math.min(this._end,r);for(var o=t;o<r;++o){var a=e[o];128&a?n+="%"+a.toString(16):(i+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(i+=decodeURIComponent(n)),i},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()}.apply(null,i))||(e.exports=n)},595:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t}}();t.default=r}.apply(null,i))||(e.exports=n)},597:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(338),r(336),r(374)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.codedValues=null,r.type="coded-value",r}var a;return r(t,e),a=t,t.prototype.writeCodedValues=function(e,t){var r=null;e&&(r=e.map(function(e){return n.fixJson(n.clone(e))})),t.codedValues=r},t.prototype.getName=function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some(function(e){return String(e.code)===r&&(t=e.name),!!t})}return t},t.prototype.clone=function(){return new a({codedValues:n.clone(this.codedValues),name:this.name})},i([o.property({json:{write:!0}})],t.prototype,"codedValues",void 0),i([o.writer("codedValues")],t.prototype,"writeCodedValues",null),i([o.enumeration.serializable()({codedValue:"coded-value"})],t.prototype,"type",void 0),a=i([o.subclass("esri.layers.support.CodedValueDomain")],t)}(o.declared(a))}.apply(null,i))||(e.exports=n)},598:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(374)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="inherited",r}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o},i([n.enumeration.serializable()({inherited:"inherited"})],t.prototype,"type",void 0),o=i([n.subclass("esri.layers.support.InheritedDomain")],t)}(n.declared(o))}.apply(null,i))||(e.exports=n)},599:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(374)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.maxValue=null,r.minValue=null,r.type="range",r}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({maxValue:this.maxValue,minValue:this.minValue,name:this.name})},i([n.property({json:{read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{target:"range",writer:function(e,t,r){t[r]=[this.minValue,e]}}}})],t.prototype,"maxValue",void 0),i([n.property({json:{read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue]}}}})],t.prototype,"minValue",void 0),i([n.enumeration.serializable()({range:"range"})],t.prototype,"type",void 0),o=i([n.subclass("esri.layers.support.RangeDomain")],t)}(n.declared(o))}.apply(null,i))||(e.exports=n)},600:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(347)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.kebabDict=r({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})}.apply(null,i))||(e.exports=n)},603:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t={}),this.geometry=e,this.attributes=t,r&&(this.centroid=r),null!=i&&(this.objectId=i)}}();t.default=r}.apply(null,i))||(e.exports=n)},607:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(381),r(435),r(343),r(339),r(608),r(389),r(609)],void 0===(n=function(e,t,i,n,o,a,s,l,u){function p(){if(v)return v;for(var e=d+y,t=[],r=0;r<e;r++)!function(e){var r=u.create(e).then(function(t){return m[e]=t,t});t.push(r)}(r);return v=n(t).then(function(){})}Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=s,t.RemoteClient=l;var c=i("host-browser")?navigator.hardwareConcurrency:0;c||(c=i("safari")&&i("mac")||i("trident")?8:2);var d=i("esri-workers-debug")?1:Math.max(1,Math.ceil(c/2)),y=i("esri-workers-debug")?1:Math.max(1,Math.floor(c/2)),f=o.getLogger("esri.core.workers"),h=0,m=[];t.initialize=function(){p()},t.open=function(i,n,o){if(void 0===n&&(n={}),Array.isArray(i))return new t.Connection(i.map(function(e){return new t.RemoteClient(e,n.client)}));if("string"!=typeof i){f.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var s=i;i=n,n={client:s,strategy:o?"dedicated":"distributed"}}var l=n.strategy||"distributed";return"local"===l?a.create(function(n){Promise.resolve().then(function(){var r=[e(i,null,!1)];(function(e){n(t.RemoteClient.connect(e))}).apply(null,r)}).catch(r.oe)}).then(function(e){return new t.Connection([new t.RemoteClient(e,n.client)])}):p().then(function(){if("dedicated"===l){var e=d+h++;return h%=y,m[e].open(i).then(function(e){return new t.Connection([new t.RemoteClient(e,n.client)])})}return a.all(m.map(function(e){return e.open(i)})).then(function(e){return new t.Connection(e.map(function(e){return new t.RemoteClient(e,n.client)}))})})},t.terminate=function(){v&&(v.cancel(),v=null);for(var e=0;e<m.length;e++)m[e]&&m[e].terminate();m.length=0};var v=null}.apply(null,i))||(e.exports=n)},608:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339)],void 0===(n=function(e,t,r){return function(){function e(e){this._clientIdx=0,this._clients=e}return e.prototype.broadcast=function(e,t){for(var r=[],i=0,n=this._clients;i<n.length;i++){var o=n[i];r.push(o.invoke(e,t))}return r},e.prototype.close=function(){for(var e=0,t=this._clients;e<t.length;e++)t[e].close();this._clients=[]},e.prototype.invoke=function(e,t,i,n){var o=n&&n.client;if(!this._clients||!this._clients.length)return r.reject(new Error("Connection closed"));null!=o&&-1!==this._clients.indexOf(o)||this._clients.some(function(e){return!e.isBusy()&&(o=e,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,o=this._clients[this._clientIdx]);var a=o.invoke(e,t,i);return n&&(n.client=o),a},e.prototype.openPorts=function(){return r.all(this._clients.map(function(e){return e.openPort()}))},e}()}.apply(null,i))||(e.exports=n)},609:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(620),r(341),r(343),r(339),r(378),r(610)],void 0===(n=function(e,t,r,i,n,o,a,s){function l(e,t){e.delete(t)}var u=n.getLogger("esri.core.workers"),p=a.MessageType.CANCEL,c=a.MessageType.INVOKE,d=a.MessageType.OPEN,y=a.MessageType.OPENED,f=a.MessageType.RESPONSE;return function(){function e(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",function(e){e.preventDefault(),u.error(e)})}return e.create=function(t){return s.createWorker().then(function(r){return new e(r,t)})},e.prototype.terminate=function(){this.worker.terminate()},e.prototype.open=function(e){var t=this,r=a.newJobId(),i=function(){l(t._outJobs,r),t._post({type:p,jobId:r})};return o.create(function(n,o){var a={resolve:n,reject:o,cancel:i};t._outJobs.set(r,a),t._post({type:d,jobId:r,modulePath:e})},i)},e.prototype._onMessage=function(e){var t=a.receiveMessage(e);if(t)switch(t.type){case y:case f:this._onResponse(t);break;case p:this._onCancel(t);break;case c:this._onInvoke(t)}},e.prototype._onCancel=function(e){var t=this._inJobs.get(e.jobId);t&&t.cancel()},e.prototype._onInvoke=function(e){var t,i=this,n=e.methodName,s=e.jobId,u=e.data,p=this._inJobs,c=r.workerMessages[n];try{if("function"!=typeof c)throw new TypeError(n+" is not a function");t=c.call(null,u)}catch(e){return void this._post({type:f,jobId:s,error:a.toInvokeError(e)})}o.isThenable(t)?(p.set(s,t),t.then(function(e){l(p,s),i._post({type:f,jobId:s},e)}).catch(function(e){l(p,s),e||(e={message:"Error encountered at method"+n}),e.dojoType&&"cancel"===e.dojoType||i._post({type:f,jobId:s,error:a.toInvokeError(e)})})):this._post({type:f,jobId:s},t)},e.prototype._onResponse=function(e){var t=e.jobId,r=e.error,n=e.data,o=this._outJobs.get(t);o&&(l(this._outJobs,t),r?o.reject(i.fromJSON(JSON.parse(r))):o.resolve(n))},e.prototype._post=function(e,t,r){return a.postMessage(this.worker,e,t,r)},e}()}.apply(null,i))||(e.exports=n)},610:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(356),r(124),r(350),r(353),r(343),r(339),r(349),r(611),r(378),r(612)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d){function y(e){return l.create(function(t){function r(n){var o=c.receiveMessage(n);if(o)switch(o.type){case S:f(e);break;case b:e.removeEventListener("message",r),e.removeEventListener("error",i),t(e)}}function i(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),v.warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new d).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function f(e){var t,o=n.workers.loaderUrl||p.DEFAULT_LOADER_URL;if(null!=n.default){var s=r({},n);delete s.default,t=JSON.parse(JSON.stringify(s))}else t=JSON.parse(JSON.stringify(n));var l=n.workers.loaderConfig,u=p.default({baseUrl:l.baseUrl,locale:i.locale,has:r({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-secure-context":a("esri-secure-context"),"esri-workers-arraybuffer-transfer":a("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1},l.has),map:r({},l.map),paths:r({},l.paths),packages:l.packages||[]});e.postMessage({type:w,configure:{esriConfig:t,loaderUrl:o,loaderConfig:u}})}Object.defineProperty(t,"__esModule",{value:!0});var h=u.normalize(e.toUrl("./worker.js")),m=!u.hasSameOrigin(h,location.href),v=s.getLogger("esri.core.workers"),g=null;a.add("esri-workers-arraybuffer-transfer",!a("safari")||a("safari")>=12);var b=c.MessageType.CONFIGURED,w=c.MessageType.CONFIGURE,S=c.MessageType.HANDSHAKE;t.createWorker=function(){if(!a("esri-workers"))return y(new d);if(!m){var e=void 0;try{e=new Worker(h)}catch(t){v.warn("Failed to create Worker. Fallback to execute module in main thread",event),e=new d}return y(e)}return g||(g=o(h,{responseType:"text"})),g.then(function(e){return new Worker(URL.createObjectURL(new Blob([e.data],{type:"text/javascript"})))}).catch(function(e){return v.warn("Failed to create Worker. Fallback to execute module in main thread",e),new d}).then(function(e){return y(e)})}}.apply(null,i))||(e.exports=n)},611:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(355),r(349)],void 0===(n=function(e,t,r,i,n){function o(t){return n.removeQueryParameters(e.toUrl(t))}function a(e,t){for(var i=0,a=e;i<a.length;i++)if(a[i].name===t.name)return;var s=r({},t),l=o(s.name+"/x.js"),u=l.slice(0,l.length-5);s.location=n.makeAbsolute(u),e.push(s)}Object.defineProperty(t,"__esModule",{value:!0});var s=i("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";t.DEFAULT_LOADER_URL=n.makeAbsolute(o(s)),t.DEFAULT_CONFIG={baseUrl:function(){var e=o("dojo/x.js");return n.makeAbsolute(e.slice(0,e.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}},t.default=function(e){var i={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:r({},e.has),map:r({},e.map),packages:e.packages&&e.packages.concat()||[],paths:r({},e.paths)};e.hasOwnProperty("async")||(i.async=!0),e.hasOwnProperty("isDebug")||(i.isDebug=!1),e.baseUrl||(i.baseUrl=t.DEFAULT_CONFIG.baseUrl),t.DEFAULT_CONFIG.packages.forEach(function(e){a(i.packages,e)});for(var n=i.map=i.map||{},o=0,s=Object.keys(t.DEFAULT_CONFIG.map);o<s.length;o++){var l=s[o];n[l]||(n[l]=t.DEFAULT_CONFIG.map[l])}return i}}.apply(null,i))||(e.exports=n)},612:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(355),r(453),r(378)],void 0===(n=function(e,t,i,n,o){var a=function(){return function(){var e=this,t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(r){e[r]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t[r].apply(t,e)}})}}(),s=n.MutationObserver||n.WebKitMutationObserver,l=function(){var e;if(n.process&&n.process.nextTick)e=function(e){n.process.nextTick(e)};else if(n.Promise)e=function(e){n.Promise.resolve().then(e)};else if(s){var t=[],r=document.createElement("div");new s(function(){for(;t.length>0;)t.shift()()}).observe(r,{attributes:!0}),e=function(e){t.push(e),r.setAttribute("queueStatus","1")}}return e}();return function(){function t(){this._dispatcher=new a,this._isInitialized=!1,this._workerPostMessage({type:o.MessageType.HANDSHAKE})}return t.prototype.terminate=function(){},Object.defineProperty(t.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)},enumerable:!0,configurable:!0}),t.prototype.postMessage=function(e,t){var r=this;l(function(){r._workerMessageHandler(new MessageEvent("message",{data:e}))})},t.prototype.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)},t.prototype.addEventListener=function(e,t,r){this._dispatcher.addEventListener(e,t,r)},t.prototype.removeEventListener=function(e,t,r){this._dispatcher.removeEventListener(e,t,r)},t.prototype._workerPostMessage=function(e,t){var r=this;l(function(){r.dispatchEvent(new MessageEvent("message",{data:e}))})},t.prototype._workerMessageHandler=function(t){var n=this,a=o.receiveMessage(t);if(a){var s=a.jobId;switch(a.type){case o.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:o.MessageType.CONFIGURED});break;case o.MessageType.OPEN:var l=a.modulePath;i("esri-webpack")?Promise.all([r.e(3),r.e(2),r.e(5),r.e(7),r.e(67)]).then(function(){var t=[r(389),r(752),r(753),r(735),r(716),r(754),r(682),e(l,null,!1)];(function(e,t,r,i,a,l,u,p){var c;switch(p){case"esri/views/vectorTiles/WorkerTileHandler":c=t;break;case"esri/views/2d/layers/features/Pipeline":c=r;break;case"esri/views/3d/layers/PointCloudWorker":c=i;break;case"esri/views/3d/layers/SceneLayerWorker":c=a;break;case"esri/layers/graphics/sources/support/CSVSourceWorker":c=l;break;case"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":c=u;break;default:c=p}var d=e.connect(c);n._workerPostMessage({type:o.MessageType.OPENED,jobId:s,data:d})}).apply(null,t)}).catch(r.oe):Promise.resolve().then(function(){var t=[r(389),e(l,null,!1)];(function(e,t){var r=e.connect(t);n._workerPostMessage({type:o.MessageType.OPENED,jobId:s,data:r})}).apply(null,t)}).catch(r.oe)}}},t}()}.apply(null,i))||(e.exports=n)},613:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(357),r(363)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.graphicsExtent=function(e){if(!e||!e.length)return null;var t=r.isCollection(e)?e.getItemAt(0).geometry:e[0].geometry,n=t.extent,o=t;null===n&&(n=new i(o.x,o.y,o.x,o.y,t.spatialReference));for(var a=1;a<e.length;a++){o=t=r.isCollection(e)?e.getItemAt(a).geometry:e[a].geometry;var s=t.extent;null===s&&(s=new i(o.x,o.y,o.x,o.y,t.spatialReference)),n=n.clone().union(s)}return n.width<0&&n.height<0?null:n},t.getGeometries=function(e){return e.map(function(e){return e.geometry})},t._encodeGraphics=function(e,t){var r=[];return e.forEach(function(e,i){var n=e.toJSON(),o={};if(n.geometry){var a=t&&t[i];o.geometry=a&&a.toJSON()||n.geometry}n.attributes&&(o.attributes=n.attributes),r[i]=o}),r}}.apply(null,i))||(e.exports=n)},615:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(414),r(415),r(370),r(412),r(416)],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0}),t.types={key:"type",base:n,typeMap:{heatmap:i,simple:o,"unique-value":a,"class-breaks":r}}}.apply(null,i))||(e.exports=n)},616:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e,t){return(e%=t)>=0?e:e+t}Object.defineProperty(t,"__esModule",{value:!0}),t.C_INFINITY=Number.POSITIVE_INFINITY,t.C_PI=Math.PI,t.C_2PI=2*t.C_PI,t.C_PI_BY_2=t.C_PI/2,t.C_RAD_TO_256=128/t.C_PI,t.C_256_TO_RAD=t.C_PI/128,t.C_DEG_TO_256=256/360,t.C_DEG_TO_RAD=t.C_PI/180,t.C_SQRT2=1.414213562,t.C_SQRT2_INV=1/t.C_SQRT2;var i=1/Math.LN2;t.positiveMod=r,t.radToByte=function(e){return r(e*t.C_RAD_TO_256,256)},t.degToByte=function(e){return r(e*t.C_DEG_TO_256,256)},t.log2=function(e){return Math.log(e)*i},t.sqr=function(e){return e*e},t.clamp=function(e,t,r){return Math.min(Math.max(e,t),r)},t.interpolate=function(e,t,r){return e*(1-r)+t*r},t.between=function(e,t,r){return e>=t&&e<=r||e>=r&&e<=t}}.apply(null,i))||(e.exports=n)},621:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(346),r(357),r(406)],void 0===(n=function(e,t,r,i,n){function o(e){return e instanceof r}function a(e){return e instanceof i?Object.keys(e.items):o(e)?n.getProperties(e).keys():e?Object.keys(e):[]}function s(e,t){return e instanceof i?e.items[t]:e[t]}function l(e){return e?e.declaredClass:null}function u(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var i=a(e),n=a(t);if(0!==i.length||0!==n.length){if(!i.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var c=n.filter(function(e){return-1===i.indexOf(e)}),d=i.filter(function(e){return-1===n.indexOf(e)}),y=i.filter(function(r){return n.indexOf(r)>-1&&s(e,r)!==s(t,r)}).concat(c,d).sort(),f=l(e);if(f&&p.indexOf(f)>-1&&y.length)return{type:"complete",oldValue:e,newValue:t};var h,m=o(e)&&o(t);for(var v in y){var g=y[v],b=s(e,g),w=s(t,g),S=void 0;(m||"function"!=typeof b&&"function"!=typeof w)&&b!==w&&(null==b&&null==w||(S=r&&r[g]&&"function"==typeof r[g]?r[g](b,w):"object"==typeof b&&"object"==typeof w&&l(b)===l(w)?u(b,w):{type:"complete",oldValue:b,newValue:w})&&((h=h||{type:"partial",diff:{}}).diff[g]=S))}return h}}Object.defineProperty(t,"__esModule",{value:!0});var p=["esri.Color","esri.portal.Portal"];t.diff=function(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&l(e)!==l(t)?{type:"complete",oldValue:e,newValue:t}:u(e,t)}}.apply(null,i))||(e.exports=n)},627:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(349),r(422),r(626),r(628),r(403)],void 0===(n=function(e,t,r,i,n,o,a,s,l){function u(e,t){var r=e.geometry,i=e.toJSON(),n=i;if(r&&(n.geometry=JSON.stringify(r),n.geometryType=o.getJsonType(r),n.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),i.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(n.objectIds=i.objectIds.join(",")),i.orderByFields&&(n.orderByFields=i.orderByFields.join(",")),!i.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete n.outFields:-1!==i.outFields.indexOf("*")?n.outFields="*":n.outFields=i.outFields.join(","),i.outSR?n.outSR=i.outSR.wkid||JSON.stringify(i.outSR):r&&(i.returnGeometry||i.returnCentroid)&&(n.outSR=n.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(n.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(n.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(n.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.source&&(n.layer=JSON.stringify({source:i.source}),delete i.source),i.timeExtent){var a=i.timeExtent;n.time=[null!=a.startTime?a.startTime:"null",null!=a.endTime?a.endTime:"null"],delete i.timeExtent}return n}function p(e,t,o,s,p){void 0===s&&(s={});var c="string"==typeof e?n.urlToObject(e):e,d=t.geometry?[t.geometry]:[];return s.responseType="pbf"===o?"array-buffer":"json",a.normalizeCentralMeridian(d,null,s).then(function(e){var n=e&&e[0];n&&((t=t.clone()).geometry=n);var a=l.mapParameters(r({},c.query,{f:o},p,u(t,p)));return i(c.path+"/query",r({},s,{query:a}))})}Object.defineProperty(t,"__esModule",{value:!0});var c="Layer does not support extent calculation.";t.queryToQueryStringParameters=u,t.executeQuery=function(e,t,r){return p(e,t,"json",r)},t.executeQueryPBF=function(e,t,r){return p(e,t,"pbf",r).then(function(e){var t=s.parsePBFFeatureQuery(e.data),r=e;return r.data=t,r})},t.executeQueryForIds=function(e,t,r){return p(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return p(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return p(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(c);if(t.hasOwnProperty("count"))throw new Error(c);return e})}}.apply(null,i))||(e.exports=n)},628:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(343),r(425),r(629)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=i.getLogger("esri.tasks.operations.pbfQueryUtils");t.parsePBFFeatureQuery=function(e){try{var t=o.parseFeatureQuery(e).queryResult.featureResult;if(t&&t.features&&t.features.length&&t.objectIdFieldName)for(var i=t.objectIdFieldName,s=0,l=t.features;s<l.length;s++){var u=l[s];u.attributes&&(u.objectId=u.attributes[i])}return t}catch(e){var p=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return a.error(p),new n.default}}}.apply(null,i))||(e.exports=n)},629:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(593),r(603),r(425),r(595)],void 0===(n=function(e,t,r,i,n,o){function a(e){return e>=_.length?null:_[e]}function s(e){return e>=j.length?null:j[e]}function l(e){return e>=O.length?null:O[e]}function u(e){return e>=x.length?null:x[e]}function p(e){for(var t=new o.default,r=t.coords;e.next();)switch(e.tag()){case 3:for(var i=e.getUInt32(),n=e.pos()+i,a=0;e.pos()<n;)r[a++]=e.getSInt64();break;case 1:case 2:default:e.skip()}return t}function c(e){for(var t=new o.default,r=t.coords,i=t.lengths;e.next();)switch(e.tag()){case 2:for(var n=e.getUInt32(),a=e.pos()+n;e.pos()<a;)i.push(e.getUInt32());break;case 3:for(var s=e.getUInt32(),l=(a=e.pos()+s,0);e.pos()<a;)r[l++]=e.getSInt64();break;case 1:default:e.skip()}return t}function d(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function y(e){for(var t={type:a(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=a(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=s(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function f(e,t){for(var r=new i.default,n=0;e.next();)switch(e.tag()){case 1:var o=e.getMessage(),a=t[n++].name;r.attributes[a]=d(o);break;case 2:r.geometry=c(e.getMessage());break;case 4:r.centroid=p(e.getMessage());break;default:e.skip()}return r}function h(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function m(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function v(e){for(var t={originPosition:l(0)};e.next();)switch(e.tag()){case 1:t.originPosition=l(e.getEnum());break;case 2:t.scale=h(e.getMessage());break;case 3:t.translate=m(e.getMessage());break;default:e.skip()}return t}function g(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function b(e){for(var t={};e.next();)switch(e.tag()){case 1:t.wkid=e.getUInt32();break;case 5:t.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return t}function w(e){var t=new n.default;for(t.geometryType=u(0);e.next();)switch(e.tag()){case 1:t.objectIdFieldName=e.getString();break;case 3:t.globalIdFieldName=e.getString();break;case 4:t.geohashFieldName=e.getString();break;case 5:t.geometryProperties=g(e.getMessage());break;case 7:t.geometryType=u(e.getEnum());break;case 8:t.spatialReference=b(e.getMessage());break;case 10:t.hasZ=e.getBool();break;case 11:t.hasM=e.getBool();break;case 12:var r=e.getMessage();t.transform=v(r);break;case 9:var i=e.getBool();t.exceededTransferLimit=i;break;case 13:var o=e.getMessage();t.fields.push(y(o));break;case 15:var a=e.getMessage();t.features.push(f(a,t.fields));break;case 2:case 6:default:e.skip()}return t}function S(e){for(var t={};e.next();)switch(e.tag()){case 1:t.featureResult=w(e.getMessage());break;default:e.skip()}return t}Object.defineProperty(t,"__esModule",{value:!0});var _=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],j=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],x=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],O=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e){for(var t=new r(new Uint8Array(e),new DataView(e)),i={};t.next();)switch(t.tag()){case 2:i.queryResult=S(t.getMessage());break;default:t.skip()}return i}}.apply(null,i))||(e.exports=n)},634:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(350),r(431),r(341),r(339),r(349),r(411),r(673),r(361),r(757),r(747)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c){function d(e,t){return t.load().then(function(){var r=new l({disableExtraQuery:!0,query:"owner:"+v+" AND type:"+g+' AND typekeywords:"'+e+'"'});return t.queryItems(r)}).then(function(t){var r=t.results,i=null,o=e.toLowerCase();if(r&&Array.isArray(r))for(var a=0,s=r;a<s.length;a++){var l=s[a];if(l.typeKeywords.some(function(e){return e.toLowerCase()===o})&&l.type===g&&l.owner===v){i=l;break}}if(i)return i.load();throw new n("symbolstyleutils:style-not-found","The style '"+e+"' could not be found",{styleName:e})})}function y(e,t){return e.styleUrl?function(e,t){return h(e).then(function(t){return{data:t.data,baseUrl:a.removeFile(e),styleUrl:e}})}(e.styleUrl):e.styleName?function(e,t){var r,i=t.portal||s.getDefault(),n=i.url+" - "+(i.user&&i.user.username)+" - "+e;return m[n]||(m[n]=d(e,i).then(function(e){return r=e,e.fetchData()}).then(function(t){return{data:t,baseUrl:r.itemUrl,styleName:e}})),m[n]}(e.styleName,t):o.reject(new n("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function f(e,t,r){for(var s=e.data,l={portal:r.portal,url:a.urlToObject(e.baseUrl),origin:"portal-item"},d=0,y=s.items;d<y.length;d++){var f=function(n){if(n.name!==t)return"continue";var o=a.read(n.webRef,l),s={portal:r.portal,url:a.urlToObject(a.removeFile(o)),origin:"portal-item"};return{value:h(o).then(function(o){var d=u.fromJSON(o.data,s);if(d&&d.isInstanceOf(i.BaseSymbol3D)){if(n.thumbnail)if(n.thumbnail.href){var y=a.read(n.thumbnail.href,l);d.thumbnail=new c.default({url:y})}else n.thumbnail.imageData&&(d.thumbnail=new c.default({url:"data:image/png;base64,"+n.thumbnail.imageData}));e.styleUrl?d.styleOrigin=new p({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(d.styleOrigin=new p({portal:r.portal,styleName:e.styleName,name:t}))}return d})}}(y[d]);if("object"==typeof f)return f.value}return o.reject(new n("symbolstyleutils:symbol-name-not-found","The symbol name '"+t+"' could not be found",{symbolName:t}))}function h(e){var t={responseType:"json",query:{f:"json"}};return r(a.normalize(e),t)}Object.defineProperty(t,"__esModule",{value:!0});var m={};t.fetchStyle=y,t.resolveWebStyleSymbol=function(e,t){return e.name?y(e,t).then(function(r){return f(r,e.name,t)}):o.reject(new n("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))},t.fetchSymbolFromStyle=f,t.styleNameFromItem=function(e){for(var t=0,r=e.typeKeywords;t<r.length;t++){var i=r[t];if(/^Esri.*Style$/.test(i)&&"Esri Style"!==i)return i}};var v="esri_en",g="Style"}.apply(null,i))||(e.exports=n)},635:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339),r(442)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyleRenderer=function(e,t){var n=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);return n&&"unique-value"===n.type&&n.styleOrigin?n.populateFromStyle().catch(function(r){t&&t.messages&&t.messages.push(new i("renderer:style-reference","Failed to create unique value renderer from style reference: "+r.message,{error:r,context:t})),e.clear("renderer",t.origin)}).then(function(){return null}):r.resolve(null)}}.apply(null,i))||(e.exports=n)},637:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(414),r(415),r(370),r(412),r(416),r(423)],void 0===(n=function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassBreaksRenderer=r,t.HeatmapRenderer=i,t.BaseRenderer=n,t.SimpleRenderer=o,t.UniqueValueRenderer=a,t.isRenderer=function(e){return e instanceof t.BaseRenderer},t.fromJSON=s.fromJSON}.apply(null,i))||(e.exports=n)},639:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(349),r(403)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t,i){for(var o={},a=0,s=e;a<s.length;a++)for(var l=s[a],u=l.parentObjectId,p=0,c=l.attachmentInfos;p<c.length;p++){var d=c[p],y=d.id,f=n.addProxy(t+"/"+u+"/attachments/"+y+(i?"?token="+i:"")),h=r({},d,{parentObjectId:u,url:f});o[u]?o[u].push(h):o[u]=[h]}return o},t.executeAttachmentQuery=function(e,t,n){var a={query:o.mapParameters(r({},e.query,{f:"json"},function(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}(t)))};return n&&(a=r({},n,a)),i(e.path+"/queryAttachments",a)}}.apply(null,i))||(e.exports=n)},641:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(338),r(336),r(642)],void 0===(n=function(e,t,r,i,n,o,a,s,l){var u=o({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),p=o({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance"}),c=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];return function(e){function t(t){var r=e.call(this)||this;return r.lengthUnit=null,r.visualVariables=null,r}var n;return r(t,e),n=t,Object.defineProperty(t.prototype,"classificationMethod",{get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"standardDeviationInterval",{get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:a.clone(this.field1),field2:a.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(e){return e.clone()})})},i([s.property({type:u.apiValues,value:null,dependsOn:["type"],json:{type:u.jsonValues,read:u.read,write:u.write}})],t.prototype,"classificationMethod",null),i([s.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"fields",null),i([s.property({value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field1",null),i([s.property({value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field2",null),i([s.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"focus",null),i([s.property({type:Number,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"numClasses",null),i([s.property({type:c,json:{type:c,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],t.prototype,"lengthUnit",void 0),i([s.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],t.prototype,"standardDeviationInterval",null),i([s.property({type:String,value:null,json:{type:p.jsonValues,read:p.read,write:p.write}})],t.prototype,"type",null),i([s.property({type:[l],json:{write:!0}})],t.prototype,"visualVariables",void 0),n=i([s.subclass("esri.renderers.support.AuthoringInfo")],t)}(s.declared(n))}.apply(null,i))||(e.exports=n)},642:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(336),r(698)],void 0===(n=function(e,t,r,i,n,o,a,s){var l=o({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),u=o({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),p={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},c=["high-to-low","above-and-below","centered-on","extremes"],d=["seconds","minutes","hours","days","months","years"];return function(e){function t(t){var r=e.call(this)||this;return r.endTime=null,r.field=null,r.maxSliderValue=null,r.minSliderValue=null,r.startTime=null,r.type=null,r.units=null,r}var n;return r(t,e),n=t,t.prototype.castEndTime=function(e){return"string"==typeof e||"number"==typeof e?e:null},t.prototype.castStartTime=function(e){return"string"==typeof e||"number"==typeof e?e:null},Object.defineProperty(t.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})},i([a.property({types:p,json:{write:!0}})],t.prototype,"endTime",void 0),i([s.cast("endTime")],t.prototype,"castEndTime",null),i([a.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"maxSliderValue",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"minSliderValue",void 0),i([a.property({types:p,json:{write:!0}})],t.prototype,"startTime",void 0),i([s.cast("startTime")],t.prototype,"castStartTime",null),i([a.property({type:l.apiValues,value:null,dependsOn:["type"],json:{type:l.jsonValues,read:l.read,write:l.write}})],t.prototype,"style",null),i([a.property({type:c,value:null,dependsOn:["type"],json:{type:c,write:!0}})],t.prototype,"theme",null),i([a.property({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],t.prototype,"type",void 0),i([a.property({type:d,json:{type:d,write:!0}})],t.prototype,"units",void 0),n=i([a.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},643:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.minValue=null,t.maxValue=0,t.symbol=null,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})},i([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([o.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],t.prototype,"minValue",void 0),i([o.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],t.prototype,"maxValue",void 0),i([o.property({types:s.rendererTypes,json:{origins:{"web-scene":{read:a.read,write:{target:{symbol:{types:s.rendererTypes3D}},writer:a.writeTarget}}},read:a.read,write:a.writeTarget}})],t.prototype,"symbol",void 0),n=i([o.subclass("esri.renderers.support.ClassBreakInfo")],t)}(o.declared(n));t.ClassBreakInfo=l,t.default=l}.apply(null,i))||(e.exports=n)},644:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(358),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t){var r=e.call(this)||this;return r.color=null,r.ratio=null,r}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({color:this.color,ratio:this.ratio})},i([a.property({type:n,json:{write:!0}})],t.prototype,"color",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"ratio",void 0),o=i([a.subclass("esri.renderers.support.HeatmapColorStop")],t)}(a.declared(o));t.HeatmapColorStop=s,t.default=s}.apply(null,i))||(e.exports=n)},645:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336),r(361),r(375)],void 0===(n=function(e,t,r,i,n,o,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.description=null,t.label=null,t.symbol=null,t.value=null,t}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})},i([o.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),i([o.property({types:s.rendererTypes,json:{origins:{"web-scene":{read:a.read,write:{target:{symbol:{types:s.rendererTypes3D}},writer:a.writeTarget}}},read:a.read,write:a.writeTarget}})],t.prototype,"symbol",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"value",void 0),n=i([o.subclass("esri.renderers.support.UniqueValueInfo")],t)}(o.declared(n));t.UniqueValueInfo=l,t.default=l}.apply(null,i))||(e.exports=n)},646:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isOfType=function(e,t){var r=e.constructor._meta;if(!r||!r.bases)return!1;var i=r.bases,n=Array.isArray(t);return i.some(function(e){var r=e.__accessorMetadata__;if(!r)return!1;var i=r.properties;if(!i||!i.type||!i.type.value)return!1;var o=i.type.value;return n?-1!==t.indexOf(o):o===t})}}.apply(null,i))||(e.exports=n)},647:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(388),r(344),r(364),r(336),r(740),r(627),r(639),r(648),r(440),r(392),r(419),r(444)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d,y,f,h){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.source=null,r}return r(t,e),t.prototype.execute=function(e,t){return this.executeJSON(e,t).then(function(e){return y.fromJSON(e)})},t.prototype.executeJSON=function(e,t){return u.executeQuery(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data})},t.prototype.executeForCount=function(e,t){return u.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data.count})},t.prototype.executeForExtent=function(e,t){return u.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return{count:e.data.count,extent:a.Extent.fromJSON(e.data.extent)}})},t.prototype.executeForIds=function(e,t){return u.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),o({},this.requestOptions,t)).then(function(e){return e.data.objectIds})},t.prototype.executeRelationshipQuery=function(e,t){return(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),c.executeRelationshipQuery(this.parsedUrl,e,o({},this.requestOptions,t)).then(function(e){var t=e.data,r={};return Object.keys(t).forEach(function(e){return r[e]=y.fromJSON(t[e])}),r})},t.prototype.executeAttachmentQuery=function(e,t){var r=this,i=t&&t.query&&t.query.token;return p.executeAttachmentQuery(this.parsedUrl,e,o({},this.requestOptions,t)).then(function(e){return p.processAttachmentQueryResult(e.data.attachmentGroups,r.parsedUrl.path,i)})},t.prototype._normalizeQuery=function(e){return this.gdbVersion||this.source?e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):e},i([s.property()],t.prototype,"gdbVersion",void 0),i([s.property()],t.prototype,"source",void 0),i([n(0,s.cast(f))],t.prototype,"execute",null),i([n(0,s.cast(f))],t.prototype,"executeJSON",null),i([n(0,s.cast(f))],t.prototype,"executeForCount",null),i([n(0,s.cast(f))],t.prototype,"executeForExtent",null),i([n(0,s.cast(f))],t.prototype,"executeForIds",null),i([n(0,s.cast(h))],t.prototype,"executeRelationshipQuery",null),i([n(0,s.cast(d))],t.prototype,"executeAttachmentQuery",null),i([s.subclass("esri.tasks.QueryTask")],t)}(s.declared(l))}.apply(null,i))||(e.exports=n)},648:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(403)],void 0===(n=function(e,t,r,i,n){function o(e){var t=e.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.outFields&&(t.outFields=t.outFields.join(",")),t.outSpatialReference&&(t.outSR=t.outSR.wkid||JSON.stringify(t.outSR.toJSON()),delete t.outSpatialReference),t.source&&(t.layer=JSON.stringify({source:t.source}),delete t.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=o,t.executeRelationshipQuery=function(e,t,a){var s={query:n.mapParameters(r({},e.query,{f:"json"},o(t)))};return a&&(s=r({},a,s)),i(e.path+"/queryRelatedRecords",s).then(function(e){for(var t=e.data,r=t.geometryType,i=t.spatialReference,n={},o=0,a=t.relatedRecordGroups;o<a.length;o++){var s=a[o],l={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:i,features:s.relatedRecords};if(null!=s.objectId)n[s.objectId]=l;else for(var u in s)s.hasOwnProperty(u)&&"relatedRecords"!==u&&(n[s[u]]=l)}return e.data=n,e})}}.apply(null,i))||(e.exports=n)},649:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(449),r(365),r(694),r(343),r(624),r(339),r(336)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handles=new a,t.layer=null,t.parent=null,t.view=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",i=e.layer&&e.layer.title||"no title";return l.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+i+"', id: '"+r+"')",t),p.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null!=e?e:1};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},i([c.property()],t.prototype,"layer",void 0),i([c.property()],t.prototype,"parent",void 0),i([c.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),i([c.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),i([c.property()],t.prototype,"view",void 0),i([c.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),i([c.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),i([c.subclass("esri.views.layers.LayerView")],t)}(c.declared(n,o,s,u))}.apply(null,i))||(e.exports=n)},652:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(338),r(336),r(395),r(447)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return r(t,e),n=t,t.fromWorker=function(e){if(!e)return null;var t=JSON.parse(e),r=new n;return r.fields=t.fields&&t.fields.map(function(e){return s.fromJSON(e)}),r.options=t.options,r.process=new(Function.bind.apply(Function,[void 0].concat(t.process.args,[t.process.body]))),r},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n(o.clone({fields:this.fields,options:this.options,process:this.process}))},t.prototype.getField=function(e){return l.getField(e,this.fields)},t.prototype.refresh=function(){this.notifyChange("version")},t.prototype.toWorker=function(){var e=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:e.substring(e.indexOf("{")+1,e.lastIndexOf("}")),args:e.slice(e.indexOf("(")+1,e.indexOf(")")).match(/([^\s,]+)/g)}})},i([a.property({type:[s]})],t.prototype,"fields",void 0),i([a.property()],t.prototype,"options",void 0),i([a.property()],t.prototype,"process",void 0),i([a.property({readOnly:!0,dependsOn:["process","options","fields"]})],t.prototype,"version",null),n=i([a.subclass("esri.layers.support.FeatureProcessing")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},661:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(455)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="selection",t}return r(t,e),i([n.property()],t.prototype,"type",void 0),i([n.subclass("esri.layers.support.FeatureReductionSelection")],t)}(n.declared(o.default));t.FeatureReductionSelection=a,t.default=a}.apply(null,i))||(e.exports=n)},662:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336),r(451)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.expression=null,t}var n;return r(t,e),n=t,t.prototype.readExpression=function(e,t){return t.value?a.convertTemplatedStringToArcade(t.value):e},t.prototype.writeExpression=function(e,t,r){null!=this.value&&(e=a.convertTemplatedStringToArcade(this.value)),t[r]=e},t.prototype.clone=function(){return new n({value:this.value,expression:this.expression})},i([o.property({json:{read:!1,write:!1}})],t.prototype,"value",void 0),i([o.property({json:{write:{allowNull:!0}}})],t.prototype,"expression",void 0),i([o.reader("expression",["expression","value"])],t.prototype,"readExpression",null),i([o.writer("expression")],t.prototype,"writeExpression",null),n=i([o.subclass("esri.layers.support.LabelExpressionInfo")],t)}(o.declared(n))}.apply(null,i))||(e.exports=n)},663:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(405)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.replace=function(e,t,i){return void 0===i&&(i=/\{([^\}]+)\}/g),e.replace(i,"function"==typeof t?t:function(e,i){return r.getDeepValue(i,t)})}}.apply(null,i))||(e.exports=n)},664:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(427)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=/\[([^\[\]]+)\]/gi;t.reader=function(e,t,n){var o=this;return e?e.map(function(e){var a=new r;if(a.read(e,n),a.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||o.fields;a.labelExpression=a.labelExpression.replace(i,function(e,t){return"["+function(e,t){if(!t)return e;for(var r=e.toLowerCase(),i=0;i<t.length;i++){var n=t[i].name;if(n.toLowerCase()===r)return n}return e}(t,s)+"]"})}return a}):null}}.apply(null,i))||(e.exports=n)},666:function(e,t,r){var i;void 0===(i=function(){function e(e,t,r,i){for(var n=t,o=t,a=r>>>1,s=e[n-1];o<=a;){(o=n<<1)<r&&i(e[o-1],e[o])<0&&++o;var l=e[o-1];if(i(l,s)<=0)break;e[n-1]=l,n=o}e[n-1]=s}function t(e,t){return e<t?-1:e>t?1:0}return{sort:function(r,i,n,o){void 0===i&&(i=0),void 0===n&&(n=r.length),void 0===o&&(o=t);for(var a=n>>>1;a>i;a--)e(r,a,n,o);var s=i+1;for(a=n-1;a>i;a--){var l=r[i];r[i]=r[a],r[a]=l,e(r,s,a,o)}return r}}}.apply(null,[]))||(e.exports=i)},667:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(336)],void 0===(n=function(e,t,r,i,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t}return r(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},i([o.property()],t.prototype,"layer",void 0),i([o.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),i([o.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),i([o.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(o.declared(n))}.apply(null,i))||(e.exports=n)},671:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(364),r(383),r(346),r(357),r(341),r(353),r(347),r(623),r(343),r(446),r(437),r(336),r(360),r(674),r(392),r.dj.m(e)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d,y,f,h,m,v,g,b){function w(e){var t=e.geometry,r=e.attributes;return{geometry:t&&"mesh"!==t.type?t&&t.toJSON():null,attributes:r}}Object.defineProperty(t,"__esModule",{value:!0});var S=p({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),_=d.getLogger("esri.layers.graphics.sources.MemorySource"),j=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return r(a,t),a.prototype.load=function(){var t=this;return this.addResolvingPromise(f.open(y.getAbsMid("./support/MemorySourceWorker",e,b),{client:this,strategy:u("esri-workers-for-memory-layers")?"dedicated":"local"}).then(function(e){t._connection=e;var r=t.layer,i=r.fields,n=r.spatialReference,o=r.geometryType,a=r.objectIdField,s=r.hasM,l=r.hasZ;return e.invoke("load",{features:t.items.map(w),fields:i&&i.map(function(e){return e.toJSON()}),geometryType:S.toJSON(o),hasM:s,hasZ:l,objectIdField:a,spatialReference:n&&n.toJSON()}).then(function(e){e.featureErrors.length&&_.warn("Encountered "+e.featureErrors.length+" validation errors while loading features",e.featureErrors),t.layerDefinition=e.layerDefinition})})),this.when()},a.prototype.applyEdits=function(e){var t=this;return this.load().then(function(){return t._applyEdits(e)})},a.prototype.openPorts=function(){var e=this;return this.load().then(function(){return e._connection.openPorts()})},a.prototype.queryFeatures=function(e){return this.queryFeaturesJSON(e).then(function(e){return g.fromJSON(e)})},a.prototype.queryFeaturesJSON=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryFeatures",e?e.toJSON():null)})},a.prototype.queryFeatureCount=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null)})},a.prototype.queryObjectIds=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null)})},a.prototype.queryExtent=function(e){var t=this;return this.load().then(function(){return t._connection.invoke("queryExtent",e?e.toJSON():null)}).then(function(e){return{count:e.count,extent:n.Extent.fromJSON(e.extent)}})},a.prototype._applyEdits=function(e){var t=this;if(!this._connection)throw new l("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,i=[],n=[],o=[];if(e.addFeatures)for(var a=0,s=e.addFeatures;a<s.length;a++){var u=s[a];i.push(w(u))}if(e.deleteFeatures)for(var p=0,c=e.deleteFeatures;p<c.length;p++){var d=c[p];"objectId"in d&&null!=d.objectId?n.push(d.objectId):"attributes"in d&&null!=d.attributes[r]&&n.push(d.attributes[r])}if(e.updateFeatures)for(var y=0,f=e.updateFeatures;y<f.length;y++){u=f[y];o.push(w(u))}return this._connection.invoke("applyEdits",{adds:i,updates:o,deletes:n}).then(function(e){var r=e.fullExtent,i=e.featureEditResults;return t.fullExtent=r,t._createEditsResult(i)})},a.prototype._createEditsResult=function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[]}},a.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new l("feature-layer-source:edit-failure",t.description,{code:t.code}):null}},i([v.shared({Type:o,ensureType:m.ensureType(o)})],a.prototype,"itemType",void 0),i([h.property({constructOnly:!0})],a.prototype,"layer",void 0),i([h.property()],a.prototype,"layerDefinition",void 0),i([h.subclass("esri.layers.graphics.sources.MemorySource")],a)}(h.declared(a,s,c));t.MemorySource=j,t.default=j}.apply(null,i))||(e.exports=n)},674:function(e,t,r){var i,n;i=[r(351),r(675),r(340),r(338)],void 0===(n=function(e,t,r,i){return{subclass:function(n,o){return function(o){var a=t.declareDefinition(o,n);s&&(a.instanceMembers.properties=function e(t,r){if(!t)return r;if(!r)return t;for(var i in r){var n=t[i],o=r[i];Array.isArray(o)&&Array.isArray(n)?t[i]=n.concat(o):t[i]="object"==typeof o&&"object"==typeof n?e(n,o):o}return t}(s,a.instanceMembers.properties));var s=a.instanceMembers.properties;if(s)for(var l in s){var u=s[l];u&&!u.reader&&u.type&&(u.type===Date?u.reader=function(e){return null!=e?new Date(e):null}:-1!==u.type._meta.bases.indexOf(r)&&(u.reader=function(e){return function(t){return e.fromJSON(t)}}(u.type)))}return i.mixin(e(a.bases,a.instanceMembers),a.classMembers)}},shared:t.shared,property:function(e){return function(t,r){var i=Object.getPrototypeOf(t),n=i&&i.properties;t.properties&&t.properties!==n||(t.properties={}),t.properties=t.properties||{},t.properties[r]=e||{}}}}}.apply(null,i))||(e.exports=n)},675:function(e,t,r){var i,n;i=[r(351),r(338)],void 0===(n=function(e,t){var r={declareDefinition:function(e,t){var r,i=[],n=Object.getPrototypeOf(e.prototype);if(n!==Object.prototype){var o=n.constructor;r=o.prototype,i.push(o)}t&&(i=i.concat(t));for(var a={},s=Object.getOwnPropertyNames(e.prototype),l=0;l<s.length;l++){var u=s[l];if("constructor"!==u){var p=u;"dojoConstructor"===u&&(p="constructor"),r&&e.prototype[u]===r[u]||(a[p]=e.prototype[u])}}s=Object.getOwnPropertyNames(e);var c=Object.getOwnPropertyNames(n.constructor),d={};for(l=0;l<s.length;l++)u=s[l],-1===c.indexOf(u)&&(d[u]=e[u]);return{bases:i,instanceMembers:a,classMembers:d}},subclass:function(i){return function(n){var o=r.declareDefinition(n,i);return t.mixin(e(o.bases,o.instanceMembers),o.classMembers)}},shared:function(e){return function(t,r){t[r]=e}}};return r}.apply(null,i))||(e.exports=n)},676:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(336)],void 0===(n=function(e,t,r,i,n,o){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){return e.call(this,t)||this}var n;return r(t,e),n=t,t.prototype.clone=function(){var e=this,t=e.name,r=e.fields,i=e.isAscending,o=e.isUnique,a=e.description;return new n({name:t,fields:r,isAscending:i,isUnique:o,description:a})},i([o.property({constructOnly:!0})],t.prototype,"name",void 0),i([o.property({constructOnly:!0})],t.prototype,"fields",void 0),i([o.property({constructOnly:!0})],t.prototype,"isAscending",void 0),i([o.property({constructOnly:!0})],t.prototype,"isUnique",void 0),i([o.property({constructOnly:!0})],t.prototype,"description",void 0),n=i([o.subclass("esri.layers.support.FeatureIndex")],t)}(o.declared(n));t.FeatureIndex=a,t.default=a}.apply(null,i))||(e.exports=n)},677:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(338),r(336),r(399),r(588)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.id=null,r.name=null,r.domains=null,r.templates=null,r}return r(t,e),t.prototype.readDomains=function(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];switch(i.type){case"range":t[r]=s.RangeDomain.fromJSON(i);break;case"codedValue":t[r]=s.CodedValueDomain.fromJSON(i);break;case"inherited":t[r]=s.InheritedDomain.fromJSON(i)}}return t},t.prototype.writeDomains=function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]&&e[i].toJSON());o.fixJson(r),t.domains=r},t.prototype.readTemplates=function(e){return e&&e.map(function(e){return new l(e)})},t.prototype.writeTemplates=function(e,t){t.templates=e&&e.map(function(e){return e.toJSON()})},i([a.property({json:{write:!0}})],t.prototype,"id",void 0),i([a.property({json:{write:!0}})],t.prototype,"name",void 0),i([a.property({json:{write:!0}})],t.prototype,"domains",void 0),i([a.reader("domains")],t.prototype,"readDomains",null),i([a.writer("domains")],t.prototype,"writeDomains",null),i([a.property({json:{write:!0}})],t.prototype,"templates",void 0),i([a.reader("templates")],t.prototype,"readTemplates",null),i([a.writer("templates")],t.prototype,"writeTemplates",null),i([a.subclass("esri.layers.support.FeatureType")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},678:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(336)],void 0===(n=function(e,t,r,i,n,o,a){var s=o({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(e){function t(t){var r=e.call(this,t)||this;return r.cardinality=null,r.id=null,r.keyField=null,r.name=null,r.relatedTableId=null,r}return r(t,e),i([a.property({json:{read:s.read,write:s.write}})],t.prototype,"cardinality",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"id",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"keyField",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"name",void 0),i([a.property({json:{read:!0,write:!0}})],t.prototype,"relatedTableId",void 0),i([a.subclass("esri.layers.support.Relationship")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},686:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(364),r(341),r(362),r(367),r(443),r(452),r(359),r(387)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u){var p=u.webMercator.x2lon,c=u.webMercator.y2lat,d=function(){function e(t){var r=e._checkUnsupported(t);if(r)throw r;this.spatialReference=t.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isWGS84=this.spatialReference.isWGS84,this.origin=[t.origin.x,t.origin.y],this.pixelSize=[t.size[0],t.size[1]],this.dpi=t.dpi;var i=t.lods.reduce(function(e,t,r){return t.level<e.min&&(e.min=t.level,e.minIndex=r),e.max=Math.max(e.max,t.level),e},{min:1/0,minIndex:0,max:-1/0}),n=t.lods[i.minIndex],o=Math.pow(2,n.level),a=n.resolution*o,s=n.scale*o;this.levels=new Array(i.max+1);for(var l=0;l<this.levels.length;l++)this.levels[l]={resolution:a,scale:s,tileSize:[a*t.size[0],a*t.size[1]]},a/=2,s/=2}return e.prototype.clone=function(){return new e(this.toTileInfo())},e.prototype.toTileInfo=function(){return new s({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:this.pixelSize,spatialReference:this.spatialReference,lods:this.levels.map(function(e,t){return{level:t,scale:e.scale,resolution:e.resolution}})})},e.prototype.getExtent=function(e,t,r,i,n){void 0===i&&(i=o.create());var a=this.levels[e],s=a.tileSize[0],u=a.tileSize[1];return i[0]=this.origin[0]+r*s,i[2]=i[0]+s,i[3]=this.origin[1]-t*u,i[1]=i[3]-u,n&&(this._isWebMercator?(n[0]=p(i[0]),n[1]=c(i[1]),n[2]=p(i[2]),n[3]=c(i[3])):this._isWGS84&&(n[0]=l.deg2rad(i[0]),n[1]=l.deg2rad(i[1]),n[2]=l.deg2rad(i[2]),n[3]=l.deg2rad(i[3]))),i},e.prototype.getExtentGeometry=function(e,t,i,n){return void 0===n&&(n=new r.Extent),this.getExtent(e,t,i,y),n.spatialReference=this.spatialReference,n.xmin=y[0],n.ymin=y[1],n.xmax=y[2],n.ymax=y[3],n.zmin=void 0,n.zmax=void 0,n},e.prototype.ensureMaxLod=function(e){for(;this.levels.length<=e;){var t=this.levels[this.levels.length-1],r=t.resolution/2;this.levels.push({resolution:r,scale:t.scale/2,tileSize:[r*this.pixelSize[0],r*this.pixelSize[1]]})}},e.prototype.capMaxLod=function(e){this.levels.length>e+1&&(this.levels.length=e+1)},e.prototype.getMaxLod=function(){return this.levels.length-1},e.prototype.scaleAtLevel=function(e){return this.levels[0].scale/Math.pow(2,e)},e.prototype.levelAtScale=function(e){var t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E},e.prototype.resolutionAtLevel=function(e){return this.levels[0].resolution/Math.pow(2,e)},e.prototype.compatibleWith=function(t){if(!(t instanceof e)){if(e._checkUnsupported(t))return!1;t=new e(t)}if(!t.spatialReference.equals(this.spatialReference))return!1;if(t.pixelSize[0]!==this.pixelSize[0]||t.pixelSize[1]!==this.pixelSize[1])return!1;var r=Math.min(this.levels.length,t.levels.length)-1,i=this.levels[r].resolution,n=.5*i;if(!l.floatEqualAbsolute(t.origin[0],this.origin[0],n)||!l.floatEqualAbsolute(t.origin[1],this.origin[1],n))return!1;var o=Math.max(this.pixelSize[0],this.pixelSize[1]);return n=.5*i/Math.pow(2,r)/o*12,l.floatEqualAbsolute(i,t.levels[r].resolution,n)},e.prototype.rootTilesInExtent=function(t,r,i){var n=this.levels[0].tileSize;e.computeRowColExtent(t,n,this.origin,y);var o=y[1],a=y[3],s=y[0],l=y[2],u=l-s,p=a-o;if(u*p>i){var c=Math.floor(Math.sqrt(i));p>c&&(a=(o=o+Math.floor(.5*p)-Math.floor(.5*c))+c),u>c&&(l=(s=s+Math.floor(.5*u)-Math.floor(.5*c))+c)}for(var d=new Array((l-s)*(a-o)),f=0,h=o;h<a;h++)for(var m=s;m<l;m++)d[f++]=[0,h,m];return r&&(r[0]=this.origin[0]+s*n[0],r[1]=this.origin[1]-a*n[1],r[2]=this.origin[0]+l*n[0],r[3]=this.origin[1]-o*n[1]),d},e.computeRowColExtent=function(e,t,r,i){var n=.001*(e[2]-e[0]+(e[3]-e[1]));i[0]=Math.floor((e[0]+n-r[0])/t[0]),i[2]=Math.ceil((e[2]-n-r[0])/t[0]),i[1]=Math.floor((r[1]-e[3]+n)/t[1]),i[3]=Math.ceil((r[1]-e[1]-n)/t[1])},e.isPowerOfTwo=function(e){var t=e.lods,r=t[0].resolution*Math.pow(2,t[0].level);return!t.some(function(e){return!l.floatEqualRelative(e.resolution,r/Math.pow(2,e.level))})},e.hasGapInLevels=function(e){var t=e.lods.map(function(e){return e.level});t.sort(function(e,t){return e-t});for(var r=1;r<t.length;r++)if(t[r]!==t[0]+r)return!0;return!1},e.tileSizeSupported=function(e){var t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512},e._checkUnsupported=function(t){return t?t.lods.length<1?new i("tilingscheme:generic","Tiling scheme must have at least one level"):e.isPowerOfTwo(t)?null:new i("tilingscheme:power-of-two","Tiling scheme must be power of two"):new i("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")},e.checkUnsupported=function(t){return e._checkUnsupported(t)||(e.hasGapInLevels(t)?new i("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):e.tileSizeSupported(t)?null:new i("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"))},e.fromExtent=function(t,r){var i=t[2]-t[0],n=t[3]-t[1],o=a.getMetersPerUnitForSR(r),l=1.2*Math.max(i,n),u=new e(new s({size:[256,256],origin:{x:t[0]-.5*(l-i),y:t[3]+.5*(l-n)},lods:[{level:0,resolution:l/256,scale:1/(256/96*.0254/(l*o))}],spatialReference:r}));return u.ensureMaxLod(20),u},e.makeWebMercatorAuxiliarySphere=function(t){void 0===t&&(t=19);var r=new e(e.WebMercatorAuxiliarySphereTileInfo);return r.ensureMaxLod(t),r},e.makeWGS84WithTileSize=function(t,r){void 0===r&&(r=16);var i=256/t,o=new e(new s({size:[t,t],origin:{x:-180,y:90,spatialReference:n.WGS84},spatialReference:n.WGS84,lods:[{level:0,resolution:.703125*i,scale:295497598.570834*i}]}));return o.ensureMaxLod(r),o},e.WebMercatorAuxiliarySphereTileInfo=new s({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:n.WebMercator},spatialReference:n.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),e.WebMercatorAuxiliarySphere=e.makeWebMercatorAuxiliarySphere(19),e}(),y=o.create();return d}.apply(null,i))||(e.exports=n)},691:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(434),r(364),r(350),r(339),r(349),r(336),r(398),r(695),r(865),r(433),r(432),r(438),r(426),r(866),r(782),r(394)],void 0===(n=function(e,t,i,n,o,a,s,l,u,p,c,d,y,f,h,m,v,g,b,w,S){var _=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];return function(e){function t(t,r){var i=e.call(this)||this;return i.spatialReference=null,i.sublayers=null,i.type="tile",i.url=null,i}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(function(){return e._fetchService()})),this.when()},Object.defineProperty(t.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operationalLayerType",{get:function(){if(this.capabilities)return this.capabilities.operations.supportsExportMap?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var e=this.url||this.portalItem&&this.portalItem.url;return e&&/\/ImageServer(\/|\/?$)/i.test(e)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"},enumerable:!0,configurable:!0}),t.prototype.readSpatialReference=function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&s.SpatialReference.fromJSON(e)},Object.defineProperty(t.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!0,configurable:!0}),t.prototype.castTileServers=function(e){return Array.isArray(e)?e.map(function(e){return p.urlToObject(e).path}):null},t.prototype.fetchTile=function(e,t,r,i){var n=this.getTileUrl(e,t,r),o={responseType:"image"};return i&&i.timestamp&&(o.query={_ts:i.timestamp}),l(n,o).then(function(e){return e.data})},t.prototype.getTileUrl=function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,o=a.objectToQuery(i({},this.parsedUrl.query,{blankTile:!n&&null,token:this.token?encodeURIComponent(this.token):null})),s=this.tileServers;return(s&&s.length?s[t%s.length]:this.parsedUrl.path)+"/tile/"+e+"/"+t+"/"+r+(o?"?"+o:"")},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return u.create(function(e){return Promise.all([r.e(5),r.e(12)]).then(function(){var t=[r(983)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return u.create(function(e){return Promise.all([r.e(11),r.e(16),r.e(82)]).then(function(){var t=[r(898)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._fetchService=function(){var e=this;return u.create(function(t,r){e.resourceInfo?t({data:e.resourceInfo}):l(e.parsedUrl.path,{query:i({f:"json"},e.parsedUrl.query),responseType:"json"}).then(t,r)}).then(function(t){if(t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl}),10.1===e.version&&!S.isHostedAgolService(e.url))return w.fetchServerVersion(e.url).then(function(t){e.read({currentVersion:t})}).catch(function(){})})},t.prototype._getMapName=function(e){var t=e.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]},t.prototype._getDefaultAttribution=function(e){if(e){var t;e=e.toLowerCase();for(var r=0,i=_.length;r<i;r++)if((t=_[r]).toLowerCase().indexOf(e)>-1)return p.makeAbsolute("//static.arcgis.com/attribution/"+t)}},t.prototype._getDefaultTileServers=function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),r=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]},o([c.property({readOnly:!0,dependsOn:["parsedUrl"]})],t.prototype,"attributionDataUrl",null),o([c.property({readOnly:!0})],t.prototype,"operationalLayerType",null),o([c.property()],t.prototype,"popupTemplates",void 0),o([c.property({type:s.SpatialReference})],t.prototype,"spatialReference",void 0),o([c.reader("spatialReference",["spatialReference","tileInfo"])],t.prototype,"readSpatialReference",null),o([c.property()],t.prototype,"resourceInfo",void 0),o([c.property({readOnly:!0})],t.prototype,"sublayers",void 0),o([c.property({dependsOn:["parsedUrl"],readOnly:!0})],t.prototype,"tileServers",null),o([c.cast("tileServers")],t.prototype,"castTileServers",null),o([c.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),o([c.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:p.writeOperationalLayerUrl}}}}})],t.prototype,"url",void 0),o([c.subclass("esri.layers.TileLayer")],t)}(c.declared(d,b.default,f,y,g,h,m,v))}.apply(null,i))||(e.exports=n)},695:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(364),r(336),r(436),r(452),r(732)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.copyright=null,t.minScale=0,t.maxScale=0,t.spatialReference=null,t.tileInfo=null,t.tilemapCache=null,t}return i(t,e),Object.defineProperty(t.prototype,"supportsBlankTile",{get:function(){return this.version>=10.2},enumerable:!0,configurable:!0}),t.prototype.readTileInfo=function(e,t){var r=function(e){return Math.round(1e4*e)/1e4},i=t.minScale?r(t.minScale):1/0,n=t.maxScale?r(t.maxScale):-1/0;return e?(e.lods=e.lods.filter(function(e){var t=r(e.scale);return t<=i&&t>=n}),l.fromJSON(e)):null},t.prototype.readTilemapCache=function(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new u({layer:this}):null},n([a.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),n([a.property({json:{origins:{service:{read:!1}}}})],t.prototype,"minScale",void 0),n([a.property({json:{origins:{service:{read:!1}}}})],t.prototype,"maxScale",void 0),n([a.property({type:o.SpatialReference})],t.prototype,"spatialReference",void 0),n([a.property({readOnly:!0,dependsOn:["version"]})],t.prototype,"supportsBlankTile",null),n([a.property({type:l})],t.prototype,"tileInfo",void 0),n([a.reader("service","tileInfo",["tileInfo","minScale","maxScale"])],t.prototype,"readTileInfo",null),n([a.property()],t.prototype,"tilemapCache",void 0),n([a.reader("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),n([a.property()],t.prototype,"version",void 0),n([a.subclass("esri.layers.mixins.ArcGISCachedService")],t)}(a.declared(s))}.apply(null,i))||(e.exports=n)},701:function(e,t,r){var i,n;i=[r(351),r(338),r(354),r(458),r(586)],void 0===(n=function(e,t,r,i,n){var o={width:12,height:12,angle:0,xoffset:0,yoffset:0},a=e(i,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:n.urlPropertyDefinition,source:n.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(e,t){return t.size||e}},write:!0},cast:r.toPt},width:{json:{read:{source:["width","size"],reader:function(e,t){return t.size||e}},write:!0},cast:r.toPt},size:{json:{write:!1}}},getDefaults:function(){return t.mixin(this.inherited(arguments),o)},normalizeCtorArgs:function(e,t,i){if(e&&"string"!=typeof e&&null==e.imageData)return e;var n={};return e&&(n.url=e),null!=t&&(n.width=r.toPt(t)),null!=i&&(n.height=r.toPt(i)),n},clone:function(){var e=new a({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",t.clone(this.source)),e}});return a.defaultProps=o,a}.apply(null,i))||(e.exports=n)},702:function(e,t,r){var i,n;i=[r(351),r(338),r(457),r(402)],void 0===(n=function(e,t,r,i){var n={style:"solid",outline:new i,color:[0,0,0,.25]},o=e(r,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(e){return t.valueOf(this._styles,e)||void 0},write:function(e,t){t.style=this._styles[e]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return t.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(e,t,r){if(e&&"string"!=typeof e)return e;var i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i},clone:function(){return new o({color:t.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});return t.mixin(o,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"}),o.defaultProps=n,o}.apply(null,i))||(e.exports=n)},703:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(434),r(356),r(350),r(341),r(339),r(349),r(336),r(625),r(398),r(695),r(433),r(432),r(804)],void 0===(n=function(e,t,i,n,o,a,s,l,u,p,c,d,y,f,h,m,v,g){return function(e){function t(t){var r=e.call(this)||this;return r.copyright=null,r.heightModelInfo=null,r.opacity=1,r.operationalLayerType="ArcGISTiledElevationServiceLayer",r.type="elevation",r.url=null,r}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},Object.defineProperty(t.prototype,"minScale",{get:function(){},set:function(e){this.constructed&&s.deprecated(this.declaredClass+".minScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScale",{get:function(){},set:function(e){this.constructed&&s.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new u("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}}).always(function(){return e._fetchImageService()})),this.when()},t.prototype.fetchTile=function(e,t,r,i){var n=this;return void 0===i&&(i=0),this.load().then(function(){return n._fetchTileAvailability(e,t,r)}).then(function(){return l(n.getTileUrl(e,t,r),{responseType:"array-buffer"})}).then(function(e){var t=g.decode(e.data,{noDataValue:i,returnFileInfo:!0});return{values:t.pixelData,width:t.width,height:t.height,maxZError:t.fileInfo.maxZError,noDataValue:t.noDataValue}})},t.prototype.getTileUrl=function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,o=a.objectToQuery(i({},this.parsedUrl.query,{blankTile:!n&&null}));return this.parsedUrl.path+"/tile/"+e+"/"+t+"/"+r+(o?"?"+o:"")},t.prototype.queryElevation=function(e,t){var i=this;return p.create(function(e){return r.e(41).then(function(){var t=[r(783)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(r){return(new r.ElevationQuery).query(i,e,t)})},t.prototype.createElevationSampler=function(e,t){var i=this;return p.create(function(e){return r.e(41).then(function(){var t=[r(783)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(r){return(new r.ElevationQuery).createSampler(i,e,t)})},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return p.reject(new u("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case"3d":return p.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(65)]).then(function(){var t=[r(1101)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._fetchTileAvailability=function(e,t,r){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r):p.resolve("unknown")},t.prototype._fetchImageService=function(){var e=this;return p.resolve().then(function(){if(e.resourceInfo)return e.resourceInfo;var t={query:i({f:"json"},e.parsedUrl.query),responseType:"json"};return l(e.parsedUrl.path,t)}).then(function(t){t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl})})},o([d.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),o([d.property({readOnly:!0,type:y})],t.prototype,"heightModelInfo",void 0),o([d.property({json:{read:!1,write:!1}})],t.prototype,"minScale",null),o([d.property({json:{read:!1,write:!1}})],t.prototype,"maxScale",null),o([d.property({json:{read:!1,write:!1}})],t.prototype,"opacity",void 0),o([d.property()],t.prototype,"operationalLayerType",void 0),o([d.property()],t.prototype,"resourceInfo",void 0),o([d.property({json:{read:!1},value:"elevation",readOnly:!0})],t.prototype,"type",void 0),o([d.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:c.writeOperationalLayerUrl}}}}})],t.prototype,"url",void 0),o([d.subclass("esri.layers.ElevationLayer")],t)}(d.declared(f,h,m,v))}.apply(null,i))||(e.exports=n)},704:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t){if(void 0===e&&(e=0),this.sizeOfFunction=function(){return 1},this._sizeOf=0,this._cache=new Map,this._queue=[],e<=0)throw new Error("LRU cache size must be bigger than zero!");this._maxSize=e,t&&(t.disposeFunction&&(this.disposeFunction=t.disposeFunction),t.sizeOfFunction&&(this.sizeOfFunction=t.sizeOfFunction))}return Object.defineProperty(e.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=this;this._queue.length=0,this.disposeFunction&&this._cache.forEach(function(t,r){e.disposeFunction(r,t)}),this._cache.clear(),this._sizeOf=0},e.prototype.delete=function(e){var t=this._cache.get(e);return!!this._cache.delete(e)&&(this._sizeOf-=this.sizeOfFunction(t),this._queue.splice(this._queue.indexOf(e),1),this.disposeFunction&&this.disposeFunction(e,t),!0)},e.prototype.forEach=function(e,t){this._cache.forEach(e,t)},e.prototype.get=function(e){var t=this._cache.get(e);if(void 0!==t)return this._queue.splice(this._queue.indexOf(e),1),this._queue.unshift(e),t},e.prototype.has=function(e){return this._cache.has(e)},e.prototype.set=function(e,t){var r=this.get(e);return void 0!==r?this._sizeOf-=this.sizeOfFunction(r):this._queue.unshift(e),this._sizeOf+=this.sizeOfFunction(t),this._cache.set(e,t),this._collect(),this},e.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var e=this._queue.pop(),t=this._cache.get(e);this._cache.delete(e)&&(this._sizeOf-=this.sizeOfFunction(t),this.disposeFunction&&this.disposeFunction(e,t))}},e}()}.apply(null,i))||(e.exports=n)},721:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(357),r(365),r(336)],void 0===(n=function(e,t,r,i,n,o,a){return function(e){function t(t){var r=e.call(this)||this;return r._handles=new o,r.root=null,r.refresh=r.refresh.bind(r),r.updateCollections=r.updateCollections.bind(r),r}return r(t,e),t.prototype.initialize=function(){var e=this;this._handles.add(this.rootCollectionNames.map(function(t){return e.watch("root."+t,e.updateCollections,!0)})),this.updateCollections()},t.prototype.destroy=function(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null},t.prototype.updateCollections=function(){var e=this;this._collections=this.rootCollectionNames.map(function(t){return e.get("root."+t)}).filter(function(e){return null!=e}),this.refresh()},t.prototype.refresh=function(){var e=this._handles;e.remove("collections"),this.removeAll();for(var t=this._collections.slice(),r=0,i=this._collections;r<i.length;r++){var n=i[r];this._processCollection(t,this,n)}for(var o=0,a=t;o<a.length;o++){var s=a[o];e.add(s.on("after-changes",this.refresh),"collections")}},t.prototype._createNewInstance=function(e){return new n(e)},t.prototype._processCollection=function(e,t,r){var i=this;r&&(e.push(r),r.forEach(function(r){r&&(t.push(r),i._processCollection(e,t,i.getChildrenFunction(r)))}))},i([a.property()],t.prototype,"rootCollectionNames",void 0),i([a.property()],t.prototype,"root",void 0),i([a.property()],t.prototype,"getChildrenFunction",void 0),i([a.subclass("esri.core.CollectionFlattener")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},730:function(e,t,r){var i={"./af":463,"./af.js":463,"./ar":464,"./ar-dz":465,"./ar-dz.js":465,"./ar-kw":466,"./ar-kw.js":466,"./ar-ly":467,"./ar-ly.js":467,"./ar-ma":468,"./ar-ma.js":468,"./ar-sa":469,"./ar-sa.js":469,"./ar-tn":470,"./ar-tn.js":470,"./ar.js":464,"./az":471,"./az.js":471,"./be":472,"./be.js":472,"./bg":473,"./bg.js":473,"./bm":474,"./bm.js":474,"./bn":475,"./bn.js":475,"./bo":476,"./bo.js":476,"./br":477,"./br.js":477,"./bs":478,"./bs.js":478,"./ca":479,"./ca.js":479,"./cs":480,"./cs.js":480,"./cv":481,"./cv.js":481,"./cy":482,"./cy.js":482,"./da":483,"./da.js":483,"./de":484,"./de-at":485,"./de-at.js":485,"./de-ch":486,"./de-ch.js":486,"./de.js":484,"./dv":487,"./dv.js":487,"./el":488,"./el.js":488,"./en-au":489,"./en-au.js":489,"./en-ca":490,"./en-ca.js":490,"./en-gb":491,"./en-gb.js":491,"./en-ie":492,"./en-ie.js":492,"./en-il":493,"./en-il.js":493,"./en-nz":494,"./en-nz.js":494,"./eo":495,"./eo.js":495,"./es":496,"./es-do":497,"./es-do.js":497,"./es-us":498,"./es-us.js":498,"./es.js":496,"./et":499,"./et.js":499,"./eu":500,"./eu.js":500,"./fa":501,"./fa.js":501,"./fi":502,"./fi.js":502,"./fo":503,"./fo.js":503,"./fr":504,"./fr-ca":505,"./fr-ca.js":505,"./fr-ch":506,"./fr-ch.js":506,"./fr.js":504,"./fy":507,"./fy.js":507,"./gd":508,"./gd.js":508,"./gl":509,"./gl.js":509,"./gom-latn":510,"./gom-latn.js":510,"./gu":511,"./gu.js":511,"./he":512,"./he.js":512,"./hi":513,"./hi.js":513,"./hr":514,"./hr.js":514,"./hu":515,"./hu.js":515,"./hy-am":516,"./hy-am.js":516,"./id":517,"./id.js":517,"./is":518,"./is.js":518,"./it":519,"./it.js":519,"./ja":520,"./ja.js":520,"./jv":521,"./jv.js":521,"./ka":522,"./ka.js":522,"./kk":523,"./kk.js":523,"./km":524,"./km.js":524,"./kn":525,"./kn.js":525,"./ko":526,"./ko.js":526,"./ky":527,"./ky.js":527,"./lb":528,"./lb.js":528,"./lo":529,"./lo.js":529,"./lt":530,"./lt.js":530,"./lv":531,"./lv.js":531,"./me":532,"./me.js":532,"./mi":533,"./mi.js":533,"./mk":534,"./mk.js":534,"./ml":535,"./ml.js":535,"./mn":536,"./mn.js":536,"./mr":537,"./mr.js":537,"./ms":538,"./ms-my":539,"./ms-my.js":539,"./ms.js":538,"./mt":540,"./mt.js":540,"./my":541,"./my.js":541,"./nb":542,"./nb.js":542,"./ne":543,"./ne.js":543,"./nl":544,"./nl-be":545,"./nl-be.js":545,"./nl.js":544,"./nn":546,"./nn.js":546,"./pa-in":547,"./pa-in.js":547,"./pl":548,"./pl.js":548,"./pt":549,"./pt-br":550,"./pt-br.js":550,"./pt.js":549,"./ro":551,"./ro.js":551,"./ru":552,"./ru.js":552,"./sd":553,"./sd.js":553,"./se":554,"./se.js":554,"./si":555,"./si.js":555,"./sk":556,"./sk.js":556,"./sl":557,"./sl.js":557,"./sq":558,"./sq.js":558,"./sr":559,"./sr-cyrl":560,"./sr-cyrl.js":560,"./sr.js":559,"./ss":561,"./ss.js":561,"./sv":562,"./sv.js":562,"./sw":563,"./sw.js":563,"./ta":564,"./ta.js":564,"./te":565,"./te.js":565,"./tet":566,"./tet.js":566,"./tg":567,"./tg.js":567,"./th":568,"./th.js":568,"./tl-ph":569,"./tl-ph.js":569,"./tlh":570,"./tlh.js":570,"./tr":571,"./tr.js":571,"./tzl":572,"./tzl.js":572,"./tzm":573,"./tzm-latn":574,"./tzm-latn.js":574,"./tzm.js":573,"./ug-cn":575,"./ug-cn.js":575,"./uk":576,"./uk.js":576,"./ur":577,"./ur.js":577,"./uz":578,"./uz-latn":579,"./uz-latn.js":579,"./uz.js":578,"./vi":580,"./vi.js":580,"./x-pseudo":581,"./x-pseudo.js":581,"./yo":582,"./yo.js":582,"./zh-cn":583,"./zh-cn.js":583,"./zh-hk":584,"./zh-hk.js":584,"./zh-tw":585,"./zh-tw.js":585};function n(e){var t=o(e);return r(t)}function o(e){var t=i[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id=730},732:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(434),r(350),r(346),r(341),r(365),r(343),r(704),r(407),r(339),r(377),r(336),r(803)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d,y,f,h,m){var v=p.getLogger("esri.layers.support.TilemapCache");return function(e){function t(t){var r=e.call(this)||this;return r._handles=new u,r._pendingTilemapRequests={},r._availableLevels={},r.levels=5,r.cacheByteSize=2097152,r.request=a,r}var s;return i(t,e),s=t,t.prototype.initialize=function(){var e=this;this._tilemapCache=new c(this.cacheByteSize,{sizeOfFunction:function(e){return e.byteSize}}),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],function(){return e._initializeTilemapDefinition()}),f.init(this,"layer.tileInfo.lods",function(t){return e._initializeAvailableLevels(t)},!0)]),this._initializeTilemapDefinition()},t.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},t.prototype.castLevels=function(e){return e<=2?(v.error("Minimum levels for Tilemap is 3, but got ",e),3):e},Object.defineProperty(t.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0}),t.prototype.getTilemap=function(e,t,r){return this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition)},t.prototype.fetchTilemap=function(e,t,r,i){var n=this;if(!this._availableLevels[e])return y.reject(new l("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"));var o=this._tmpTilemapDefinition,a=this._tilemapFromCache(e,t,r,o);if(a)return y.resolve(a);var s=m.tilemapDefinitionId(o),u=this._pendingTilemapRequests[s];return u||(u=m.Tilemap.fromDefinition(o,i).then(function(e){return n._tilemapCache.set(s,e),delete n._pendingTilemapRequests[s],e}).catch(function(e){return delete n._pendingTilemapRequests[s],y.reject(e)}),this._pendingTilemapRequests[s]=u),y.create(function(e,t){u.then(e,t)})},t.prototype.getAvailability=function(e,t,r){if(!this._availableLevels[e])return"unavailable";var i=this.getTilemap(e,t,r);return i?i.getAvailability(t,r):"unknown"},t.prototype.getAvailabilityUpsample=function(e,t,r,i){i.level=e,i.row=t,i.col=r;var n=this.layer.tileInfo;for(n.updateTileInfo(i);;){var o=this.getAvailability(i.level,i.row,i.col);if("unavailable"!==o)return o;if(!n.upsampleTile(i))return"unavailable"}},t.prototype.fetchAvailability=function(e,t,r,i){return this._availableLevels[e]?this.fetchTilemap(e,t,r,i).always(function(i){if(i instanceof m.Tilemap){var n=i.getAvailability(t,r);return"unavailable"===n?y.reject(new l("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):n}return i&&"cancel"===i.dojoType?y.reject(i):"unknown"}):y.reject(new l("tilemap-cache:level-unavailable","Level "+e+" is unavailable in the service"))},t.prototype.fetchAvailabilityUpsample=function(e,t,r,i,n){var o=this;i.level=e,i.row=t,i.col=r;var a=this.layer.tileInfo;a.updateTileInfo(i);for(var l=this.fetchAvailability(e,t,r,n).catch(function(e){return e&&"cancel"===e.dojoType?y.reject(e):a.upsampleTile(i)?o.fetchAvailabilityUpsample(i.level,i.row,i.col,i):y.reject(e)}),u={id:i.id,level:e,row:t,col:r},p=this,c=0;s._prefetches.length<s._maxPrefetch&&a.upsampleTile(u);++c)!function(e){var t=p.fetchAvailability(u.level,u.row,u.col,n);s._prefetches.push(t),l.always(function(){return t.cancel()}),t.always(function(){return s._prefetches.removeUnordered(t)})}();return l},t.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var e=this.layer.parsedUrl,t=e.query;t&&t.token||!this.layer.token||(t=r({},t,{token:this.layer.token})),this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?o.objectToQuery(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}},t.prototype._tilemapFromCache=function(e,t,r,i){var n=this._getTilemapDefinition(e,t,r,i),o=m.tilemapDefinitionId(n);return this._tilemapCache.get(o)},t.prototype._getTilemapDefinition=function(e,t,r,i){return i.level=e,i.row=t-t%this.size,i.col=r-r%this.size,i},t.prototype._initializeAvailableLevels=function(e){var t=this;this._availableLevels={},e&&e.forEach(function(e){return t._availableLevels[e.level]=!0})},t._maxPrefetch=4,t._prefetches=new d({initialSize:s._maxPrefetch}),n([h.property({constructOnly:!0,type:Number})],t.prototype,"levels",void 0),n([h.cast("levels")],t.prototype,"castLevels",null),n([h.property({readOnly:!0,dependsOn:["levels"],type:Number})],t.prototype,"size",null),n([h.property({constructOnly:!0,type:Number})],t.prototype,"cacheByteSize",void 0),n([h.property({constructOnly:!0})],t.prototype,"layer",void 0),n([h.property({constructOnly:!0})],t.prototype,"request",void 0),s=n([h.subclass("esri.layers.support.TilemapCache")],t)}(h.declared(s))}.apply(null,i))||(e.exports=n)},734:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(339),r(377),r(336),r(777),r(649)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return r(t,e),t.prototype.postscript=function(e){this.inherited(arguments),s.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return n.create(function(t,r){o.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var i=s.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);i?r(i):t()})})},i([a.property()],t.prototype,"view",void 0),i([a.property()],t.prototype,"slicePlaneEnabled",void 0),i([a.subclass("esri.views.3d.layers.LayerView3D")],t)}(a.declared(l))}.apply(null,i))||(e.exports=n)},736:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(350),r(341),r(428),r(339),r(349),r(349),r(336),r(363),r(362),r(398),r(695),r(433),r(432),r(426),r(452),r(732),r(1030),r(976),r(998),r(974)],void 0===(n=function(e,t,i,n,o,a,s,l,u,p,c,d,y,f,h,m,v,g,b,w,S,_,j,x,O){return function(e){function t(t,r){var i=e.call(this)||this;return i.capabilities=null,i.currentStyleInfo=null,i.fullExtent=null,i.style=null,i.operationalLayerType="VectorTileLayer",i.tileInfo=null,i.tilemapCache=null,i.type="vector-tile",i.url=null,i}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(){var e=this,t=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1}).then(function(){if(e.portalItem&&e.portalItem.id){var t=e.portalItem.itemUrl+"/resources/styles/root.json";return a(t,{query:{f:"json"}}).then(function(r){r.data&&e.read({url:t},j.createForItem(e.portalItem))})}}).always(function(){return e.loadStyle()});return this.addResolvingPromise(t),this.when()},Object.defineProperty(t.prototype,"attributionDataUrl",{get:function(){var e=this.currentStyleInfo,t=e&&e.serviceUrl&&c.urlToObject(e.serviceUrl);return t?this._getDefaultAttribution(t.path):null},enumerable:!0,configurable:!0}),t.prototype.readCapabilities=function(e,t){var r=t.capabilities&&t.capabilities.split(",").map(function(e){return e.toLowerCase().trim()}),i=!!t.exportTilesAllowed;return{operations:{supportsExportTiles:i,supportsTileMap:-1!==r.indexOf("tilemap")},exportTiles:i?{maxExportTilesCount:+t.maxExportTilesCount}:null}},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){return this.serviceUrl?p.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0}),t.prototype.writeStyleUrl=function(e,t){e&&c.isProtocolRelative(e)&&(e="https:"+e),t.styleUrl=e},t.prototype.readTileIndexType=function(e,t){return t.type},t.prototype.readTileIndexUrl=function(e,t){return c.join(this.serviceUrl,t.tileMap)},t.prototype.readTilemapCache=function(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new S({layer:this}):null},t.prototype.readTileServers=function(e,t){var r=t.tiles,i=this.serviceUrl||this.styleUrl&&c.removeFile(this.styleUrl);return i&&r.forEach(function(e,t,r){c.isAbsolute(e)?r[t]=e:r[t]=c.join(i,e)}),r},t.prototype.readVersion=function(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)},t.prototype.readCompatibleTileInfo256=function(e,t){return w.fromJSON(x.create256x256CompatibleTileInfo(t.tileInfo))},t.prototype.readCompatibleTileInfo512=function(e,t){return w.fromJSON(x.create512x512CompatibleTileInfo(t.tileInfo))},t.prototype.loadStyle=function(e){var t=e||this.style||this.url;if(this._loadingPromise&&"string"==typeof t&&this.url===t)return this._loadingPromise;var r=this._loadingPromise;return this._loadingPromise=this._getSourceAndStyle(t),r&&!r.isFulfilled()&&r.cancel(),this._loadingPromise},t.prototype.getTileUrl=function(e,t,r){var i=this.tileServers[t%this.tileServers.length];return i.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,t.toString()).replace(/\{x\}/gi,r.toString())},t.prototype.write=function(e,t){return t&&t.origin&&!this.styleUrl?(t.messages&&t.messages.push(new s("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[e,t])},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return u.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(4),r.e(6),r.e(68)]).then(function(){var t=[r(1406)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return u.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(59)]).then(function(){var t=[r(1409)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._getSourceAndStyle=function(e){var t=this;return e?_.loadMetadata(e).then(function(r){t._set("currentStyleInfo",{serviceUrl:r.serviceUrl,styleUrl:r.styleUrl,spriteUrl:r.spriteUrl,glyphsUrl:r.glyphsUrl,style:r.style,layerDefinition:r.layerDefinition}),"string"==typeof e?(t.url=e,t.style=null):(t.url=null,t.style=e),t._set("styleRepository",new O(r.style,r)),t.read(r.layerDefinition,{origin:"service"})}):u.reject(new Error("invalid style!"))},t.prototype._getDefaultAttribution=function(e){var t=e.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(t){var r=t[3]&&t[3].toLowerCase();if(r)for(var i=t[2]||"",n=0,o=["OpenStreetMap_v2","OpenStreetMap_Export_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84"];n<o.length;n++){var a=o[n];if(a.toLowerCase().indexOf(r)>-1)return c.normalize("//static.arcgis.com/attribution/Vector"+i+"/"+a)}}},o([d.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],t.prototype,"attributionDataUrl",null),o([d.property({readOnly:!0})],t.prototype,"capabilities",void 0),o([d.reader("capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount"])],t.prototype,"readCapabilities",null),o([d.property({readOnly:!0})],t.prototype,"currentStyleInfo",void 0),o([d.property({type:y,readOnly:!0})],t.prototype,"fullExtent",void 0),o([d.property()],t.prototype,"style",void 0),o([d.property({readOnly:!0,dependsOn:["serviceUrl"]})],t.prototype,"parsedUrl",null),o([d.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],t.prototype,"serviceUrl",null),o([d.property({type:f,dependsOn:["tileInfo"],readOnly:!0})],t.prototype,"spatialReference",null),o([d.property({readOnly:!0})],t.prototype,"styleRepository",void 0),o([d.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],t.prototype,"styleUrl",null),o([d.writer(["portal-item","web-document"],"styleUrl")],t.prototype,"writeStyleUrl",null),o([d.property({readOnly:!0})],t.prototype,"tileIndexType",void 0),o([d.reader("tileIndexType",["tileIndexType","type"])],t.prototype,"readTileIndexType",null),o([d.property({readOnly:!0})],t.prototype,"tileIndexUrl",void 0),o([d.reader("tileIndexUrl",["tileIndexUrl","tileMap"])],t.prototype,"readTileIndexUrl",null),o([d.property({readOnly:!0,type:w})],t.prototype,"tileInfo",void 0),o([d.property({readOnly:!0,type:S})],t.prototype,"tilemapCache",void 0),o([d.reader("tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),o([d.property({readOnly:!0})],t.prototype,"tileServers",void 0),o([d.reader("tileServers",["tiles"])],t.prototype,"readTileServers",null),o([d.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],t.prototype,"type",void 0),o([d.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],t.prototype,"url",void 0),o([d.property({readOnly:!0})],t.prototype,"version",void 0),o([d.reader("version",["version","currentVersion"])],t.prototype,"readVersion",null),o([d.property({readOnly:!0})],t.prototype,"compatibleTileInfo256",void 0),o([d.reader("compatibleTileInfo256",["tileInfo"])],t.prototype,"readCompatibleTileInfo256",null),o([d.property({readOnly:!0})],t.prototype,"compatibleTileInfo512",void 0),o([d.reader("compatibleTileInfo512",["tileInfo"])],t.prototype,"readCompatibleTileInfo512",null),o([d.subclass("esri.layers.VectorTileLayer")],t)}(d.declared(h,v,g,b,l,m))}.apply(null,i))||(e.exports=n)},751:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(339)],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.layerLookupMap={CSVLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(22)]).then(function(){var t=[r(911)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ElevationLayer:function(){return i.create(function(e){return r.e(35).then(function(){var t=[r(703)];e.apply(null,t)}.bind(this)).catch(r.oe)})},FeatureLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(25)]).then(function(){var t=[r(331)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GroupLayer:function(){return i.create(function(e){return r.e(17).then(function(){var t=[r(714)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GeoRSSLayer:function(){return i.create(function(e){return r.e(36).then(function(){var t=[r(912)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ImageryLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(2),r.e(26),r.e(48)]).then(function(){var t=[r(908)];e.apply(null,t)}.bind(this)).catch(r.oe)})},KMLLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(14),r.e(31),r.e(49)]).then(function(){var t=[r(913)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapImageLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(21)]).then(function(){var t=[r(909)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapNotesLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(73)]).then(function(){var t=[r(1035)];e.apply(null,t)}.bind(this)).catch(r.oe)})},OpenStreetMapLayer:function(){return i.create(function(e){return r.e(39).then(function(){var t=[r(914)];e.apply(null,t)}.bind(this)).catch(r.oe)})},PointCloudLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(28),r.e(50)]).then(function(){var t=[r(915)];e.apply(null,t)}.bind(this)).catch(r.oe)})},SceneLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(23)]).then(function(){var t=[r(795)];e.apply(null,t)}.bind(this)).catch(r.oe)})},IntegratedMeshLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(43)]).then(function(){var t=[r(763)];e.apply(null,t)}.bind(this)).catch(r.oe)})},StreamLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(24)]).then(function(){var t=[r(910)];e.apply(null,t)}.bind(this)).catch(r.oe)})},TileLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(3),r.e(2),r.e(71)]).then(function(){var t=[r(691)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnknownLayer:function(){return i.create(function(e){return r.e(100).then(function(){var t=[r(1036)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnsupportedLayer:function(){return i.create(function(e){return r.e(101).then(function(){var t=[r(1037)];e.apply(null,t)}.bind(this)).catch(r.oe)})},VectorTileLayer:function(){return i.create(function(e){return Promise.all([r.e(16),r.e(37)]).then(function(){var t=[r(736)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WebTileLayer:function(){return i.create(function(e){return r.e(40).then(function(){var t=[r(796)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMSLayer:function(){return i.create(function(e){return Promise.all([r.e(0),r.e(1),r.e(34),r.e(51)]).then(function(){var t=[r(916)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMTSLayer:function(){return i.create(function(e){return r.e(87).then(function(){var t=[r(1038)];e.apply(null,t)}.bind(this)).catch(r.oe)})},BingMapsLayer:function(){return i.create(function(e){return r.e(10).then(function(){var t=[r(772)];e.apply(null,t)}.bind(this)).catch(r.oe)})}}}.apply(null,i))||(e.exports=n)},764:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatingPercentageValue={value:100,readOnly:!0},t.updatingPercentage={dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}}.apply(null,i))||(e.exports=n)},777:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(625),r(394)],void 0===(n=function(e,t,r,i,n){function o(e,t,r){if(!a(e)||!a(t))return 4;if(null==e||null==t)return 0;if(!r&&e.heightUnit!==t.heightUnit)return 1;if(e.heightModel!==t.heightModel)return 2;switch(e.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return e.vertCRS===t.vertCRS?0:3;default:return 4}}function a(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function s(e){return null!=e.heightModelInfo||null!=e.spatialReference||!u(e)}function l(e){var t=e.url&&n.parse(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&t&&"ImageServer"===t.serverType||!e.heightModelInfo?u(e)?i.deriveUnitFromSR(d,e.spatialReference):null:e.heightModelInfo}function u(e){return p(e,"capabilities")?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):c(e)}function p(e,t){return e.hasOwnProperty(t)}function c(e){switch(e.type){case"elevation":case"integrated-mesh":case"point-cloud":case"scene":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"feature":case"geo-rss":case"graphics":case"group":case"imagery":case"kml":case"map-image":case"map-notes":case"open-street-map":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"web-tile":case"wms":case"wmts":return!1;default:e.type}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.validateWebSceneError=function(e,t){if(!e)return null;if(!a(e))return new r("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:e});var n=e.heightUnit,o=i.deriveUnitFromSR(e,t).heightUnit;return n!==o?new r("webscene:incompatible-height-unit","The vertical units of the scene ("+n+") must match the horizontal units of the scene ("+o+")",{verticalUnit:n,horizontalUnit:o}):null},t.rejectLayerError=function(e,t,n){var a=l(e),u=t,p=o(a,u,n),c=null;if(a){var d=i.deriveUnitFromSR(a,e.spatialReference).heightUnit;n||d===a.heightUnit||(c=new r("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+d+")",{horizontalUnit:d}))}if(!s(e)||4===p||c)return new r("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:a,error:c});switch(c=null,p){case 1:var y=a.heightUnit||"unknown",f=u.heightUnit||"unknown";c=new r("layerview:incompatible-height-unit","The vertical units of the layer ("+y+") must match the vertical units of the scene ("+f+")",{layerUnit:y,sceneUnit:f});break;case 2:var h=a.heightModel||"unknown",m=u.heightModel||"unknown";c=new r("layerview:incompatible-height-model","The height model of the layer ("+h+") must match the height model of the scene ("+m+")",{layerHeightModel:h,sceneHeightModel:m});break;case 3:var v=a.vertCRS||"unknown",g=u.vertCRS||"unknown";c=new r("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+v+") must match the vertical datum of the scene ("+g+")",{layerDatum:v,sceneDatum:g})}return c?new r("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:a,sceneHeightModelInfo:u,error:c}):null},t.deriveHeightModelInfoFromLayer=l,t.mayHaveHeightModelInfo=function(e){return null!=e.layers||c(e)||p(e,"capabilities")||p(e,"heightModelInfo")};var d=new i({heightModel:"gravity-related-height"})}.apply(null,i))||(e.exports=n)},782:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(693),r(350),r(341),r(339),r(394),r(394),r(751)],void 0===(n=function(e,t,i,n,o,a,s,l,u,p){function c(e){return(0,p.layerLookupMap[e])()}function d(e){return o(e,{responseType:"json",query:{f:"json"}}).then(function(e){return e.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.fromUrl=function(e){return function(e){var t=u.parse(e);if(!t)return s.reject(new a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e}));var r,i=t.serverType,o=t.sublayer;switch(i){case"MapServer":r=null!=o?"FeatureLayer":function(e){return d(e).then(function(e){return e.tileInfo})}(e).then(function(e){return e?"TileLayer":"MapImageLayer"});break;case"ImageServer":r=d(e).then(function(e){var t=e.tileInfo&&e.tileInfo.format;return e.tileInfo?t&&"LERC"===t.toUpperCase()&&e.cacheType&&"elevation"===e.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case"SceneServer":r=d(t.url.path).then(function(e){var t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){var r=e.layers[0].layerType;if(null!=t[r])return t[r]}return"SceneLayer"});break;default:r={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"}[i]}var l,p={FeatureLayer:!0,SceneLayer:!0},y={parsedUrl:t,Constructor:null,sublayerIds:null};return n(r).then(function(t){if(l=t,p[t]&&null==o)return function(e){return d(e).then(function(e){return e&&Array.isArray(e.layers)?e.layers.map(function(e){return e.id}).reverse():[]})}(e).then(function(e){1!==e.length&&(y.sublayerIds=e)})}).then(function(){return c(l)}).then(function(e){return y.Constructor=e,y})}(e.url).then(function(t){var n=function(e,t){var r=e.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===r||"esri.layers.StreamLayer"===r?i({outFields:["*"]},t):t}(t,i({},e.properties,{url:e.url}));return t.sublayerIds?s.create(function(e){return r.e(17).then(function(){var t=[r(714)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(e){var r=new e({title:t.parsedUrl.title});return function(e,t){return e.sublayerIds.map(function(r){return new e.Constructor(i({},t,{layerId:r,sublayerTitleMode:"service-name"}))})}(t,n).forEach(function(e){return r.add(e)}),s.resolve(r)}):s.resolve(new t.Constructor(n))})},t.fetchServerVersion=function(e){if(!l.test(e))return s.reject();var t=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return o(t,{query:{f:"json"},responseType:"json"}).then(function(e){return e.data&&e.data.currentVersion?e.data.currentVersion:s.reject()})}}.apply(null,i))||(e.exports=n)},794:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(459)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.isExportDynamic=function(e,t,i){return!!e.some(function(e){var t=e.source;return!(!t||t.type===r.MAPLAYER&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===i.gdbVersion))||null!=e.renderer||null!=e.labelingInfo||e.hasOwnProperty("opacity")&&null!=e.opacity||e.hasOwnProperty("labelsVisible")&&null!=e.labelsVisible})||!function(e,t){if(!e||!e.length)return!0;var r=[];if(t.forEach(function e(t){var i=t.id,n=t.sublayers;r.unshift(i),n&&n.forEach(e)}),e.length>r.length)return!1;for(var i=0,n=r.length,o=0,a=e;o<a.length;o++){for(var s=a[o].id;i<n&&r[i]!==s;)i++;if(i>=n)return!1}return!0}(e,t)},t.sameStructureAsService=function(e,t){return t.flatten(function(e){var t=e.sublayers;return t&&t.toArray().reverse()}).toArray().reverse().every(function(t,r){var i=e[r];return i&&t.id===i.id&&(null==t.sublayers&&null==i.sublayers||null!=t.sublayers&&null!=i.sublayers&&t.sublayers.map(function(e){return e.id}).join(",")===i.sublayers.map(function(e){return e.id}).join(","))})}}.apply(null,i))||(e.exports=n)},803:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(341),r(338),r(339)],void 0===(n=function(e,t,r,i,n,o,a){function s(e){var t;if("vector-tile"===e.service.type)t=e.service.url+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height;else{var r=e.service.tileServers;t=(r&&r.length?r[e.row%r.length]:e.service.url)+"/tilemap/"+e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height}var i=e.service.query;return i&&(t=t+"?"+i),t}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){this.location={left:0,top:0,width:0,height:0},this.byteSize=40}return e.prototype.getAvailability=function(e,t){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";var r=(e-this.location.top)*this.location.width+(t-this.location.left),i=r%8,n=r>>3,o=this._tileAvailabilityBitSet;return n<0||n>o.length?"unknown":o[n]&1<<i?"available":"unavailable"},e.prototype._updateFromData=function(e){for(var t=this.location.width,r=this.location.height,i=!0,n=!0,o=Math.ceil(t*r/8),a=new Uint8Array(o),s=0,l=0;l<e.length;l++){var u=l%8;e[l]?(n=!1,a[s]|=1<<u):i=!1,7===u&&++s}this._isAllUnvailable=n,this._isAllAvailable=i,this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=a,this.byteSize+=a.length)},e.fromDefinition=function(t,o){var l=t.service.request||i,u=t.row,p=t.col,c=t.width,d=t.height,y={query:{f:"json"}};return o=o?r({},y,o):y,l(s(t),o).then(function(e){return e.data}).catch(function(e){return e&&e.details&&422===e.details.httpStatus?{location:{top:u,left:p,width:c,height:d},valid:!0,data:function(){for(var e=[],t=0,r=c*d;t<r;t++)e[t]=0;return e}()}:a.reject(e)}).then(function(t){if(t.location&&(t.location.top!==u||t.location.left!==p||t.location.width!==c||t.location.height!==d))throw new n("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:u,left:p,width:c,height:d}});return e.fromJSON(t)})},e.fromJSON=function(t){e.validateJSON(t);var r=new e;return r.location=Object.freeze(o.clone(t.location)),r._updateFromData(t.data),Object.freeze(r)},e.validateJSON=function(e){if(!e||!e.location)throw new n("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new n("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new n("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new n("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new n("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")},e}();t.Tilemap=l,t.tilemapDefinitionId=function(e){return e.level+"/"+e.row+"/"+e.col+"/"+e.width+"/"+e.height},t.tilemapDefinitionUrl=s,t.default=l}.apply(null,i))||(e.exports=n)},804:function(e,t,r){var i;void 0===(i=function(){var e={defaultNoDataValue:-3.4027999387901484e38,decode:function(o,a){var s=(a=a||{}).encodedMaskData||null===a.encodedMaskData,l=n(o,a.inputOffset||0,s),u=null!=a.noDataValue?a.noDataValue:e.defaultNoDataValue,p=t(l,a.pixelType||Float32Array,a.encodedMaskData,u,a.returnMask),c={width:l.width,height:l.height,pixelData:p.resultPixels,minValue:l.pixels.minValue,maxValue:l.pixels.maxValue,noDataValue:u};return p.resultMask&&(c.maskData=p.resultMask),a.returnEncodedMask&&l.mask&&(c.encodedMaskData=l.mask.bitset?l.mask.bitset:null),a.returnFileInfo&&(c.fileInfo=r(l),a.computeUsedBitDepths&&(c.fileInfo.bitDepths=i(l))),c}},t=function(e,t,r,i,n){var a,s,l=0,u=e.pixels.numBlocksX,p=e.pixels.numBlocksY,c=Math.floor(e.width/u),d=Math.floor(e.height/p),y=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),a=new t(e.width*e.height),n&&r&&(s=new Uint8Array(e.width*e.height));for(var f,h,m=new Float32Array(c*d),v=0;v<=p;v++){var g=v!==p?d:e.height%p;if(0!==g)for(var b=0;b<=u;b++){var w=b!==u?c:e.width%u;if(0!==w){var S,_,j,x,O=v*e.width*d+b*c,T=e.width-w,I=e.pixels.blocks[l];if(I.encoding<2?(0===I.encoding?S=I.rawData:(o(I.stuffedData,I.bitsPerPixel,I.numValidPixels,I.offset,y,m,e.pixels.maxValue),S=m),_=0):j=2===I.encoding?0:I.offset,r)for(h=0;h<g;h++){for(7&O&&(x=r[O>>3],x<<=7&O),f=0;f<w;f++)7&O||(x=r[O>>3]),128&x?(s&&(s[O]=1),a[O++]=I.encoding<2?S[_++]:j):(s&&(s[O]=0),a[O++]=i),x<<=1;O+=T}else if(I.encoding<2)for(h=0;h<g;h++){for(f=0;f<w;f++)a[O++]=S[_++];O+=T}else for(h=0;h<g;h++)if(a.fill)a.fill(j,O,O+w),O+=w+T;else{for(f=0;f<w;f++)a[O++]=j;O+=T}if(1===I.encoding&&_!==I.numValidPixels)throw"Block and Mask do not match";l++}}}return{resultPixels:a,resultMask:s}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:this.noDataValue}}},i=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},i=0;i<t;i++){var n=e.pixels.blocks[i];0===n.encoding?r.float32=!0:1===n.encoding?r[n.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},n=function(e,t,r){var i={},n=new Uint8Array(e,t,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,n),"CntZImage"!=i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;t+=10;var o=new DataView(e,t,24);if(i.fileVersion=o.getInt32(0,!0),i.imageType=o.getInt32(4,!0),i.height=o.getUint32(8,!0),i.width=o.getUint32(12,!0),i.maxZError=o.getFloat64(16,!0),t+=24,!r)if(o=new DataView(e,t,16),i.mask={},i.mask.numBlocksY=o.getUint32(0,!0),i.mask.numBlocksX=o.getUint32(4,!0),i.mask.numBytes=o.getUint32(8,!0),i.mask.maxValue=o.getFloat32(12,!0),t+=16,i.mask.numBytes>0){var a=new Uint8Array(Math.ceil(i.width*i.height/8)),s=(o=new DataView(e,t,i.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(s>0)for(;s--;)a[u++]=o.getUint8(l++);else{var p=o.getUint8(l++);for(s=-s;s--;)a[u++]=p}s=o.getInt16(l,!0),l+=2}while(l<i.mask.numBytes);if(-32768!==s||u<a.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=a,t+=i.mask.numBytes}else if(0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)){a=new Uint8Array(Math.ceil(i.width*i.height/8));i.mask.bitset=a}o=new DataView(e,t,16),i.pixels={},i.pixels.numBlocksY=o.getUint32(0,!0),i.pixels.numBlocksX=o.getUint32(4,!0),i.pixels.numBytes=o.getUint32(8,!0),i.pixels.maxValue=o.getFloat32(12,!0),t+=16;var c=i.pixels.numBlocksX,d=i.pixels.numBlocksY,y=c+(i.width%c>0?1:0),f=d+(i.height%d>0?1:0);i.pixels.blocks=new Array(y*f);for(var h=1e9,m=0,v=0;v<f;v++)for(var g=0;g<y;g++){var b=0,w=e.byteLength-t;o=new DataView(e,t,Math.min(10,w));var S={};i.pixels.blocks[m++]=S;var _=o.getUint8(0);if(b++,S.encoding=63&_,S.encoding>3)throw"Invalid block encoding ("+S.encoding+")";if(2!==S.encoding){if(0!==_&&2!==_){if(_>>=6,S.offsetType=_,2===_)S.offset=o.getInt8(1),b++;else if(1===_)S.offset=o.getInt16(1,!0),b+=2;else{if(0!==_)throw"Invalid block offset type";S.offset=o.getFloat32(1,!0),b+=4}if(h=Math.min(S.offset,h),1===S.encoding)if(_=o.getUint8(b),b++,S.bitsPerPixel=63&_,_>>=6,S.numValidPixelsType=_,2===_)S.numValidPixels=o.getUint8(b),b++;else if(1===_)S.numValidPixels=o.getUint16(b,!0),b+=2;else{if(0!==_)throw"Invalid valid pixel count type";S.numValidPixels=o.getUint32(b,!0),b+=4}}var j;if(t+=b,3!=S.encoding)if(0===S.encoding){var x=(i.pixels.numBytes-1)/4;if(x!==Math.floor(x))throw"uncompressed block has invalid length";j=new ArrayBuffer(4*x),new Uint8Array(j).set(new Uint8Array(e,t,4*x));for(var O=new Float32Array(j),T=0;T<O.length;T++)h=Math.min(h,O[T]);S.rawData=O,t+=4*x}else if(1===S.encoding){var I=Math.ceil(S.numValidPixels*S.bitsPerPixel/8),A=Math.ceil(I/4);j=new ArrayBuffer(4*A),new Uint8Array(j).set(new Uint8Array(e,t,I)),S.stuffedData=new Uint32Array(j),t+=I}}else t++,h=Math.min(h,0)}return i.pixels.minValue=h,i.eofOffset=t,i},o=function(e,t,r,i,n,o,a){var s,l,u,p=(1<<t)-1,c=0,d=0,y=Math.ceil((a-i)/n),f=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*f,s=0;s<r;s++){if(0===d&&(u=e[c++],d=32),d>=t)l=u>>>d-t&p,d-=t;else{var h=t-d;l=(u&p)<<h&p,l+=(u=e[c++])>>>(d=32-h)}o[s]=l<y?i+l*n:a}return o};return e}.apply(null,[]))||(e.exports=i)},865:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(363),r(362),r(436),r(429)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.capabilities=void 0,t.copyright=null,t.fullExtent=null,t.legendEnabled=!0,t.spatialReference=null,t.version=null,t}return r(t,e),t.prototype.readCapabilities=function(e,t){var r=t.capabilities&&t.capabilities.split(",").map(function(e){return e.toLowerCase().trim()});if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var i=this.type,n=-1!==r.indexOf("query"),o=-1!==r.indexOf("map"),a=!!t.exportTilesAllowed,s=-1!==r.indexOf("tilemap"),l="tile"!==i&&!!t.supportsDynamicLayers,u="tile"!==i&&(!t.tileInfo||l),p="tile"!==i&&(!t.tileInfo||l);return{operations:{supportsQuery:n,supportsExportMap:o,supportsExportTiles:a,supportsTileMap:s},exportMap:o?{supportsSublayersChanges:"tile"!==i,supportsDynamicLayers:l,supportsSublayerVisibility:u,supportsSublayerDefinitionExpression:p}:null,exportTiles:a?{maxExportTilesCount:+t.maxExportTilesCount}:null}},t.prototype.readVersion=function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r},i([n.property({readOnly:!0})],t.prototype,"capabilities",void 0),i([n.reader("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),i([n.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),i([n.property({type:o})],t.prototype,"fullExtent",void 0),i([n.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],t.prototype,"id",void 0),i([n.property({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),i([n.property(l.popupEnabled)],t.prototype,"popupEnabled",void 0),i([n.property({type:a})],t.prototype,"spatialReference",void 0),i([n.property()],t.prototype,"version",void 0),i([n.reader("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),i([n.subclass("esri.layers.mixins.ArcGISMapService")],t)}(n.declared(s))}.apply(null,i))||(e.exports=n)},866:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(337),r(335),r(346),r(357),r(721),r(341),r(338),r(343),r(336),r(360),r(461),r(867),r(794)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d,y,f,h){function m(e,t,r){var i=[],n={};return e.forEach(function(e){var o=new f;if(o.read(e,t),r&&(-1===r.indexOf(o.id)?o.visible=!1:o.visible=!0),n[o.id]=o,null!=e.parentLayerId&&-1!==e.parentLayerId){var a=n[e.parentLayerId];a.sublayers||(a.sublayers=[]),a.sublayers.unshift(o)}else i.unshift(o)}),i}function v(e){return e.__accessor__.store._values}function g(e){return e.__accessor__.overridden}Object.defineProperty(t,"__esModule",{value:!0});var b=p.getLogger("esri.layers.TileLayer"),w=function(e){function t(){var t=e.call(this)||this;return t.allSublayers=new s({root:t,rootCollectionNames:["sublayers"],getChildrenFunction:function(e){return e.sublayers}}),t.watch("sublayers",function(e,r){return t._handleSublayersChange(e,r)},!0),t}return i(t,e),t.prototype.readServiceSublayers=function(e,t,r){return m(t.layers,r)},t.prototype.readSublayersFromItemOrWebMap=function(e,t,r){return!t.layers&&t.visibleLayers?t.visibleLayers.map(function(e){return{id:e}}):m(t.layers,r,t.visibleLayers)},t.prototype.readSublayers=function(e,t,r){var i=m(t.layers,r);return this._updateSublayersForOrigin(y.OriginId.PORTAL_ITEM,i),this._updateSublayersForOrigin(y.OriginId.WEB_MAP,i),this._updateSublayersForOrigin(y.OriginId.WEB_SCENE,i),i},t.prototype.writeSublayers=function(e,t,i,n){var o=e.flatten(function(e){var t=e.sublayers;return t&&t.toArray().reverse()}).toArray().reverse(),a=this.serviceSublayers.flatten(function(e){var t=e.sublayers;return t&&t.toArray().reverse()}).toArray().reduce(function(e,t){return e.set(t.id,t),e},new Map),s=!1,l=!0;this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers?(s=h.isExportDynamic(o,this.serviceSublayers,this),l=!s&&h.sameStructureAsService(o,this.serviceSublayers)):l=h.sameStructureAsService(o,this.serviceSublayers),t.layers=[],o.forEach(function(e){var i=a.get(e.id),o=r({writeAsDynamic:s,writeOverridesOnly:l,serviceSublayer:i},n),u=e.write({},o);(!l||l&&Object.keys(u).length>1)&&t.layers.push(u)}),t.visibleLayers=o.filter(function(e){return e.visible}).map(function(e){return e.id})},t.prototype.findSublayerById=function(e){return this.allSublayers.find(function(t){return t.id===e})},t.prototype.createServiceSublayers=function(){return this.serviceSublayers.map(function(e){return e.clone()})},t.prototype._updateSublayersForOrigin=function(e,t){var r=this.__accessor__.store;if(r.has("sublayers",e)){var i=r.get("sublayers",e).flatten(function(e){return e.sublayers});if(i.every(function(e){return!v(e).hasOwnProperty("minScale")})){var n=i.reduce(function(e,t){return e.set(t.id,t),e},new Map),o=t.map(function(e){return function e(t,r){var i=r.get(t.id);return i?(u.mixin(v(t),v(i)),g(i)&&(t.__accessor__.overridden=u.mixin(g(t)||{},g(i))),i.sublayers&&(t.sublayers=i.sublayers.map(function(t){return e(t,r)}))):t.sublayers&&t.sublayers.forEach(function(t){return e(t,r)}),t}(e.clone(),n)});r.set("sublayers",new(a.ofType(f))(o),e)}}},t.prototype._handleSublayersChange=function(e,t){var r=this;t&&(t.forEach(function(e){e.parent=null,e.layer=null}),this._sublayersHandles.forEach(function(e){return e.remove()}),this._sublayersHandles=null),e&&(e.forEach(function(e){e.parent=r,e.layer=r}),this._sublayersHandles=[e.on("after-add",function(e){var t=e.item;t.parent=r,t.layer=r}),e.on("after-remove",function(e){var t=e.item;t.parent=null,t.layer=null})],"tile"===this.type&&this._sublayersHandles.push(e.on("before-changes",function(e){b.error(new l("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault()})))},n([c.property({readOnly:!0})],t.prototype,"allSublayers",void 0),n([c.property({readOnly:!0,type:a.ofType(f)})],t.prototype,"serviceSublayers",void 0),n([c.reader("service","serviceSublayers",["layers"])],t.prototype,"readServiceSublayers",null),n([c.property({value:null,type:a.ofType(f),json:{type:[Number],write:{target:"subLayerIds",allowNull:!0}}})],t.prototype,"sublayers",void 0),n([c.reader(["web-map","web-scene","portal-item"],"sublayers",["layers","visibleLayers"])],t.prototype,"readSublayersFromItemOrWebMap",null),n([c.reader("service","sublayers",["layers"])],t.prototype,"readSublayers",null),n([c.writer(["web-map","web-scene","portal-item"],"sublayers",{layers:{type:[f]},visibleLayers:{type:[d.Integer]}})],t.prototype,"writeSublayers",null),n([c.subclass("esri.layers.mixins.SublayersOwner")],t)}(c.declared(o));t.default=w}.apply(null,i))||(e.exports=n)},867:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(388),r(434),r(669),r(357),r(341),r(340),r(338),r(343),r(336),r(360),r(619),r(331),r(429),r(427),r(459),r(423),r(615),r(756),r(647),r(419)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p,c,d,y,f,h,m,v,g,b,w,S,_,j){var x=c.getLogger("esri.layers.support.Sublayer"),O=0;return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sublayersHandles=null,t}var u;return r(t,e),u=t,Object.defineProperty(t.prototype,"definitionExpression",{get:function(){return this._get("definitionExpression")},set:function(e){this._setAndNotifyLayer("definitionExpression",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){var e=this._get("id");return null==e?O++:e},set:function(e){if(this._get("id")!==e)return!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?void this._logLockedError("id"):void this._set("id",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelingInfo",{get:function(){return this._get("labelingInfo")},set:function(e){this._setAndNotifyLayer("labelingInfo",e)},enumerable:!0,configurable:!0}),t.prototype.writeLabelingInfo=function(e,t,r,i){i&&!i.writeAsDynamic||e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(function(e){return e.write({},i)})}})},Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return this._get("labelsVisible")},set:function(e){this._setAndNotifyLayer("labelsVisible",e)},enumerable:!0,configurable:!0}),t.prototype.writeLabelsVisible=function(e,t,r,i){i&&!i.writeAsDynamic||(t.showLabels=e)},Object.defineProperty(t.prototype,"layer",{set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(function(t){return t.layer=e})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendEnabled",{get:function(){return this._get("legendEnabled")},set:function(e){this._set("legendEnabled",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minScale",{get:function(){return this._get("minScale")},set:function(e){this._setAndNotifyLayer("minScale",e)},enumerable:!0,configurable:!0}),t.prototype.readMinScale=function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0},t.prototype.writeMinScale=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.minScale===e&&n.maxScale===this.maxScale)return}t.minScale=e},Object.defineProperty(t.prototype,"maxScale",{get:function(){return this._get("maxScale")},set:function(e){this._setAndNotifyLayer("maxScale",e)},enumerable:!0,configurable:!0}),t.prototype.readMaxScale=function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0},t.prototype.writeMaxScale=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.maxScale===e&&n.minScale===this.minScale)return}t.maxScale=e},Object.defineProperty(t.prototype,"opacity",{get:function(){return this._get("opacity")},set:function(e){this._setAndNotifyLayer("opacity",e)},enumerable:!0,configurable:!0}),t.prototype.readOpacity=function(e,t){var r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)},t.prototype.writeOpacity=function(e,t,r,i){i&&!i.writeAsDynamic||(t.layerDefinition={drawingInfo:{transparency:100-100*e}})},t.prototype.writeParent=function(e,t,r,i){i&&i.writeOverridesOnly||(this.parent&&this.parent!==this.layer?t.parentLayerId=this.parent.id:t.parentLayerId=-1)},Object.defineProperty(t.prototype,"popupEnabled",{get:function(){return this._get("popupEnabled")},set:function(e){this._set("popupEnabled",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popupTemplate",{get:function(){return this._get("popupTemplate")},set:function(e){this._set("popupTemplate",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._get("renderer")},set:function(e){if(e)for(var t=0,r=e.getSymbols();t<r.length;t++){if(r[t].isInstanceOf(S)){x.warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)},enumerable:!0,configurable:!0}),t.prototype.readRenderer=function(e,t,r){return(e=t.layerDefinition.drawingInfo.renderer||void 0)&&((e=b.read(e,t,r)||void 0)||x.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r})),e},t.prototype.writeRenderer=function(e,t,r,i){i&&!i.writeAsDynamic||(t.layerDefinition={drawingInfo:{renderer:e.toJSON()}})},Object.defineProperty(t.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,type:g.MAPLAYER}},set:function(e){this._setAndNotifyLayer("source",e)},enumerable:!0,configurable:!0}),t.prototype.writeSource=function(e,t,r,i){i&&!i.writeAsDynamic&&i.writeOverridesOnly||(t.layerDefinition={source:g.sourceToJSON(e)})},Object.defineProperty(t.prototype,"sublayers",{set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)},enumerable:!0,configurable:!0}),t.prototype.castSublayers=function(e){return y.default(s.ofType(u),e)},t.prototype.writeSublayers=function(e,t,r,i){i&&i.writeOverridesOnly||(t[r]=this.get("sublayers.length")?this.sublayers.map(function(e){return e.id}).toArray().reverse():null)},Object.defineProperty(t.prototype,"title",{get:function(){return this._get("title")},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),t.prototype.writeTitle=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.title===e)return}t[r]=e},Object.defineProperty(t.prototype,"url",{get:function(){var e=this.layer,t=this.source;if(!e)return null;if(g.isMapLayerSource(t))return e.parsedUrl.path+"/"+t.mapLayerId;var r={layer:JSON.stringify({source:g.sourceToJSON(this.source)})};return e.parsedUrl.path+"/dynamicLayer?"+o.objectToQuery(r)},set:function(e){e?this._override("url",e):this._clearOverride("url")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._get("visible")},set:function(e){this._setAndNotifyLayer("visible",e)},enumerable:!0,configurable:!0}),t.prototype.writeVisible=function(e,t,r,i){if(i&&i.writeOverridesOnly){var n=i&&i.serviceSublayer;if(n&&n.visible===e)return}t[r]=e},t.prototype.clone=function(){var e=new u;return this.hasOwnProperty("definitionExpression")&&(e.definitionExpression=this.definitionExpression),this.hasOwnProperty("id")&&(e.id=this.id),this.hasOwnProperty("labelingInfo")&&(e.labelingInfo=p.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(e.labelsVisible=this.labelsVisible),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("minScale")&&(e.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(e.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(e.opacity=this.opacity),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("popupEnabled")&&(e.popupEnabled=this.popupEnabled),this.hasOwnProperty("popupTemplate")&&(e.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate),this.hasOwnProperty("renderer")&&(e.renderer=this.renderer?this.renderer.clone():this.renderer),this.hasOwnProperty("source")&&(e.source=p.clone(this.source)),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers?this.sublayers.clone():this.sublayers),this.hasOwnProperty("title")&&(e.title=this.title),e},t.prototype.createQuery=function(){return new j({returnGeometry:!0,where:this.definitionExpression||"1=1"})},t.prototype.createFeatureLayer=function(){if(this.hasOwnProperty("sublayers"))return null;var e=this.layer&&this.layer.parsedUrl,t=this.source,r=null;e&&(r=g.isMapLayerSource(t)?e.path+"/"+t.mapLayerId:e.path+"/dynamicLayer");var i=new h({url:r});return this.hasOwnProperty("definitionExpression")&&(i.definitionExpression=this.definitionExpression),this.hasOwnProperty("labelingInfo")&&(i.labelingInfo=p.clone(this.labelingInfo)),this.hasOwnProperty("labelsVisible")&&(i.labelsVisible=this.labelsVisible),this.hasOwnProperty("legendEnabled")&&(i.legendEnabled=this.legendEnabled),this.hasOwnProperty("visible")&&(i.visible=this.visible),this.hasOwnProperty("minScale")&&(i.minScale=this.minScale),this.hasOwnProperty("maxScale")&&(i.maxScale=this.maxScale),this.hasOwnProperty("opacity")&&(i.opacity=this.opacity),this.hasOwnProperty("popupTemplate")&&(i.popupTemplate=this.popupTemplate?this.popupTemplate.clone():this.popupTemplate),this.hasOwnProperty("renderer")&&(i.renderer=this.renderer?this.renderer.clone():this.renderer),this.hasOwnProperty("source")&&g.isDataLayerSource(this.source)&&(i.dynamicDataSource=p.clone(this.source)),this.hasOwnProperty("title")&&(i.title=this.title),i},t.prototype.queryFeatures=function(e){var t=this;return void 0===e&&(e=this.createQuery()),new _({url:this.url}).execute(e).then(function(e){return e&&e.features&&e.features.forEach(function(e){e.sourceLayer=t}),e})},t.prototype.toExportImageJSON=function(){var e={id:this.id,source:g.sourceToJSON(this.source)};if(this.definitionExpression&&(e.definitionExpression=this.definitionExpression),this.renderer||this.labelingInfo||null!=this.opacity||null!=this.labelsVisible){var t=e.drawingInfo={};this.renderer&&(t.renderer=this.renderer.toJSON()),null!=this.labelsVisible&&(t.showLabels=this.labelsVisible),!1!==this.labelsVisible&&this.labelingInfo&&(t.labelingInfo=this.labelingInfo.map(function(e){return e.write({},{origin:"service"})}),t.showLabels=!0),null!=this.opacity&&(t.transparency=100-100*this.opacity)}return e},t.prototype._setAndNotifyLayer=function(e,t){var r,i=this.layer,n=this._get(e);switch(e){case"definitionExpression":r="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":r="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":r="supportsDynamicLayers"}r&&!1===this.get("layer.capabilities.exportMap."+r)?this._logLockedError(e):(this._set(e,t),n!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e}))},t.prototype._handleSublayersChange=function(e,t){var r=this;t&&(t.forEach(function(e){e.parent=null,e.layer=null}),this._sublayersHandles.forEach(function(e){return e.remove()}),this._sublayersHandles=null),e&&(e.forEach(function(e){e.parent=r,e.layer=r.layer}),this._sublayersHandles=[e.on("after-add",function(e){var t=e.item;t.parent=r,t.layer=r.layer}),e.on("after-remove",function(e){var t=e.item;t.parent=null,t.layer=null}),e.on("before-changes",function(e){var t=r.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(x.error(new l("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault())})])},t.prototype._logLockedError=function(e){x.error(new l("sublayer:locked","Property '"+e+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{sublayer:this,layer:this.layer}))},i([d.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],t.prototype,"definitionExpression",null),i([d.property({type:Number,json:{write:{ignoreOrigin:!0}}})],t.prototype,"id",null),i([d.property({value:null,type:[v],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],t.prototype,"labelingInfo",null),i([d.writer("labelingInfo")],t.prototype,"writeLabelingInfo",null),i([d.property({type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}})],t.prototype,"labelsVisible",null),i([d.writer("labelsVisible")],t.prototype,"writeLabelsVisible",null),i([d.property({value:null})],t.prototype,"layer",null),i([d.property({type:Boolean,value:!0,json:{read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",null),i([d.property({type:Number,value:0,json:{write:{overridePolicy:function(e,t,r){if(f.willPropertyWrite(this,"maxScale",{},r))return{ignoreOrigin:!0}}}}})],t.prototype,"minScale",null),i([d.reader("portal-item","minScale",["minScale","layerDefinition.minScale"])],t.prototype,"readMinScale",null),i([d.writer("minScale")],t.prototype,"writeMinScale",null),i([d.property({type:Number,value:0,json:{write:{overridePolicy:function(e,t,r){if(f.willPropertyWrite(this,"minScale",{},r))return{ignoreOrigin:!0}}}}})],t.prototype,"maxScale",null),i([d.reader("portal-item","maxScale",["maxScale","layerDefinition.maxScale"])],t.prototype,"readMaxScale",null),i([d.writer("maxScale")],t.prototype,"writeMaxScale",null),i([d.property({type:Number,json:{write:{target:"layerDefinition.drawingInfo.transparency"}}})],t.prototype,"opacity",null),i([d.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],t.prototype,"readOpacity",null),i([d.writer("opacity")],t.prototype,"writeOpacity",null),i([d.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0}}})],t.prototype,"parent",void 0),i([d.writer("parent")],t.prototype,"writeParent",null),i([d.property(m.popupEnabled)],t.prototype,"popupEnabled",null),i([d.property({value:null,type:a,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",null),i([d.property({types:w.types,value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer"}}})],t.prototype,"renderer",null),i([d.reader("renderer",["layerDefinition.drawingInfo.renderer"])],t.prototype,"readRenderer",null),i([d.writer("renderer")],t.prototype,"writeRenderer",null),i([d.property({cast:g.castSource,json:{read:{source:"layerDefinition.source",reader:g.sourceFromJSON},write:{target:"layerDefinition.source"}}})],t.prototype,"source",null),i([d.writer("source")],t.prototype,"writeSource",null),i([d.property({value:null,json:{type:[y.Integer],write:{target:"subLayerIds",allowNull:!0}}})],t.prototype,"sublayers",null),i([d.cast("sublayers")],t.prototype,"castSublayers",null),i([d.writer("sublayers")],t.prototype,"writeSublayers",null),i([d.property({type:String,value:null,json:{read:{source:"name"},write:{target:"name",allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"title",null),i([d.writer("title")],t.prototype,"writeTitle",null),i([d.property({type:String,dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],t.prototype,"url",null),i([d.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility"}}})],t.prototype,"visible",null),i([d.writer("visible")],t.prototype,"writeVisible",null),i([n(0,d.cast(j))],t.prototype,"queryFeatures",null),u=i([d.subclass("esri.layers.support.Sublayer")],t)}(d.declared(u))}.apply(null,i))||(e.exports=n)},875:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(927)],void 0===(n=function(e,t,r){return{streets:{id:"streets",title:r.streets,thumbnailUrl:e.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:r.satellite,thumbnailUrl:e.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:r.hybrid,thumbnailUrl:e.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",title:r.terrain,thumbnailUrl:e.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:r.topo,thumbnailUrl:e.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:r.gray,thumbnailUrl:e.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:r["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:r.oceans,thumbnailUrl:e.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",title:r["national-geographic"],thumbnailUrl:e.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:r.osm,thumbnailUrl:e.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:r["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:r.gray,thumbnailUrl:e.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:r.streets,thumbnailUrl:e.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:r.topo,thumbnailUrl:e.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:r["streets-night-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:r["streets-relief-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:r["streets-navigation-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}}.apply(null,i))||(e.exports=n)},878:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(703),r(691),r(736),r(875),r(978),r(979)],void 0===(n=function(e,t,r,i,n,o,a,s){function l(e){return e&&"esri.views.3d.layers.TileLayerView3D"===e.declaredClass}function u(e){return e&&"esri.views.3d.layers.VectorTileLayerView3D"===e.declaredClass}function p(e){return e&&"esri.views.3d.layers.WMTSLayerView3D"===e.declaredClass}function c(e){return e&&"esri.views.3d.layers.ElevationLayerView3D"===e.declaredClass}function d(){for(var e in h={},o)o[e].baseMapLayers.forEach(function(e){h[e.url]=19});h["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}function y(e,t,r,i){return f["local"===i||"planar"===i?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(e,t,r)}Object.defineProperty(t,"__esModule",{value:!0});var f={planar:a,spherical:s};t.weakAssert=function(e,t){e||console.warn("Terrain: "+t)},t.autoUpdateSkirtsVisibility=function(e,t,r){var i,n=f[e.manifold],o=n.isInsideExtent(e,t);if(o)i=e.getElevation(t);else{var a=e.getElevationBounds();i=.5*(a[0]+a[1])}var s=t[2]-i,l=.9*Math.abs(s)<r?0:s<0?-1:1;if(!o)if(n.isInsideExtent(e,t,e.hideSkirtsDistanceFromExtentMargin)){var u=n.tiltToExtentEdge(e,t);u>e.hideSkirtsMinimumCameraTilt&&u<e.hideSkirtsMaximumCameraTilt&&(l=0)}else l=0;e.skirtScale=l},t.isTiledLayer=function(e){return e&&"base-tile"===e.type||"tile"===e.type||"elevation"===e.type||"base-elevation"===e.type||"open-street-map"===e.type||"web-tile"===e.type||"wmts"===e.type||"vector-tile"===e.type},t.isVectorTileLayer=function(e){return e&&e.isInstanceOf(n)},t.isTileLayerView=l,t.isVectorTileLayerView=u,t.isWMTSLayerView=p,t.isElevationLayerView=c,t.isTiledLayerView=function(e){return e&&(l(e)||c(e)||u(e)||p(e))},t.useFetchTileForLayer=function(e){return e.fetchTile&&!(e.fetchTile===i.prototype.fetchTile||e.fetchTile===r.prototype.fetchTile)};var h=null;t.getKnownTiledServiceLevelCap=function(e){h||d();var t=e&&e.replace(/https?:/,"");return t in h?h[t]:1/0},t.prepareKnownTiledServiceLevelCaps=d,t.checkIfTileInfoSupportedForView=y,t.getTiledLayerInfo=function(e,t,r){var i,n;if("wmts"===e.type){var o=e.activeLayer;if(o){var a=o.tileMatrixSet;if(a)i=a.tileInfo,n=a.fullExtent;else{var s=o.tileMatrixSets;if(s){var l=s.find(function(e){return null==y(e.tileInfo,e.fullExtent,t,r)});if(l)return{tileInfo:l.tileInfo,fullExtent:l.fullExtent}}}}}else i="vector-tile"===e.type?e.compatibleTileInfo256:e.tileInfo,n=e.fullExtent;return i&&n&&null==y(i,n,t,r)?{tileInfo:i,fullExtent:n}:{tileInfo:null,fullExtent:null}}}.apply(null,i))||(e.exports=n)},886:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(367),r(686)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MAP=0]="MAP",e[e.ELEVATION=1]="ELEVATION",e[e.COUNT=2]="COUNT"}(t.LayerClass||(t.LayerClass={})),function(e){e[e.NONE=0]="NONE",e[e.SPLIT=1]="SPLIT",e[e.VSPLITMERGE=2]="VSPLITMERGE",e[e.MERGE=4]="MERGE",e[e.DECODE_ELEVATION=8]="DECODE_ELEVATION",e[e.UPDATE_GEOMETRY=16]="UPDATE_GEOMETRY",e[e.UPDATE_TEXTURE=32]="UPDATE_TEXTURE"}(t.TileUpdateTypes||(t.TileUpdateTypes={})),t.TILE_LOADING_DEBUGLOG=!1,t.MAX_ROOT_TILES=64,t.MAX_TILE_TESSELATION=512,t.ELEVATION_NODATA_VALUE=3.40282347e37,t.noDataValueOpt={noDataValue:t.ELEVATION_NODATA_VALUE},t.ELEVATION_DESIRED_RESOLUTION_LEVEL=4,t.TILEMAP_SIZE_EXP=5,t.TILEMAP_SIZE=1<<t.TILEMAP_SIZE_EXP,t.WEBMERCATOR_WORLD_EXTENT=r.create(),i.WebMercatorAuxiliarySphere.getExtent(0,0,0,t.WEBMERCATOR_WORLD_EXTENT),t.GEOGRAPHIC_WORLD_EXTENT=r.create([-180,-90,180,90]),t.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR="Cannot extend surface to encompass all layers because it would result in too many root tiles.",t.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR="Surface extent is too large for tile resolution at level 0.",t.DEFAULT_TILE_BACKGROUND="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAIAAADTED8xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAA2JJREFUeNrs3d1O20AQgFFvRJInQLQBhHj/h0JVW34El1yQ2F73DVq3jTys55zrqUBbPrErZUSZ+vcOsto4AjK76Lqu1vr8+G3mPzjc3D/+eJj/Bcz/cd75R80fbu79BsAVCAQAAgABgABAACAAEAAIAAQAAgABQPOKfQAy83Ho+HnnHzXv49B4A4AAQAAgABAACAAEAAIAAYAAQAAgABAANM4+AKnZB4ifd/5R8/YB8AYAAYAAQAAgABAACAAEAAIAAYAAQAAgAGicfQBSsw8QP+/8o+btA+ANAAIAAYAAQAAgABAACAAEAAIAAYAAQADQOPsApGYfIH7e+UfN2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAXA201QdggAggH0AUrMPED8/jsPL03fns/y8fQC8AUAAIAAQAAgABAACAAGAAEAAIAAQAAgAGmcfgNTsA8TP2weImrcPgDcACAAEAAIAAYAAQAAgABAACAAEAAIAAUDj7AOQmn2A+Hn7AFHz9gHwBgABgABAACAAEAAIAAQAAgABgABgNS4cAf9pu9u3O1+m/n2aplKK/0j+TX86/tVP5+eZ3+729gFIfwWyDxA7bx8gat4+ANkJAAGAAEAAIAAQAAgABAACAAGAAEAAIABonn0AUrMPED9vHyBq3j4A3gAgABAACAAEAAIAAYAAQAAgABAA51VrdQgCAAHAsuwDkJp9gPj5vj+9vvx0PsvP2wfAGwAEAAIAAYAAQAAgABAACAAEAAIAAYAAoHH2AUjNPkD8vH2AqHn7AHgDgABAACAAEAAIAAQAAgABgABAACAAEAA0zj4AqdkHiJ+3DxA1bx8AbwAQACQ0DL0AyKuOowBwBYKUSikCIHUBAsAVCAQAAgABgABAALBy9gFIzT5A/Lx9gKj5y6trVyC8AUAAIAAQAAgAVq90Pg5N5gA2AsAVCAQAAgABgABAALB29gFIzT5A/Lx9gKj5q6+3rkB4A4AAQAAgABAACADWzB/IIHsCAsAVCARAlKlWhyAAEAAIABZjH4DU7APEz5+OH2+vT85n+fkvhztXILwBQAAgABAACAAEAGtWigBIHcBGALgCgQBAACAAyPMO9nHosxuHodZx5vB2t691HIdh/nx/Os7/Zsz/fvgXAAAA//8DAF1P1hM2ICMfAAAAAElFTkSuQmCC"}.apply(null,i))||(e.exports=n)},895:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(971),r(972),r(973)],void 0===(n=function(e,t,r,i,n,o,a){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,r){switch(this.type=e,this.id=t.id,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.layout=t.layout,this.paint=t.paint,this.z=r,e){case 0:this._layoutDefinition=o.StyleDefinition.backgroundLayoutDefinition,this._paintDefinition=o.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=o.StyleDefinition.fillLayoutDefinition,this._paintDefinition=o.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=o.StyleDefinition.lineLayoutDefinition,this._paintDefinition=o.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=o.StyleDefinition.symbolLayoutDefinition,this._paintDefinition=o.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=o.StyleDefinition.circleLayoutDefinition,this._paintDefinition=o.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}return e.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=n.createFilter(this.filter)},e.prototype.getLayoutProperty=function(e){var t=this._layoutProperties;if(t)return t[e]},e.prototype.getPaintProperty=function(e){var t=this._paintProperties;if(t)return t[e]},e.prototype.getLayoutValue=function(e,t,r){var i,n=this._layoutProperties;if(n){var o=n[e];o&&(i=o.getValue(t,r))}var a=this._layoutDefinition[e];return void 0===i&&(i=a.default),"enum"===a.type&&(i=a.values.indexOf(i)),i},e.prototype.getPaintValue=function(e,t,r){var i,n=this._paintProperties;if(n){var o=n[e];o&&(i=o.getValue(t,r))}var a=this._paintDefinition[e];return void 0===i&&(i=a.default),"enum"===a.type&&(i=a.values.indexOf(i)),i},e.prototype._parseLayout=function(e){var t={};for(var r in e){var i=this._layoutDefinition[r];i&&(t[r]=new a(r,i,e[r]))}return t},e.prototype._parsePaint=function(e){var t={};for(var r in e){var i=this._paintDefinition[r];i&&(t[r]=new a(r,i,e[r]))}return t},e}();t.StyleLayer=s;var l=function(e){function t(t,r,i){return e.call(this,t,r,i)||this}return r(t,e),t}(s);t.BackgroundStyleLayer=l;var u=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("fill-color");n.hasDataDrivenColor=!!o&&o.isDataDriven;var a=n.getPaintProperty("fill-opacity");n.hasDataDrivenOpacity=!!a&&a.isDataDriven,n.hasDataDrivenFill=n.hasDataDrivenColor||n.hasDataDrivenOpacity;var s=n.getPaintProperty("fill-outline-color");return n.outlineUsesFillColor=!s,n.hasDataDrivenOutlineColor=!!s&&s.isDataDriven,n.hasDataDrivenOutline=(s?n.hasDataDrivenOutlineColor:n.hasDataDrivenColor)||n.hasDataDrivenOpacity,n}return r(t,e),t}(s);t.FillStyleLayer=u;var p=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("line-color");n.hasDataDrivenColor=!!o&&o.isDataDriven;var a=n.getPaintProperty("line-opacity");n.hasDataDrivenOpacity=!!a&&a.isDataDriven;var s=n.getPaintProperty("line-width");return n.hasDataDrivenWidth=!!s&&s.isDataDriven,n.hasDataDrivenLine=n.hasDataDrivenColor||n.hasDataDrivenOpacity||n.hasDataDrivenWidth,n}return r(t,e),t}(s);t.LineStyleLayer=p;var c=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("icon-color");n.hasDataDrivenIconColor=!!o&&o.isDataDriven;var a=n.getPaintProperty("icon-opacity");n.hasDataDrivenIconOpacity=!!a&&a.isDataDriven;var s=n.getLayoutProperty("icon-size");n.hasDataDrivenIconSize=!!s&&s.isDataDriven,n.hasDataDrivenIcon=n.hasDataDrivenIconColor||n.hasDataDrivenIconOpacity||n.hasDataDrivenIconSize;var l=n.getPaintProperty("text-color");n.hasDataDrivenTextColor=!!l&&l.isDataDriven;var u=n.getPaintProperty("text-opacity");n.hasDataDrivenTextOpacity=!!u&&u.isDataDriven;var p=n.getLayoutProperty("text-size");return n.hasDataDrivenTextSize=!!p&&p.isDataDriven,n.hasDataDrivenText=n.hasDataDrivenTextColor||n.hasDataDrivenTextOpacity||n.hasDataDrivenTextSize,n}return r(t,e),t}(s);t.SymbolStyleLayer=c;var d=function(e){function t(t,r,i){var n=e.call(this,t,r,i)||this,o=n.getPaintProperty("circle-radius");n.hasDataDrivenRadius=!!o&&o.isDataDriven;var a=n.getPaintProperty("circle-color");n.hasDataDrivenColor=!!a&&a.isDataDriven;var s=n.getPaintProperty("circle-opacity");n.hasDataDrivenOpacity=!!s&&s.isDataDriven;var l=n.getPaintProperty("circle-stroke-width");n.hasDataDrivenStrokeWidth=!!l&&l.isDataDriven;var u=n.getPaintProperty("circle-stroke-color");n.hasDataDrivenStrokeColor=!!u&&u.isDataDriven;var p=n.getPaintProperty("circle-stroke-opacity");n.hasDataDrivenStrokeOpacity=!!p&&p.isDataDriven;var c=n.getPaintProperty("circle-blur");return n.hasDataDrivenBlur=!!c&&c.isDataDriven,n}return r(t,e),t}(s);t.CircleStyleLayer=d;var y=function(){return function(e,t,r){this.cap=e.getLayoutValue("line-cap",t,r),this.join=e.getLayoutValue("line-join",t,r),this.miterLimit=e.getLayoutValue("line-miter-limit",t,r),this.roundLimit=e.getLayoutValue("line-round-limit",t,r)}}();t.LineLayout=y;var f=function(){return function(e,t,r,i){this.allowOverlap=e.getLayoutValue("icon-allow-overlap",t,i),this.ignorePlacement=e.getLayoutValue("icon-ignore-placement",t,i),this.optional=e.getLayoutValue("icon-optional",t,i),this.rotationAlignment=e.getLayoutValue("icon-rotation-alignment",t,i),this.size=e.getLayoutValue("icon-size",t,i),this.rotate=e.getLayoutValue("icon-rotate",t,i),this.padding=e.getLayoutValue("icon-padding",t,i),this.keepUpright=e.getLayoutValue("icon-keep-upright",t,i),this.offset=e.getLayoutValue("icon-offset",t,i),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)}}();t.IconLayout=f;var h=function(){return function(e,t,r,i){this.allowOverlap=e.getLayoutValue("text-allow-overlap",t,i),this.ignorePlacement=e.getLayoutValue("text-ignore-placement",t,i),this.optional=e.getLayoutValue("text-optional",t,i),this.rotationAlignment=e.getLayoutValue("text-rotation-alignment",t,i),this.fontArray=e.getLayoutValue("text-font",t,i),this.maxWidth=e.getLayoutValue("text-max-width",t,i),this.lineHeight=e.getLayoutValue("text-line-height",t,i),this.letterSpacing=e.getLayoutValue("text-letter-spacing",t,i),this.justify=e.getLayoutValue("text-justify",t,i),this.anchor=e.getLayoutValue("text-anchor",t,i),this.maxAngle=e.getLayoutValue("text-max-angle",t,i),this.size=e.getLayoutValue("text-size",t,i),this.rotate=e.getLayoutValue("text-rotate",t,i),this.padding=e.getLayoutValue("text-padding",t,i),this.keepUpright=e.getLayoutValue("text-keep-upright",t,i),this.transform=e.getLayoutValue("text-transform",t,i),this.offset=e.getLayoutValue("text-offset",t,i),2===this.rotationAlignment&&(this.rotationAlignment=r?0:1)}}();t.TextLayout=h}.apply(null,i))||(e.exports=n)},898:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(339),r(377),r(336),r(977),r(1102),r(878),r(667)],void 0===(n=function(e,t,r,i,n,o,a,s,l,u,p){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return"jpg"===this.get("layer.tileInfo.format")},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this._getTileInfoSupportError(this.tileInfo,this.layer.fullExtent);if(t)this.addResolvingPromise(n.reject(t));else{var r=o.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var t=e.view.basemapTerrain.tilingScheme;l.throwIfError(e._getTileInfoCompatibilityError(e.tileInfo,t))});this.addResolvingPromise(r)}"version"in this.layer&&this.addResolvingPromise(l.checkArcGISServiceVersionCompatibility(this.layer)),this._updateMinMaxDataLevel(),this.maxDataLevel=Math.min(this.maxDataLevel,u.getKnownTiledServiceLevelCap(this.layer.url))},t.prototype.getPopupData=function(e){var t=this.layer;if("tile"!==t.type)return[];var r=this.view.scale;return t.allSublayers.toArray().filter(function(e){var t=0===e.minScale||r<=e.minScale,i=0===e.maxScale||r>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&i}).map(function(t){var r=t.createQuery();return r.geometry=e,r.outFields=t.popupTemplate.requiredFields,t.queryFeatures(r).then(function(e){return e.features})})},t.prototype.doRefresh=function(){this.suspended||this.emit("data-changed")},i([a.property({readOnly:!0,dependsOn:["layer.tileInfo.format"]})],t.prototype,"imageFormatIsOpaque",null),i([a.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),i([a.property()],t.prototype,"layer",void 0),i([a.property({aliasOf:"layer.tileInfo"})],t.prototype,"tileInfo",void 0),i([a.subclass("esri.views.3d.layers.TileLayerView3D")],t)}(a.declared(s,p))}.apply(null,i))||(e.exports=n)},927:function(e,t,r){r(928),r(929),r(930),r(931),r(932),r(933),r(934),r(935),r(936),r(937),r(938),r(939),r(940),r(941),r(942),r(943),r(944),r(945),r(946),r(947),r(948),r(949),r(950),r(951),r(952),r(953),r(954),r(955),r(956),r(957),r(958),r(959),r(960),r(961),r(962),r(963),r(964),r(965);var i=r.dj.c();e.exports=r(672)("C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/nls/basemaps",i)},928:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"  ",terrain:"  ",topo:"",gray:"   ","dark-gray":"   ",oceans:"","national-geographic":" ",osm:"OpenStreetMap","streets-night-vector":"   ()","streets-relief-vector":"   ( )","streets-navigation-vector":"  "}},929:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snimke",hybrid:"Snimke s oznakama",terrain:"Teren s oznakama",topo:"Topografski",gray:"Svijetlo siva podloga","dark-gray":"Tamno siva podloga",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Svjetska karta ulica (no)","streets-relief-vector":"Svjetska karta ulica (s reljefom)","streets-navigation-vector":"Navigacijska karta svijeta"}},930:function(e,t,r){e.exports={streets:"Carrers",satellite:"Imatges",hybrid:"Imatges amb etiquetes",terrain:"Terreny amb etiquetes",topo:"Topogrfic",gray:"Lona gris clar","dark-gray":"Lona gris fosc",oceans:"Oceans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa de carrers mundial (nit)","streets-relief-vector":"Mapa de carrers mundial (amb relleu)","streets-navigation-vector":"Mapa de navegaci mundial"}},931:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snmky",hybrid:"Snmky s popisky",terrain:"Tern s popisky",topo:"Topografick",gray:"Svtle ed podklad","dark-gray":"Tmav ed podklad",oceans:"Oceny","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa svta s ulin st (noc)","streets-relief-vector":"Mapa svta s ulin st (s relifem)","streets-navigation-vector":"Navigan mapa svta"}},932:function(e,t,r){e.exports={streets:"Streets",satellite:"Imagery",hybrid:"Billeder med tekster",terrain:"Terrn med tekster",topo:"Topografisk",gray:"Lysegrt lrred","dark-gray":"Mrkegrt lrred",oceans:"Oceaner","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Verdensgadekort (nat)","streets-relief-vector":"Verdensgadekort (med relief)","streets-navigation-vector":"Verdensnavigationskort"}},933:function(e,t,r){e.exports={streets:"Straen",satellite:"Bilddaten",hybrid:"Bilddaten mit Beschriftungen",terrain:"Terrain mit Beschriftungen",topo:"Topografisch",gray:"Hellgrauer Hintergrund","dark-gray":"Dunkelgrauer Hintergrund",oceans:"Meere","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Weltweite Straenkarte (Nacht)","streets-relief-vector":"Weltweite Straenkarte (mit Relief)","streets-navigation-vector":"Weltweite Navigationskarte"}},934:function(e,t,r){e.exports={streets:"",satellite:" ",hybrid:"  ",terrain:"  ",topo:"",gray:"  ","dark-gray":"  ",oceans:"","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"}},935:function(e,t,r){e.exports={streets:"Calles",satellite:"Imgenes",hybrid:"Imgenes con etiquetas",terrain:"Terreno con etiquetas",topo:"Topogrfico",gray:"Lona gris claro","dark-gray":"Lona gris oscuro",oceans:"Ocanos","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa de calles mundial (Noche)","streets-relief-vector":"Mapa de calles mundial (con relieve)","streets-navigation-vector":"Mapa de navegacin mundial"}},936:function(e,t,r){e.exports={streets:"Tnavad",satellite:"Satelliitpildid",hybrid:"Kaardikirjadega satelliitpildid",terrain:"Kaardikirjadega krgusmudel",topo:"Topograafiline kaart",gray:"Helehall taust","dark-gray":"Tumehall taust",oceans:"Ookeanid","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Maailma tnavakaart ()","streets-relief-vector":"Maailma tnavakaart(reljeefiga)","streets-navigation-vector":"Maailma navigeerimiskaart"}},937:function(e,t,r){e.exports={streets:"Streets",satellite:"Imagery",hybrid:"Kuvasto, jossa selitteet",terrain:"Maasto, jossa selitteet",topo:"Topografia",gray:"Vaaleanharmaa kangas","dark-gray":"Tummanharmaa kangas",oceans:"Oceans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Maailman katukartta (y)","streets-relief-vector":"Maailman katukartta (korkeuseroilla)","streets-navigation-vector":"Maailman navigointikartta"}},938:function(e,t,r){e.exports={streets:"Rues",satellite:"Imagerie",hybrid:"Imagerie avec tiquettes",terrain:"MNT avec tiquettes",topo:"Topographie",gray:"Nuances de gris","dark-gray":"Nuances de gris fonc",oceans:"Ocans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"}},939:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"  ",terrain:"   ",topo:"",gray:"  ","dark-gray":"  ",oceans:"","national-geographic":" ",osm:"OpenStreetMap","streets-night-vector":"   ()","streets-relief-vector":"   ( )","streets-navigation-vector":"  "}},940:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"  ",terrain:"  -",topo:"",gray:"  ","dark-gray":"  ",oceans:"","national-geographic":"National Geographic ( )",osm:"OpenStreetMap","streets-night-vector":"   ()","streets-relief-vector":"   ( )","streets-navigation-vector":"  "}},941:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snimke",hybrid:"Snimke s oznakama",terrain:"Teren s oznakama",topo:"Topografski",gray:"Svijetlo siva podloga","dark-gray":"Tamno siva podloga",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Svjetska karta ulica (no)","streets-relief-vector":"Svjetska karta ulica (s reljefom)","streets-navigation-vector":"Navigacijska karta svijeta"}},942:function(e,t,r){e.exports={streets:"Utck",satellite:"Tvrzkelt felvtel",hybrid:"Tvrzkelt felvtel felirattal",terrain:"Domborzati trkp felirattal",topo:"Topogrfiai trkp",gray:"Vilgosszrke vztrkp","dark-gray":"Sttszrke vztrkp",oceans:"cenok","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Vilg thlzat Trkp (jszaka)","streets-relief-vector":"Vilg thlzat Trkp (domborzattal)","streets-navigation-vector":"Vilg Navigcis Trkp"}},943:function(e,t,r){e.exports={streets:"Jalan",satellite:"Citra",hybrid:"Citra dengan Label",terrain:"Medan dengan Label",topo:"Topografi",gray:"Kanvas Abu-Abu Muda","dark-gray":"Kanvas Abu-Abu Gelap",oceans:"Samudra","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Peta Jalan Dunia (Malam)","streets-relief-vector":"Peta Jalan Dunia (dengan Relief)","streets-navigation-vector":"Peta Navigasi Dunia"}},944:function(e,t,r){e.exports={streets:"Vie",satellite:"Immagini",hybrid:"Immagini con etichette",terrain:"Suolo con etichette",topo:"Topografico",gray:"Tela grigio chiaro","dark-gray":"Tela grigio scuro",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mappa stradale mondiale (notte)","streets-relief-vector":"Mappa stradale mondiale (con rilievo)","streets-navigation-vector":"Mappa mondiale navigazione"}},945:function(e,t,r){e.exports={streets:" ()",satellite:"",hybrid:"",terrain:"",topo:"",gray:" ( )","dark-gray":" ( )",oceans:"","national-geographic":" ",osm:"OpenStreetMap","streets-night-vector":" (World Street Map) ()","streets-relief-vector":" (World Street Map) ()","streets-navigation-vector":"  (World Navigation Map)"}},946:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"( )",terrain:"( )",topo:"",gray:"  ","dark-gray":"  ",oceans:"","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":" ()","streets-relief-vector":" ( )","streets-navigation-vector":" "}},947:function(e,t,r){e.exports={streets:"Ielas",satellite:"Attli",hybrid:"Attli ar nosaukumiem",terrain:"Reljefs ar nosaukumiem",topo:"Topogrfisk",gray:"Gaii pelka pamatne","dark-gray":"Tumi pelka pamatne",oceans:"Okeni","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Pasaules ielu karte (nakts)","streets-relief-vector":"Pasaules ielu karte (ar reljefu)","streets-navigation-vector":"Pasaules navigcijas karte"}},948:function(e,t,r){e.exports={streets:"Gatvs",satellite:"Aeronuotrauka",hybrid:"Aeronuotrauka su ymmis",terrain:"Teritorija su ymmis",topo:"Topografinis",gray:"viesiai pilkas fonas","dark-gray":"Tamsiai pilkas fonas",oceans:"Vandenynai","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Pasaulio keli ir gatvi emlapis (naktinis)","streets-relief-vector":"Pasaulio keli ir gatvi emlapis (su reljefu)","streets-navigation-vector":"Pasaulio navigacijos emlapis"}},949:function(e,t,r){e.exports={streets:"Straten",satellite:"Imagery",hybrid:"Satellietbeelden met labels",terrain:"Terrein met labels",topo:"Topografisch",gray:"Lichtgrijs canvas","dark-gray":"Donkergrijs canvas",oceans:"Oceanen","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Wereldstratenkaart (nacht)","streets-relief-vector":"Wereldstratenkaart (met relif)","streets-navigation-vector":"Navigatiekaart wereld"}},950:function(e,t,r){e.exports={streets:"Gater",satellite:"Bilder",hybrid:"Bilder med pskrifter",terrain:"Terreng med pskrift",topo:"Topografisk",gray:"Lysegrtt lerret","dark-gray":"Mrkegrtt lerret",oceans:"Kyst og sj","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"}},951:function(e,t,r){e.exports={streets:"Ulice",satellite:"Zobrazowania",hybrid:"Zobrazowania z etykietami",terrain:"Teren z etykietami",topo:"Topograficzna",gray:"W odcieniach szaroci","dark-gray":"Ciemne, szare ptno",oceans:"Oceany","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa ulic wiata (noc)","streets-relief-vector":"Mapa ulic wiata (z rzeb terenu)","streets-navigation-vector":"wiatowa mapa nawigacji"}},952:function(e,t,r){e.exports={streets:"Ruas",satellite:"Imagem",hybrid:"Imagem com Rtulos",terrain:"Terreno com Rtulos",topo:"Topogrfico",gray:"Tela Cinza Claro","dark-gray":"Tela Cinza Escuro",oceans:"Oceanos","national-geographic":"Geogrfico Nacional",osm:"OpenStreetMap","streets-night-vector":"Mapa de Ruas Mundial (Noite)","streets-relief-vector":"Mapa de Ruas Mundial (com Relevo)","streets-navigation-vector":"Mapa de Navegao Mundial"}},953:function(e,t,r){e.exports={streets:"Ruas",satellite:"Imagem",hybrid:"Imagens com Rtulos",terrain:"Terrenos com Rtulos",topo:"Topogrfico",gray:"Fundo Cinza Claro","dark-gray":"Fundo Cinza Escuro",oceans:"Oceanos","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Mapa de Ruas Mundial (Noite)","streets-relief-vector":"Mapa de Ruas Mundial (com Relevo)","streets-navigation-vector":"Mapa de Navegao Mundial"}},954:function(e,t,r){e.exports={streets:"Strzi",satellite:"Imagini satelitare",hybrid:"Imagini cu etichete",terrain:"Teren cu etichete",topo:"Topografic",gray:"Fond gri deschis","dark-gray":"Fond gri nchis",oceans:"Oceane","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Hart stradal global (Noapte)","streets-relief-vector":"Hart stradal global (cu relief)","streets-navigation-vector":"Hart de navigare global"}},955:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"  ",terrain:"  ",topo:"",gray:"- ","dark-gray":"- ",oceans:"","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map ()","streets-relief-vector":"World Street Map ( )","streets-navigation-vector":"World Navigation Map"}},956:function(e,t,r){e.exports={streets:"Ulice",satellite:"Slikovje",hybrid:"Slikovje z napisi",terrain:"Relief z napisi",topo:"Topografska karta",gray:"Svetlo sivo platno","dark-gray":"Temno sivo platno",oceans:"Oceani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Karta ulic (noni pogled)","streets-relief-vector":"Karta ulic (z reliefom)","streets-navigation-vector":"Navigacijska karta"}},957:function(e,t,r){e.exports={streets:"Ulice",satellite:"Snimci",hybrid:"Snimci sa natpisima",terrain:"Teren sa oznakama",topo:"Topografski",gray:"Svetlosivo platno","dark-gray":"Tamnosivo platno",oceans:"Okeani","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (no)","streets-relief-vector":"World Street Map (sa reljefom)","streets-navigation-vector":"Svetska mapa za navigaciju"}},958:function(e,t,r){e.exports={streets:"Gator",satellite:"Imagery",hybrid:"Bilder med etiketter",terrain:"Terrng med etiketter",topo:"Topografisk",gray:"Ljusgr bakgrundskarta","dark-gray":"Mrkgr bakgrundskarta",oceans:"Hav","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Vrldstckande vgkarta (natt)","streets-relief-vector":"Vrldstckande vgkarta (med relief)","streets-navigation-vector":"Vrldstckande navigeringskarta"}},959:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"",terrain:"",topo:"",gray:"","dark-gray":"",oceans:"","national-geographic":" ",osm:"OpenStreetMap","streets-night-vector":" ()","streets-relief-vector":" (with Relief)","streets-navigation-vector":""}},960:function(e,t,r){e.exports={streets:"Sokaklar",satellite:"Grntler",hybrid:"Etiketli Grntler",terrain:"Etiketli Araziler",topo:"Topografik",gray:"Ak Gri Kanvas","dark-gray":"Koyu Gri Kanvas",oceans:"Okyanuslar","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Dnya Sokak Haritas (Gece)","streets-relief-vector":"Dnya Sokak Haritas (Kabartmal)","streets-navigation-vector":"Dnya Navigasyon Haritas"}},961:function(e,t,r){e.exports={streets:"ng ph",satellite:"D liu hnh nh",hybrid:"Hnh nh c Dn nhn",terrain:"a hnh c Dn nhn",topo:"a hnh",gray:"Bc v xm nht","dark-gray":"Bc v xm m",oceans:"i dng","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"Bn  ng ph Th gii (Ban m)","streets-relief-vector":"Bn  ng ph Th gii (c a hnh)","streets-navigation-vector":"Bn  iu hng Th gii"}},962:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"",terrain:" Terrain",topo:"",gray:"","dark-gray":"",oceans:"","national-geographic":"",osm:"OpenStreetMap","streets-night-vector":"()","streets-relief-vector":"()","streets-navigation-vector":""}},963:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"",terrain:"",topo:"",gray:"","dark-gray":"",oceans:"","national-geographic":"",osm:"OpenStreetMap","streets-night-vector":" ()","streets-relief-vector":" ()","streets-navigation-vector":""}},964:function(e,t,r){e.exports={streets:"",satellite:"",hybrid:"",terrain:"",topo:"",gray:"","dark-gray":"",oceans:"","national-geographic":"",osm:"OpenStreetMap","streets-night-vector":" ()","streets-relief-vector":" ()","streets-navigation-vector":""}},965:function(e,t,r){e.exports={root:{streets:"Streets",satellite:"Imagery",hybrid:"Imagery with Labels",terrain:"Terrain with Labels",topo:"Topographic",gray:"Light Gray Canvas","dark-gray":"Dark Gray Canvas",oceans:"Oceans","national-geographic":"National Geographic",osm:"OpenStreetMap","streets-night-vector":"World Street Map (Night)","streets-relief-vector":"World Street Map (with Relief)","streets-navigation-vector":"World Navigation Map"},ar:1,bs:1,ca:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lv:1,lt:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sl:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}},971:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(t,r,i){this._op=t,"$type"===r?(i instanceof Array?this._val=i.map(function(t){return e._types.indexOf(t)}):this._val=e._types.indexOf(i),this._op+=11):(this._key=r,this._val=i)}return e.prototype.filter=function(e){switch(this._op){case 0:return this._val;case 1:return e.values[this._key]===this._val;case 2:return e.values[this._key]!==this._val;case 3:return e.values[this._key]<this._val;case 4:return e.values[this._key]>this._val;case 5:return e.values[this._key]<=this._val;case 6:return e.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(e.values[this._key]);case 8:return-1===this._val.indexOf(e.values[this._key]);case 9:for(var t=0,r=this._val;t<r.length;t++){if(r[t].filter(e))return!0}return!1;case 10:for(var i=0,n=this._val;i<n.length;i++){if(!n[i].filter(e))return!1}return!0;case 11:for(var o=0,a=this._val;o<a.length;o++){if(a[o].filter(e))return!1}return!0;case 12:return e.type===this._val;case 13:return e.type!==this._val;case 14:return e.type<this._val;case 15:return e.type>this._val;case 16:return e.type>=this._val;case 17:return e.type<=this._val;case 18:return-1!==this._val.indexOf(e.type);case 19:return-1===this._val.indexOf(e.type)}},e.createFilter=function(t){if(!t)return new e(0,void 0,!0);var r=t[0];if(t.length<=1)return new e(0,void 0,"any"!==r);switch(r){case"==":return new e(1,t[1],t[2]);case"!=":return new e(2,t[1],t[2]);case">":return new e(4,t[1],t[2]);case"<":return new e(3,t[1],t[2]);case">=":return new e(6,t[1],t[2]);case"<=":return new e(5,t[1],t[2]);case"in":return new e(7,t[1],t.slice(2));case"!in":return new e(8,t[1],t.slice(2));case"any":return new e(9,void 0,t.slice(1).map(e.createFilter.bind(this)));case"all":return new e(10,void 0,t.slice(1).map(e.createFilter.bind(this)));case"none":return new e(11,void 0,t.slice(1).map(e.createFilter.bind(this)));default:throw new Error("invalid operator: "+r)}},e._types=["Unknown","Point","LineString","Polygon"],e}()}.apply(null,i))||(e.exports=n)},972:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},e.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}},e.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}},e.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}},e.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}},e.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}},e.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}},e.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},e.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}},e}();t.StyleDefinition=r}.apply(null,i))||(e.exports=n)},973:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(358),r(616)],void 0===(n=function(e,t,r,i){return function(){function e(t,r,i){var n;switch(this.isDataDriven=!1,r.type){case"number":n=!0;break;case"color":n=!0,i=e._parseColor(i);break;case"array":n="number"===r.value;break;default:n=!1}null==i&&(i=r.default),n&&"interval"===i.type&&(n=!1);var o=i&&i.stops&&i.stops.length>0;if(o)for(var a=0,s=i.stops;a<s.length;a++){var l=s[a];l[1]=this._validate(l[1],r)}if(this.isDataDriven=!!i&&!!i.property,this.isDataDriven)if(void 0!==i.default&&(i.default=this._validate(i.default,r)),o)switch(i.type){case"identity":this.getValue=this._buildIdentity(i,r);break;case"categorical":this.getValue=this._buildCategorical(i,r);break;default:this.getValue=n?this._buildInterpolate(i,r):this._buildInterval(i,r)}else this.getValue=this._buildIdentity(i,r);else o?this.getValue=n?this._buildZoomInterpolate(i):this._buildZoomInterval(i):(i=this._validate(i,r),this.getValue=this._buildSimple(i))}return e.prototype._validate=function(e,t){if("number"===t.type){if(e<t.minimum)return t.minimum;if(e>t.maximum)return t.maximum}return e},e.prototype._buildSimple=function(e){return function(){return e}},e.prototype._buildIdentity=function(t,r){var i=this;return function(n,o){var a;return o&&(a=o.values[t.property],"color"===r.type&&(a=e._parseColor(a))),void 0===a&&(a=t.default),void 0!==a?i._validate(a,r):r.default}},e.prototype._buildCategorical=function(e,t){var r=this;return function(i,n){var o;return n&&(o=n.values[e.property]),void 0!==(o=r._categorical(o,e.stops))?o:void 0!==e.default?e.default:t.default}},e.prototype._buildInterval=function(e,t){var r=this;return function(i,n){var o;return n&&(o=n.values[e.property]),"number"==typeof o?r._interval(o,e.stops):void 0!==e.default?e.default:t.default}},e.prototype._buildInterpolate=function(e,t){var r=this;return function(i,n){var o;return n&&(o=n.values[e.property]),"number"==typeof o?r._interpolate(o,e.stops,e.base||1):void 0!==e.default?e.default:t.default}},e.prototype._buildZoomInterpolate=function(e){var t=this;return function(r){return t._interpolate(r,e.stops,e.base||1)}},e.prototype._buildZoomInterval=function(e){var t=this;return function(r){return t._interval(r,e.stops)}},e.prototype._categorical=function(e,t){for(var r=t.length,i=0;i<r;i++)if(t[i][0]===e)return t[i][1]},e.prototype._interval=function(e,t){for(var r=t.length,i=0,n=0;n<r&&t[n][0]<=e;n++)i=n;return t[i][1]},e.prototype._interpolate=function(e,t,r){for(var n,o,a=t.length,s=0;s<a;s++){var l=t[s];if(!(l[0]<=e)){o=l;break}n=l}if(n&&o){var u=o[0]-n[0],p=e-n[0],c=1===r?p/u:(Math.pow(r,p)-1)/(Math.pow(r,u)-1);if(Array.isArray(n[1])){var d=n[1],y=o[1],f=[];for(s=0;s<d.length;s++)f.push(i.interpolate(d[s],y[s],c));return f}return i.interpolate(n[1],o[1],c)}return n?n[1]:o?o[1]:void 0},e._isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e._parseColor=function(t){if(Array.isArray(t))return t;if("string"!=typeof t)return t&&t.default&&(t.default=e._parseColor(t.default)),t&&t.stops&&(t.stops=t.stops.map(function(t){return[t[0],e._parseColor(t[1])]})),t;var i=new r(t);return this._isEmpty(i)?void 0:r.toUnitRGBA(i)},e}()}.apply(null,i))||(e.exports=n)},974:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(353),r(895)],void 0===(n=function(e,t,r,i){return function(){function e(t,i){if(this.styleJSON=t,this.version=parseFloat(t.version),this.sprite=i?i.spriteUrl:t.sprite,this.glyphs=i?i.glyphsUrl:t.glyphs,r("stable-symbol-rendering")){var n=(t.layers||[]).filter(function(e){return e.layout&&e.layout["text-font"]})[0];n&&(t.layers||[]).forEach(function(e){e.layout&&e.layout["text-font"]&&(e.layout["text-font"]=n.layout["text-font"])})}this.layers=(t.layers||[]).map(e._create),this._identifyRefLayers()}return e.prototype._identifyRefLayers=function(){for(var e=[],t=[],r=0,i=0,n=this.layers;i<n.length;i++){var o=n[i];if(1===o.type){var a=o,s=o.sourceLayer;s+="|"+JSON.stringify(o.minzoom),s+="|"+JSON.stringify(o.maxzoom),s+="|"+JSON.stringify(o.filter),(a.hasDataDrivenFill||a.hasDataDrivenOutline)&&(s+="|"+JSON.stringify(r)),e.push({key:s,layer:o})}if(2===o.type){var l=o;s=o.sourceLayer;s+="|"+JSON.stringify(o.minzoom),s+="|"+JSON.stringify(o.maxzoom),s+="|"+JSON.stringify(o.filter),s+="|"+JSON.stringify(o.layout&&o.layout["line-cap"]),s+="|"+JSON.stringify(o.layout&&o.layout["line-join"]),l.hasDataDrivenLine&&(s+="|"+JSON.stringify(r)),t.push({key:s,layer:o})}++r}this._assignRefLayers(e),this._assignRefLayers(t)},e.prototype._assignRefLayers=function(e){e.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:0});for(var t,r,i=e.length,n=0;n<i;n++){var o=e[n];if(o.key===t)o.layer.refLayerId=r;else if(t=o.key,r=o.layer.id,1===o.layer.type&&!o.layer.getPaintProperty("fill-outline-color"))for(var a=n+1;a<i;a++){var s=e[a];if(s.key!==t)break;if(s.layer.getPaintProperty("fill-outline-color")){e[n]=s,e[a]=o,r=s.layer.id;break}}}},e._create=function(e,t,r){var n=1-(1+t)*(1/(r.length+1));switch(e.type){case"background":return new i.BackgroundStyleLayer(0,e,n);case"fill":return new i.FillStyleLayer(1,e,n);case"line":return new i.LineStyleLayer(2,e,n);case"symbol":return new i.SymbolStyleLayer(3,e,n);case"raster":throw new Error("Unsupported vector tile raster layer");case"circle":return new i.CircleStyleLayer(4,e,n)}throw new Error("Unknown vector tile layer")},e}()}.apply(null,i))||(e.exports=n)},976:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(349),r(411)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createForItem=function(e){return{origin:"portal-item",url:r.urlToObject(e.itemUrl),portal:e.portal||i.getDefault()}}}.apply(null,i))||(e.exports=n)},977:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(341),r(336),r(734),r(764),r(878)],void 0===(n=function(e,t,r,i,n,o,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDataLevel=0,t.maxDataLevel=1/0,t._isUpdating=!1,t}return r(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpaque",{get:function(){return this.fullOpacity>=1&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0}),t.prototype.getTileUrl=function(e,t,r){return this.layer.getTileUrl(e,t,r)},t.prototype.updatingChanged=function(e){this._isUpdating=e,this.notifyChange("updating")},t.prototype.isUpdating=function(){return this._isUpdating},t.prototype._getTileInfoSupportError=function(e,t){var r=l.checkIfTileInfoSupportedForView(e,t,this.view.spatialReference,this.view.basemapTerrain.manifold);if(r){var i={layer:this.layer,error:r},o=void 0;switch(r.name){case"tilingscheme:local-gcs-not-supported":o=new n("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",i);break;case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":o=new n("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",i);break;default:o=new n("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",i)}return o}return null},t.prototype._getTileInfoCompatibilityError=function(e,t){return t.compatibleWith(e)?null:new n("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")},t.prototype._updateMinMaxDataLevel=function(){var e,t=1/0,r=0;this.tileInfo.lods.forEach(function(e){t=Math.min(e.level,t),r=Math.max(e.level,r)}),e=[t,r],this.minDataLevel=e[0],this.maxDataLevel=e[1]},i([o.property({readOnly:!0})],t.prototype,"imageFormatIsOpaque",null),i([o.property(s.updatingPercentage)],t.prototype,"updatingPercentage",void 0),i([o.property(s.updatingPercentageValue)],t.prototype,"updatingPercentageValue",void 0),i([o.property()],t.prototype,"fullExtent",void 0),i([o.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],t.prototype,"isOpaque",null),i([o.property()],t.prototype,"layer",void 0),i([o.property()],t.prototype,"minDataLevel",void 0),i([o.property()],t.prototype,"maxDataLevel",void 0),i([o.property()],t.prototype,"tileInfo",void 0),i([o.subclass("esri.views.3d.layers.TiledLayerView3D")],t)}(o.declared(a))}.apply(null,i))||(e.exports=n)},978:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(367),r(342),r(886),r(686)],void 0===(n=function(e,t,r,i,n,o,a){function s(e,t,r,i){n.vec3d.set(r,u),u[i]=t[i];var o,a=n.vec3d.subtract(u,t),s=n.vec3d.subtract(e,t,p),l=n.vec3d.dot(s,a),c=n.vec3d.dot(a,a);o=l<=0?t:c<=l?r:n.vec3d.add(t,n.vec3d.scale(a,l/c),u);var d=n.vec3d.subtract(e,o,u);return Math.PI/2-Math.atan(d[2]/Math.sqrt(d[0]*d[0]+d[1]*d[1]))}function l(e,t){var n=e.lods,s=n[0].resolution*Math.pow(2,n[0].level),l=[s*e.size[0],s*e.size[1]],u=[e.origin.x,e.origin.y],p=i.fromExtent(t),c=i.create();a.computeRowColExtent(p,l,u,c);var d=(c[2]-c[0])*(c[3]-c[1]);if(d>o.MAX_ROOT_TILES){var y=n[0].scale*Math.pow(2,n[0].level),f=Math.max((p[3]-p[1])/e.size[1],(p[2]-p[0])/e.size[0])*y/s,h=Math.floor(Math.log(f)/Math.log(10));return f=Math.ceil(f/Math.pow(10,h))*Math.pow(10,h),new r("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(y).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+f.toLocaleString()+".",{level0Scale:y,suggestedLevel0Scale:f,requiredNumRootTiles:d,allowedNumRootTiles:o.MAX_ROOT_TILES})}return null}Object.defineProperty(t,"__esModule",{value:!0});var u=n.vec3d.create(),p=n.vec3d.create(),c=n.vec3d.create(),d=n.vec3d.create();t.isInsideExtent=function(e,t,r){void 0===r&&(r=0);var n=e.extent;if(0===r)return i.containsPoint(n,t);var o=Math.min(n[2]-n[0],n[3]-n[1]);return i.containsPointWithMargin(n,t,r*o)},t.tiltOnEdge=s,t.tiltToExtentEdge=function(e,t){var r=e.getElevationBounds(),i=e.extent,n=.5*(r[0]+r[1]);c[0]=i[0],c[1]=i[1],c[2]=n,d[0]=i[2],d[1]=i[3],d[2]=n;var o=1/0,a=1/0;return t[0]<c[0]?o=s(t,c,d,0):t[0]>d[0]&&(o=s(t,d,c,0)),t[1]<c[1]?a=s(t,c,d,1):t[1]>d[1]&&(a=s(t,d,c,1)),Math.min(o,a)},t.checkIfTileInfoSupportedForViewSR=function(e,t,i){if(e.spatialReference.isGeographic)return new r("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var n=a.checkUnsupported(e);return n||l(e,t)||(i&&!e.spatialReference.equals(i)?new r("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null)}}.apply(null,i))||(e.exports=n)},979:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(686)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isInsideExtent=function(e,t,r){return void 0===r&&(r=0),!0},t.tiltToExtentEdge=function(e,t){return 0},t.checkIfTileInfoSupportedForViewSR=function(e,t,n){var o=e.lods.length-1;if(e.spatialReference.isWebMercator){if(!i.makeWebMercatorAuxiliarySphere(o).compatibleWith(e))return new r("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!e.spatialReference.isWGS84)return new r("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!i.makeWGS84WithTileSize(e.size[1],o).compatibleWith(e))return new r("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme")}if(n&&!e.spatialReference.equals(n))return new r("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}}.apply(null,i))||(e.exports=n)},998:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t){this.lockedSchemaPixelSize=e,this.isWGS84=t}return e.prototype.getLevelRowColumn=function(e){return this.isWGS84?[e[0],e[1]>>1,e[2]>>1]:256===this.lockedSchemaPixelSize&&e[0]>0?[e[0]-1,e[1]>>1,e[2]>>1]:e},e.prototype.adjustLevel=function(e){return this.isWGS84?e:256===this.lockedSchemaPixelSize?e>0?e-1:0:e},e.prototype.getShift=function(e,t){var r=0,i=0;return(256===this.lockedSchemaPixelSize||this.isWGS84)&&(e[2]%2&&(r=2*t),e[1]%2&&(i=2*t)),[r,i]},e.prototype.getScale=function(e){if(this.isWGS84){if(512===this.lockedSchemaPixelSize)return 2}else if(256===this.lockedSchemaPixelSize&&0===e)return.5;return 1},e.create256x256CompatibleTileInfo=function(e){if(!e)return null;if(256===e.rows&&256===e.cols)return e;for(var t=4326===e.spatialReference.wkid,r=[],i=e.lods.length,n=0;n<i;n++){var o=e.lods[n],a=t?o.resolution:2*o.resolution;r.push({level:o.level,scale:o.scale,resolution:a})}return{rows:256,cols:256,dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:r}},e.create512x512CompatibleTileInfo=function(e){if(!e)return null;if(256===e.rows||256===e.cols)return null;for(var t=[],r=e.lods.length,i=0;i<r;i++){var n=e.lods[i],o=.5*n.resolution;t.push({level:n.level,scale:n.scale,resolution:o})}return{rows:512,cols:512,dpi:e.dpi,format:e.format,compressionQuality:e.compressionQuality,origin:e.origin,spatialReference:e.spatialReference,lods:t}},e}()}.apply(null,i))||(e.exports=n)}}]);