(function(){(this||window).webpackJsonp.registerAbsMids({"esri/core/screenUtils":354,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/screenUtils":354,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/Symbol":371,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Domain":374,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/FeatureSet":392,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Field":395,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/domains":399,"esri/symbols/SimpleLineSymbol":402,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/SimpleLineSymbol":402,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/urlUtils":403,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeatureSet":425,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ScaleRangeLayer":426,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/commonProperties":429,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISService":436,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/RefreshableLayer":438,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/AttachmentQuery":440,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/RelationshipQuery":444,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/FillSymbol":457,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/MarkerSymbol":458,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/support/urlUtils":586,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/LineSymbol":592,"esri/core/pbf":593,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/pbf":593,"esri/layers/graphics/OptimizedGeometry":595,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedGeometry":595,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/CodedValueDomain":597,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/InheritedDomain":598,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/RangeDomain":599,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/fieldType":600,"esri/layers/graphics/OptimizedFeature":603,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/graphics/OptimizedFeature":603,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/graphicsUtils":613,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/query":627,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfQueryUtils":628,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfFeatureServiceParser":629,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/queryAttachments":639,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/QueryTask":647,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/queryRelatedRecords":648,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/PictureMarkerSymbol":701,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/symbols/SimpleFillSymbol":702,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/LercCodec":804,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/ImageryLayer":908,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/PixelBlock":1630,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/Zlib":1631,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISImageService":2274,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/Raster":2275,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/JpgPlus":2276,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/Jpg":2277,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/Png":2278,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/Raw":2279,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/MosaicRule":2280,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/RasterFunction":2281,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/DimensionalDefinition":2282,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/ImageServiceIdentifyTask":2283,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyResult":2284,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/support/ImageServiceIdentifyParameters":2285})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1630:function(e,t,r){var i,n;i=[r(346),r(338)],void 0===(n=function(e,t){return e.createSubclass({declaredClass:"esri.layers.support.PixelBlock",normalizeCtorArgs:function(e){if(!e.width||Math.floor(e.width)!==e.width)throw"PixelBlock: incorrect width";if(!e.height||Math.floor(e.height)!==e.height)throw"PixelBlock: incorrect height";if(!e.pixels||!e.statistics)throw"PixelBlock: pixel data or statistics not present"},properties:{height:null,mask:null,pixels:[],pixelType:null,planes:null,statistics:[],width:null},getPlaneCount:function(){return this.pixels.length!==this.statistics.length?console.error("Inconsistent pixel data and statistics"):this.statistics.length},addData:function(e){if(!e.pixels||!e.statistics)throw"Pixel data or statistics are not present";if(e.pixels.length!==this.width*this.height)throw"Inconsistent pixel data size";this.statistics.push(e.statistics),this.pixels.push(e.pixels)},getAsRGBA:function(){var e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)},getAsRGBAFloat:function(){var e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e},clone:function(){var e,r,i=new this.constructor;if(i.width=this.width,i.height=this.height,i.pixelType=this.pixelType,this.mask&&(i.mask=new Uint8Array(this.mask)),this.pixels)for(i.pixels=[],r=this.pixels.length,e=0;e<r;e++)i.pixels[e]=new Float32Array(this.pixels[e]);if(this.statistics)for(i.statistics=[],r=this.statistics.length,e=0;e<r;e++)i.statistics[e]=t.clone(this.statistics[e]);return i},_fillFrom8Bit:function(e){var t,r,i,n,a=this.pixels,s=this.mask;if(!e||!a||!a.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");t=r=i=a[0],a.length>=3&&(r=a[1],i=a[2]);var o=new Uint32Array(e),l=this.width*this.height;if(t.length!==l)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(s&&s.length===l)for(n=0;n<l;n++)s[n]&&(o[n]=255<<24|i[n]<<16|r[n]<<8|t[n]);else for(n=0;n<l;n++)o[n]=255<<24|i[n]<<16|r[n]<<8|t[n]},_fillFromNon8Bit:function(e){var t=this.pixels,r=this.mask,i=this.statistics;if(!e||!t||!t.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");var n=1,a=0;if(i&&i.length>0)a=i[0].minValue,n=255/(i[0].maxValue-i[0].minValue);else{var s=255;"s8"===this.pixelType?(a=-128,s=127):"u16"===this.pixelType?s=65535:"s16"===this.pixelType?(a=-32768,s=32767):"u32"===this.pixelType?s=4294967295:"s32"===this.pixelType?(a=-2147483648,s=2147483647):"f32"===this.pixelType?(a=-3.4e39,s=3.4e39):"f64"===this.pixelType&&(a=-Number.MAX_VALUE,s=Number.MAX_VALUE),n=255/(s-a)}var o,l,u,c,p,d=new Uint32Array(e),h=this.width*this.height;if((o=t[0]).length!==h)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=3)if(l=t[1],u=t[2],r&&r.length===h)for(c=0;c<h;c++)r[c]&&(d[c]=255<<24|(u[c]-a)*n<<16|(l[c]-a)*n<<8|(o[c]-a)*n);else for(c=0;c<h;c++)d[c]=255<<24|(u[c]-a)*n<<16|(l[c]-a)*n<<8|(o[c]-a)*n;else if(r&&r.length===h)for(c=0;c<h;c++)p=(o[c]-a)*n,r[c]&&(d[c]=255<<24|p<<16|p<<8|p);else for(c=0;c<h;c++)p=(o[c]-a)*n,d[c]=255<<24|p<<16|p<<8|p},_fillFrom32Bit:function(e){var t,r,i,n,a=this.pixels,s=this.mask;if(!e||!a||!a.length)return console.error("Unable to convert to RGBA. The input pixel block is empty.");t=r=i=a[0],a.length>=3&&(r=a[1],i=a[2]);var o=this.width*this.height;if(t.length!==o)return console.error("Unable to convert to RGBA. The pixelblock is invalid.");var l=0;if(s&&s.length===o)for(n=0;n<o;n++)e[l++]=t[n],e[l++]=r[n],e[l++]=i[n],e[l++]=s[n];else for(n=0;n<o;n++)e[l++]=t[n],e[l++]=r[n],e[l++]=i[n],e[l++]=255}})}.apply(null,i))||(e.exports=n)},1631:function(e,t,r){var i;void 0===(i=function(){var e=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,r=t?t.byteLength:0;if(e<r)return t;for(var i=512;i<e;)i<<=1;for(var n=new Uint8Array(i),a=0;a<r;++a)n[a]=t[a];return this.buffer=n},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var i=this.bufferLength;r>i&&(r=i)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,r){for(var i=e+t;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}();return function(){function t(e){throw new Error(e)}function r(r){var i=0,n=r[i++],a=r[i++];-1!=n&&-1!=a||t("Invalid header in flate stream"),8!=(15&n)&&t("Unknown compression method in flate stream"),((n<<8)+a)%31!=0&&t("Bad FCHECK in flate stream"),32&a&&t("FDICT bit set in flate stream"),this.bytes=r,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,e.call(this)}var i=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),n=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),s=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],o=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return r.prototype=Object.create(e.prototype),r.prototype.getBits=function(e){for(var r,i=this.codeSize,n=this.codeBuf,a=this.bytes,s=this.bytesPos;i<e;)void 0===(r=a[s++])&&t("Bad encoding in flate stream"),n|=r<<i,i+=8;return r=n&(1<<e)-1,this.codeBuf=n>>e,this.codeSize=i-=e,this.bytesPos=s,r},r.prototype.getCode=function(e){for(var r=e[0],i=e[1],n=this.codeSize,a=this.codeBuf,s=this.bytes,o=this.bytesPos;n<i;){var l;void 0===(l=s[o++])&&t("Bad encoding in flate stream"),a|=l<<n,n+=8}var u=r[a&(1<<i)-1],c=u>>16,p=65535&u;return(0==n||n<c||0==c)&&t("Bad encoding in flate stream"),this.codeBuf=a>>c,this.codeSize=n-c,this.bytesPos=o,p},r.prototype.generateHuffmanTable=function(e){for(var t=e.length,r=0,i=0;i<t;++i)e[i]>r&&(r=e[i]);for(var n=1<<r,a=new Uint32Array(n),s=1,o=0,l=2;s<=r;++s,o<<=1,l<<=1)for(var u=0;u<t;++u)if(e[u]==s){var c=0,p=o;for(i=0;i<s;++i)c=c<<1|1&p,p>>=1;for(i=c;i<n;i+=l)a[i]=s<<16|u;++o}return[a,r]},r.prototype.readBlock=function(){function e(e,t,r,i,n){for(var a=e.getBits(r)+i;a-- >0;)t[f++]=n}var r=this.getBits(3);if(1&r&&(this.eof=!0),0!=(r>>=1)){var l,u;if(1==r)l=s,u=o;else if(2==r){for(var c=this.getBits(5)+257,p=this.getBits(5)+1,d=this.getBits(4)+4,h=Array(i.length),f=0;f<d;)h[i[f++]]=this.getBits(3);for(var m=this.generateHuffmanTable(h),y=0,g=(f=0,c+p),v=new Array(g);f<g;){var b=this.getCode(m);16==b?e(this,v,2,3,y):17==b?e(this,v,3,3,y=0):18==b?e(this,v,7,11,y=0):v[f++]=y=b}l=this.generateHuffmanTable(v.slice(0,c)),u=this.generateHuffmanTable(v.slice(c,g))}else t("Unknown block type in flate stream");for(var w=(P=this.buffer)?P.length:0,x=this.bufferLength;;){var S=this.getCode(l);if(S<256)x+1>=w&&(w=(P=this.ensureBuffer(x+1)).length),P[x++]=S;else{if(256==S)return void(this.bufferLength=x);var _=(S=n[S-=257])>>16;_>0&&(_=this.getBits(_));y=(65535&S)+_;S=this.getCode(u),(_=(S=a[S])>>16)>0&&(_=this.getBits(_));var k=(65535&S)+_;x+y>=w&&(w=(P=this.ensureBuffer(x+y)).length);for(var T=0;T<y;++T,++x)P[x]=P[x-k]}}}else{var D,I=this.bytes,j=this.bytesPos;void 0===(D=I[j++])&&t("Bad block header in flate stream");var O=D;void 0===(D=I[j++])&&t("Bad block header in flate stream"),O|=D<<8,void 0===(D=I[j++])&&t("Bad block header in flate stream");var R=D;void 0===(D=I[j++])&&t("Bad block header in flate stream"),(R|=D<<8)!=(65535&~O)&&t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var U=this.bufferLength,P=this.ensureBuffer(U+O),F=U+O;this.bufferLength=F;for(var C=U;C<F;++C){if(void 0===(D=I[j++])){this.eof=!0;break}P[C]=D}this.bytesPos=j}},r}()}.apply(null,[]))||(e.exports=i)},2274:function(e,t,r){var i,n;i=[r(436),r(395),r(2275),r(1630),r(2280),r(2281),r(2282),r(363),r(404),r(362),r(647),r(2283),r(2285),r(350),r(383),r(669),r(338),r(346),r(347),r(339),r(343)],void 0===(n=function(e,t,r,i,n,a,s,o,l,u,c,p,d,h,f,m,y,g,v,b,w){var x=v({S8:"s8",S16:"s16",S32:"s32",U8:"u8",U16:"u16",U32:"u32",F32:"f32",F64:"f64"}),S=w.getLogger("esri.layers.mixins.ArcGISImageService"),_=g.createSubclass({properties:{layer:{},mosaicRule:{dependsOn:["layer.mosaicRule"],get:function(){return this.get("layer.mosaicRule")||null}},version:{value:0,dependsOn:["layer.bandIds","layer.format","layer.compressionQuality","layer.compressionTolerance","layer.interpolation","layer.noData","layer.noDataInterpretation","layer.mosaicRule","layer.renderingRule","layer.adjustAspectRatio","layer.pixelFilter"],get:function(){var e=this.layer;return e.bandIds,e.format,e.compressionQuality,e.compressionTolerance,e.interpolation,e.noData,e.noDataInterpretation,e.mosaicRule,e.renderingRule,e.adjustAspectRatio,e.pixelFilter,this._get("version")+1}}},toJSON:function(){var e=this.layer;return{bandIds:e.bandIds?e.bandIds.join(","):null,format:e.format,compressionQuality:e.compressionQuality,compressionTolerance:e.compressionTolerance,interpolation:e.interpolation,noData:e.noData,noDataInterpretation:e.noDataInterpretation,mosaicRule:this.mosaicRule?JSON.stringify(this.mosaicRule.toJSON()):null,renderingRule:e.renderingRule?JSON.stringify(e.renderingRule.toJSON()):null,adjustAspectRatio:e.adjustAspectRatio}}});return e.createSubclass({declaredClass:"esri.layers.mixins.ArcGISImageService",getDefaults:function(){return y.mixin(this.inherited(arguments),{exportImageServiceParameters:{layer:this}})},_raster:null,properties:{adjustAspectRatio:{},bandCount:{},bandIds:{type:[Number],json:{write:!0}},capabilities:{json:{read:function(e){return e&&e.split(",").map(function(e){return e.trim()})}}},compressionQuality:{type:Number,json:{write:!0}},compressionTolerance:.01,copyright:{json:{read:{source:["copyrightText"],reader:function(e,t){return t.copyrightText}}}},definitionExpression:{get:function(){return this.mosaicRule?this.mosaicRule.where:null},set:function(e){var t=this.mosaicRule||new n;t.where=e,this._set("mosaicRule",t)},json:{read:{source:["definitionExpression","layerDefinition.definitionExpression"],reader:function(e,t){return e||t.layerDefinition&&t.layerDefinition.definitionExpression||void 0}}}},domainFields:{value:null,type:[t],dependsOn:["fields"],get:function(){return this.fields&&this.fields.filter(function(e){return null!=e.domain})||[]}},exportImageServiceParameters:{readOnly:!0,type:_},fields:{type:[t]},fullExtent:{type:o,json:{read:{source:["extent"],reader:function(e,t){return o.fromJSON(t.extent)}}}},format:{type:String,dependsOn:["pixelFilter"],get:function(){return null!=this.pixelFilter?"lerc":"jpgpng"},json:{write:!0}},hasRasterAttributeTable:{},hasMultidimensions:{},imageMaxHeight:{value:4100,json:{origins:{service:{read:{source:"maxImageHeight"}}}}},imageMaxWidth:{value:15e3,json:{origins:{service:{read:{source:"maxImageWidth"}}}}},interpolation:{type:String,json:{write:!0}},mosaicRule:{value:null,type:n,json:{origins:{service:{read:{source:["defaultMosaicMethod"],reader:function(e,t){return n.fromJSON(t)}}}},write:!0}},multidimensionalInfo:null,noData:{type:Number,json:{write:!0}},noDataInterpretation:{type:String,json:{write:!0}},objectIdField:{json:{read:{source:["fields"],reader:function(e,t){return!e&&t.fields&&t.fields.some(function(t){return"esriFieldTypeOID"===t.type&&(e=t.name),!!e}),e}}}},pixelFilter:{},pixelType:{type:String,value:null,json:{read:x.read,write:x.write}},pixelSizeX:{value:0},pixelSizeY:{value:0},popupTemplate:{value:null,type:m,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}},queryTask:{readOnly:!0,dependsOn:["url"],get:function(){return new c({url:this.url})}},renderer:{json:{origins:{service:{read:!1}},read:{source:"layerDefinition.drawingInfo.renderer",reader:function(){S.warn("Client side renderer configuration on ImageryLayer (id: "+this.id+", title: "+this.title+") is not yet supported. Visualization of the layer data may differ from what is expected.")}},write:!1}},rasterAttributeTable:null,rasterAttributeTableFieldPrefix:"Raster.",rasterFields:{value:null,dependsOn:["fields","rasterAttributeTable","rasterAttributeTableFieldPrefix"],get:function(){var e=this.rasterAttributeTableFieldPrefix,t=this.fields?y.clone(this.fields):[],r=t.length;if(t[r]={name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"},(this.capabilities&&this.capabilities.indexOf("Catalog")>-1||this.fields&&this.fields.length>0)&&(t[r+1]={name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),null!=this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){t[r+2]={name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"},t[r+3]={name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"}}var i=this.rasterAttributeTable&&this.rasterAttributeTable.fields||null;if(i&&i.length>0){var n=i.filter(function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()}).map(function(t){var r=y.clone(t);return r.name=e+t.name,r});t=t.concat(n)}return t}},renderingRule:{value:null,type:a,json:{origins:{service:{read:{source:["rasterFunctionInfos"],reader:function(e,t){var r=t.rasterFunctionInfos;return t.renderingRule||r&&r.length&&"None"!==r[0].name?a.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}}}},write:!0}},serviceDataType:{},spatialReference:{value:null,readOnly:!0,json:{read:{source:["extent"],reader:function(e,t){return(e=t.extent&&t.extent.spatialReference)&&u.fromJSON(e)}}}},url:{},version:{value:null,readOnly:!0,json:{read:{source:["currentVersion","fields","timeInfo"],reader:function(e,t){return(e=t.currentVersion)||(e=t.hasOwnProperty("fields")||t.hasOwnProperty("objectIdField")||t.hasOwnProperty("timeInfo")?10:9.3),e}}}}},applyFilter:function(e){var t=this._clonePixelData(e);return this.pixelFilter&&this.pixelFilter(t),t},fetchImage:function(e,t,r,i){if(i=i||{},null==this._raster||null==e||null==t||null==r)return b.reject(new Error("Insufficient parameters for requesting an image. A valid extent, width and height values are required."));var n={imageServiceParameters:this.getExportImageServiceParameters(e,t,r,i),nBands:Math.min(this.bandCount,3),pixelType:this.pixelType,requestAsImageElement:i.requestAsImageElement&&!this.pixelFilter||!1};return this._raster.read(n)},fetchKeyProperties:function(){return h(this.parsedUrl.path+"/keyProperties",{query:y.mixin({f:"json"}),responseType:"json"}).then(function(e){return e.data})},getExportImageServiceParameters:function(e,t,r,i){var n=(e=e.clone().shiftCentralMeridian())&&e.spatialReference;return n=n&&(n.wkid||JSON.stringify(n.toJSON())),y.mixin({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:n,imageSR:n,size:t+","+r},this.exportImageServiceParameters.toJSON())},queryRasters:function(e){return this.queryTask.execute(e)},queryVisibleRasters:function(e,t){this._visibleRasters=[];var r,i,n,a,s=!1,o=this.popupTemplate;if(o&&o.fieldInfos&&o.fieldInfos.length>0&&(s=o.fieldInfos.length>1||"raster.servicepixelvalue"!==o.fieldInfos[0].toLowerCase()),o&&!s&&this.rasterFields&&(s=this.rasterFields.some(function(e){var t=e&&e.name?e.name.toLowerCase():null;return t&&"raster.servicepixelvalue"!==t&&(o.title&&o.title.toLowerCase().indexOf(t)>-1||o.content&&o.content.toLowerCase().indexOf(t)>-1)})),t.layerView&&t.layerView.view){var u=t.layerView.view;if("2d"===u.type){var c=u.state;r=c.spatialReference.clone(),i=c.resolution}else r=u.spatialReference.clone(),i=u.resolution;i&&(n=new l(.5*i,.5*i,r)),a=r.equals(this.spatialReference)}var h=new d({geometry:e.geometry,returnCatalogItems:s,timeExtent:e.timeExtent,mosaicRule:this.mosaicRule||null,renderingRule:this.renderingRule||null,returnGeometry:a,outSpatialReference:r,pixelSize:n});return new p({url:this.url}).execute(h).then(function(e){return this._processVisibleRastersResponse(e,t)}.bind(this)).catch(function(e){throw new Error("Error querying for visible rasters")})},_isScientificData:function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType||"esriImageServiceDataTypeScientific"===this.serviceDataType},_fetchService:function(){return b.resolve().then(function(){return this.resourceInfo||h(this.parsedUrl.path,{query:y.mixin({f:"json"},this.parsedUrl.query),responseType:"json"})}.bind(this)).then(function(e){e.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.read(e.data,{origin:"service",url:this.parsedUrl}),this._raster=new r({url:this.url})}.bind(this)).then(function(){if(this.version>10&&this.hasRasterAttributeTable)return h(this.parsedUrl.path+"/rasterAttributeTable",{query:{f:"json"},responseType:"json"}).then(function(e){var t=e.data;t&&t.features&&t.fields&&this.read({rasterAttributeTable:t},{origin:"service",url:this.parsedUrl})}.bind(this))}.bind(this)).then(function(){if(this.version>=10.3&&this._isScientificData()&&this.hasMultidimensions)return h(this.parsedUrl.path+"/multiDimensionalInfo",{query:{f:"json"},responseType:"json"}).then(function(e){var t=e.data;t&&t.multidimensionalInfo&&(this._updateMultidimensionalDefinition(t.multidimensionalInfo),this.multidimensionalInfo=t.multidimensionalInfo)}.bind(this))}.bind(this))},_updateMultidimensionalDefinition:function(e){var t,r=e.variables[0].dimensions,i=[];for(t in r)if(r.hasOwnProperty(t)){var a=r[t],o=!0,l=a.extent,u=[l[0]];a.hasRanges&&!0===a.hasRanges?(o=!1,u=[a.values[0]]):"stdz"===a.name.toLowerCase()&&Math.abs(l[1])<=Math.abs(l[0])&&(u=[l[1]]),i.push(new s({variableName:"",dimensionName:r[t].name,isSlice:o,values:u}))}if(i.length>0){this.mosaicRule=this.mosaicRule||new n;var c=this.mosaicRule.multidimensionalDefinition;(!c||c&&c.length<=0)&&(this.mosaicRule.multidimensionalDefinition=i)}},_clonePixelData:function(e){if(null==e)return e;var t={};e.extent&&(t.extent=e.extent.clone());var r=e.pixelBlock;return null==r?t:(t.pixelBlock=r.clone(),t)},_processVisibleRastersResponse:function(e,t){var r,i,n,a,s=e.value,l=0,u=this.objectIdField,c=e.catalogItems&&e.catalogItems.features&&e.catalogItems.features.length||0;if(c){var p,d,h=0,m=0;for(i=[c],r=[c],a=[c],l=0;l<c;l++)e.properties.Values[l].toLowerCase().indexOf("nodata")>-1&&m++;for(p=c-m,l=0;l<c;l++)i[d=e.properties.Values[l].toLowerCase().indexOf("nodata")>-1?p++:h++]=e.catalogItems.features[l],r[d]=e.properties.Values[l],a[d]=i[d].attributes[u]}this._visibleRasters=[];var y,g=s.toLowerCase().indexOf("nodata")>-1;if(s&&!i&&!g){u="ObjectId",i=[];var v={ObjectId:0};(y=new f(new o(this.fullExtent),null,v)).sourceLayer=this,i.push(y)}var b=[];if(!i)return b;var w,x=t&&t.returnDomainValues||!1;for(l=0,n=i.length;l<n;l++)(y=i[l]).sourceLayer=this,s&&(w=s,r&&r.length>=l&&(w=r[l].replace(/ /gi,", ")),y.attributes["Raster.ItemPixelValue"]=w,y.attributes["Raster.ServicePixelValue"]=s,this._updateFeatureWithMagDirValues(y,w),this._updateFeatureWithRasterAttributeTableValues(y,w)),x&&this._updateFeatureWithDomainValues(y),b.push(y);return b},_updateFeatureWithRasterAttributeTableValues:function(e,t){var r=this.rasterAttributeTable&&this.rasterAttributeTable.features;if(r&&!(r.length<1)&&this.rasterAttributeTableFieldPrefix){var i=null;if(r.forEach(function(e){e&&e.attributes&&(e.attributes.Value!=t&&e.attributes.VALUE!=t||(i=e))}),i){var n,a={};for(n in i.attributes)i.attributes.hasOwnProperty(n)&&(a[this.rasterAttributeTableFieldPrefix+n]=i.attributes[n]);e.attributes=y.mixin(e.attributes,a)}}},_updateFeatureWithMagDirValues:function(e,t){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var r=t.replace(" ","").split(","),n=new i({height:1,width:1,pixelType:"f32",pixels:[],statistics:[]});r.forEach(function(e){n.addData({pixels:[e],statistics:{minValue:e,maxValue:e,noDataValue:null}})}),this.pixelFilter({pixelBlock:n,extent:new o(0,0,0,0,this.spatialReference)}),e.attributes["Raster.Magnitude"]=n.pixels[0][0],e.attributes["Raster.Direction"]=n.pixels[1][0]}},_updateFeatureWithDomainValues:function(e){var t=this.domainFields;null!=t&&t.forEach(function(t){if(t){var r=e.attributes[t.name];if(null!=r){var i=this._findMatchingDomainValue(t.domain,r);null!=i&&(e.attributes[t.name]=i)}}},this)},_findMatchingDomainValue:function(e,t){var r,i=e&&e.codedValues;if(i)return i.some(function(e){return e.code===t&&(r=e.name,!0)}),r}})}.apply(null,i))||(e.exports=n)},2275:function(e,t,r){var i,n;i=[r(346),r(338),r(349),r(339),r(350),r(363),r(362),r(1630),r(804),r(2276),r(2278),r(2279)],void 0===(n=function(e,t,r,i,n,a,s,o,l,u,c,p){return e.createSubclass({declaredClass:"esri.layers.support.Raster",validPixelTypes:["u1","u2","u4","u8","u16","u32","s8","s16","s32","f32"],validFormats:["lerc","jpeg","jpg","jpgpng","png","png8","png24","png32","bip","bsq"],properties:{parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){return this.url?r.urlToObject(this.url):null}},url:null},read:function(e){if(!e.imageServiceParameters||!e.nBands)return i.reject(new Error("Insufficient parameters to read data"));var r=t.clone(e.imageServiceParameters),n=e.nBands,a=e.pixelType||"f32",s=e.requestAsImageElement;this.validPixelTypes.indexOf(a.toUpperCase())<=-1&&(r.pixelType="f32"),r.format=r.format||"lerc",this.validFormats.indexOf(r.format.toLowerCase())<=-1&&(r.format="lerc"),this._prepareGetImageParameters(r);var o=t.clone(r);return this._cleanupRequestParams(o),this._requestArrayBuffer(r,o,n,a,s)},_requestArrayBuffer:function(e,r,a,s,o){return n(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:t.mixin(r,{f:"image"})}).then(function(t){var r=t.data;if(!this._isDataValid(r)){var n=new Error(String.fromCharCode.apply(null,new Uint8Array(r)));return i.reject(n)}var l=e.format.toUpperCase(),u=l;if("BSQ"!==u&&"BIP"!==u&&(u=this._getFormat(r)),this.validFormats.indexOf(u.toLowerCase())<=-1)return i.reject(new Error("Cannot decode the pixelBlock. Unsupported Format: "+u));if(!("PNG"!==l&&"JPGPNG"!==l||"PNG"!==u&&"JPEG"!==u)&&o){var c=new Blob([r],{type:"image/"+("PNG"===u?"png":"jpeg")}),p=URL.createObjectURL(c),d=new Image,h=i.createResolver(),f=h.promise;return d.addEventListener("load",h),d.addEventListener("error",h.reject),d.src=p,f.then(function(){return URL.revokeObjectURL(p),{imageElement:d,params:e}},function(e){return URL.revokeObjectURL(p),i.reject(new Error("Failed to load raster"))})}try{return{pixelData:{pixelBlock:this._decodePixelBlock(r,{width:e.width,height:e.height,planes:a,pixelType:s,noDataValue:e.noData,format:u}),extent:e.extent},params:e}}catch(e){return i.reject(e)}}.bind(this))},_prepareGetImageParameters:function(e){if(e.size&&e.bbox){var r=e.size.split(",");if(e.width=parseFloat(r[0]),e.height=parseFloat(r[1]),!e.extent){var i=e.bbox.split(",");e.extent=new a(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),new s(e.bboxSR))}}else{if(!e.width||Math.floor(e.width)!==e.width||!e.height||Math.floor(e.height)!==e.height)throw new Error("Incorrect Image Dimensions");if(!e.extent||"esri.geometry.Extent"!==e.extent.declaredClass)throw new Error("Incorrect extent");var n=e.extent,o=n.spatialReference.wkid||JSON.stringify(n.spatialReference.toJSON());delete e._ts,t.mixin(e,{bbox:n.xmin+","+n.ymin+","+n.xmax+","+n.ymax,imageSR:o,bboxSR:o,size:e.width+","+e.height},e.disableClientCaching?{_ts:Date.now()}:{})}},_adjustExtent:function(e,t,r){var i=e.ymax-e.ymin,n=e.xmax-e.xmin;return r>=t?(i=n*t/r,e.ymax=e.ymin+i):(n=i*r/t,e.xmax=e.xmin+n),e},_cleanupRequestParams:function(e){if(!e)return e;var t,r=["width","height","extent"];for(t in r)e.hasOwnProperty(r[t])&&delete e[r[t]];return e},_getFormat:function(e){var t=new Uint8Array(e,0,10),r="";return 255===t[0]&&216===t[1]?r="JPEG":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?r="PNG":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?r="LERC":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(r="ERROR"),r},_isDataValid:function(e){var t=new Uint8Array(e,0,10);return!(String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1)},_calculateBandStatistics:function(e){var t,r=1/0,i=-1/0,n=e.length,a=0;for(t=0;t<n;t++)r=(a=e[t])<r?a:r,i=a>i?a:i;return{minValue:r,maxValue:i}},_verifyResult:function(e,t){return!(!e||e.height!==t.height||e.width!==t.width)},_getPixelTypeAndNoData:function(e){var t,r=e.noDataValue,i=e.pixelType;return"u1"===i||"u2"===i||"u4"===i||"u8"===i?(i="u8",r=Math.pow(2,8)-1,t=Uint8Array):"u16"===i?(r=r||Math.pow(2,16)-1,t=Uint16Array):"u32"===i?(r=r||Math.pow(2,32)-1,t=Uint32Array):"s8"===i?(r=r||0-Math.pow(2,7),t=Int8Array):"s16"===i?(r=r||0-Math.pow(2,15),t=Int16Array):"s32"===i?(r=r||0-Math.pow(2,31),t=Int32Array):t=Float32Array,{pixelType:i,pixelDataType:t,noDataValue:r}},_decodePixelBlock:function(e,t){if(!e||!t)throw new Error("Cannot decode the pixelBlock. Invalid parameters provided for decoding.");if(!t.height||Math.floor(t.height)!==t.height)throw new Error("Cannot decode the pixelBlock. Height is not provided.");if(!t.width||Math.floor(t.width)!==t.width)throw new Error("Cannot decode the pixelBlock. Width is not provided.");var r=this._decodeLerc;switch(t.format.toUpperCase()){case"JPEG":r=this._decodeJpeg;break;case"PNG":r=this._decodePng;break;case"BSQ":r=this._decodeBsq;break;case"BIP":r=this._decodeBip}var i,n,a=(r=r.bind(this))(e,t),s=a.statistics||[];if(s.length<=0)for(i=0;i<a.pixels.length;i++)n=a.pixels[i],s.push(this._calculateBandStatistics(n));return new o({width:t.width,height:t.height,pixels:a.pixels,pixelType:t.pixelType,mask:a.mask,statistics:s})},_decodeJpeg:function(e,t){if(!u)throw new Error("The jpeg decoder module is not loaded.");var r=(new u).decode(e);if(!this._verifyResult(r,t))throw new Error("Error in decoding the image. The decoded image dimensions are incorrect.");return t.width=r.width,t.height=r.height,t.pixelType="U8",r},_decodePng:function(e,t){if(!c)throw new Error("The png decoder module is not loaded.");var r=new Uint8Array(e),i=new c(r),n=new Uint8Array(t.width*t.height*4);i.copyToImageData(n,i.decodePixels());var a,s=0,o=0,l=new Uint8Array(t.width*t.height);for(s=0;s<t.width*t.height;s++)l[s]=n[4*s+3];var u={pixels:[],mask:l};for(s=0;s<3;s++){for(a=new Uint8Array(t.width*t.height),o=0;o<t.width*t.height;o++)a[o]=n[4*o+s];u.pixels.push(a)}return t.pixelType="U8",u},_decodeBsq:function(e,t){if(!p)throw new Error("The bsq decoder module is not loaded.");var r=this._getPixelTypeAndNoData(t);return p.decodeBSQ(e,{bandCount:t.planes,width:t.width,height:t.height,pixelType:r.pixelDataType,noDataValue:r.noDataValue})},_decodeBip:function(e,t){if(!p)throw new Error("The bsq decoder module is not loaded.");var r=this._getPixelTypeAndNoData(t);return p.decodeBIP(e,{bandCount:t.planes,width:t.width,height:t.height,pixelType:r.pixelDataType,noDataValue:r.noDataValue})},_decodeLerc:function(e,t){var r=this._getPixelTypeAndNoData(t);t.pixelType=r.pixelType;for(var i,n=0,a=0,s=e.byteLength-10,o={pixels:[],statistics:[]};a<s;){var u=l.decode(e,{inputOffset:a,encodedMaskData:i,returnMask:0===n,returnEncodedMask:0===n,returnFileInfo:!0,pixelType:r.pixelDataType,noDataValue:r.noDataValue});if(a=u.fileInfo.eofOffset,0===n&&(i=u.encodedMaskData,o.mask=u.maskData),n++,!this._verifyResult(u,t))throw new Error("Error in decoding the image. The decoded image dimensions are incorrect.");o.pixels.push(u.pixelData),o.statistics.push({minValue:u.minValue,maxValue:u.maxValue,noDataValue:u.noDataValue})}return o}})}.apply(null,i))||(e.exports=n)},2276:function(e,t,r){var i,n;i=[r(385),r(1631),r(2277)],void 0===(n=function(e,t,r){"use strict";return e(null,{constructor:function(){},decode:function(e){var i=new Uint8Array(e),n=new r;n.parse(i);var a,s=n.numComponents,o=n.getData(n.width,n.height,!0),l=n.width*n.height,u=n.eof,c=0,p=0,d=0;if(u<i.length-1){var h=new t(i.subarray(u)).getBytes();a=new Uint8Array(l);var f=0;for(c=0;c<h.length;c++)for(d=7;d>=0;d--)a[f++]=h[c]>>d&1}var m,y=[];if(1===s)y=[o,o,o];else{for(c=0;c<3;c++)m=new Uint8Array(l),y.push(m);for(d=0,p=0;p<l;p++)for(c=0;c<3;c++)y[c][p]=o[d++]}return{width:n.width,height:n.height,pixels:y,mask:a}}})}.apply(null,i))||(e.exports=n)},2277:function(e,t,r){var i;void 0===(i=function(){"use strict";return function(){function e(){}function t(e,t){for(var r,i,n=0,a=[],s=16;s>0&&!e[s-1];)s--;a.push({children:[],index:0});var o,l=a[0];for(r=0;r<s;r++){for(i=0;i<e[r];i++){for((l=a.pop()).children[l.index]=t[n];l.index>0;)l=a.pop();for(l.index++,a.push(l);a.length<=r;)a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o;n++}r+1<s&&(a.push(o={children:[],index:0}),l.children[l.index]=o.children,l=o)}return a[0].children}function r(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function i(e,t,i,n,a,s,l,u,c){function p(){if(D>0)return T>>--D&1;if(255===(T=e[t++])){var r=e[t++];if(r)throw"unexpected marker: "+(T<<8|r).toString(16)}return D=7,T>>>7}function d(e){for(var t=e;;){if("number"==typeof(t=t[p()]))return t;if("object"!=typeof t)throw"invalid huffman sequence"}}function h(e){for(var t=0;e>0;)t=t<<1|p(),e--;return t}function f(e){if(1===e)return 1===p()?1:-1;var t=h(e);return t>=1<<e-1?t:t+(-1<<e)+1}var m,y,g,v,b,w,x,S=(i.precision,i.samplesPerLine,i.scanLines,i.mcusPerLine),_=i.progressive,k=(i.maxH,i.maxV,t),T=0,D=0,I=0,j=0,O=n.length;x=_?0===s?0===u?function(e,t){var r=d(e.huffmanTableDC),i=0===r?0:f(r)<<c;e.blockData[t]=e.pred+=i}:function(e,t){e.blockData[t]|=p()<<c}:0===u?function(e,t){if(I>0)I--;else for(var r=s,i=l;r<=i;){var n=d(e.huffmanTableAC),a=15&n,u=n>>4;if(0!==a){var p=o[r+=u];e.blockData[t+p]=f(a)*(1<<c),r++}else{if(u<15){I=h(u)+(1<<u)-1;break}r+=16}}}:function(e,t){for(var r,i,n=s,a=l,u=0;n<=a;){var y=o[n];switch(j){case 0:if(u=(i=d(e.huffmanTableAC))>>4,0==(r=15&i))u<15?(I=h(u)+(1<<u),j=4):(u=16,j=1);else{if(1!==r)throw"invalid ACn encoding";m=f(r),j=u?2:3}continue;case 1:case 2:e.blockData[t+y]?e.blockData[t+y]+=p()<<c:0==--u&&(j=2===j?3:0);break;case 3:e.blockData[t+y]?e.blockData[t+y]+=p()<<c:(e.blockData[t+y]=m<<c,j=0);break;case 4:e.blockData[t+y]&&(e.blockData[t+y]+=p()<<c)}n++}4===j&&0==--I&&(j=0)}:function(e,t){var r=d(e.huffmanTableDC),i=0===r?0:f(r);e.blockData[t]=e.pred+=i;for(var n=1;n<64;){var a=d(e.huffmanTableAC),s=15&a,l=a>>4;if(0!==s){var u=o[n+=l];e.blockData[t+u]=f(s),n++}else{if(l<15)break;n+=16}}};var R,U,P,F,C=0;for(U=1===O?n[0].blocksPerLine*n[0].blocksPerColumn:S*i.mcusPerColumn,a||(a=U);C<U;){for(g=0;g<O;g++)n[g].pred=0;if(I=0,1===O)for(y=n[0],w=0;w<a;w++)!function(e,t,i){x(e,r(e,i/e.blocksPerLine|0,i%e.blocksPerLine))}(y,0,C),C++;else for(w=0;w<a;w++){for(g=0;g<O;g++)for(P=(y=n[g]).h,F=y.v,v=0;v<F;v++)for(b=0;b<P;b++)!function(e,t,i,n,a){var s=C%S;x(e,r(e,(C/S|0)*e.v+n,s*e.h+a))}(y,0,0,v,b);C++}if(D=0,(R=e[t]<<8|e[t+1])<=65280)throw"marker was not found";if(!(R>=65488&&R<=65495))break;t+=2}return t-k}function n(e,t,r){for(var i,n,a,s,o,y,g,v,b,w,x,S,_,k,T,D,I,j=e.quantizationTable,O=e.blockData,R=0;R<64;R+=8)b=O[t+R],w=O[t+R+1],x=O[t+R+2],S=O[t+R+3],_=O[t+R+4],k=O[t+R+5],T=O[t+R+6],D=O[t+R+7],b*=j[R],0!=(w|x|S|_|k|T|D)?(w*=j[R+1],x*=j[R+2],S*=j[R+3],_*=j[R+4],k*=j[R+5],T*=j[R+6],D*=j[R+7],n=(i=(i=f*b+128>>8)+(n=f*_+128>>8)+1>>1)-n,I=(a=x)*h+(s=T)*d+128>>8,a=a*d-s*h+128>>8,g=(o=(o=m*(w-D)+128>>8)+(g=k<<4)+1>>1)-g,y=(v=(v=m*(w+D)+128>>8)+(y=S<<4)+1>>1)-y,s=(i=i+(s=I)+1>>1)-s,a=(n=n+a+1>>1)-a,I=o*p+v*c+2048>>12,o=o*c-v*p+2048>>12,v=I,I=y*u+g*l+2048>>12,y=y*l-g*u+2048>>12,g=I,r[R]=i+v,r[R+7]=i-v,r[R+1]=n+g,r[R+6]=n-g,r[R+2]=a+y,r[R+5]=a-y,r[R+3]=s+o,r[R+4]=s-o):(I=f*b+512>>10,r[R]=I,r[R+1]=I,r[R+2]=I,r[R+3]=I,r[R+4]=I,r[R+5]=I,r[R+6]=I,r[R+7]=I);for(var U=0;U<8;++U)b=r[U],0!=((w=r[U+8])|(x=r[U+16])|(S=r[U+24])|(_=r[U+32])|(k=r[U+40])|(T=r[U+48])|(D=r[U+56]))?(n=(i=4112+((i=f*b+2048>>12)+(n=f*_+2048>>12)+1>>1))-n,I=(a=x)*h+(s=T)*d+2048>>12,a=a*d-s*h+2048>>12,s=I,g=(o=(o=m*(w-D)+2048>>12)+(g=k)+1>>1)-g,y=(v=(v=m*(w+D)+2048>>12)+(y=S)+1>>1)-y,I=o*p+v*c+2048>>12,o=o*c-v*p+2048>>12,v=I,I=y*u+g*l+2048>>12,y=y*l-g*u+2048>>12,b=(b=(i=i+s+1>>1)+v)<16?0:b>=4080?255:b>>4,w=(w=(n=n+a+1>>1)+(g=I))<16?0:w>=4080?255:w>>4,x=(x=(a=n-a)+y)<16?0:x>=4080?255:x>>4,S=(S=(s=i-s)+o)<16?0:S>=4080?255:S>>4,_=(_=s-o)<16?0:_>=4080?255:_>>4,k=(k=a-y)<16?0:k>=4080?255:k>>4,T=(T=n-g)<16?0:T>=4080?255:T>>4,D=(D=i-v)<16?0:D>=4080?255:D>>4,O[t+U]=b,O[t+U+8]=w,O[t+U+16]=x,O[t+U+24]=S,O[t+U+32]=_,O[t+U+40]=k,O[t+U+48]=T,O[t+U+56]=D):(I=(I=f*b+8192>>14)<-2040?0:I>=2024?255:I+2056>>4,O[t+U]=I,O[t+U+8]=I,O[t+U+16]=I,O[t+U+24]=I,O[t+U+32]=I,O[t+U+40]=I,O[t+U+48]=I,O[t+U+56]=I)}function a(e,t){for(var i=t.blocksPerLine,a=t.blocksPerColumn,s=new Int16Array(64),o=0;o<a;o++)for(var l=0;l<i;l++){n(t,r(t,o,l),s)}return t.blockData}function s(e){return e<=0?0:e>=255?255:e}var o=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),l=4017,u=799,c=3406,p=2276,d=1567,h=3784,f=5793,m=2896;return e.prototype={parse:function(e){function r(){var t=e[l]<<8|e[l+1];return l+=2,t}var n,s,l=0,u=(e.length,null),c=null,p=[],d=[],h=[],f=r();if(65496!==f)throw"SOI not found";for(f=r();65497!==f;){var m,y,g;switch(f){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var v=function(){var t=r(),i=e.subarray(l,l+t-2);return l+=i.length,i}();65504===f&&74===v[0]&&70===v[1]&&73===v[2]&&70===v[3]&&0===v[4]&&(u={version:{major:v[5],minor:v[6]},densityUnits:v[7],xDensity:v[8]<<8|v[9],yDensity:v[10]<<8|v[11],thumbWidth:v[12],thumbHeight:v[13],thumbData:v.subarray(14,14+3*v[12]*v[13])}),65518===f&&65===v[0]&&100===v[1]&&111===v[2]&&98===v[3]&&101===v[4]&&(c={version:v[5]<<8|v[6],flags0:v[7]<<8|v[8],flags1:v[9]<<8|v[10],transformCode:v[11]});break;case 65499:for(var b=r()+l-2;l<b;){var w=e[l++],x=new Uint16Array(64);if(w>>4==0)for(y=0;y<64;y++)x[o[y]]=e[l++];else{if(w>>4!=1)throw"DQT: invalid table spec";for(y=0;y<64;y++)x[o[y]]=r()}p[15&w]=x}break;case 65472:case 65473:case 65474:if(n)throw"Only single frame JPEGs supported";r(),(n={}).extended=65473===f,n.progressive=65474===f,n.precision=e[l++],n.scanLines=r(),n.samplesPerLine=r(),n.components=[],n.componentIds={};var S,_=e[l++],k=0,T=0;for(m=0;m<_;m++){S=e[l];var D=e[l+1]>>4,I=15&e[l+1];k<D&&(k=D),T<I&&(T=I);var j=e[l+2];g=n.components.push({h:D,v:I,quantizationTable:p[j]}),n.componentIds[S]=g-1,l+=3}n.maxH=k,n.maxV=T,function(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),i=0;i<e.components.length;i++){C=e.components[i];var n=Math.ceil(Math.ceil(e.samplesPerLine/8)*C.h/e.maxH),a=Math.ceil(Math.ceil(e.scanLines/8)*C.v/e.maxV),s=t*C.h,o=64*(r*C.v)*(s+1);C.blockData=new Int16Array(o),C.blocksPerLine=n,C.blocksPerColumn=a}e.mcusPerLine=t,e.mcusPerColumn=r}(n);break;case 65476:var O=r();for(m=2;m<O;){var R=e[l++],U=new Uint8Array(16),P=0;for(y=0;y<16;y++,l++)P+=U[y]=e[l];var F=new Uint8Array(P);for(y=0;y<P;y++,l++)F[y]=e[l];m+=17+P,(R>>4==0?h:d)[15&R]=t(U,F)}break;case 65501:r(),s=r();break;case 65498:var C,A=(r(),e[l++]),L=[];for(m=0;m<A;m++){var V=n.componentIds[e[l++]];C=n.components[V];var N=e[l++];C.huffmanTableDC=h[N>>4],C.huffmanTableAC=d[15&N],L.push(C)}var M=e[l++],B=e[l++],E=e[l++],J=i(e,l,n,L,s,M,B,E>>4,15&E);l+=J;break;case 65535:255!==e[l]&&l--;break;default:if(255===e[l-3]&&e[l-2]>=192&&e[l-2]<=254){l-=3;break}throw"unknown JPEG marker "+f.toString(16)}f=r()}for(this.width=n.samplesPerLine,this.height=n.scanLines,this.jfif=u,this.eof=l,this.adobe=c,this.components=[],m=0;m<n.components.length;m++)C=n.components[m],this.components.push({output:a(0,C),scaleX:C.h/n.maxH,scaleY:C.v/n.maxV,blocksPerLine:C.blocksPerLine,blocksPerColumn:C.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var r,i,n,a,s,o,l,u,c,p,d,h=this.width/e,f=this.height/t,m=0,y=this.components.length,g=e*t*y,v=new Uint8Array(g),b=new Uint32Array(e);for(l=0;l<y;l++){for(i=(r=this.components[l]).scaleX*h,n=r.scaleY*f,m=l,d=r.output,a=r.blocksPerLine+1<<3,s=0;s<e;s++)u=0|s*i,b[s]=(4294967288&u)<<3|7&u;for(o=0;o<t;o++)for(p=a*(4294967288&(u=0|o*n))|(7&u)<<3,s=0;s<e;s++)v[m]=d[p+b[s]],m+=y}var w=this.decodeTransform;if(w)for(l=0;l<g;)for(u=0,c=0;u<y;u++,l++,c+=2)v[l]=(v[l]*w[c]>>8)+w[c+1];return v},_isColorConversionNeeded:function(){return!(!this.adobe||!this.adobe.transformCode)||3===this.numComponents},_convertYccToRgb:function(e){for(var t,r,i,n=0,a=e.length;n<a;n+=3)t=e[n],r=e[n+1],i=e[n+2],e[n]=s(t-179.456+1.402*i),e[n+1]=s(t+135.459-.344*r-.714*i),e[n+2]=s(t-226.816+1.772*r);return e},_convertYcckToRgb:function(e){for(var t,r,i,n,a=0,o=0,l=e.length;o<l;o+=4){t=e[o];var u=(r=e[o+1])*(-660635669420364e-19*r+.000437130475926232*(i=e[o+2])-54080610064599e-18*t+.00048449797120281*(n=e[o+3])-.154362151871126)-122.67195406894+i*(-.000957964378445773*i+.000817076911346625*t-.00477271405408747*n+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*n+.48357088451265)+n*(-.000336197177618394*n+.484791561490776),c=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*i+.000659397001245577*t+.000426105652938837*n-.176491792462875)+i*(-.000778269941513683*i+.00130872261408275*t+.000770482631801132*n-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*n+.25802910206845)+n*(-.000318913117588328*n-.213742400323665),p=r*(-.000570115196973677*r-263409051004589e-19*i+.0020741088115012*t-.00288260236853442*n+.814272968359295)-20.810012546947+i*(-153496057440975e-19*i-.000132689043961446*t+.000560833691242812*n-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*n+.116935020465145)+n*(-.000343531996510555*n+.24165260232407);e[a++]=s(u),e[a++]=s(c),e[a++]=s(p)}return e},_convertYcckToCmyk:function(e){for(var t,r,i,n=0,a=e.length;n<a;n+=4)t=e[n],r=e[n+1],i=e[n+2],e[n]=s(434.456-t-1.402*i),e[n+1]=s(119.541-t+.344*r+.714*i),e[n+2]=s(481.816-t-1.772*r);return e},_convertCmykToRgb:function(e){for(var t,r,i,n,a=0,s=-16581375,o=0,l=e.length;o<l;o+=4){var u=(t=e[o])*(-4.387332384609988*t+54.48615194189176*(r=e[o+1])+18.82290502165302*(i=e[o+2])+212.25662451639585*(n=e[o+3])-72734.4411664936)+r*(1.7149763477362134*r-5.6096736904047315*i-17.873870861415444*n-1401.7366389350734)+i*(-2.5217340131683033*i-21.248923337353073*n+4465.541406466231)-n*(21.86122147463605*n+48317.86113160301),c=t*(8.841041422036149*t+60.118027045597366*r+6.871425592049007*i+31.159100130055922*n-20220.756542821975)+r*(-15.310361306967817*r+17.575251261109482*i+131.35250912493976*n-48691.05921601825)+i*(4.444339102852739*i+9.8632861493405*n-6341.191035517494)-n*(20.737325471181034*n+47890.15695978492),p=t*(.8842522430003296*t+8.078677503112928*r+30.89978309703729*i-.23883238689178934*n-3616.812083916688)+r*(10.49593273432072*r+63.02378494754052*i+50.606957656360734*n-28620.90484698408)+i*(.03296041114873217*i+115.60384449646641*n-49363.43385999684)-n*(22.33816807309886*n+45932.16563550634);e[a++]=u>=0?255:u<=s?0:255+u*(1/255/255)|0,e[a++]=c>=0?255:c<=s?0:255+c*(1/255/255)|0,e[a++]=p>=0?255:p<=s?0:255+p*(1/255/255)|0}return e},getData:function(e,t,r){if(this.numComponents>4)throw"Unsupported color mode";var i=this._getLinearizedBlockData(e,t);if(3===this.numComponents)return this._convertYccToRgb(i);if(4===this.numComponents){if(this._isColorConversionNeeded())return r?this._convertYcckToRgb(i):this._convertYcckToCmyk(i);if(r)return this._convertCmykToRgb(i)}return i}},e}()}.apply(null,[]))||(e.exports=i)},2278:function(e,t,r){var i,n;i=[r(1631)],void 0===(n=function(e){return function(){function t(e){var t,r,i,n,a,s,o,l,u,c,p,d,h;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(t=this.readUInt32(),l=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},n=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*n/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=a?a.data:void 0)||this.imgData,p=0;0<=t?p<t:p>t;0<=t?++p:--p)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(u=255-this.transparency.indexed.length)>0)for(d=0;0<=u?d<u:d>u;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(c=this.read(t)).indexOf(0),o=String.fromCharCode.apply(String,c.slice(0,s)),this.text[o]=String.fromCharCode.apply(String,c.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(h=this.colorType)||6===h,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var r,i,n;return t.load=function(e,r,i){var n;return"function"==typeof r&&(i=r),(n=new XMLHttpRequest).open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e;return e=new t(new Uint8Array(n.response||n.mozResponseArrayBuffer)),"function"==typeof(null!=r?r.getContext:void 0)&&e.render(r),"function"==typeof i?i(e):void 0},n.send(null)},1,2,0,t.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},t.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},t.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},t.prototype.decodePixels=function(t){var r,i,n,a,s,o,l,u,c,p,d,h,f,m,y,g,v,b,w,x,S,_,k;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=(t=new e(t)).getBytes(),g=(h=this.pixelBitlength/8)*this.width,f=new Uint8Array(g*this.height),o=t.length,y=0,m=0,i=0;m<o;){switch(t[m++]){case 0:for(a=w=0;w<g;a=w+=1)f[i++]=t[m++];break;case 1:for(a=x=0;x<g;a=x+=1)r=t[m++],s=a<h?0:f[i-h],f[i++]=(r+s)%256;break;case 2:for(a=S=0;S<g;a=S+=1)r=t[m++],n=(a-a%h)/h,v=y&&f[(y-1)*g+n*h+a%h],f[i++]=(v+r)%256;break;case 3:for(a=_=0;_<g;a=_+=1)r=t[m++],n=(a-a%h)/h,s=a<h?0:f[i-h],v=y&&f[(y-1)*g+n*h+a%h],f[i++]=(r+Math.floor((s+v)/2))%256;break;case 4:for(a=k=0;k<g;a=k+=1)r=t[m++],n=(a-a%h)/h,s=a<h?0:f[i-h],0===y?v=b=0:(v=f[(y-1)*g+n*h+a%h],b=n&&f[(y-1)*g+(n-1)*h+a%h]),l=s+v-b,u=Math.abs(l-s),p=Math.abs(l-v),d=Math.abs(l-b),c=u<=p&&u<=d?s:p<=d?v:b,f[i++]=(r+c)%256;break;default:throw new Error("Invalid filter algorithm: "+t[m-1])}y++}return f},t.prototype.decodePalette=function(){var e,t,r,i,n,a,s,o,l;for(r=this.palette,a=this.transparency.indexed||[],n=new Uint8Array((a.length||0)+r.length),i=0,r.length,e=0,t=s=0,o=r.length;s<o;t=s+=3)n[i++]=r[t],n[i++]=r[t+1],n[i++]=r[t+2],n[i++]=null!=(l=a[e++])?l:255;return n},t.prototype.copyToImageData=function(e,t){var r,i,n,a,s,o,l,u,c,p,d;if(i=this.colors,c=null,r=this.hasAlphaChannel,this.palette.length&&(c=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),i=4,r=!0),u=(n=e.data||e).length,s=c||t,a=o=0,1===i)for(;a<u;)l=c?4*t[a/4]:o,p=s[l++],n[a++]=p,n[a++]=p,n[a++]=p,n[a++]=r?s[l++]:this.transparency.grayscale&&this.transparency.grayscale===p?0:255,o=l;else for(;a<u;)l=c?4*t[a/4]:o,n[a++]=s[l++],n[a++]=s[l++],n[a++]=s[l++],n[a++]=r?s[l++]:this.transparency.rgb&&this.transparency.rgb[1]===s[l-3]&&this.transparency.rgb[3]===s[l-2]&&this.transparency.rgb[5]===s[l-1]?0:255,o=l},t.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},i=document.createElement("canvas"),n=i.getContext("2d"),r=function(e){var t;return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(t=new Image).src=i.toDataURL(),t},t.prototype.decodeFrames=function(e){var t,i,n,a,s,o,l,u;if(this.animation){for(u=[],i=s=0,o=(l=this.animation.frames).length;s<o;i=++s)t=l[i],n=e.createImageData(t.width,t.height),a=this.decodePixels(new Uint8Array(t.data)),this.copyToImageData(n,a),t.imageData=n,u.push(t.image=r(n));return u}},t.prototype.renderFrame=function(e,t){var r,i,n;return r=(i=this.animation.frames)[t],n=i[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?e.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&e.putImageData(n.imageData,n.xOffset,n.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},t.prototype.animate=function(e){var t,r,i,n,a,s,o=this;return r=0,s=this.animation,n=s.numFrames,i=s.frames,a=s.numPlays,(t=function(){var s,l;if(s=r++%n,l=i[s],o.renderFrame(e,s),n>1&&r/n<a)return o.animation._timeout=setTimeout(t,l.delay)})()},t.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},t.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},t}()}.apply(null,i))||(e.exports=n)},2279:function(e,t,r){var i;void 0===(i=function(){"use strict";return{decodeBIP:function(e,t){var r=t.pixelType,i=t.bandCount,n=[],a=t.width*t.height,s=this.getBandCount(e,t);i=i||s;var o,l,u,c,p=e.byteLength-e.byteLength%(a*this._getPixelLength(r)),d=new r(e,0,a*s);for(o=0;o<i;o++){for(c=new r(a),l=0;l<a;l++)c[l]=d[l*s+o];n.push(c)}return p<e.byteLength-1&&(u=this._decodeMask(e.slice(p),t)),{pixels:n,mask:u}},decodeBSQ:function(e,t){var r=t.pixelType,i=t.bandCount;null!=i||(i=this.getBandCount(e,t));var n,a,s=[],o=t.width*t.height,l=o*i,u=e.byteLength-e.byteLength%(o*this._getPixelLength(r)),c=new r(e,0,l);for(n=0;n<i;n++)s.push(c.subarray(n*o,(n+1)*o));return u<e.byteLength-1&&(a=this._decodeMask(e.slice(u),t)),{pixels:s,mask:a}},getBandCount:function(e,t){var r=t.width*t.height,i=t.pixelType;return Math.floor(e.byteLength/(r*this._getPixelLength(i)))},_getPixelLength:function(e){var t=1;switch(e){case Uint8Array:case Int8Array:case Uint8ClampedArray:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},_decodeMask:function(e,t){var r=t.width*t.height;if(8*e.byteLength<r)return null;var i=new Uint8Array(e,0,Math.ceil(r/8)),n=new Uint8Array(t.width*t.height),a=0,s=0,o=0,l=0;for(o=0;o<i.length-1;o++)for(s=i[o],l=7;l>=0;l--)n[a++]=s>>l&1;for(l=7;a<r-1;)s=i[i.length-1],n[a++]=s>>l&1,l--;return n}}}.apply(null,[]))||(e.exports=i)},2280:function(e,t,r){var i,n;i=[r(347),r(340),r(338),r(404)],void 0===(n=function(e,t,r,i){var n=e({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),a=e({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"}),s=t.createSubclass({declaredClass:"esri.layers.support.MosaicRule",properties:{ascending:{value:!0},lockRasterIds:{value:null},method:{value:null,json:{read:{source:["mosaicMethod","defaultMosaicMethod"],reader:function(e,t){var r=t.mosaicMethod||t.defaultMosaicMethod;return"byattribute"===r.toLowerCase()?r="attribute":"lockraster"===r.toLowerCase()&&(r="lock-raster"),a.fromJSON(r)}}}},multidimensionalDefinition:{value:[]},objectIds:{value:null,json:{read:{source:["fids"],reader:function(e,t){return t.fids}}}},operation:{value:null,json:{read:{source:["mosaicOperation","mosaicOperator"],reader:function(e,t){return n.fromJSON(t.mosaicOperation||t.mosaicOperator.toLowerCase())}}}},sortField:{value:null},sortValue:{value:null},viewpoint:{value:null,type:i},where:{value:null}},clone:function(){return s.fromJSON(this.toJSON())},toJSON:function(){var e=null,t=this.multidimensionalDefinition?this.multidimensionalDefinition.length:0;if(t){e=[];for(var i=0;i<t;i++)e.push("esri.layers.support.DimensionalDefinition"===this.multidimensionalDefinition[i].declaredClass?this.multidimensionalDefinition[i].toJSON():this.multidimensionalDefinition[i])}var s=!!this.ascending&&null,o={mosaicMethod:this.method?a.toJSON(this.method.toLowerCase()):null,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:s,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJSON():null,fids:this.objectIds,mosaicOperation:this.operation?n.toJSON(this.operation.toLowerCase()):null,multidimensionalDefinition:e};return r.filter(o,function(e){return null!=e})}});return s}.apply(null,i))||(e.exports=n)},2281:function(e,t,r){var i,n;i=[r(347),r(340),r(338)],void 0===(n=function(e,t,r){var i=e({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"}),n=t.createSubclass({declaredClass:"esri.layers.support.RasterFunction",properties:{functionArguments:{value:null,json:{read:{source:["rasterFunctionArguments"],reader:function(e,t){return this._resolveFunctionArguments(r.clone(t.rasterFunctionArguments))}}}},functionName:{value:null,json:{read:{source:["rasterFunction","rasterFunctionInfos"],reader:function(e,t){e=t.rasterFunction;var r=t.rasterFunctionInfos;return r&&r.length&&"None"!==r[0].name&&(e=r[0].name),e}}}},outputPixelType:{value:"unknown"},variableName:{value:null}},clone:function(){return n.fromJSON(this.toJSON())},toJSON:function(){var e=r.clone(this.functionArguments),t=function(e){return e&&"esri.layers.support.RasterFunction"===e.declaredClass?e.toJSON():e};if(e&&(e.Raster=t(e.Raster),e.Raster2=t(e.Raster2),e.DEM=t(e.DEM),e.FillRaster=t(e.FillRaster),e.Rasters&&e.Rasters.length)){var n,a=[];for(n=0;n<e.Rasters.length;n++)a.push(t(e.Rasters[n]));e.Rasters=a}var s=i.toJSON(this.outputPixelType);s="UNKNOWN"!==s?s:null;var o={rasterFunction:this.functionName,rasterFunctionArguments:e,variableName:this.variableName,outputPixelType:s};return r.filter(o,function(e){return null!=e})},_resolveFunctionArguments:function(e){var t=function(e){return e&&e.rasterFunction?n.fromJSON(e):e};if(e&&(e.Raster=t(e.Raster),e.Raster2=t(e.Raster2),e.DEM=t(e.DEM),e.FillRaster=t(e.FillRaster),e.Rasters&&e.Rasters.length))for(var r=0;r<e.Rasters.length;r++)e.Rasters[r]=t(e.Rasters[r]);return e}});return n}.apply(null,i))||(e.exports=n)},2282:function(e,t,r){var i,n;i=[r(351),r(338)],void 0===(n=function(e,t){return e(null,{declaredClass:"esri.layers.support.DimensionalDefinition",variableName:null,dimensionName:null,values:[],isSlice:!1,constructor:function(e){e&&"object"==typeof e&&t.mixin(this,e)},toJSON:function(){var e={variableName:this.variableName,dimensionName:this.dimensionName,values:this.values,isSlice:this.isSlice};return t.filter(e,function(e){return null!==e})}})}.apply(null,i))||(e.exports=n)},2283:function(e,t,r){var i,n;i=[r(350),r(338),r(626),r(740),r(2284)],void 0===(n=function(e,t,r,i,n){return i.createSubclass({declaredClass:"esri.tasks.ImageServiceIdentifyTask",properties:{parsedUrl:{get:function(){var e=this._parseUrl(this.url);return e.path+="/identify",e}},url:{}},execute:function(i,n){var a=i.geometry?[i.geometry]:[];return r.normalizeCentralMeridian(a).then(function(r){var a={query:this._encode(t.mixin({},this.parsedUrl.query,{f:"json"},i.toJSON({geometry:r&&r[0]})))};return(this.requestOptions||n)&&(a=t.mixin({},this.requestOptions,n,a)),e(this.parsedUrl.path,a)}.bind(this)).then(this._handleExecuteResponse)},_handleExecuteResponse:function(e){return n.fromJSON(e.data)}})}.apply(null,i))||(e.exports=n)},2284:function(e,t,r){var i,n;i=[r(340),r(404),r(392)],void 0===(n=function(e,t,r){return e.createSubclass({declaredClass:"esri.tasks.support.ImageServiceIdentifyResult",properties:{catalogItemVisibilities:null,catalogItems:{value:null,type:r},location:{value:null,type:t},name:null,objectId:null,properties:null,value:null}})}.apply(null,i))||(e.exports=n)},2285:function(e,t,r){var i,n;i=[r(346),r(422)],void 0===(n=function(e,t){return e.createSubclass({declaredClass:"esri.tasks.support.ImageServiceIdentifyParameters",properties:{geometry:null,mosaicRule:null,noData:null,renderingRule:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null},toJSON:function(e){var r=e&&e.geometry||this.geometry,i={geometry:r,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?JSON.stringify(this.mosaicRule.toJSON()):null,renderingRule:this.renderingRule?JSON.stringify(this.renderingRule.toJSON()):null};r&&(i.geometryType=t.getJsonType(r));var n=this.timeExtent;return i.time=n?n.toJSON().join(","):null,null!=this.pixelSizeX&&null!=this.pixelSizeY?i.pixelSize=JSON.stringify({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(i.pixelSize=this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null),i}})}.apply(null,i))||(e.exports=n)},354:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){function r(e){return e?72*e/t.DPI:0}Object.defineProperty(t,"__esModule",{value:!0});var i=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,n="screenUtils.toPt: input not recognized!";t.DPI=96,t.pt2px=function(e){return e?e/72*t.DPI:0},t.px2pt=r,t.toPt=function(e){if("string"==typeof e){if(i.test(e)){var t=e.match(i),a=Number(t[1]),s=t[3]&&t[3].toLowerCase(),o="-"===e.charAt(0),l="px"===s?r(a):a;return o?-l:l}return console.warn(n),null}return e}}.apply(null,i))||(e.exports=n)},371:function(e,t,r){var i,n;i=[r(347),r(340),r(358)],void 0===(n=function(e,t,r){var i=e({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),n=0;return t.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+n++},properties:{type:{type:String,value:null,json:{read:i.read,write:{ignoreOrigin:!0,writer:i.write}}},color:{type:r,value:new r([0,0,0,1]),json:{read:function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e},write:{allowNull:!0}}}}})}.apply(null,i))||(e.exports=n)},374:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(347),r(336)],void 0===(n=function(e,t,r,i,n,a,s){var o=a({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(e){function t(t){var r=e.call(this,t)||this;return r.name=null,r.type=null,r}return r(t,e),i([s.property({json:{write:!0}})],t.prototype,"name",void 0),i([s.property({json:{read:o.read,write:o.write}})],t.prototype,"type",void 0),i([s.subclass("esri.layers.support.Domain")],t)}(s.declared(n))}.apply(null,i))||(e.exports=n)},392:function(e,t,r){var i,n;i=[r(347),r(340),r(338),r(383),r(395),r(362),r(613),r(422)],void 0===(n=function(e,t,r,i,n,a,s,o){var l=e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return t.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",getDefaults:function(){return r.mixin(this.inherited(arguments),{features:[]})},properties:{displayFieldName:null,exceededTransferLimit:null,features:{value:null,json:{read:function(e,t){for(var r=a.fromJSON(t.spatialReference),n=[],s=0;s<e.length;s++){var o=e[s],l=i.fromJSON(o),u=o.geometry&&o.geometry.spatialReference;l.geometry&&!u&&(l.geometry.spatialReference=r),n.push(l)}return t.transform&&this._hydrate(t.transform,t.geometryType,n),n}}},fields:{value:null,type:[n]},geometryType:{value:null,json:{read:l.read}},spatialReference:{type:a}},toJSON:function(e){var t={hasZ:this.hasZ,hasM:this.hasM};return this.displayFieldName&&(t.displayFieldName=this.displayFieldName),this.fields&&(t.fields=this.fields.map(function(e){return e.toJSON()})),this.spatialReference?t.spatialReference=this.spatialReference.toJSON():this.features[0]&&this.features[0].geometry&&(t.spatialReference=this.features[0].geometry.spatialReference.toJSON()),this.features[0]&&(this.features[0].geometry&&(t.geometryType=o.getJsonType(this.features[0].geometry)),t.features=s._encodeGraphics(this.features,e)),t.exceededTransferLimit=this.exceededTransferLimit,t.transform=this.transform,r.fixJson(t)},quantize:function(e){var t,r,i=e.translate[0],n=e.translate[1],a=e.scale[0],s=e.scale[1],o=this.features,l=function(e,t,r){var i,n,a,s,o,l,u,c=[];for(i=0,n=e.length;i<n;i++)a=e[i],i>0?(l=t(a[0]),u=r(a[1]),l===s&&u===o||(c.push([l-s,u-o]),s=l,o=u)):(s=t(a[0]),o=r(a[1]),c.push([s,o]));return c.length>0?c:null},u=function(e,t,r){return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){var i,n,a,s,o,u;for(u=[],i=0,n=(a=e.rings||e.paths).length;i<n;i++)s=a[i],(o=l(s,t,r))&&u.push(o);return u.length>0?(e.rings?e.rings=u:e.paths=u,e):null}:"multipoint"===e?function(e){var i;return(i=l(e.points,t,r)).length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:void 0}(this.geometryType,function(e){return Math.round((e-i)/a)},function(e){return Math.round((n-e)/s)});for(t=0,r=o.length;t<r;t++)u(o[t].geometry)||(o.splice(t,1),t--,r--);return this.transform=e,this},_hydrate:function(e,t,r){if(e){var i,n,a=e.translate[0],s=e.translate[1],o=e.scale[0],l=e.scale[1],u=function(e,t,r){return"esriGeometryPoint"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"esriGeometryPolyline"===e||"esriGeometryPolygon"===e?function(e){var i,n,a,s,o,l,u,c,p=e.rings||e.paths;for(i=0,n=p.length;i<n;i++)for(a=0,s=(o=p[i]).length;a<s;a++)l=o[a],a>0?(u+=l[0],c+=l[1]):(u=l[0],c=l[1]),l[0]=t(u),l[1]=r(c)}:"esriGeometryEnvelope"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"esriGeometryMultipoint"===e?function(e){var i,n,a,s,o,l=e.points;for(i=0,n=l.length;i<n;i++)a=l[i],i>0?(s+=a[0],o+=a[1]):(s=a[0],o=a[1]),a[0]=t(s),a[1]=r(o)}:void 0}(t,function(e){return e*o+a},function(e){return s-e*l});for(i=0,n=r.length;i<n;i++)r[i].geometry&&u(r[i].geometry)}}})}.apply(null,i))||(e.exports=n)},395:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(335),r(340),r(336),r(399),r(600)],void 0===(n=function(e,t,r,i,n,a,s,o){return function(e){function t(t){var r=e.call(this)||this;return r.alias=null,r.defaultValue=void 0,r.domain=null,r.editable=!0,r.length=-1,r.name=null,r.nullable=!0,r.type=null,r}var n;return r(t,e),n=t,t.prototype.clone=function(){return new n({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})},i([a.property({type:String,json:{write:!0}})],t.prototype,"alias",void 0),i([a.property({json:{write:{allowNull:!0}}})],t.prototype,"defaultValue",void 0),i([a.property({types:s.types,json:{read:{reader:s.fromJSON},write:!0}})],t.prototype,"domain",void 0),i([a.property({type:Boolean,json:{write:!0}})],t.prototype,"editable",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"length",void 0),i([a.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),i([a.property({type:Boolean,json:{write:!0}})],t.prototype,"nullable",void 0),i([a.property({type:String,json:{read:o.kebabDict.read,write:o.kebabDict.write}})],t.prototype,"type",void 0),n=i([a.subclass("esri.layers.support.Field")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},399:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(597),r(374),r(598),r(599)],void 0===(n=function(e,t,r,i,n,a){function s(e,t){switch(e.type){case"range":var r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return o.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every(function(e){return null==e||e.code!==t}))return o.INVALID_CODED_VALUE}return null}var o;Object.defineProperty(t,"__esModule",{value:!0}),t.CodedValueDomain=r,t.DomainBase=i,t.InheritedDomain=n,t.RangeDomain=a,function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(o=t.DomainValidationError||(t.DomainValidationError={})),t.isValidDomainValue=function(e,t){return null===s(e,t)},t.validateDomainValue=s,t.types={key:"type",base:t.DomainBase,typeMap:{range:t.RangeDomain,"coded-value":t.CodedValueDomain}},t.getDomainRange=function(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}},t.fromJSON=function(e){return e&&e.type?"range"===e.type?t.RangeDomain.fromJSON(e):"codedValue"===e.type?t.CodedValueDomain.fromJSON(e):null:null}}.apply(null,i))||(e.exports=n)},402:function(e,t,r){var i,n;i=[r(351),r(338),r(354),r(592)],void 0===(n=function(e,t,r,i){var n={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},a={color:[0,0,0,1],style:n.STYLE_SOLID,width:.75,cap:n.CAP_ROUND,join:n.JOIN_ROUND,miterLimit:7.5},s=e(i,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:n.STYLE_SOLID,json:{read:function(e,r){return t.valueOf(this._jsonStyles,e)||void 0},write:function(e,t){t.style=this._jsonStyles[e]}}},cap:{value:n.CAP_ROUND,json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}},join:{value:n.JOIN_ROUND,json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}},miterLimit:{value:7.5,cast:r.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return t.mixin(this.inherited(arguments),a)},normalizeCtorArgs:function(e,t,i,n,a,s){if(e&&"string"!=typeof e)return e;var o={};return null!=e&&(o.style=e),null!=t&&(o.color=t),null!=i&&(o.width=r.toPt(i)),null!=n&&(o.cap=n),null!=a&&(o.join=a),null!=s&&(o.miterLimit=r.toPt(s)),o},clone:function(){return new s({color:t.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});return t.mixin(s,n),s.defaultProps=a,s}.apply(null,i))||(e.exports=n)},403:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var i in t)if("declaredClass"!==i){var n=t[i];if(null!=n&&"function"!=typeof n)if(Array.isArray(n)){r[i]=[];for(var a=0;a<n.length;a++)r[i][a]=e(n[a])}else"object"==typeof n?n.toJSON&&(r[i]=JSON.stringify(n)):r[i]=n}return r}}.apply(null,i))||(e.exports=n)},425:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1}}();t.default=r}.apply(null,i))||(e.exports=n)},426:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(336)],void 0===(n=function(e,t,r,i,n,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minScale=0,t.maxScale=0,t}return r(t,e),i([a.property({type:Number,json:{write:!0}})],t.prototype,"minScale",void 0),i([a.property({type:Number,json:{write:!0}})],t.prototype,"maxScale",void 0),i([a.subclass("esri.layers.mixins.ScaleRangeLayer")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},429:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(461),r(406),r(619)],void 0===(n=function(e,t,r,i,n){Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){return null==t.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled")?void i.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,r.OriginId.DEFAULTS):t.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,i){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&e?t[r]=e:n.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},i)&&(t[r]=e)}}}}}},t.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",writer:function(e,t,r){t[r]=!e}}}},t.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}}}.apply(null,i))||(e.exports=n)},436:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(343),r(428),r(336),r(394)],void 0===(n=function(e,t,r,i,n,a,s,o){var l=n.getLogger("esri.layers.mixins.ArcGISService");return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=o.parse(this.url);if(e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(e){this._set("url",o.sanitizeUrl(e,l))},enumerable:!0,configurable:!0}),i([s.property({dependsOn:["url"]})],t.prototype,"title",null),i([s.property({type:String})],t.prototype,"url",null),i([s.subclass("esri.layers.mixins.ArcGISService")],t)}(s.declared(a))}.apply(null,i))||(e.exports=n)},438:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(346),r(336)],void 0===(n=function(e,t,r,i,n,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshInterval=0,t}return r(t,e),t.prototype.refresh=function(){this.emit("refresh")},i([a.property({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0}})],t.prototype,"refreshInterval",void 0),i([a.subclass("esri.layers.mixins.RefreshableLayer")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},440:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(340),r(338),r(336)],void 0===(n=function(e,t,r,i,n,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.attachmentTypes=null,r.definitionExpression=null,r.globalIds=null,r.num=null,r.objectIds=null,r.size=null,r.start=null,r}var n;return r(t,e),n=t,t.prototype.writeStart=function(e,t,r){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new n(a.clone({attachmentTypes:this.attachmentTypes,definitionExpression:this.definitionExpression,globalIds:this.globalIds,num:this.num,objectIds:this.objectIds,size:this.size,start:this.start}))},i([s.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),i([s.property({type:String,json:{write:!0}})],t.prototype,"definitionExpression",void 0),i([s.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),i([s.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),i([s.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([s.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),i([s.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),i([s.writer("start"),s.writer("num")],t.prototype,"writeStart",null),n=i([s.subclass("esri.tasks.support.AttachmentQuery")],t)}(s.declared(n))}.apply(null,i))||(e.exports=n)},444:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(364),r(340),r(338),r(336)],void 0===(n=function(e,t,r,i,n,a,s,o){return function(e){function t(t){var r=e.call(this,t)||this;return r.definitionExpression=null,r.gdbVersion=null,r.geometryPrecision=void 0,r.historicMoment=null,r.maxAllowableOffset=void 0,r.objectIds=null,r.outFields=null,r.outSpatialReference=null,r.relationshipId=void 0,r.returnGeometry=!1,r.source=null,r}var a;return r(t,e),a=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new a(s.clone({definitionExpression:this.definitionExpression,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source}))},i([o.property({type:String,json:{write:!0}})],t.prototype,"definitionExpression",void 0),i([o.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),i([o.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),i([o.property({type:Date})],t.prototype,"historicMoment",void 0),i([o.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),i([o.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),i([o.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),i([o.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),i([o.property({type:n.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),i([o.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),i([o.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),i([o.property({json:{write:!0}})],t.prototype,"source",void 0),a=i([o.subclass("esri.tasks.support.RelationshipQuery")],t)}(o.declared(a))}.apply(null,i))||(e.exports=n)},457:function(e,t,r){var i,n;i=[r(371),r(402)],void 0===(n=function(e,t){return e.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:t,json:{read:{default:null},write:!0}},type:null}})}.apply(null,i))||(e.exports=n)},458:function(e,t,r){var i,n;i=[r(351),r(354),r(371)],void 0===(n=function(e,t,r){return e(r,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(e){return e&&-1*e},write:function(e,t){t.angle=e&&-1*e}}},type:{},xoffset:{value:0,cast:t.toPt,json:{write:!0}},yoffset:{value:0,cast:t.toPt,json:{write:!0}},size:{value:9,cast:function(e){return"auto"===e?e:t.toPt(e)},json:{write:!0}}}})}.apply(null,i))||(e.exports=n)},586:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(349)],void 0===(n=function(e,t,r){function i(e,t,i){return t.imageData?r.makeData({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):n(t.url,i)}function n(e,t){return function(e){return e&&("service"===e.origin||"portal-item"===e.origin)&&e.layer&&("feature"===e.layer.type||"stream"===e.layer.type)}(t)&&!r.isAbsolute(e)&&t.layer.parsedUrl?r.join(t.layer.parsedUrl.path,"images",e):r.read(e,t)}function a(e,t,i,n){if(r.isDataProtocol(e)){var a=r.dataComponents(e);t.contentType=a.mediaType,t.imageData=a.data,i&&i.imageData===t.imageData&&i.url&&(t.url=s(i.url,n))}else t.url=s(e,n)}function s(e,t){return r.write(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.readImageDataOrUrl=i,t.read=n,t.writeImageDataAndUrl=a,t.write=s,t.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:i},write:{writer:function(e,t,r,i){a(e,t,this.source,i)}}}},t.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,t,r){var i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=n(t.url,r)),i}}}}}.apply(null,i))||(e.exports=n)},592:function(e,t,r){var i,n;i=[r(351),r(354),r(371)],void 0===(n=function(e,t,r){return e(r,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:t.toPt,json:{write:!0}}}})}.apply(null,i))||(e.exports=n)},593:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){return function(){function e(e,t,r,i){this._tag=0,this._dataType=99,this._data=e,this._dataView=t,this._pos=r||0,this._end=i||e.byteLength}return e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),r},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),r},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r},e.prototype.getMessage=function(){var t=this._getLength(),r=this._pos,i=new e(this._data,this._dataView,r,r+t);return this._skip(t),i},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,i=0;if(this._end-r>=10)do{if(i|=127&(e=t[r++]),0==(128&e))break;if(i|=(127&(e=t[r++]))<<7,0==(128&e))break;if(i|=(127&(e=t[r++]))<<14,0==(128&e))break;if(i|=(127&(e=t[r++]))<<21,0==(128&e))break;if(i+=268435456*(127&(e=t[r++])),0==(128&e))break;if(i+=34359738368*(127&(e=t[r++])),0==(128&e))break;if(i+=4398046511104*(127&(e=t[r++])),0==(128&e))break;if(i+=562949953421312*(127&(e=t[r++])),0==(128&e))break;if(i+=72057594037927940*(127&(e=t[r++])),0==(128&e))break;if(i+=0x8000000000000000*(127&(e=t[r++])),0==(128&e))break;throw new Error("Varint too long!")}while(0);else{for(var n=1;r!==this._end&&0!=(128&(e=t[r]));)++r,i+=(127&e)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=e*n}return this._pos=r,i},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw new Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){var i="",n="";r=Math.min(this._end,r);for(var a=t;a<r;++a){var s=e[a];128&s?n+="%"+s.toString(16):(i+=decodeURIComponent(n)+String.fromCharCode(s),n="")}return n.length&&(i+=decodeURIComponent(n)),i},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e}()}.apply(null,i))||(e.exports=n)},595:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t}}();t.default=r}.apply(null,i))||(e.exports=n)},597:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(338),r(336),r(374)],void 0===(n=function(e,t,r,i,n,a,s){return function(e){function t(t){var r=e.call(this,t)||this;return r.codedValues=null,r.type="coded-value",r}var s;return r(t,e),s=t,t.prototype.writeCodedValues=function(e,t){var r=null;e&&(r=e.map(function(e){return n.fixJson(n.clone(e))})),t.codedValues=r},t.prototype.getName=function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some(function(e){return String(e.code)===r&&(t=e.name),!!t})}return t},t.prototype.clone=function(){return new s({codedValues:n.clone(this.codedValues),name:this.name})},i([a.property({json:{write:!0}})],t.prototype,"codedValues",void 0),i([a.writer("codedValues")],t.prototype,"writeCodedValues",null),i([a.enumeration.serializable()({codedValue:"coded-value"})],t.prototype,"type",void 0),s=i([a.subclass("esri.layers.support.CodedValueDomain")],t)}(a.declared(s))}.apply(null,i))||(e.exports=n)},598:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(374)],void 0===(n=function(e,t,r,i,n,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.type="inherited",r}var a;return r(t,e),a=t,t.prototype.clone=function(){return new a},i([n.enumeration.serializable()({inherited:"inherited"})],t.prototype,"type",void 0),a=i([n.subclass("esri.layers.support.InheritedDomain")],t)}(n.declared(a))}.apply(null,i))||(e.exports=n)},599:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(336),r(374)],void 0===(n=function(e,t,r,i,n,a){return function(e){function t(t){var r=e.call(this,t)||this;return r.maxValue=null,r.minValue=null,r.type="range",r}var a;return r(t,e),a=t,t.prototype.clone=function(){return new a({maxValue:this.maxValue,minValue:this.minValue,name:this.name})},i([n.property({json:{read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{target:"range",writer:function(e,t,r){t[r]=[this.minValue,e]}}}})],t.prototype,"maxValue",void 0),i([n.property({json:{read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue]}}}})],t.prototype,"minValue",void 0),i([n.enumeration.serializable()({range:"range"})],t.prototype,"type",void 0),a=i([n.subclass("esri.layers.support.RangeDomain")],t)}(n.declared(a))}.apply(null,i))||(e.exports=n)},600:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(347)],void 0===(n=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.kebabDict=r({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})}.apply(null,i))||(e.exports=n)},603:function(e,t,r){var i,n;i=[r.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t,r,i){void 0===e&&(e=null),void 0===t&&(t={}),this.geometry=e,this.attributes=t,r&&(this.centroid=r),null!=i&&(this.objectId=i)}}();t.default=r}.apply(null,i))||(e.exports=n)},613:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(357),r(363)],void 0===(n=function(e,t,r,i){Object.defineProperty(t,"__esModule",{value:!0}),t.graphicsExtent=function(e){if(!e||!e.length)return null;var t=r.isCollection(e)?e.getItemAt(0).geometry:e[0].geometry,n=t.extent,a=t;null===n&&(n=new i(a.x,a.y,a.x,a.y,t.spatialReference));for(var s=1;s<e.length;s++){a=t=r.isCollection(e)?e.getItemAt(s).geometry:e[s].geometry;var o=t.extent;null===o&&(o=new i(a.x,a.y,a.x,a.y,t.spatialReference)),n=n.clone().union(o)}return n.width<0&&n.height<0?null:n},t.getGeometries=function(e){return e.map(function(e){return e.geometry})},t._encodeGraphics=function(e,t){var r=[];return e.forEach(function(e,i){var n=e.toJSON(),a={};if(n.geometry){var s=t&&t[i];a.geometry=s&&s.toJSON()||n.geometry}n.attributes&&(a.attributes=n.attributes),r[i]=a}),r}}.apply(null,i))||(e.exports=n)},627:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(349),r(422),r(626),r(628),r(403)],void 0===(n=function(e,t,r,i,n,a,s,o,l){function u(e,t){var r=e.geometry,i=e.toJSON(),n=i;if(r&&(n.geometry=JSON.stringify(r),n.geometryType=a.getJsonType(r),n.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),i.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(n.objectIds=i.objectIds.join(",")),i.orderByFields&&(n.orderByFields=i.orderByFields.join(",")),!i.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete n.outFields:-1!==i.outFields.indexOf("*")?n.outFields="*":n.outFields=i.outFields.join(","),i.outSR?n.outSR=i.outSR.wkid||JSON.stringify(i.outSR):r&&(i.returnGeometry||i.returnCentroid)&&(n.outSR=n.inSR),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(n.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(n.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(n.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.source&&(n.layer=JSON.stringify({source:i.source}),delete i.source),i.timeExtent){var s=i.timeExtent;n.time=[null!=s.startTime?s.startTime:"null",null!=s.endTime?s.endTime:"null"],delete i.timeExtent}return n}function c(e,t,a,o,c){void 0===o&&(o={});var p="string"==typeof e?n.urlToObject(e):e,d=t.geometry?[t.geometry]:[];return o.responseType="pbf"===a?"array-buffer":"json",s.normalizeCentralMeridian(d,null,o).then(function(e){var n=e&&e[0];n&&((t=t.clone()).geometry=n);var s=l.mapParameters(r({},p.query,{f:a},c,u(t,c)));return i(p.path+"/query",r({},o,{query:s}))})}Object.defineProperty(t,"__esModule",{value:!0});var p="Layer does not support extent calculation.";t.queryToQueryStringParameters=u,t.executeQuery=function(e,t,r){return c(e,t,"json",r)},t.executeQueryPBF=function(e,t,r){return c(e,t,"pbf",r).then(function(e){var t=o.parsePBFFeatureQuery(e.data),r=e;return r.data=t,r})},t.executeQueryForIds=function(e,t,r){return c(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return c(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return c(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(p);if(t.hasOwnProperty("count"))throw new Error(p);return e})}}.apply(null,i))||(e.exports=n)},628:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(341),r(343),r(425),r(629)],void 0===(n=function(e,t,r,i,n,a){Object.defineProperty(t,"__esModule",{value:!0});var s=i.getLogger("esri.tasks.operations.pbfQueryUtils");t.parsePBFFeatureQuery=function(e){try{var t=a.parseFeatureQuery(e).queryResult.featureResult;if(t&&t.features&&t.features.length&&t.objectIdFieldName)for(var i=t.objectIdFieldName,o=0,l=t.features;o<l.length;o++){var u=l[o];u.attributes&&(u.objectId=u.attributes[i])}return t}catch(e){var c=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return s.error(c),new n.default}}}.apply(null,i))||(e.exports=n)},629:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(593),r(603),r(425),r(595)],void 0===(n=function(e,t,r,i,n,a){function s(e){return e>=S.length?null:S[e]}function o(e){return e>=_.length?null:_[e]}function l(e){return e>=T.length?null:T[e]}function u(e){return e>=k.length?null:k[e]}function c(e){for(var t=new a.default,r=t.coords;e.next();)switch(e.tag()){case 3:for(var i=e.getUInt32(),n=e.pos()+i,s=0;e.pos()<n;)r[s++]=e.getSInt64();break;case 1:case 2:default:e.skip()}return t}function p(e){for(var t=new a.default,r=t.coords,i=t.lengths;e.next();)switch(e.tag()){case 2:for(var n=e.getUInt32(),s=e.pos()+n;e.pos()<s;)i.push(e.getUInt32());break;case 3:for(var o=e.getUInt32(),l=(s=e.pos()+o,0);e.pos()<s;)r[l++]=e.getSInt64();break;case 1:default:e.skip()}return t}function d(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function h(e){for(var t={type:s(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=s(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=o(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function f(e,t){for(var r=new i.default,n=0;e.next();)switch(e.tag()){case 1:var a=e.getMessage(),s=t[n++].name;r.attributes[s]=d(a);break;case 2:r.geometry=p(e.getMessage());break;case 4:r.centroid=c(e.getMessage());break;default:e.skip()}return r}function m(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function y(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function g(e){for(var t={originPosition:l(0)};e.next();)switch(e.tag()){case 1:t.originPosition=l(e.getEnum());break;case 2:t.scale=m(e.getMessage());break;case 3:t.translate=y(e.getMessage());break;default:e.skip()}return t}function v(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function b(e){for(var t={};e.next();)switch(e.tag()){case 1:t.wkid=e.getUInt32();break;case 5:t.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return t}function w(e){var t=new n.default;for(t.geometryType=u(0);e.next();)switch(e.tag()){case 1:t.objectIdFieldName=e.getString();break;case 3:t.globalIdFieldName=e.getString();break;case 4:t.geohashFieldName=e.getString();break;case 5:t.geometryProperties=v(e.getMessage());break;case 7:t.geometryType=u(e.getEnum());break;case 8:t.spatialReference=b(e.getMessage());break;case 10:t.hasZ=e.getBool();break;case 11:t.hasM=e.getBool();break;case 12:var r=e.getMessage();t.transform=g(r);break;case 9:var i=e.getBool();t.exceededTransferLimit=i;break;case 13:var a=e.getMessage();t.fields.push(h(a));break;case 15:var s=e.getMessage();t.features.push(f(s,t.fields));break;case 2:case 6:default:e.skip()}return t}function x(e){for(var t={};e.next();)switch(e.tag()){case 1:t.featureResult=w(e.getMessage());break;default:e.skip()}return t}Object.defineProperty(t,"__esModule",{value:!0});var S=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],_=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],k=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],T=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e){for(var t=new r(new Uint8Array(e),new DataView(e)),i={};t.next();)switch(t.tag()){case 2:i.queryResult=x(t.getMessage());break;default:t.skip()}return i}}.apply(null,i))||(e.exports=n)},639:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(349),r(403)],void 0===(n=function(e,t,r,i,n,a){Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t,i){for(var a={},s=0,o=e;s<o.length;s++)for(var l=o[s],u=l.parentObjectId,c=0,p=l.attachmentInfos;c<p.length;c++){var d=p[c],h=d.id,f=n.addProxy(t+"/"+u+"/attachments/"+h+(i?"?token="+i:"")),m=r({},d,{parentObjectId:u,url:f});a[u]?a[u].push(m):a[u]=[m]}return a},t.executeAttachmentQuery=function(e,t,n){var s={query:a.mapParameters(r({},e.query,{f:"json"},function(e){var t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}(t)))};return n&&(s=r({},n,s)),i(e.path+"/queryAttachments",s)}}.apply(null,i))||(e.exports=n)},647:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(337),r(335),r(388),r(344),r(364),r(336),r(740),r(627),r(639),r(648),r(440),r(392),r(419),r(444)],void 0===(n=function(e,t,r,i,n,a,s,o,l,u,c,p,d,h,f,m){return function(e){function t(t){var r=e.call(this,t)||this;return r.gdbVersion=null,r.source=null,r}return r(t,e),t.prototype.execute=function(e,t){return this.executeJSON(e,t).then(function(e){return h.fromJSON(e)})},t.prototype.executeJSON=function(e,t){return u.executeQuery(this.parsedUrl,this._normalizeQuery(e),a({},this.requestOptions,t)).then(function(e){return e.data})},t.prototype.executeForCount=function(e,t){return u.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),a({},this.requestOptions,t)).then(function(e){return e.data.count})},t.prototype.executeForExtent=function(e,t){return u.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),a({},this.requestOptions,t)).then(function(e){return{count:e.data.count,extent:s.Extent.fromJSON(e.data.extent)}})},t.prototype.executeForIds=function(e,t){return u.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),a({},this.requestOptions,t)).then(function(e){return e.data.objectIds})},t.prototype.executeRelationshipQuery=function(e,t){return(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),p.executeRelationshipQuery(this.parsedUrl,e,a({},this.requestOptions,t)).then(function(e){var t=e.data,r={};return Object.keys(t).forEach(function(e){return r[e]=h.fromJSON(t[e])}),r})},t.prototype.executeAttachmentQuery=function(e,t){var r=this,i=t&&t.query&&t.query.token;return c.executeAttachmentQuery(this.parsedUrl,e,a({},this.requestOptions,t)).then(function(e){return c.processAttachmentQueryResult(e.data.attachmentGroups,r.parsedUrl.path,i)})},t.prototype._normalizeQuery=function(e){return this.gdbVersion||this.source?e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):e},i([o.property()],t.prototype,"gdbVersion",void 0),i([o.property()],t.prototype,"source",void 0),i([n(0,o.cast(f))],t.prototype,"execute",null),i([n(0,o.cast(f))],t.prototype,"executeJSON",null),i([n(0,o.cast(f))],t.prototype,"executeForCount",null),i([n(0,o.cast(f))],t.prototype,"executeForExtent",null),i([n(0,o.cast(f))],t.prototype,"executeForIds",null),i([n(0,o.cast(m))],t.prototype,"executeRelationshipQuery",null),i([n(0,o.cast(d))],t.prototype,"executeAttachmentQuery",null),i([o.subclass("esri.tasks.QueryTask")],t)}(o.declared(l))}.apply(null,i))||(e.exports=n)},648:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(344),r(350),r(403)],void 0===(n=function(e,t,r,i,n){function a(e){var t=e.toJSON();return t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.outFields&&(t.outFields=t.outFields.join(",")),t.outSpatialReference&&(t.outSR=t.outSR.wkid||JSON.stringify(t.outSR.toJSON()),delete t.outSpatialReference),t.source&&(t.layer=JSON.stringify({source:t.source}),delete t.source),t}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=a,t.executeRelationshipQuery=function(e,t,s){var o={query:n.mapParameters(r({},e.query,{f:"json"},a(t)))};return s&&(o=r({},s,o)),i(e.path+"/queryRelatedRecords",o).then(function(e){for(var t=e.data,r=t.geometryType,i=t.spatialReference,n={},a=0,s=t.relatedRecordGroups;a<s.length;a++){var o=s[a],l={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:i,features:o.relatedRecords};if(null!=o.objectId)n[o.objectId]=l;else for(var u in o)o.hasOwnProperty(u)&&"relatedRecords"!==u&&(n[o[u]]=l)}return e.data=n,e})}}.apply(null,i))||(e.exports=n)},701:function(e,t,r){var i,n;i=[r(351),r(338),r(354),r(458),r(586)],void 0===(n=function(e,t,r,i,n){var a={width:12,height:12,angle:0,xoffset:0,yoffset:0},s=e(i,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:n.urlPropertyDefinition,source:n.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(e,t){return t.size||e}},write:!0},cast:r.toPt},width:{json:{read:{source:["width","size"],reader:function(e,t){return t.size||e}},write:!0},cast:r.toPt},size:{json:{write:!1}}},getDefaults:function(){return t.mixin(this.inherited(arguments),a)},normalizeCtorArgs:function(e,t,i){if(e&&"string"!=typeof e&&null==e.imageData)return e;var n={};return e&&(n.url=e),null!=t&&(n.width=r.toPt(t)),null!=i&&(n.height=r.toPt(i)),n},clone:function(){var e=new s({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",t.clone(this.source)),e}});return s.defaultProps=a,s}.apply(null,i))||(e.exports=n)},702:function(e,t,r){var i,n;i=[r(351),r(338),r(457),r(402)],void 0===(n=function(e,t,r,i){var n={style:"solid",outline:new i,color:[0,0,0,.25]},a=e(r,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(e){return t.valueOf(this._styles,e)||void 0},write:function(e,t){t.style=this._styles[e]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return t.mixin(this.inherited(arguments),n)},normalizeCtorArgs:function(e,t,r){if(e&&"string"!=typeof e)return e;var i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i},clone:function(){return new a({color:t.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});return t.mixin(a,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"}),a.defaultProps=n,a}.apply(null,i))||(e.exports=n)},804:function(e,t,r){var i;void 0===(i=function(){var e={defaultNoDataValue:-3.4027999387901484e38,decode:function(a,s){var o=(s=s||{}).encodedMaskData||null===s.encodedMaskData,l=n(a,s.inputOffset||0,o),u=null!=s.noDataValue?s.noDataValue:e.defaultNoDataValue,c=t(l,s.pixelType||Float32Array,s.encodedMaskData,u,s.returnMask),p={width:l.width,height:l.height,pixelData:c.resultPixels,minValue:l.pixels.minValue,maxValue:l.pixels.maxValue,noDataValue:u};return c.resultMask&&(p.maskData=c.resultMask),s.returnEncodedMask&&l.mask&&(p.encodedMaskData=l.mask.bitset?l.mask.bitset:null),s.returnFileInfo&&(p.fileInfo=r(l),s.computeUsedBitDepths&&(p.fileInfo.bitDepths=i(l))),p}},t=function(e,t,r,i,n){var s,o,l=0,u=e.pixels.numBlocksX,c=e.pixels.numBlocksY,p=Math.floor(e.width/u),d=Math.floor(e.height/c),h=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),n&&r&&(o=new Uint8Array(e.width*e.height));for(var f,m,y=new Float32Array(p*d),g=0;g<=c;g++){var v=g!==c?d:e.height%c;if(0!==v)for(var b=0;b<=u;b++){var w=b!==u?p:e.width%u;if(0!==w){var x,S,_,k,T=g*e.width*d+b*p,D=e.width-w,I=e.pixels.blocks[l];if(I.encoding<2?(0===I.encoding?x=I.rawData:(a(I.stuffedData,I.bitsPerPixel,I.numValidPixels,I.offset,h,y,e.pixels.maxValue),x=y),S=0):_=2===I.encoding?0:I.offset,r)for(m=0;m<v;m++){for(7&T&&(k=r[T>>3],k<<=7&T),f=0;f<w;f++)7&T||(k=r[T>>3]),128&k?(o&&(o[T]=1),s[T++]=I.encoding<2?x[S++]:_):(o&&(o[T]=0),s[T++]=i),k<<=1;T+=D}else if(I.encoding<2)for(m=0;m<v;m++){for(f=0;f<w;f++)s[T++]=x[S++];T+=D}else for(m=0;m<v;m++)if(s.fill)s.fill(_,T,T+w),T+=w+D;else{for(f=0;f<w;f++)s[T++]=_;T+=D}if(1===I.encoding&&S!==I.numValidPixels)throw"Block and Mask do not match";l++}}}return{resultPixels:s,resultMask:o}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:this.noDataValue}}},i=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},i=0;i<t;i++){var n=e.pixels.blocks[i];0===n.encoding?r.float32=!0:1===n.encoding?r[n.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},n=function(e,t,r){var i={},n=new Uint8Array(e,t,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,n),"CntZImage"!=i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(i.fileVersion=a.getInt32(0,!0),i.imageType=a.getInt32(4,!0),i.height=a.getUint32(8,!0),i.width=a.getUint32(12,!0),i.maxZError=a.getFloat64(16,!0),t+=24,!r)if(a=new DataView(e,t,16),i.mask={},i.mask.numBlocksY=a.getUint32(0,!0),i.mask.numBlocksX=a.getUint32(4,!0),i.mask.numBytes=a.getUint32(8,!0),i.mask.maxValue=a.getFloat32(12,!0),t+=16,i.mask.numBytes>0){var s=new Uint8Array(Math.ceil(i.width*i.height/8)),o=(a=new DataView(e,t,i.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(o>0)for(;o--;)s[u++]=a.getUint8(l++);else{var c=a.getUint8(l++);for(o=-o;o--;)s[u++]=c}o=a.getInt16(l,!0),l+=2}while(l<i.mask.numBytes);if(-32768!==o||u<s.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=s,t+=i.mask.numBytes}else if(0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)){s=new Uint8Array(Math.ceil(i.width*i.height/8));i.mask.bitset=s}a=new DataView(e,t,16),i.pixels={},i.pixels.numBlocksY=a.getUint32(0,!0),i.pixels.numBlocksX=a.getUint32(4,!0),i.pixels.numBytes=a.getUint32(8,!0),i.pixels.maxValue=a.getFloat32(12,!0),t+=16;var p=i.pixels.numBlocksX,d=i.pixels.numBlocksY,h=p+(i.width%p>0?1:0),f=d+(i.height%d>0?1:0);i.pixels.blocks=new Array(h*f);for(var m=1e9,y=0,g=0;g<f;g++)for(var v=0;v<h;v++){var b=0,w=e.byteLength-t;a=new DataView(e,t,Math.min(10,w));var x={};i.pixels.blocks[y++]=x;var S=a.getUint8(0);if(b++,x.encoding=63&S,x.encoding>3)throw"Invalid block encoding ("+x.encoding+")";if(2!==x.encoding){if(0!==S&&2!==S){if(S>>=6,x.offsetType=S,2===S)x.offset=a.getInt8(1),b++;else if(1===S)x.offset=a.getInt16(1,!0),b+=2;else{if(0!==S)throw"Invalid block offset type";x.offset=a.getFloat32(1,!0),b+=4}if(m=Math.min(x.offset,m),1===x.encoding)if(S=a.getUint8(b),b++,x.bitsPerPixel=63&S,S>>=6,x.numValidPixelsType=S,2===S)x.numValidPixels=a.getUint8(b),b++;else if(1===S)x.numValidPixels=a.getUint16(b,!0),b+=2;else{if(0!==S)throw"Invalid valid pixel count type";x.numValidPixels=a.getUint32(b,!0),b+=4}}var _;if(t+=b,3!=x.encoding)if(0===x.encoding){var k=(i.pixels.numBytes-1)/4;if(k!==Math.floor(k))throw"uncompressed block has invalid length";_=new ArrayBuffer(4*k),new Uint8Array(_).set(new Uint8Array(e,t,4*k));for(var T=new Float32Array(_),D=0;D<T.length;D++)m=Math.min(m,T[D]);x.rawData=T,t+=4*k}else if(1===x.encoding){var I=Math.ceil(x.numValidPixels*x.bitsPerPixel/8),j=Math.ceil(I/4);_=new ArrayBuffer(4*j),new Uint8Array(_).set(new Uint8Array(e,t,I)),x.stuffedData=new Uint32Array(_),t+=I}}else t++,m=Math.min(m,0)}return i.pixels.minValue=m,i.eofOffset=t,i},a=function(e,t,r,i,n,a,s){var o,l,u,c=(1<<t)-1,p=0,d=0,h=Math.ceil((s-i)/n),f=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*f,o=0;o<r;o++){if(0===d&&(u=e[p++],d=32),d>=t)l=u>>>d-t&c,d-=t;else{var m=t-d;l=(u&c)<<m&c,l+=(u=e[p++])>>>(d=32-m)}a[o]=l<h?i+l*n:s}return a};return e}.apply(null,[]))||(e.exports=i)},908:function(e,t,r){var i,n;i=[r.dj.c(e.i),r(338),r(339),r(398),r(2274),r(433),r(432),r(426),r(438),r(429)],void 0===(n=function(e,t,i,n,a,s,o,l,u,c){var p={canvas2D:"2d",webGL:"webgl",expWebGL:"experimental-webgl",webGL2:"webgl2",expWebGL2:"experimental-webgl2"};return n.createSubclass([a,s,o,l,u],{declaredClass:"esri.layers.ImageryLayer",normalizeCtorArgs:function(e,r){return"string"==typeof e?t.mixin({},{url:e},r):e},load:function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]}).always(this._fetchService.bind(this)))},properties:{drawMode:!0,drawType:{value:p.canvas2D,cast:function(e){return e in p?e:p.canvas2D}},legendEnabled:{json:{read:{source:["showLegend"],reader:function(e,t){return null==t.showLegend||t.showLegend}},write:function(e,t){t.showLegend=!!e}}},operationalLayerType:"ArcGISImageServiceLayer",popupEnabled:c.popupEnabled,pixelFilter:null,type:{value:"imagery",json:{read:!1}}},redraw:function(){this.emit("redraw")},importLayerViewModule:function(e){switch(e.type){case"2d":return i.create(function(e){Promise.all([r.e(5),r.e(13),r.e(97)]).then(function(){var t=[r(2389)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return i.create(function(e){Promise.all([r.e(4),r.e(6),r.e(8),r.e(7),r.e(70)]).then(function(){var t=[r(2390)];e.apply(null,t)}.bind(this)).catch(r.oe)})}}})}.apply(null,i))||(e.exports=n)}}]);