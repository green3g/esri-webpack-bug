(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/WMSLayerView2D":2403})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{2403:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(345),r(347),r(336),r(366),r(337),r(361),r(1489),r(1005),r(1006),r(790),r(1575),r(683)],void 0===(n=function(e,t,r,i,n,a,o,s,h,p,u,d,l,c){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handles=new a,t.container=new u,t}return i(t,e),t.prototype.hitTest=function(e,t){return null},t.prototype.getPopupData=function(e){var t=this,r=e.center;if(!this.layer.popupEnabled)return null;var i=r.x,n=r.y,a=null,o=0,h=0;if(this.container.children.some(function(e){var r=e.width,p=e.height,u=e.resolution,d=e.x,l=e.y,c=d+u*r,m=l-u*p;return i>=d&&i<=c&&n<=l&&n>=m&&(a=new s({xmin:d,ymin:m,xmax:c,ymax:l,spatialReference:t.view.spatialReference}),o=r,h=p,!0)}),a&&o&&h){var p=a.width/o,u=Math.round((i-a.xmin)/p),d=Math.round((a.ymax-n)/p),l=this.layer.fetchFeatureInfo(a,o,h,u,d);return l&&l.then(function(e){return[e]})}return null},t.prototype.update=function(e){this.strategy.update(e),this.notifyChange("updating")},t.prototype.attach=function(){var e=this,t=this.layer,r=t.imageMaxHeight,i=t.imageMaxWidth;this.strategy=new l({container:this.container,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:r,imageMaxWidth:i,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this._exportWMSImageParameters=new h({layer:this.layer}),this._handles.add(this._exportWMSImageParameters.watch("version",function(t){e._exportImageVersion!==t&&(e._exportImageVersion=t,e._exportWMSImageParameters.layers?e.requestUpdate():e.container.removeAllChildren())}))},t.prototype.detach=function(){this.container.removeAllChildren(),this.strategy.destroy(),this._handles.removeAll(),this._exportWMSImageParameters.layer=null,this._exportWMSImageParameters.destroy(),this._exportWMSImageParameters=null},t.prototype.moveStart=function(){},t.prototype.viewChange=function(){},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.doRefresh=function(){this.requestUpdate()},t.prototype.isUpdating=function(){return this.attached&&(this.strategy.updating||this.updateRequested)},t.prototype.fetchImage=function(e,t,i,n){var a=this;return n=r({timestamp:this.refreshTimestamp},n),this.layer.fetchImage(e,t,i,n).then(function(e){return a.notifyChange("updating"),new p.default(e)})},n([o.subclass("esri.views.2d.layers.WMSLayerView2D")],t)}(o.declared(d,c))}.apply(null,i))||(e.exports=n)}}]);