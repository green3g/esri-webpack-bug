(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/LayerView":664,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/TilingScheme":670,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/layers/RefreshableLayerView":683,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/ElevationLayer":692,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/LayerView3D":746,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/support/layerViewUpdatingProperties":776,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/support/rasterFormats/LercCodec":800,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/heightModelInfoUtils":804,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtils":812,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/TerrainConst":832,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/TileLayerView3D":901,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtilsPlanar":957,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/terrain/terrainUtilsSpherical":958,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/TiledLayerView3D":1004,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/3d/layers/support/tiledLayerUtils":1270})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1004:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(347),i(336),i(342),i(337),i(746),i(776),i(812)],void 0===(n=function(e,t,i,r,n,a,o,l,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minDataLevel=0,t.maxDataLevel=1/0,t._isUpdating=!1,t}return i(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpaque",{get:function(){return this.fullOpacity>=1&&this.imageFormatIsOpaque},enumerable:!0,configurable:!0}),t.prototype.getTileUrl=function(e,t,i){return this.layer.getTileUrl(e,t,i)},t.prototype.updatingChanged=function(e){this._isUpdating=e,this.notifyChange("updating")},t.prototype.isUpdating=function(){return this._isUpdating},t.prototype._getTileInfoSupportError=function(e,t){var i=s.checkIfTileInfoSupportedForView(e,t,this.view.spatialReference,this.view.basemapTerrain.manifold);if(i){var r={layer:this.layer,error:i},a=void 0;switch(i.name){case"tilingscheme:local-gcs-not-supported":a=new n("layerview:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes",r);break;case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":a=new n("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",r);break;default:a=new n("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",r)}return a}return null},t.prototype._getTileInfoCompatibilityError=function(e,t){return t.compatibleWith(e)?null:new n("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")},t.prototype._updateMinMaxDataLevel=function(){var e,t=1/0,i=0;this.tileInfo.lods.forEach(function(e){t=Math.min(e.level,t),i=Math.max(e.level,i)}),e=[t,i],this.minDataLevel=e[0],this.maxDataLevel=e[1]},r([a.property({readOnly:!0})],t.prototype,"imageFormatIsOpaque",null),r([a.property(l.updatingPercentage)],t.prototype,"updatingPercentage",void 0),r([a.property(l.updatingPercentageValue)],t.prototype,"updatingPercentageValue",void 0),r([a.property()],t.prototype,"fullExtent",void 0),r([a.property({readOnly:!0,dependsOn:["fullOpacity","imageFormatIsOpaque"]})],t.prototype,"isOpaque",null),r([a.property()],t.prototype,"layer",void 0),r([a.property()],t.prototype,"minDataLevel",void 0),r([a.property()],t.prototype,"maxDataLevel",void 0),r([a.property()],t.prototype,"tileInfo",void 0),r([a.subclass("esri.views.3d.layers.TiledLayerView3D")],t)}(a.declared(o))}.apply(null,r))||(e.exports=n)},1270:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(811),i(342),i(340),i(392)],void 0===(n=function(e,t,i,r,n,a){Object.defineProperty(t,"__esModule",{value:!0}),t.checkArcGISServiceVersionCompatibility=function(e){if(!a.isHostedAgolService(e.url)){if(e.version<10.22){var t=new r("layerview:service-version-too-old","Tiled Map Layers on servers prior to 10.2.2 are not supported. Detected version: "+e.version,{minVersion:10.22,detectedVersion:e.version});return n.reject(t)}if(10.22!==e.version||a.isHostedSecuredProxyService(e.url,e.get("portalItem.id")))return n.resolve();var o=function(e){var t=null,i=e.search(/\/rest\/services\//i);return i>0&&(t=e.substring(0,i+6)),t}(e.url),l=new r("tiledlayerview3d:service-missing-cors-patch","Tiled Map Layers from 10.2.2 servers are only supported if all server updates have been applied.");return i(o+"self?f=json",{headers:{"X-Requested-With":null},timeout:1e4,handleAs:"json"}).then(function(e){if(!e||e.error)throw l}).catch(function(){throw l})}},t.throwIfError=function(e){if(e)throw e}}.apply(null,r))||(e.exports=n)},664:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(338),i(336),i(346),i(446),i(366),i(689),i(343),i(624),i(340),i(337)],void 0===(n=function(e,t,i,r,n,a,o,l,s,u,c,p){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handles=new o,t.layer=null,t.parent=null,t.view=null,t}return i(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var i=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";return s.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+i+"')",t),c.reject(t)}})},t.prototype.destroy=function(){this.layer=this.view=this.parent=null},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null!=e?e:1};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},r([p.property()],t.prototype,"layer",void 0),r([p.property()],t.prototype,"parent",void 0),r([p.property({readOnly:!0,dependsOn:["view","visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),r([p.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],t.prototype,"updating",null),r([p.property()],t.prototype,"view",void 0),r([p.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r([p.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r([p.subclass("esri.views.layers.LayerView")],t)}(p.declared(n,a,l,u))}.apply(null,r))||(e.exports=n)},670:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(365),i(342),i(360),i(367),i(442),i(450),i(364),i(388)],void 0===(n=function(e,t,i,r,n,a,o,l,s,u){var c=u.webMercator.x2lon,p=u.webMercator.y2lat,h=function(){function e(t){var i=e._checkUnsupported(t);if(i)throw i;this.spatialReference=t.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isWGS84=this.spatialReference.isWGS84,this.origin=[t.origin.x,t.origin.y],this.pixelSize=[t.size[0],t.size[1]],this.dpi=t.dpi;var r=t.lods.reduce(function(e,t,i){return t.level<e.min&&(e.min=t.level,e.minIndex=i),e.max=Math.max(e.max,t.level),e},{min:1/0,minIndex:0,max:-1/0}),n=t.lods[r.minIndex],a=Math.pow(2,n.level),o=n.resolution*a,l=n.scale*a;this.levels=new Array(r.max+1);for(var s=0;s<this.levels.length;s++)this.levels[s]={resolution:o,scale:l,tileSize:[o*t.size[0],o*t.size[1]]},o/=2,l/=2}return e.prototype.clone=function(){return new e(this.toTileInfo())},e.prototype.toTileInfo=function(){return new l({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:this.pixelSize,spatialReference:this.spatialReference,lods:this.levels.map(function(e,t){return{level:t,scale:e.scale,resolution:e.resolution}})})},e.prototype.getExtent=function(e,t,i,r,n){void 0===r&&(r=a.create());var o=this.levels[e],l=o.tileSize[0],u=o.tileSize[1];return r[0]=this.origin[0]+i*l,r[2]=r[0]+l,r[3]=this.origin[1]-t*u,r[1]=r[3]-u,n&&(this._isWebMercator?(n[0]=c(r[0]),n[1]=p(r[1]),n[2]=c(r[2]),n[3]=p(r[3])):this._isWGS84&&(n[0]=s.deg2rad(r[0]),n[1]=s.deg2rad(r[1]),n[2]=s.deg2rad(r[2]),n[3]=s.deg2rad(r[3]))),r},e.prototype.getExtentGeometry=function(e,t,r,n){return void 0===n&&(n=new i.Extent),this.getExtent(e,t,r,d),n.spatialReference=this.spatialReference,n.xmin=d[0],n.ymin=d[1],n.xmax=d[2],n.ymax=d[3],n.zmin=void 0,n.zmax=void 0,n},e.prototype.ensureMaxLod=function(e){for(;this.levels.length<=e;){var t=this.levels[this.levels.length-1],i=t.resolution/2;this.levels.push({resolution:i,scale:t.scale/2,tileSize:[i*this.pixelSize[0],i*this.pixelSize[1]]})}},e.prototype.capMaxLod=function(e){this.levels.length>e+1&&(this.levels.length=e+1)},e.prototype.getMaxLod=function(){return this.levels.length-1},e.prototype.scaleAtLevel=function(e){return this.levels[0].scale/Math.pow(2,e)},e.prototype.levelAtScale=function(e){var t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E},e.prototype.resolutionAtLevel=function(e){return this.levels[0].resolution/Math.pow(2,e)},e.prototype.compatibleWith=function(t){if(!(t instanceof e)){if(e._checkUnsupported(t))return!1;t=new e(t)}if(!t.spatialReference.equals(this.spatialReference))return!1;if(t.pixelSize[0]!==this.pixelSize[0]||t.pixelSize[1]!==this.pixelSize[1])return!1;var i=Math.min(this.levels.length,t.levels.length)-1,r=this.levels[i].resolution,n=.5*r;if(!s.floatEqualAbsolute(t.origin[0],this.origin[0],n)||!s.floatEqualAbsolute(t.origin[1],this.origin[1],n))return!1;var a=Math.max(this.pixelSize[0],this.pixelSize[1]);return n=.5*r/Math.pow(2,i)/a*12,s.floatEqualAbsolute(r,t.levels[i].resolution,n)},e.prototype.rootTilesInExtent=function(t,i,r){var n=this.levels[0].tileSize;e.computeRowColExtent(t,n,this.origin,d);var a=d[1],o=d[3],l=d[0],s=d[2],u=s-l,c=o-a;if(u*c>r){var p=Math.floor(Math.sqrt(r));c>p&&(o=(a=a+Math.floor(.5*c)-Math.floor(.5*p))+p),u>p&&(s=(l=l+Math.floor(.5*u)-Math.floor(.5*p))+p)}for(var h=new Array((s-l)*(o-a)),f=0,A=a;A<o;A++)for(var v=l;v<s;v++)h[f++]=[0,A,v];return i&&(i[0]=this.origin[0]+l*n[0],i[1]=this.origin[1]-o*n[1],i[2]=this.origin[0]+s*n[0],i[3]=this.origin[1]-a*n[1]),h},e.computeRowColExtent=function(e,t,i,r){var n=.001*(e[2]-e[0]+(e[3]-e[1]));r[0]=Math.floor((e[0]+n-i[0])/t[0]),r[2]=Math.ceil((e[2]-n-i[0])/t[0]),r[1]=Math.floor((i[1]-e[3]+n)/t[1]),r[3]=Math.ceil((i[1]-e[1]-n)/t[1])},e.isPowerOfTwo=function(e){var t=e.lods,i=t[0].resolution*Math.pow(2,t[0].level);return!t.some(function(e){return!s.floatEqualRelative(e.resolution,i/Math.pow(2,e.level))})},e.hasGapInLevels=function(e){var t=e.lods.map(function(e){return e.level});t.sort(function(e,t){return e-t});for(var i=1;i<t.length;i++)if(t[i]!==t[0]+i)return!0;return!1},e.tileSizeSupported=function(e){var t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512},e._checkUnsupported=function(t){return t?t.lods.length<1?new r("tilingscheme:generic","Tiling scheme must have at least one level"):e.isPowerOfTwo(t)?null:new r("tilingscheme:power-of-two","Tiling scheme must be power of two"):new r("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")},e.checkUnsupported=function(t){return e._checkUnsupported(t)||(e.hasGapInLevels(t)?new r("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):e.tileSizeSupported(t)?null:new r("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"))},e.fromExtent=function(t,i){var r=t[2]-t[0],n=t[3]-t[1],a=o.getMetersPerUnitForSR(i),s=1.2*Math.max(r,n),u=new e(new l({size:[256,256],origin:{x:t[0]-.5*(s-r),y:t[3]+.5*(s-n)},lods:[{level:0,resolution:s/256,scale:1/(256/96*.0254/(s*a))}],spatialReference:i}));return u.ensureMaxLod(20),u},e.makeWebMercatorAuxiliarySphere=function(t){void 0===t&&(t=19);var i=new e(e.WebMercatorAuxiliarySphereTileInfo);return i.ensureMaxLod(t),i},e.makeWGS84WithTileSize=function(t,i){void 0===i&&(i=16);var r=256/t,a=new e(new l({size:[t,t],origin:{x:-180,y:90,spatialReference:n.WGS84},spatialReference:n.WGS84,lods:[{level:0,resolution:.703125*r,scale:295497598.570834*r}]}));return a.ensureMaxLod(i),a},e.WebMercatorAuxiliarySphereTileInfo=new l({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:n.WebMercator},spatialReference:n.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),e.WebMercatorAuxiliarySphere=e.makeWebMercatorAuxiliarySphere(19),e}(),d=a.create();return h}.apply(null,r))||(e.exports=n)},683:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(338),i(336),i(346),i(337)],void 0===(n=function(e,t,i,r,n,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t}return i(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},r([a.property()],t.prototype,"layer",void 0),r([a.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),r([a.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),r([a.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(a.declared(n))}.apply(null,r))||(e.exports=n)},692:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(345),i(338),i(336),i(423),i(355),i(351),i(342),i(340),i(350),i(337),i(619),i(399),i(685),i(434),i(431),i(800)],void 0===(n=function(e,t,r,n,a,o,l,s,u,c,p,h,d,f,A,v,y,g){return function(e){function t(t){var i=e.call(this)||this;return i.copyright=null,i.heightModelInfo=null,i.opacity=1,i.operationalLayerType="ArcGISTiledElevationServiceLayer",i.type="elevation",i.url=null,i}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r({url:e},t):e},Object.defineProperty(t.prototype,"minScale",{get:function(){},set:function(e){this.constructed&&l.deprecated(this.declaredClass+".minScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScale",{get:function(){},set:function(e){this.constructed&&l.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new u("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}}).always(function(){return e._fetchImageService()})),this.when()},t.prototype.fetchTile=function(e,t,i,r){var n=this;return void 0===r&&(r=0),this.load().then(function(){return n._fetchTileAvailability(e,t,i)}).then(function(){return s(n.getTileUrl(e,t,i),{responseType:"array-buffer"})}).then(function(e){var t=g.decode(e.data,{noDataValue:r,returnFileInfo:!0});return{values:t.pixelData,width:t.width,height:t.height,maxZError:t.fileInfo.maxZError,noDataValue:t.noDataValue}})},t.prototype.getTileUrl=function(e,t,i){var n=!this.tilemapCache&&this.supportsBlankTile,a=o.objectToQuery(r({},this.parsedUrl.query,{blankTile:!n&&null}));return this.parsedUrl.path+"/tile/"+e+"/"+t+"/"+i+(a?"?"+a:"")},t.prototype.queryElevation=function(e,t){var r=this;return c.create(function(e){return i.e(41).then(function(){var t=[i(775)];e.apply(null,t)}.bind(this)).catch(i.oe)}).then(function(i){return(new i.ElevationQuery).query(r,e,t)})},t.prototype.createElevationSampler=function(e,t){var r=this;return c.create(function(e){return i.e(41).then(function(){var t=[i(775)];e.apply(null,t)}.bind(this)).catch(i.oe)}).then(function(i){return(new i.ElevationQuery).createSampler(r,e,t)})},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return c.reject(new u("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case"3d":return c.create(function(e){return Promise.all([i.e(0),i.e(1),i.e(3),i.e(2),i.e(66)]).then(function(){var t=[i(1068)];e.apply(null,t)}.bind(this)).catch(i.oe)})}},t.prototype._fetchTileAvailability=function(e,t,i){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,i):c.resolve("unknown")},t.prototype._fetchImageService=function(){var e=this;return c.resolve().then(function(){if(e.resourceInfo)return e.resourceInfo;var t={query:r({f:"json"},e.parsedUrl.query),responseType:"json"};return s(e.parsedUrl.path,t)}).then(function(t){t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl})})},a([h.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),a([h.property({readOnly:!0,type:d})],t.prototype,"heightModelInfo",void 0),a([h.property({json:{read:!1,write:!1}})],t.prototype,"minScale",null),a([h.property({json:{read:!1,write:!1}})],t.prototype,"maxScale",null),a([h.property({json:{read:!1,write:!1}})],t.prototype,"opacity",void 0),a([h.property()],t.prototype,"operationalLayerType",void 0),a([h.property()],t.prototype,"resourceInfo",void 0),a([h.property({json:{read:!1},value:"elevation",readOnly:!0})],t.prototype,"type",void 0),a([h.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:p.writeOperationalLayerUrl}}}}})],t.prototype,"url",void 0),a([h.subclass("esri.layers.ElevationLayer")],t)}(h.declared(f,A,v,y))}.apply(null,r))||(e.exports=n)},746:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(338),i(336),i(340),i(374),i(337),i(804),i(664)],void 0===(n=function(e,t,i,r,n,a,o,l,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slicePlaneEnabled=!1,t.supportsHeightUnitConversion=!1,t}return i(t,e),t.prototype.postscript=function(e){this.inherited(arguments),l.mayHaveHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())},t.prototype._validateHeightModelInfo=function(){var e=this;return n.create(function(t,i){a.whenFalseOnce(e.view.defaultsFromMap,"isHeightModelInfoSearching",function(){var r=l.rejectLayerError(e.layer,e.view.heightModelInfo,e.supportsHeightUnitConversion);r?i(r):t()})})},r([o.property()],t.prototype,"view",void 0),r([o.property()],t.prototype,"slicePlaneEnabled",void 0),r([o.subclass("esri.views.3d.layers.LayerView3D")],t)}(o.declared(s))}.apply(null,r))||(e.exports=n)},776:function(e,t,i){var r,n;r=[i.dj.c(e.i),t],void 0===(n=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updatingPercentageValue={value:100,readOnly:!0},t.updatingPercentage={dependsOn:["updating","updatingPercentageValue"],readOnly:!0,value:0,get:function(){return this.updating?this.updatingPercentageValue:0}}}.apply(null,r))||(e.exports=n)},800:function(e,t,i){var r;void 0===(r=function(){var e={defaultNoDataValue:-3.4027999387901484e38,decode:function(a,o){var l=(o=o||{}).encodedMaskData||null===o.encodedMaskData,s=n(a,o.inputOffset||0,l),u=null!=o.noDataValue?o.noDataValue:e.defaultNoDataValue,c=t(s,o.pixelType||Float32Array,o.encodedMaskData,u,o.returnMask),p={width:s.width,height:s.height,pixelData:c.resultPixels,minValue:s.pixels.minValue,maxValue:s.pixels.maxValue,noDataValue:u};return c.resultMask&&(p.maskData=c.resultMask),o.returnEncodedMask&&s.mask&&(p.encodedMaskData=s.mask.bitset?s.mask.bitset:null),o.returnFileInfo&&(p.fileInfo=i(s),o.computeUsedBitDepths&&(p.fileInfo.bitDepths=r(s))),p}},t=function(e,t,i,r,n){var o,l,s=0,u=e.pixels.numBlocksX,c=e.pixels.numBlocksY,p=Math.floor(e.width/u),h=Math.floor(e.height/c),d=2*e.maxZError;i=i||(e.mask?e.mask.bitset:null),o=new t(e.width*e.height),n&&i&&(l=new Uint8Array(e.width*e.height));for(var f,A,v=new Float32Array(p*h),y=0;y<=c;y++){var g=y!==c?h:e.height%c;if(0!==g)for(var m=0;m<=u;m++){var w=m!==u?p:e.width%u;if(0!==w){var x,T,b,E,I=y*e.width*h+m*p,M=e.width-w,S=e.pixels.blocks[s];if(S.encoding<2?(0===S.encoding?x=S.rawData:(a(S.stuffedData,S.bitsPerPixel,S.numValidPixels,S.offset,d,v,e.pixels.maxValue),x=v),T=0):b=2===S.encoding?0:S.offset,i)for(A=0;A<g;A++){for(7&I&&(E=i[I>>3],E<<=7&I),f=0;f<w;f++)7&I||(E=i[I>>3]),128&E?(l&&(l[I]=1),o[I++]=S.encoding<2?x[T++]:b):(l&&(l[I]=0),o[I++]=r),E<<=1;I+=M}else if(S.encoding<2)for(A=0;A<g;A++){for(f=0;f<w;f++)o[I++]=x[T++];I+=M}else for(A=0;A<g;A++)if(o.fill)o.fill(b,I,I+w),I+=w+M;else{for(f=0;f<w;f++)o[I++]=b;I+=M}if(1===S.encoding&&T!==S.numValidPixels)throw"Block and Mask do not match";s++}}}return{resultPixels:o,resultMask:l}},i=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:this.noDataValue}}},r=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,i={},r=0;r<t;r++){var n=e.pixels.blocks[r];0===n.encoding?i.float32=!0:1===n.encoding?i[n.bitsPerPixel]=!0:i[0]=!0}return Object.keys(i)},n=function(e,t,i){var r={},n=new Uint8Array(e,t,10);if(r.fileIdentifierString=String.fromCharCode.apply(null,n),"CntZImage"!=r.fileIdentifierString.trim())throw"Unexpected file identifier string: "+r.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(r.fileVersion=a.getInt32(0,!0),r.imageType=a.getInt32(4,!0),r.height=a.getUint32(8,!0),r.width=a.getUint32(12,!0),r.maxZError=a.getFloat64(16,!0),t+=24,!i)if(a=new DataView(e,t,16),r.mask={},r.mask.numBlocksY=a.getUint32(0,!0),r.mask.numBlocksX=a.getUint32(4,!0),r.mask.numBytes=a.getUint32(8,!0),r.mask.maxValue=a.getFloat32(12,!0),t+=16,r.mask.numBytes>0){var o=new Uint8Array(Math.ceil(r.width*r.height/8)),l=(a=new DataView(e,t,r.mask.numBytes)).getInt16(0,!0),s=2,u=0;do{if(l>0)for(;l--;)o[u++]=a.getUint8(s++);else{var c=a.getUint8(s++);for(l=-l;l--;)o[u++]=c}l=a.getInt16(s,!0),s+=2}while(s<r.mask.numBytes);if(-32768!==l||u<o.length)throw"Unexpected end of mask RLE encoding";r.mask.bitset=o,t+=r.mask.numBytes}else if(0==(r.mask.numBytes|r.mask.numBlocksY|r.mask.maxValue)){o=new Uint8Array(Math.ceil(r.width*r.height/8));r.mask.bitset=o}a=new DataView(e,t,16),r.pixels={},r.pixels.numBlocksY=a.getUint32(0,!0),r.pixels.numBlocksX=a.getUint32(4,!0),r.pixels.numBytes=a.getUint32(8,!0),r.pixels.maxValue=a.getFloat32(12,!0),t+=16;var p=r.pixels.numBlocksX,h=r.pixels.numBlocksY,d=p+(r.width%p>0?1:0),f=h+(r.height%h>0?1:0);r.pixels.blocks=new Array(d*f);for(var A=1e9,v=0,y=0;y<f;y++)for(var g=0;g<d;g++){var m=0,w=e.byteLength-t;a=new DataView(e,t,Math.min(10,w));var x={};r.pixels.blocks[v++]=x;var T=a.getUint8(0);if(m++,x.encoding=63&T,x.encoding>3)throw"Invalid block encoding ("+x.encoding+")";if(2!==x.encoding){if(0!==T&&2!==T){if(T>>=6,x.offsetType=T,2===T)x.offset=a.getInt8(1),m++;else if(1===T)x.offset=a.getInt16(1,!0),m+=2;else{if(0!==T)throw"Invalid block offset type";x.offset=a.getFloat32(1,!0),m+=4}if(A=Math.min(x.offset,A),1===x.encoding)if(T=a.getUint8(m),m++,x.bitsPerPixel=63&T,T>>=6,x.numValidPixelsType=T,2===T)x.numValidPixels=a.getUint8(m),m++;else if(1===T)x.numValidPixels=a.getUint16(m,!0),m+=2;else{if(0!==T)throw"Invalid valid pixel count type";x.numValidPixels=a.getUint32(m,!0),m+=4}}var b;if(t+=m,3!=x.encoding)if(0===x.encoding){var E=(r.pixels.numBytes-1)/4;if(E!==Math.floor(E))throw"uncompressed block has invalid length";b=new ArrayBuffer(4*E),new Uint8Array(b).set(new Uint8Array(e,t,4*E));for(var I=new Float32Array(b),M=0;M<I.length;M++)A=Math.min(A,I[M]);x.rawData=I,t+=4*E}else if(1===x.encoding){var S=Math.ceil(x.numValidPixels*x.bitsPerPixel/8),L=Math.ceil(S/4);b=new ArrayBuffer(4*L),new Uint8Array(b).set(new Uint8Array(e,t,S)),x.stuffedData=new Uint32Array(b),t+=S}}else t++,A=Math.min(A,0)}return r.pixels.minValue=A,r.eofOffset=t,r},a=function(e,t,i,r,n,a,o){var l,s,u,c=(1<<t)-1,p=0,h=0,d=Math.ceil((o-r)/n),f=4*e.length-Math.ceil(t*i/8);for(e[e.length-1]<<=8*f,l=0;l<i;l++){if(0===h&&(u=e[p++],h=32),h>=t)s=u>>>h-t&c,h-=t;else{var A=t-h;s=(u&c)<<A&c,s+=(u=e[p++])>>>(h=32-A)}a[l]=s<d?r+s*n:o}return a};return e}.apply(null,[]))||(e.exports=r)},804:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(342),i(619),i(392)],void 0===(n=function(e,t,i,r,n){function a(e,t,i){if(!o(e)||!o(t))return 4;if(null==e||null==t)return 0;if(!i&&e.heightUnit!==t.heightUnit)return 1;if(e.heightModel!==t.heightModel)return 2;switch(e.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return e.vertCRS===t.vertCRS?0:3;default:return 4}}function o(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function l(e){return null!=e.heightModelInfo||null!=e.spatialReference||!u(e)}function s(e){var t=e.url&&n.parse(e.url);return null==(e.spatialReference&&e.spatialReference.vcsWkid)&&t&&"ImageServer"===t.serverType||!e.heightModelInfo?u(e)?r.deriveUnitFromSR(h,e.spatialReference):null:e.heightModelInfo}function u(e){return c(e,"capabilities")?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):p(e)}function c(e,t){return e.hasOwnProperty(t)}function p(e){switch(e.type){case"elevation":case"integrated-mesh":case"point-cloud":case"scene":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"feature":case"geo-rss":case"graphics":case"group":case"imagery":case"kml":case"map-image":case"map-notes":case"open-street-map":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"web-tile":case"wms":case"wmts":return!1;default:e.type}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.validateWebSceneError=function(e,t){if(!e)return null;if(!o(e))return new i("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:e});var n=e.heightUnit,a=r.deriveUnitFromSR(e,t).heightUnit;return n!==a?new i("webscene:incompatible-height-unit","The vertical units of the scene ("+n+") must match the horizontal units of the scene ("+a+")",{verticalUnit:n,horizontalUnit:a}):null},t.rejectLayerError=function(e,t,n){var o=s(e),u=t,c=a(o,u,n),p=null;if(o){var h=r.deriveUnitFromSR(o,e.spatialReference).heightUnit;n||h===o.heightUnit||(p=new i("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+h+")",{horizontalUnit:h}))}if(!l(e)||4===c||p)return new i("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:o,error:p});switch(p=null,c){case 1:var d=o.heightUnit||"unknown",f=u.heightUnit||"unknown";p=new i("layerview:incompatible-height-unit","The vertical units of the layer ("+d+") must match the vertical units of the scene ("+f+")",{layerUnit:d,sceneUnit:f});break;case 2:var A=o.heightModel||"unknown",v=u.heightModel||"unknown";p=new i("layerview:incompatible-height-model","The height model of the layer ("+A+") must match the height model of the scene ("+v+")",{layerHeightModel:A,sceneHeightModel:v});break;case 3:var y=o.vertCRS||"unknown",g=u.vertCRS||"unknown";p=new i("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+y+") must match the vertical datum of the scene ("+g+")",{layerDatum:y,sceneDatum:g})}return p?new i("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:o,sceneHeightModelInfo:u,error:p}):null},t.deriveHeightModelInfoFromLayer=s,t.mayHaveHeightModelInfo=function(e){return null!=e.layers||p(e)||c(e,"capabilities")||c(e,"heightModelInfo")};var h=new r({heightModel:"gravity-related-height"})}.apply(null,r))||(e.exports=n)},812:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(692),i(666),i(715),i(783),i(957),i(958)],void 0===(n=function(e,t,i,r,n,a,o,l){function s(e){return e&&"esri.views.3d.layers.TileLayerView3D"===e.declaredClass}function u(e){return e&&"esri.views.3d.layers.VectorTileLayerView3D"===e.declaredClass}function c(e){return e&&"esri.views.3d.layers.WMTSLayerView3D"===e.declaredClass}function p(e){return e&&"esri.views.3d.layers.ElevationLayerView3D"===e.declaredClass}function h(){for(var e in A={},a)a[e].baseMapLayers.forEach(function(e){A[e.url]=19});A["//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"]=20}function d(e,t,i,r){return f["local"===r||"planar"===r?"planar":"spherical"].checkIfTileInfoSupportedForViewSR(e,t,i)}Object.defineProperty(t,"__esModule",{value:!0});var f={planar:o,spherical:l};t.weakAssert=function(e,t){e||console.warn("Terrain: "+t)},t.autoUpdateSkirtsVisibility=function(e,t,i){var r,n=f[e.manifold],a=n.isInsideExtent(e,t);if(a)r=e.getElevation(t);else{var o=e.getElevationBounds();r=.5*(o[0]+o[1])}var l=t[2]-r,s=.9*Math.abs(l)<i?0:l<0?-1:1;if(!a)if(n.isInsideExtent(e,t,e.hideSkirtsDistanceFromExtentMargin)){var u=n.tiltToExtentEdge(e,t);u>e.hideSkirtsMinimumCameraTilt&&u<e.hideSkirtsMaximumCameraTilt&&(s=0)}else s=0;e.skirtScale=s},t.isTiledLayer=function(e){return e&&"base-tile"===e.type||"tile"===e.type||"elevation"===e.type||"base-elevation"===e.type||"open-street-map"===e.type||"web-tile"===e.type||"wmts"===e.type||"vector-tile"===e.type},t.isVectorTileLayer=function(e){return e&&e.isInstanceOf(n)},t.isTileLayerView=s,t.isVectorTileLayerView=u,t.isWMTSLayerView=c,t.isElevationLayerView=p,t.isTiledLayerView=function(e){return e&&(s(e)||p(e)||u(e)||c(e))},t.useFetchTileForLayer=function(e){return e.fetchTile&&!(e.fetchTile===r.prototype.fetchTile||e.fetchTile===i.prototype.fetchTile)};var A=null;t.getKnownTiledServiceLevelCap=function(e){A||h();var t=e&&e.replace(/https?:/,"");return t in A?A[t]:1/0},t.prepareKnownTiledServiceLevelCaps=h,t.checkIfTileInfoSupportedForView=d,t.getTiledLayerInfo=function(e,t,i){var r,n;if("wmts"===e.type){var a=e.activeLayer;if(a){var o=a.tileMatrixSet;if(o)r=o.tileInfo,n=o.fullExtent;else{var l=a.tileMatrixSets;if(l){var s=l.find(function(e){return null==d(e.tileInfo,e.fullExtent,t,i)});if(s)return{tileInfo:s.tileInfo,fullExtent:s.fullExtent}}}}}else r="vector-tile"===e.type?e.compatibleTileInfo256:e.tileInfo,n=e.fullExtent;return r&&n&&null==d(r,n,t,i)?{tileInfo:r,fullExtent:n}:{tileInfo:null,fullExtent:null}}}.apply(null,r))||(e.exports=n)},832:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(367),i(670)],void 0===(n=function(e,t,i,r){Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MAP=0]="MAP",e[e.ELEVATION=1]="ELEVATION",e[e.COUNT=2]="COUNT"}(t.LayerClass||(t.LayerClass={})),function(e){e[e.NONE=0]="NONE",e[e.SPLIT=1]="SPLIT",e[e.VSPLITMERGE=2]="VSPLITMERGE",e[e.MERGE=4]="MERGE",e[e.DECODE_ELEVATION=8]="DECODE_ELEVATION",e[e.UPDATE_GEOMETRY=16]="UPDATE_GEOMETRY",e[e.UPDATE_TEXTURE=32]="UPDATE_TEXTURE"}(t.TileUpdateTypes||(t.TileUpdateTypes={})),t.TILE_LOADING_DEBUGLOG=!1,t.MAX_ROOT_TILES=64,t.MAX_TILE_TESSELATION=512,t.ELEVATION_NODATA_VALUE=3.40282347e37,t.noDataValueOpt={noDataValue:t.ELEVATION_NODATA_VALUE},t.ELEVATION_DESIRED_RESOLUTION_LEVEL=4,t.TILEMAP_SIZE_EXP=5,t.TILEMAP_SIZE=1<<t.TILEMAP_SIZE_EXP,t.WEBMERCATOR_WORLD_EXTENT=i.create(),r.WebMercatorAuxiliarySphere.getExtent(0,0,0,t.WEBMERCATOR_WORLD_EXTENT),t.GEOGRAPHIC_WORLD_EXTENT=i.create([-180,-90,180,90]),t.TOO_MANY_ROOT_TILES_AFTER_CHANGE_ERROR="Cannot extend surface to encompass all layers because it would result in too many root tiles.",t.TOO_MANY_ROOT_TILES_FOR_LAYER_ERROR="Surface extent is too large for tile resolution at level 0.",t.DEFAULT_TILE_BACKGROUND="data:image/png;base64,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"}.apply(null,r))||(e.exports=n)},901:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(347),i(336),i(340),i(374),i(337),i(1004),i(1270),i(812),i(683)],void 0===(n=function(e,t,i,r,n,a,o,l,s,u,c){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return"jpg"===this.get("layer.tileInfo.format")},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this._getTileInfoSupportError(this.tileInfo,this.layer.fullExtent);if(t)this.addResolvingPromise(n.reject(t));else{var i=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var t=e.view.basemapTerrain.tilingScheme;s.throwIfError(e._getTileInfoCompatibilityError(e.tileInfo,t))});this.addResolvingPromise(i)}"version"in this.layer&&this.addResolvingPromise(s.checkArcGISServiceVersionCompatibility(this.layer)),this._updateMinMaxDataLevel(),this.maxDataLevel=Math.min(this.maxDataLevel,u.getKnownTiledServiceLevelCap(this.layer.url))},t.prototype.getPopupData=function(e){var t=this.layer;if("tile"!==t.type)return[];var i=this.view.scale;return t.allSublayers.toArray().filter(function(e){var t=0===e.minScale||i<=e.minScale,r=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&t&&r}).map(function(t){var i=t.createQuery();return i.geometry=e,i.outFields=t.popupTemplate.requiredFields,t.queryFeatures(i).then(function(e){return e.features})})},t.prototype.doRefresh=function(){this.suspended||this.emit("data-changed")},r([o.property({readOnly:!0,dependsOn:["layer.tileInfo.format"]})],t.prototype,"imageFormatIsOpaque",null),r([o.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),r([o.property()],t.prototype,"layer",void 0),r([o.property({aliasOf:"layer.tileInfo"})],t.prototype,"tileInfo",void 0),r([o.subclass("esri.views.3d.layers.TileLayerView3D")],t)}(o.declared(l,c))}.apply(null,r))||(e.exports=n)},957:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(342),i(367),i(344),i(832),i(670)],void 0===(n=function(e,t,i,r,n,a,o){function l(e,t,i,r){n.vec3d.set(i,u),u[r]=t[r];var a,o=n.vec3d.subtract(u,t),l=n.vec3d.subtract(e,t,c),s=n.vec3d.dot(l,o),p=n.vec3d.dot(o,o);a=s<=0?t:p<=s?i:n.vec3d.add(t,n.vec3d.scale(o,s/p),u);var h=n.vec3d.subtract(e,a,u);return Math.PI/2-Math.atan(h[2]/Math.sqrt(h[0]*h[0]+h[1]*h[1]))}function s(e,t){var n=e.lods,l=n[0].resolution*Math.pow(2,n[0].level),s=[l*e.size[0],l*e.size[1]],u=[e.origin.x,e.origin.y],c=r.fromExtent(t),p=r.create();o.computeRowColExtent(c,s,u,p);var h=(p[2]-p[0])*(p[3]-p[1]);if(h>a.MAX_ROOT_TILES){var d=n[0].scale*Math.pow(2,n[0].level),f=Math.max((c[3]-c[1])/e.size[1],(c[2]-c[0])/e.size[0])*d/l,A=Math.floor(Math.log(f)/Math.log(10));return f=Math.ceil(f/Math.pow(10,A))*Math.pow(10,A),new i("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(d).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+f.toLocaleString()+".",{level0Scale:d,suggestedLevel0Scale:f,requiredNumRootTiles:h,allowedNumRootTiles:a.MAX_ROOT_TILES})}return null}Object.defineProperty(t,"__esModule",{value:!0});var u=n.vec3d.create(),c=n.vec3d.create(),p=n.vec3d.create(),h=n.vec3d.create();t.isInsideExtent=function(e,t,i){void 0===i&&(i=0);var n=e.extent;if(0===i)return r.containsPoint(n,t);var a=Math.min(n[2]-n[0],n[3]-n[1]);return r.containsPointWithMargin(n,t,i*a)},t.tiltOnEdge=l,t.tiltToExtentEdge=function(e,t){var i=e.getElevationBounds(),r=e.extent,n=.5*(i[0]+i[1]);p[0]=r[0],p[1]=r[1],p[2]=n,h[0]=r[2],h[1]=r[3],h[2]=n;var a=1/0,o=1/0;return t[0]<p[0]?a=l(t,p,h,0):t[0]>h[0]&&(a=l(t,h,p,0)),t[1]<p[1]?o=l(t,p,h,1):t[1]>h[1]&&(o=l(t,h,p,1)),Math.min(a,o)},t.checkIfTileInfoSupportedForViewSR=function(e,t,r){if(e.spatialReference.isGeographic)return new i("tilingscheme:local-gcs-not-supported","Geographic coordinate systems are not supported in local scenes");var n=o.checkUnsupported(e);return n||s(e,t)||(r&&!e.spatialReference.equals(r)?new i("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null)}}.apply(null,r))||(e.exports=n)},958:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(342),i(670)],void 0===(n=function(e,t,i,r){Object.defineProperty(t,"__esModule",{value:!0}),t.isInsideExtent=function(e,t,i){return void 0===i&&(i=0),!0},t.tiltToExtentEdge=function(e,t){return 0},t.checkIfTileInfoSupportedForViewSR=function(e,t,n){var a=e.lods.length-1;if(e.spatialReference.isWebMercator){if(!r.makeWebMercatorAuxiliarySphere(a).compatibleWith(e))return new i("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!e.spatialReference.isWGS84)return new i("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!r.makeWGS84WithTileSize(e.size[1],a).compatibleWith(e))return new i("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme")}if(n&&!e.spatialReference.equals(n))return new i("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}}.apply(null,r))||(e.exports=n)}}]);