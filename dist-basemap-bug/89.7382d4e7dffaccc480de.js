(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/urlUtils":405,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/query":626,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfQueryUtils":627,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/tasks/operations/pbfFeatureServiceParser":628,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/geometry/support/quantizationUtils":773,"esri/core/HandleOwner":981,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/HandleOwner":981,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/core/throttle":1302,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/features/controllers/BaseController":1436,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/features/controllers/StreamController":1659,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/views/2d/layers/features/controllers/support/DispatchQueue":2407})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1302:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t,r,n){var i=null,o=1e3;"number"==typeof t?(o=t,n=r):(i=t,o=r);var s,a=0,u=function(){a=0,e.apply(n,s)},c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i&&i.apply(n,e),s=e,o?a||(a=setTimeout(u,o)):u()};return c.remove=function(){a&&(clearTimeout(a),a=0)},c.forceUpdate=function(){a&&(clearTimeout(a),u())},c.hasPendingUpdates=function(){return!!a},c}Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=r,t.default=r}.apply(null,n))||(e.exports=i)},1436:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(346),r(981),r(337)],void 0===(i=function(e,t,r,n,i,o,s){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.processor=null,t.remoteClient=null,t.service=null,t.tileStore=null,t}return r(t,e),t.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])},t.prototype.destroy=function(){},Object.defineProperty(t.prototype,"spatialReference",{get:function(){var e=this.get("tileStore.spatialReference");return e&&e.toJSON()||null},enumerable:!0,configurable:!0}),t.prototype.enableEvent=function(e){},n([s.property()],t.prototype,"processor",void 0),n([s.property({constructOnly:!0})],t.prototype,"remoteClient",void 0),n([s.property({constructOnly:!0})],t.prototype,"service",void 0),n([s.property({dependsOn:["tileStore.spatialReference"]})],t.prototype,"spatialReference",null),n([s.property({constructOnly:!0})],t.prototype,"tileInfo",void 0),n([s.property({constructOnly:!0})],t.prototype,"tileStore",void 0),n([s.subclass()],t)}(s.declared(i,o));t.default=a}.apply(null,n))||(e.exports=i)},1659:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(345),r(814),r(724),r(365),r(351),r(342),r(343),r(340),r(1302),r(337),r(1054),r(1383),r(1433),r(626),r(418),r(1436),r(2407)],void 0===(i=function(e,t,r,n,i,o,s,a,u,c,l,p,d,f,y,h,g,m,v,_,b){function x(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}Object.defineProperty(t,"__esModule",{value:!0});var F=l.getLogger("esri.views.2d.layers.features.controllers.StreamController"),S=5e3,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.errorString=null,t._started=!1,t._idCounter=0,t._tileDispatchMap=new s.default,t._updateIntervalId=0,t._reconnectWebSocketT=d.throttle(t._reconnectWebSocket,S,t),t._featureIds=[],t}return r(t,e),t.prototype.initialize=function(){var e=this;this.handles.add(this.watch("processor",this._switchProcessor.bind(this))),["connectionStatus","errorString"].forEach(function(t){e.watch(t,function(r){return e.remoteClient.invoke("setProperty",{propertyName:t,value:r})})}),this._updateIntervalId=setInterval(function(){return e._checkForUpdates()},64)},t.prototype.destroy=function(){clearInterval(this._updateIntervalId),this._destroyWebSocket(),this._tileDispatchMap.forEach(function(e){return e.destroy()}),this.queryEngine&&(this.queryEngine.destroy(),this._set("queryEngine",null)),this._tempQueryEngine&&this._tempQueryEngine.destroy()},Object.defineProperty(t.prototype,"updating",{get:function(){return!this._started||this._tempQueryEngine&&!!this._tempQueryEngine.spatialIndex.numFeatures||this._anyUpdatesQueued()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectionStatus",{get:function(){if(!this._websocket)return"disconnected";switch(this._websocket.readyState){case 0:case 1:return"connected";case 2:case 3:return"disconnected"}},enumerable:!0,configurable:!0}),t.prototype.onEdits=function(e){},t.prototype.redraw=function(){},t.prototype.refresh=function(){},t.prototype.setViewState=function(e){},t.prototype.queryFeatures=function(e){return this.queryEngine.executeQuery(v.fromJSON(e))},t.prototype.queryFeatureCount=function(e){return this.queryEngine.executeQueryForCount(v.fromJSON(e))},t.prototype.queryObjectIds=function(e){return this.queryEngine.executeQueryForIds(v.fromJSON(e))},t.prototype.queryExtent=function(e){return this.queryEngine.executeQueryForExtent(v.fromJSON(e))},t.prototype.queryLatestObservations=function(e){return this.queryEngine.executeQueryForLatestObservations(v.fromJSON(e))},t.prototype.onTileUpdate=function(e){var t=this,r=e.added,n=e.removed;this._started&&(n.forEach(function(e){return t._handleTileRemove(e)}),r.forEach(function(e){return t._handleTileAdd(e)}))},t.prototype.enableEvent=function(e){"data-received"===e.name&&(this._shouldPushDataReceived=e.value)},t.prototype._start=function(){var e=this;this._started||this._queryBuddies().then(function(){e._startWebSocket(),e.tileStore.tiles.forEach(function(t){return e._handleTileAdd(t)}),e._started=!0,e._updateActiveTiles(e.queryEngine)})},t.prototype._getService=function(){var e=i({},this.service.content,{f:"json"});return u(this.service.source,{query:e,responseType:"json"}).then(function(e){return e.data})},t.prototype._startWebSocket=function(){var e=this;this._getService().then(function(t){return e._createWebSocket(t)}).then(function(t){return e._setFilter(t)}).catch(function(e){return F.error(new c("stream-socket","Encountered an error while creating listening stream",e))})},t.prototype._destroyWebSocket=function(){this._websocket&&(this._websocket.onmessage=null,this._websocket.onerror=null,this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.close(),this.notifyChange("connectionStatus"))},t.prototype._createWebSocket=function(e){var t=this;return p.create(function(r){for(var n=e.streamUrls.filter(function(e){return"ws"===e.transport})[0],i=n.token,o=null,s=null,a=0,u=n.urls;a<u.length;a++){var c=u[a];-1!==c.indexOf("wss")?o=c:s=c}var l=(o||s)+"/subscribe?token="+i+"&outSR="+t.spatialReference.wkid,p=new WebSocket(l);p.onopen=function(){t.notifyChange("connectionStatus"),r(p)},p.onmessage=t._handleWebSocketMessage.bind(t),p.onclose=t._handleWebSocketClose.bind(t),t._destroyWebSocket(),t._websocket=p})},t.prototype._setFilter=function(e){var t=this,r={},n=this.processor.queryInfo.outFields;return this.configuration.filter.geometry&&(r.geometry=JSON.stringify(this.configuration.filter.geometry)),this.configuration.filter.where&&(r.where=this.configuration.filter.where),n.length/this.service.fields.length>=.75&&(r.outFields=n.join(",")),r.geometry||r.where||r.outFields||p.resolve(),p.create(function(n,i){var o=e.onmessage;e.onmessage=function(r){var s=JSON.parse(r.data);s.filter&&(e.onmessage=o,s.error?(t.set("errorString","Could not set filter - "+s.error),i(new c("stream-socket-filter",t.errorString,{activeFilter:s.filter}))):n())},e.send(JSON.stringify({filter:r}))})},t.prototype._reconnectWebSocket=function(e){this.set("errorString","Lost websocket connection - "+e+", attempting to reconnect"),F.error(new c("stream-socket",this.errorString)),this._startWebSocket()},t.prototype._handleWebSocketClose=function(e){var t=e.code;if(this.notifyChange("connectionStatus"),1001===t||t>=4e3){var r=this._getErrorMessage(t);this.set("errorString","Encountered a service error "+t+" - "+r+", terminating websocket connection"),F.error(new c("stream-socket",this.errorString))}else{if(1e3===t)return;this._reconnectWebSocketT(t)}},t.prototype._getErrorMessage=function(e){switch(e){case 1001:return"Service is going away";case 4400:return"Invalid URL parameters. Check filter properties.";case 4401:case 4403:return"Not authorized";case 4404:return"Service not found";default:return"Encountered error code "+e}},t.prototype._handleWebSocketMessage=function(e){try{var t=JSON.parse(e.data);if(this._shouldPushDataReceived&&this.remoteClient.invoke("emitEvent",{name:"data-received",event:t}),this._normalizeFeatureId(t),this._enrichFeature(t),!t.geometry&&!t.centroid)return void F.error(new c("stream-socket","Found malformed feature"));var r=y.convertFromFeature(t,this.service.geometryType,!1,!1,this.service.objectIdField);this._featureIds.push(r.attributes[this.service.objectIdField]),this._tempQueryEngine.spatialIndex.add(r)}catch(e){F.error(new c("stream-socket","Encountered an error when parsing socket message",e))}},t.prototype._handleTileAdd=function(e){if(this._tileDispatchMap.has(e.id)){(t=this._tileDispatchMap.get(e.id)).up()}else{var t=new b.default;this._tileDispatchMap.set(e.id,t)}this._queryTileFeatures(e,!0,this.queryEngine)},t.prototype._handleTileRemove=function(e){this._tileDispatchMap.get(e.id).destroy(),this._tileDispatchMap.delete(e.id)},t.prototype._checkForUpdates=function(){if(this._started){var e=this._getFeaturesToAdd(),t=this._getFeaturesToRemove(),r=e.spatialIndex.getAllFeatures();t.spatialIndex.addMany(r),this.processor.supportsTileUpdates?(this._updateActiveTiles(e,t),e.spatialIndex.transferAll(this.queryEngine.spatialIndex)):(e.spatialIndex.transferAll(this.queryEngine.spatialIndex),this._repushActiveTiles(e,t)),t.destroy()}},t.prototype._anyUpdatesQueued=function(){return o.from(this._tileDispatchMap).some(function(e){return e[0],e[1].hasAction()})},t.prototype._updateActiveTiles=function(e,t){for(var r=0,n=this.tileStore.tiles;r<n.length;r++){var i=n[r];this._queryTileFeatures(i,!1,e,t)}},t.prototype._repushActiveTiles=function(e,t){for(var r=0,n=this.tileStore.tiles;r<n.length;r++){var i=n[r];this._queryTileFeatures(i,!0,this.queryEngine)}},t.prototype._getFeaturesToAdd=function(){return this._tempQueryEngine},t.prototype._getFeaturesToRemove=function(){var e=this.configuration.purgeOptions,t=e.displayCount,r=e.age,n=this._createQueryEngine();return this._purgeByDisplayCount(t,n),this._purgeByAge(r,n),n},t.prototype._purgeByDisplayCount=function(e,t){if(null!=e){var r=this.queryEngine.spatialIndex.numFeatures;if(r>e){var n=r-e,i=this._featureIds.splice(0,n);this.queryEngine.spatialIndex.transferIds(t.spatialIndex,i)}}},t.prototype._purgeByAge=function(e,t){if(null==e)return p.resolve();var r=60*e*1e3,n=Date.now()-r,i=this.service.timeInfo.startTimeField;this.queryEngine.spatialIndex.transferIf(t.spatialIndex,function(e){return e.attributes[i]<n})},t.prototype._queryTileFeatures=function(e,t,r,n){var i=this,o=this.processor.queryInfo,s={returnCentroid:o.returnCentroid,returnGeometry:o.returnGeometry,pixelBuffer:o.pixelBuffer},a=this._tileDispatchMap.get(e.id),u=r&&r.executeTileQuery(e,s).features,c=n&&n.executeTileQueryForIds(e,s);a.enqueue(function(){return i.processor.onTileData(e,{addOrUpdate:u,remove:c,clear:t})})},t.prototype._queryBuddies=function(){var e=this,t=this.service.buddyLayers,r=t.relatedFeatures,n=t.keepLatestArchive,i=this._queryBuddy(r),o=this._queryBuddy(n);return p.all([i,o]).then(function(t){var r=t[0],n=t[1];return e._addBuddyFeatures(r,n)})},t.prototype._queryBuddy=function(e){if(!e)return p.resolve();var t=this._createQuery(this.processor.queryInfo);return m.executeQuery(e.source,t).then(function(e){return e.data})},t.prototype._addBuddyFeatures=function(e,t){e&&this._setEnrichmentData(e),t&&this._addFeatures(t)},t.prototype._setEnrichmentData=function(e){for(var t=e.features,r=new s.default,n=this.service.buddyLayers.relatedFeatures.joinField,i=0,o=t;i<o.length;i++){var a=o[i];n===this.service.objectIdField&&"string"==typeof n&&(a.attributes[n]=x(a.attributes[n])),r.set(a.attributes[n],a)}this._enrichmentData=r},t.prototype._enrichFeature=function(e){if(!this._enrichmentData)return e;var t=this.service.buddyLayers.relatedFeatures.joinField,r=e.attributes[t];if(this._enrichmentData.has(r)){var n=this._enrichmentData.get(r),i=n.attributes,o=n.geometry;for(var s in i)e.attributes[s]=i[s];o&&(e.geometry=o)}return e},t.prototype._normalizeFeatureId=function(e){var t;t="__OBJECTID"===this.service.objectIdField?this._idCounter++:"string"==typeof e.attributes[this.service.objectIdField]?x(e.attributes[this.service.objectIdField]):e.attributes[this.service.objectIdField],e.attributes[this.service.objectIdField]=t},t.prototype._addFeatures=function(e){e.objectIdFieldName=this.service.objectIdField;for(var t=0,r=e.features;t<r.length;t++){var n=r[t];this._normalizeFeatureId(n),this._enrichFeature(n)}var i=y.convertFromFeatureSet(e).features;this.queryEngine.spatialIndex.addMany(i)},t.prototype._createQuery=function(e){var t=new v,r=e.historicMoment,n=e.outFields;return t.historicMoment=null!=r?new Date(r):null,t.outFields=n.length/this.service.fields.length>=.75?["*"]:n,t.returnExceededLimitFeatures=!0,t.returnGeometry=!0,t.gdbVersion=e.gdbVersion,t.returnCentroid=e.returnCentroid,t.orderByFields=e.orderByFields,t.outSpatialReference=a.SpatialReference.fromJSON(this.spatialReference),t.where=this.configuration.filter.where||"1=1",this.configuration.filter.geometry&&(t.geometry=a.Extent.fromJSON(this.configuration.filter.geometry)),t},t.prototype._createQueryEngine=function(){var e=this.processor.queryInfo,t=e.definitionExpression,r=e.gdbVersion,n=e.historicMoment;return new g.default({definitionExpression:t,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference,cacheSpatialQueries:!0,gdbVersion:r,historicMoment:null!=n&&new Date(n),spatialIndex:new h.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1}),timeInfo:this.service.timeInfo})},t.prototype._resetTempStore=function(){this._tempQueryEngine&&this._tempQueryEngine.destroy(),this._tempQueryEngine=this._createQueryEngine()},t.prototype._switchProcessor=function(e,t){this.queryEngine&&this.queryEngine.destroy(),this._set("queryEngine",this._createQueryEngine()),this._resetTempStore(),this._start(),this.notifyChange("updating")},n([f.property()],t.prototype,"service",void 0),n([f.property()],t.prototype,"configuration",void 0),n([f.property({readOnly:!0})],t.prototype,"queryEngine",void 0),n([f.property()],t.prototype,"updating",null),n([f.property()],t.prototype,"connectionStatus",null),n([f.property()],t.prototype,"errorString",void 0),n([f.subclass()],t)}(f.declared(_.default));t.default=I}.apply(null,n))||(e.exports=i)},2407:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(340)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._action=null,this._queue=[],this._refs=1}return e.prototype.up=function(){this._refs++},e.prototype.down=function(){return 0==--this._refs},e.prototype.destroy=function(){this._queue.length=0,this._action&&(this._action.cancel(),this._action=null)},e.prototype.enqueue=function(e){this._action?this._queue.push(e):this._setAction(e)},e.prototype.flush=function(){var e=this._action;if(!e)return r.resolve();var t=this._queue.reduce(function(e,t){return e.then(t)},e);return this._action=t.then(this._handleNext.bind(this)),this._queue.length=0,t},e.prototype.hasAction=function(){return!!this._action},e.prototype._setAction=function(e){this._action=e().then(this._handleNext.bind(this))},e.prototype._handleNext=function(){this._queue.length?this._setAction(this._queue.shift()):this._action=null},e}();t.default=n}.apply(null,n))||(e.exports=i)},405:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=function e(t){var r={};for(var n in t)if("declaredClass"!==n){var i=t[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){r[n]=[];for(var o=0;o<i.length;o++)r[n][o]=e(i[o])}else"object"==typeof i?i.toJSON&&(r[n]=JSON.stringify(i)):r[n]=i}return r}}.apply(null,n))||(e.exports=i)},626:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(345),r(351),r(350),r(420),r(625),r(627),r(405)],void 0===(i=function(e,t,r,n,i,o,s,a,u){function c(e,t){var r=e.geometry,n=e.toJSON(),i=n;if(r&&(i.geometry=JSON.stringify(r),i.geometryType=o.getJsonType(r),i.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),n.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(i.objectIds=n.objectIds.join(",")),n.orderByFields&&(i.orderByFields=n.orderByFields.join(",")),!n.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete i.outFields:-1!==n.outFields.indexOf("*")?i.outFields="*":i.outFields=n.outFields.join(","),n.outSR?i.outSR=n.outSR.wkid||JSON.stringify(n.outSR):r&&(n.returnGeometry||n.returnCentroid)&&(i.outSR=i.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(i.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(i.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(i.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.source&&(i.layer=JSON.stringify({source:n.source}),delete n.source),n.timeExtent){var s=n.timeExtent;i.time=[null!=s.startTime?s.startTime:"null",null!=s.endTime?s.endTime:"null"],delete n.timeExtent}return i}function l(e,t,o,a,l){void 0===a&&(a={});var p="string"==typeof e?i.urlToObject(e):e,d=t.geometry?[t.geometry]:[];return a.responseType="pbf"===o?"array-buffer":"json",s.normalizeCentralMeridian(d,null,a).then(function(e){var i=e&&e[0];i&&((t=t.clone()).geometry=i);var s=u.mapParameters(r({},p.query,{f:o},l,c(t,l)));return n(p.path+"/query",r({},a,{query:s}))})}Object.defineProperty(t,"__esModule",{value:!0});var p="Layer does not support extent calculation.";t.queryToQueryStringParameters=c,t.executeQuery=function(e,t,r){return l(e,t,"json",r)},t.executeQueryPBF=function(e,t,r){return l(e,t,"pbf",r).then(function(e){var t=a.parsePBFFeatureQuery(e.data),r=e;return r.data=t,r})},t.executeQueryForIds=function(e,t,r){return l(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return l(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return l(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw new Error(p);if(t.hasOwnProperty("count"))throw new Error(p);return e})}}.apply(null,n))||(e.exports=i)},627:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(342),r(343),r(427),r(628)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var s=n.getLogger("esri.tasks.operations.pbfQueryUtils");t.parsePBFFeatureQuery=function(e){try{var t=o.parseFeatureQuery(e).queryResult.featureResult;if(t&&t.features&&t.features.length&&t.objectIdFieldName)for(var n=t.objectIdFieldName,a=0,u=t.features;a<u.length;a++){var c=u[a];c.attributes&&(c.objectId=c.attributes[n])}return t}catch(e){var l=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e});return s.error(l),new i.default}}}.apply(null,n))||(e.exports=i)},628:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(594),r(607),r(427),r(597)],void 0===(i=function(e,t,r,n,i,o){function s(e){return e>=F.length?null:F[e]}function a(e){return e>=S.length?null:S[e]}function u(e){return e>=w.length?null:w[e]}function c(e){return e>=I.length?null:I[e]}function l(e){for(var t=new o.default,r=t.coords;e.next();)switch(e.tag()){case 3:for(var n=e.getUInt32(),i=e.pos()+n,s=0;e.pos()<i;)r[s++]=e.getSInt64();break;case 1:case 2:default:e.skip()}return t}function p(e){for(var t=new o.default,r=t.coords,n=t.lengths;e.next();)switch(e.tag()){case 2:for(var i=e.getUInt32(),s=e.pos()+i;e.pos()<s;)n.push(e.getUInt32());break;case 3:for(var a=e.getUInt32(),u=(s=e.pos()+a,0);e.pos()<s;)r[u++]=e.getSInt64();break;case 1:default:e.skip()}return t}function d(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function f(e){for(var t={type:s(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=s(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=a(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function y(e,t){for(var r=new n.default,i=0;e.next();)switch(e.tag()){case 1:var o=e.getMessage(),s=t[i++].name;r.attributes[s]=d(o);break;case 2:r.geometry=p(e.getMessage());break;case 4:r.centroid=l(e.getMessage());break;default:e.skip()}return r}function h(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function g(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function m(e){for(var t={originPosition:u(0)};e.next();)switch(e.tag()){case 1:t.originPosition=u(e.getEnum());break;case 2:t.scale=h(e.getMessage());break;case 3:t.translate=g(e.getMessage());break;default:e.skip()}return t}function v(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function _(e){for(var t={};e.next();)switch(e.tag()){case 1:t.wkid=e.getUInt32();break;case 5:t.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return t}function b(e){var t=new i.default;for(t.geometryType=c(0);e.next();)switch(e.tag()){case 1:t.objectIdFieldName=e.getString();break;case 3:t.globalIdFieldName=e.getString();break;case 4:t.geohashFieldName=e.getString();break;case 5:t.geometryProperties=v(e.getMessage());break;case 7:t.geometryType=c(e.getEnum());break;case 8:t.spatialReference=_(e.getMessage());break;case 10:t.hasZ=e.getBool();break;case 11:t.hasM=e.getBool();break;case 12:var r=e.getMessage();t.transform=m(r);break;case 9:var n=e.getBool();t.exceededTransferLimit=n;break;case 13:var o=e.getMessage();t.fields.push(f(o));break;case 15:var s=e.getMessage();t.features.push(y(s,t.fields));break;case 2:case 6:default:e.skip()}return t}function x(e){for(var t={};e.next();)switch(e.tag()){case 1:t.featureResult=b(e.getMessage());break;default:e.skip()}return t}Object.defineProperty(t,"__esModule",{value:!0});var F=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],S=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],I=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],w=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e){for(var t=new r(new Uint8Array(e),new DataView(e)),n={};t.next();)switch(t.tag()){case 2:n.queryResult=x(t.getMessage());break;default:t.skip()}return n}}.apply(null,n))||(e.exports=i)},773:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e){return e&&"upperLeft"===e.originPosition}function n(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function i(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function o(e,t,r){for(var o,s,a,u,c=[],l=0;l<r.length;l++){var p=r[l];l>0?(a=n(e,p[0]),u=i(e,p[1]),a===o&&u===s||(c.push(t(p,a-o,u-s)),o=a,s=u)):(o=n(e,p[0]),s=i(e,p[1]),c.push(t(p,o,s)))}return c.length>0?c:null}function s(e,t,r,n){return o(e,r?n?b:_:n?_:v,t)}function a(e,t,r,n){for(var i=[],s=r?n?b:_:n?_:v,a=0;a<t.length;a++){var u=o(e,s,t[a]);u&&u.length>=3&&i.push(u)}return i.length?i:null}function u(e,t,r,n){for(var i=[],s=r?n?b:_:n?_:v,a=0;a<t.length;a++){var u=o(e,s,t[a]);u&&u.length>=2&&i.push(u)}return i.length?i:null}function c(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function l(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function p(e,t,r){var n=new Array(r.length);if(!r.length)return n;var i=e.scale,o=i[0],s=i[1],a=c(e,r[0][0]),u=l(e,r[0][1]);n[0]=t(r[0],a,u);for(var p=1;p<r.length;p++){var d=r[p];a+=d[0]*o,u-=d[1]*s,n[p]=t(d,a,u)}return n}function d(e,t,r){for(var n=new Array(r.length),i=0;i<r.length;i++)n[i]=p(e,t,r[i]);return n}function f(e,t,r,n){return p(e,r?n?b:_:n?_:v,t)}function y(e,t,r,n){return d(e,r?n?b:_:n?_:v,t)}function h(e,t,r,n){return d(e,r?n?b:_:n?_:v,t)}function g(e,t,r){for(var n=r[0],i=n[0],o=n[1],s=Math.min(i,t[0]),a=Math.min(o,t[1]),u=Math.max(i,t[2]),c=Math.max(o,t[3]),l=1;l<r.length;l++){var p=r[l],d=p[0],f=p[1];i+=d,o+=f,d<0&&(s=Math.min(s,i)),d>0&&(u=Math.max(u,i)),f<0?a=Math.min(a,o):f>0&&(c=Math.max(c,o))}return e[0]=s,e[1]=a,e[2]=u,e[3]=c,e}function m(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)g(e,e,t[r]);return e}Object.defineProperty(t,"__esModule",{value:!0});var v=function(e,t,r){return[t,r]},_=function(e,t,r){return[t,r,e[2]]},b=function(e,t,r){return[t,r,e[2],e[3]]};t.toTransform=function(e){return e?{originPosition:"upperLeft",scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){return e===t||null==e&&null==t||null!=e&&null!=t&&(r(e)?(n=e.translate[0],i=e.translate[1],o=e.scale[0]):(n=e.extent.xmin,i=e.extent.ymax,o=e.tolerance),r(t)?(s=t.translate[0],a=t.translate[1],u=t.scale[0]):(s=t.extent.xmin,a=t.extent.ymax,u=t.tolerance),n===s&&i===a&&o===u);var n,i,o,s,a,u},t.quantizeX=n,t.quantizeY=i,t.quantizeBounds=function(e,t,r){return t[0]=n(e,r[0]),t[3]=i(e,r[1]),t[2]=n(e,r[2]),t[1]=i(e,r[3]),t},t.quantizePoints=s,t.quantizeRings=a,t.quantizePaths=u,t.hydrateX=c,t.hydrateY=l,t.hydrateCoordsArray=p,t.hydrateCoordsArrayArray=d,t.hydrateBounds=function(e,t,r){return r?(t[0]=c(e,r[0]),t[1]=l(e,r[3]),t[2]=c(e,r[2]),t[3]=l(e,r[1]),t):[c(e,t[0]),l(e,t[3]),c(e,t[2]),l(e,t[1])]},t.hydratePoints=f,t.hydratePaths=y,t.hydrateRings=h,t.getQuantizedBoundsCoordsArray=g,t.getQuantizedBoundsCoordsArrayArray=m,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return g(t,t,e)},t.getQuantizedBoundsPaths=function(e){return m([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return m([0,0,0,0],e)},t.quantizeExtent=function(e,t,r,o,s){return t.xmin=n(e,r.xmin),t.ymin=i(e,r.ymin),t.xmax=n(e,r.xmax),t.ymax=i(e,r.ymax),t!==r&&(o&&(t.zmin=r.zmin,t.zmax=r.zmax),s&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.quantizeMultipoint=function(e,t,r,n,i){return t.points=s(e,r.points,n,i),t},t.quantizePoint=function(e,t,r,o,s){return t.x=n(e,r.x),t.y=i(e,r.y),t!==r&&(o&&(t.z=r.z),s&&(t.m=r.m)),t},t.quantizePolygon=function(e,t,r,n,i){var o=a(e,r.rings,n,i);return o?(t.rings=o,t):null},t.quantizePolyline=function(e,t,r,n,i){var o=u(e,r.paths,n,i);return o?(t.paths=o,t):null},t.hydrateExtent=function(e,t,r,n,i){return t.xmin=c(e,r.xmin),t.ymin=l(e,r.ymin),t.xmax=c(e,r.xmax),t.ymax=l(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),i&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,n,i){return t.points=f(e,r.points,n,i),t},t.hydratePoint=function(e,t,r,n,i){return t.x=c(e,r.x),t.y=l(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,n,i){return t.rings=h(e,r.rings,n,i),t},t.hydratePolyline=function(e,t,r,n,i){return t.paths=y(e,r.paths,n,i),t}}.apply(null,n))||(e.exports=i)},981:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(338),r(336),r(346),r(366),r(337)],void 0===(i=function(e,t,r,n,i,o,s){return function(e){function t(){var t=e.call(this)||this;return t.handles=new o,t}return r(t,e),t.prototype.destroy=function(){this.handles.destroy()},n([s.property({readOnly:!0})],t.prototype,"handles",void 0),n([s.subclass("esri.core.HandleOwner")],t)}(s.declared(i))}.apply(null,n))||(e.exports=i)}}]);