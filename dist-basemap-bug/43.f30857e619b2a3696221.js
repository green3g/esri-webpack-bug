(function(){(this||window).webpackJsonp.registerAbsMids({"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/ArcGISService":437,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/IntegratedMeshLayer":752,"C:/Users/roemh/web/datafi/node_modules/arcgis-js-api/layers/mixins/SceneService":1069})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[43,48,49,50,51],{1069:function(e,t,r){var s,n;s=[r.dj.c(e.i),t,r(338),r(336),r(351),r(342),r(343),r(428),r(340),r(350),r(337),r(361),r(619),r(360),r(399),r(437),r(434),r(431),r(392)],void 0===(n=function(e,t,r,s,n,o,i,a,l,p,u,d,y,c,j,h,f,v,m){var g=i.getLogger("esri.layers.mixins.SceneService");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blendMode=null,t.spatialReference=null,t.fullExtent=null,t.heightModelInfo=null,t.version={major:Number.NaN,minor:Number.NaN,versionString:""},t.copyright=null,t.sublayerTitleMode="item-title",t.title=null,t.layerId=null,t}return r(t,e),t.prototype.readSpatialReference=function(e,t){return this._readSpatialReference(t)},t.prototype._readSpatialReference=function(e){if(null!=e.spatialReference)return c.fromJSON(e.spatialReference);var t=e.store,r=t.indexCRS||t.geographicCRS,s=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=s?new c(s):null},t.prototype.readFullExtent=function(e,t){var r=t.store,s=this._readSpatialReference(t);return null==s||null==r||null==r.extent?null:new d({xmin:r.extent[0],ymin:r.extent[1],xmax:r.extent[2],ymax:r.extent[3],spatialReference:s})},t.prototype.readVersion=function(e,t){var r=t.store,s=null!=r.version?r.version.toString():"",n={major:Number.NaN,minor:Number.NaN,versionString:s},o=s.split(".");return o.length>=2&&(n.major=parseInt(o[0],10),n.minor=parseInt(o[1],10)),n},t.prototype.readTitlePortalItem=function(e,t){return"item-title"!==this.sublayerTitleMode?void 0:e},t.prototype.readTitleService=function(e,t){var r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return m.titleFromUrlAndName(this.url,t.name);var s=t.name||m.parse(this.url).title;return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(s=r+" - "+s),m.cleanTitle(s)},t.prototype.readLayerId=function(e,t){return t.id},Object.defineProperty(t.prototype,"url",{set:function(e){var t=m.sanitizeUrlWithLayerId(this,e,g);this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)},enumerable:!0,configurable:!0}),t.prototype.writeUrl=function(e,t){m.writeUrlWithLayerId(this,e,"layers",t)},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){var e=this._get("url");if(!e)return null;var t=p.urlToObject(e);return null!=this.layerId&&m.match.test(t.path)&&(t.path=t.path+"/layers/"+this.layerId),t},enumerable:!0,configurable:!0}),t.prototype.readRootNode=function(e,t){return t.store.rootNode},t.prototype._verifyRootNodeAndUpdateExtent=function(){var e=this;return this._fetchRootNode().then(function(t){return e._updateExtentFromRootNode(t)})},t.prototype._updateExtentFromRootNode=function(e){if(null!=this.fullExtent&&!this.fullExtent.hasZ&&null!=e&&Array.isArray(e.mbs)&&4===e.mbs.length){var t=e.mbs[2],r=e.mbs[3];this.fullExtent.zmin=t-r,this.fullExtent.zmax=t+r}},t.prototype._fetchRootNode=function(){if(!this.rootNode)return l.resolve();var e=p.join(this.parsedUrl.path,this.rootNode);return n(e,{query:{f:"json"},responseType:"json"}).then(function(e){return e.data}).catch(function(t){throw new o("sceneservice:root-node-missing","Root node missing.",{error:t,url:e})})},t.prototype._fetchService=function(){var e=this;return(null==this.layerId&&/SceneServer\/*$/i.test(this.url)?this._fetchFirstLayerId().then(function(t){null!=t&&(e.layerId=t)}):l.resolve()).then(function(){return e._fetchServiceLayer()})},t.prototype._fetchFirstLayerId=function(){return n(this.url,{query:{f:"json"},responseType:"json"}).then(function(e){if(e.data&&Array.isArray(e.data.layers)&&e.data.layers.length>0)return e.data.layers[0].id})},t.prototype._fetchServiceLayer=function(){var e=this;return n(this.parsedUrl.path,{query:{f:"json"},responseType:"json"}).then(function(t){t.ssl&&(e.url=e.url.replace(/^http:/i,"https:"));var r=t.data;e.read(r,{origin:"service",url:e.parsedUrl}),e._validateLayer(r)})},t.prototype._validateLayer=function(e){},s([u.shared({id:{json:{origins:{service:{read:!1},"portal-item":{read:!1}}}}})],t.prototype,"properties",void 0),s([u.property({type:c})],t.prototype,"spatialReference",void 0),s([u.reader("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),s([u.property({type:d})],t.prototype,"fullExtent",void 0),s([u.reader("fullExtent",["store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),s([u.property({readOnly:!0,type:y})],t.prototype,"heightModelInfo",void 0),s([u.property({readOnly:!0})],t.prototype,"version",void 0),s([u.reader("version",["store.version"])],t.prototype,"readVersion",null),s([u.property({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),s([u.property({type:String})],t.prototype,"sublayerTitleMode",void 0),s([u.property({type:String})],t.prototype,"title",void 0),s([u.reader("portal-item","title")],t.prototype,"readTitlePortalItem",null),s([u.reader("service","title",["name"])],t.prototype,"readTitleService",null),s([u.property({type:Number})],t.prototype,"layerId",void 0),s([u.reader("service","layerId",["id"])],t.prototype,"readLayerId",null),s([u.property()],t.prototype,"url",null),s([u.writer("url")],t.prototype,"writeUrl",null),s([u.property({dependsOn:["layerId"]})],t.prototype,"parsedUrl",null),s([u.property()],t.prototype,"store",void 0),s([u.property({type:String})],t.prototype,"rootNode",void 0),s([u.reader("rootNode",["store.rootNode"])],t.prototype,"readRootNode",null),s([u.subclass("esri.layers.mixins.SceneService")],t)}(u.declared(j,h,a,f,v))}.apply(null,s))||(e.exports=n)},437:function(e,t,r){var s,n;s=[r.dj.c(e.i),t,r(338),r(336),r(343),r(428),r(337),r(392)],void 0===(n=function(e,t,r,s,n,o,i,a){var l=n.getLogger("esri.layers.mixins.ArcGISService");return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=a.parse(this.url);if(e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(e){this._set("url",a.sanitizeUrl(e,l))},enumerable:!0,configurable:!0}),s([i.property({dependsOn:["url"]})],t.prototype,"title",null),s([i.property({type:String})],t.prototype,"url",null),s([i.subclass("esri.layers.mixins.ArcGISService")],t)}(i.declared(o))}.apply(null,s))||(e.exports=n)},731:function(e,t,r){var s={"./af":468,"./af.js":468,"./ar":469,"./ar-dz":470,"./ar-dz.js":470,"./ar-kw":471,"./ar-kw.js":471,"./ar-ly":472,"./ar-ly.js":472,"./ar-ma":473,"./ar-ma.js":473,"./ar-sa":474,"./ar-sa.js":474,"./ar-tn":475,"./ar-tn.js":475,"./ar.js":469,"./az":476,"./az.js":476,"./be":477,"./be.js":477,"./bg":478,"./bg.js":478,"./bm":479,"./bm.js":479,"./bn":480,"./bn.js":480,"./bo":481,"./bo.js":481,"./br":482,"./br.js":482,"./bs":483,"./bs.js":483,"./ca":484,"./ca.js":484,"./cs":485,"./cs.js":485,"./cv":486,"./cv.js":486,"./cy":487,"./cy.js":487,"./da":488,"./da.js":488,"./de":489,"./de-at":490,"./de-at.js":490,"./de-ch":491,"./de-ch.js":491,"./de.js":489,"./dv":492,"./dv.js":492,"./el":493,"./el.js":493,"./en-au":494,"./en-au.js":494,"./en-ca":495,"./en-ca.js":495,"./en-gb":496,"./en-gb.js":496,"./en-ie":497,"./en-ie.js":497,"./en-il":498,"./en-il.js":498,"./en-nz":499,"./en-nz.js":499,"./eo":500,"./eo.js":500,"./es":501,"./es-do":502,"./es-do.js":502,"./es-us":503,"./es-us.js":503,"./es.js":501,"./et":504,"./et.js":504,"./eu":505,"./eu.js":505,"./fa":506,"./fa.js":506,"./fi":507,"./fi.js":507,"./fo":508,"./fo.js":508,"./fr":509,"./fr-ca":510,"./fr-ca.js":510,"./fr-ch":511,"./fr-ch.js":511,"./fr.js":509,"./fy":512,"./fy.js":512,"./gd":513,"./gd.js":513,"./gl":514,"./gl.js":514,"./gom-latn":515,"./gom-latn.js":515,"./gu":516,"./gu.js":516,"./he":517,"./he.js":517,"./hi":518,"./hi.js":518,"./hr":519,"./hr.js":519,"./hu":520,"./hu.js":520,"./hy-am":521,"./hy-am.js":521,"./id":522,"./id.js":522,"./is":523,"./is.js":523,"./it":524,"./it.js":524,"./ja":525,"./ja.js":525,"./jv":526,"./jv.js":526,"./ka":527,"./ka.js":527,"./kk":528,"./kk.js":528,"./km":529,"./km.js":529,"./kn":530,"./kn.js":530,"./ko":531,"./ko.js":531,"./ky":532,"./ky.js":532,"./lb":533,"./lb.js":533,"./lo":534,"./lo.js":534,"./lt":535,"./lt.js":535,"./lv":536,"./lv.js":536,"./me":537,"./me.js":537,"./mi":538,"./mi.js":538,"./mk":539,"./mk.js":539,"./ml":540,"./ml.js":540,"./mn":541,"./mn.js":541,"./mr":542,"./mr.js":542,"./ms":543,"./ms-my":544,"./ms-my.js":544,"./ms.js":543,"./mt":545,"./mt.js":545,"./my":546,"./my.js":546,"./nb":547,"./nb.js":547,"./ne":548,"./ne.js":548,"./nl":549,"./nl-be":550,"./nl-be.js":550,"./nl.js":549,"./nn":551,"./nn.js":551,"./pa-in":552,"./pa-in.js":552,"./pl":553,"./pl.js":553,"./pt":554,"./pt-br":555,"./pt-br.js":555,"./pt.js":554,"./ro":556,"./ro.js":556,"./ru":557,"./ru.js":557,"./sd":558,"./sd.js":558,"./se":559,"./se.js":559,"./si":560,"./si.js":560,"./sk":561,"./sk.js":561,"./sl":562,"./sl.js":562,"./sq":563,"./sq.js":563,"./sr":564,"./sr-cyrl":565,"./sr-cyrl.js":565,"./sr.js":564,"./ss":566,"./ss.js":566,"./sv":567,"./sv.js":567,"./sw":568,"./sw.js":568,"./ta":569,"./ta.js":569,"./te":570,"./te.js":570,"./tet":571,"./tet.js":571,"./tg":572,"./tg.js":572,"./th":573,"./th.js":573,"./tl-ph":574,"./tl-ph.js":574,"./tlh":575,"./tlh.js":575,"./tr":576,"./tr.js":576,"./tzl":577,"./tzl.js":577,"./tzm":578,"./tzm-latn":579,"./tzm-latn.js":579,"./tzm.js":578,"./ug-cn":580,"./ug-cn.js":580,"./uk":581,"./uk.js":581,"./ur":582,"./ur.js":582,"./uz":583,"./uz-latn":584,"./uz-latn.js":584,"./uz.js":583,"./vi":585,"./vi.js":585,"./x-pseudo":586,"./x-pseudo.js":586,"./yo":587,"./yo.js":587,"./zh-cn":588,"./zh-cn.js":588,"./zh-hk":589,"./zh-hk.js":589,"./zh-tw":590,"./zh-tw.js":590};function n(e){var t=o(e);return r(t)}function o(e){var t=s[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id=731},752:function(e,t,r){var s,n;s=[r.dj.c(e.i),t,r(345),r(338),r(336),r(342),r(340),r(337),r(399),r(1069),r(732)],void 0===(n=function(e,t,s,n,o,i,a,l,p,u,d){return function(e){function t(t,r){var s=e.call(this)||this;return s.geometryType="mesh",s.operationalLayerType="IntegratedMeshLayer",s.type="integrated-mesh",s.profile="mesh-pyramids",s.elevationInfo=null,s}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?s({url:e},t):e},t.prototype.load=function(){var e=this,t=this.loadFromPortal({supportedTypes:["Scene Service"]}).always(function(){return e._fetchService()}).then(function(){return e._verifyRootNodeAndUpdateExtent()});return this.addResolvingPromise(t),this.when()},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return a.reject(new i("integrated-mesh-layer:view-not-supported","IntegratedMeshLayer is only supported in 3D"));case"3d":return a.create(function(e){return Promise.all([r.e(1),r.e(3),r.e(2),r.e(4),r.e(57)]).then(function(){var t=[r(1296)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._validateLayer=function(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new i("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new i("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new i("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})},o([l.shared("esri.layers.IntegratedMeshLayer")],t.prototype,"declaredClass",void 0),o([l.property({type:String,readOnly:!0})],t.prototype,"geometryType",void 0),o([l.property()],t.prototype,"operationalLayerType",void 0),o([l.property({json:{read:!1},readOnly:!0})],t.prototype,"type",void 0),o([l.property({type:d,json:{origins:{service:{read:{source:"elevationInfo"}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}})],t.prototype,"elevationInfo",void 0),o([l.subclass()],t)}(l.declared(p,u))}.apply(null,s))||(e.exports=n)}}]);